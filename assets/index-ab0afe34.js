var Ib=(n,e)=>()=>(e||n((e={exports:{}}).exports,e),e.exports);var Zj=Ib((oh,Rb)=>{(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))s(i);new MutationObserver(i=>{for(const r of i)if(r.type==="childList")for(const a of r.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&s(a)}).observe(document,{childList:!0,subtree:!0});function t(i){const r={};return i.integrity&&(r.integrity=i.integrity),i.referrerPolicy&&(r.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?r.credentials="include":i.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function s(i){if(i.ep)return;i.ep=!0;const r=t(i);fetch(i.href,r)}})();function Gl(n,e){const t=Object.create(null),s=n.split(",");for(let i=0;i<s.length;i++)t[s[i]]=!0;return e?i=>!!t[i.toLowerCase()]:i=>!!t[i]}const rt={},xr=[],Ys=()=>{},Cb=()=>!1,Db=/^on[^a-z]/,Za=n=>Db.test(n),lh=n=>n.startsWith("onUpdate:"),gt=Object.assign,ch=(n,e)=>{const t=n.indexOf(e);t>-1&&n.splice(t,1)},kb=Object.prototype.hasOwnProperty,Xe=(n,e)=>kb.call(n,e),_e=Array.isArray,Sr=n=>Wr(n)==="[object Map]",Qi=n=>Wr(n)==="[object Set]",qf=n=>Wr(n)==="[object Date]",Pb=n=>Wr(n)==="[object RegExp]",Ue=n=>typeof n=="function",yt=n=>typeof n=="string",Ca=n=>typeof n=="symbol",lt=n=>n!==null&&typeof n=="object",uh=n=>(lt(n)||Ue(n))&&Ue(n.then)&&Ue(n.catch),oy=Object.prototype.toString,Wr=n=>oy.call(n),Ob=n=>Wr(n).slice(8,-1),ly=n=>Wr(n)==="[object Object]",dh=n=>yt(n)&&n!=="NaN"&&n[0]!=="-"&&""+parseInt(n,10)===n,ma=Gl(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),Vl=n=>{const e=Object.create(null);return t=>e[t]||(e[t]=n(t))},Mb=/-(\w)/g,hs=Vl(n=>n.replace(Mb,(e,t)=>t?t.toUpperCase():"")),Fb=/\B([A-Z])/g,Ms=Vl(n=>n.replace(Fb,"-$1").toLowerCase()),eo=Vl(n=>n.charAt(0).toUpperCase()+n.slice(1)),ga=Vl(n=>n?`on${eo(n)}`:""),pi=(n,e)=>!Object.is(n,e),_r=(n,e)=>{for(let t=0;t<n.length;t++)n[t](e)},al=(n,e,t)=>{Object.defineProperty(n,e,{configurable:!0,enumerable:!1,value:t})},ol=n=>{const e=parseFloat(n);return isNaN(e)?n:e},ll=n=>{const e=yt(n)?Number(n):NaN;return isNaN(e)?n:e};let Xf;const Ku=()=>Xf||(Xf=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{}),Nb="Infinity,undefined,NaN,isFinite,isNaN,parseFloat,parseInt,decodeURI,decodeURIComponent,encodeURI,encodeURIComponent,Math,Number,Date,Array,Object,Boolean,String,RegExp,Map,Set,JSON,Intl,BigInt,console",Bb=Gl(Nb);function de(n){if(_e(n)){const e={};for(let t=0;t<n.length;t++){const s=n[t],i=yt(s)?Gb(s):de(s);if(i)for(const r in i)e[r]=i[r]}return e}else if(yt(n)||lt(n))return n}const Ub=/;(?![^(]*\))/g,$b=/:([^]+)/,jb=/\/\*[^]*?\*\//g;function Gb(n){const e={};return n.replace(jb,"").split(Ub).forEach(t=>{if(t){const s=t.split($b);s.length>1&&(e[s[0].trim()]=s[1].trim())}}),e}function ft(n){let e="";if(yt(n))e=n;else if(_e(n))for(let t=0;t<n.length;t++){const s=ft(n[t]);s&&(e+=s+" ")}else if(lt(n))for(const t in n)n[t]&&(e+=t+" ");return e.trim()}function cy(n){if(!n)return null;let{class:e,style:t}=n;return e&&!yt(e)&&(n.class=ft(e)),t&&(n.style=de(t)),n}const Vb="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",Hb=Gl(Vb);function uy(n){return!!n||n===""}function Kb(n,e){if(n.length!==e.length)return!1;let t=!0;for(let s=0;t&&s<n.length;s++)t=mi(n[s],e[s]);return t}function mi(n,e){if(n===e)return!0;let t=qf(n),s=qf(e);if(t||s)return t&&s?n.getTime()===e.getTime():!1;if(t=Ca(n),s=Ca(e),t||s)return n===e;if(t=_e(n),s=_e(e),t||s)return t&&s?Kb(n,e):!1;if(t=lt(n),s=lt(e),t||s){if(!t||!s)return!1;const i=Object.keys(n).length,r=Object.keys(e).length;if(i!==r)return!1;for(const a in n){const o=n.hasOwnProperty(a),l=e.hasOwnProperty(a);if(o&&!l||!o&&l||!mi(n[a],e[a]))return!1}}return String(n)===String(e)}function Hl(n,e){return n.findIndex(t=>mi(t,e))}const he=n=>yt(n)?n:n==null?"":_e(n)||lt(n)&&(n.toString===oy||!Ue(n.toString))?JSON.stringify(n,dy,2):String(n),dy=(n,e)=>e&&e.__v_isRef?dy(n,e.value):Sr(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((t,[s,i])=>(t[`${s} =>`]=i,t),{})}:Qi(e)?{[`Set(${e.size})`]:[...e.values()]}:lt(e)&&!_e(e)&&!ly(e)?String(e):e;let Es;class hh{constructor(e=!1){this.detached=e,this._active=!0,this.effects=[],this.cleanups=[],this.parent=Es,!e&&Es&&(this.index=(Es.scopes||(Es.scopes=[])).push(this)-1)}get active(){return this._active}run(e){if(this._active){const t=Es;try{return Es=this,e()}finally{Es=t}}}on(){Es=this}off(){Es=this.parent}stop(e){if(this._active){let t,s;for(t=0,s=this.effects.length;t<s;t++)this.effects[t].stop();for(t=0,s=this.cleanups.length;t<s;t++)this.cleanups[t]();if(this.scopes)for(t=0,s=this.scopes.length;t<s;t++)this.scopes[t].stop(!0);if(!this.detached&&this.parent&&!e){const i=this.parent.scopes.pop();i&&i!==this&&(this.parent.scopes[this.index]=i,i.index=this.index)}this.parent=void 0,this._active=!1}}}function fh(n){return new hh(n)}function hy(n,e=Es){e&&e.active&&e.effects.push(n)}function fy(){return Es}function Wb(n){Es&&Es.cleanups.push(n)}const ph=n=>{const e=new Set(n);return e.w=0,e.n=0,e},py=n=>(n.w&gi)>0,my=n=>(n.n&gi)>0,zb=({deps:n})=>{if(n.length)for(let e=0;e<n.length;e++)n[e].w|=gi},Yb=n=>{const{deps:e}=n;if(e.length){let t=0;for(let s=0;s<e.length;s++){const i=e[s];py(i)&&!my(i)?i.delete(n):e[t++]=i,i.w&=~gi,i.n&=~gi}e.length=t}},cl=new WeakMap;let ha=0,gi=1;const Wu=30;let Hs;const $i=Symbol(""),zu=Symbol("");class Dr{constructor(e,t=null,s){this.fn=e,this.scheduler=t,this.active=!0,this.deps=[],this.parent=void 0,hy(this,s)}run(){if(!this.active)return this.fn();let e=Hs,t=di;for(;e;){if(e===this)return;e=e.parent}try{return this.parent=Hs,Hs=this,di=!0,gi=1<<++ha,ha<=Wu?zb(this):Qf(this),this.fn()}finally{ha<=Wu&&Yb(this),gi=1<<--ha,Hs=this.parent,di=t,this.parent=void 0,this.deferStop&&this.stop()}}stop(){Hs===this?this.deferStop=!0:this.active&&(Qf(this),this.onStop&&this.onStop(),this.active=!1)}}function Qf(n){const{deps:e}=n;if(e.length){for(let t=0;t<e.length;t++)e[t].delete(n);e.length=0}}function qb(n,e){n.effect instanceof Dr&&(n=n.effect.fn);const t=new Dr(n);e&&(gt(t,e),e.scope&&hy(t,e.scope)),(!e||!e.lazy)&&t.run();const s=t.run.bind(t);return s.effect=t,s}function Xb(n){n.effect.stop()}let di=!0;const gy=[];function zr(){gy.push(di),di=!1}function Yr(){const n=gy.pop();di=n===void 0?!0:n}function ps(n,e,t){if(di&&Hs){let s=cl.get(n);s||cl.set(n,s=new Map);let i=s.get(t);i||s.set(t,i=ph()),yy(i)}}function yy(n,e){let t=!1;ha<=Wu?my(n)||(n.n|=gi,t=!py(n)):t=!n.has(Hs),t&&(n.add(Hs),Hs.deps.push(n))}function Un(n,e,t,s,i,r){const a=cl.get(n);if(!a)return;let o=[];if(e==="clear")o=[...a.values()];else if(t==="length"&&_e(n)){const l=Number(s);a.forEach((c,u)=>{(u==="length"||u>=l)&&o.push(c)})}else switch(t!==void 0&&o.push(a.get(t)),e){case"add":_e(n)?dh(t)&&o.push(a.get("length")):(o.push(a.get($i)),Sr(n)&&o.push(a.get(zu)));break;case"delete":_e(n)||(o.push(a.get($i)),Sr(n)&&o.push(a.get(zu)));break;case"set":Sr(n)&&o.push(a.get($i));break}if(o.length===1)o[0]&&Yu(o[0]);else{const l=[];for(const c of o)c&&l.push(...c);Yu(ph(l))}}function Yu(n,e){const t=_e(n)?n:[...n];for(const s of t)s.computed&&Jf(s);for(const s of t)s.computed||Jf(s)}function Jf(n,e){(n!==Hs||n.allowRecurse)&&(n.scheduler?n.scheduler():n.run())}function Qb(n,e){var t;return(t=cl.get(n))==null?void 0:t.get(e)}const Jb=Gl("__proto__,__v_isRef,__isVue"),vy=new Set(Object.getOwnPropertyNames(Symbol).filter(n=>n!=="arguments"&&n!=="caller").map(n=>Symbol[n]).filter(Ca)),Zf=Zb();function Zb(){const n={};return["includes","indexOf","lastIndexOf"].forEach(e=>{n[e]=function(...t){const s=ze(this);for(let r=0,a=this.length;r<a;r++)ps(s,"get",r+"");const i=s[e](...t);return i===-1||i===!1?s[e](...t.map(ze)):i}}),["push","pop","shift","unshift","splice"].forEach(e=>{n[e]=function(...t){zr();const s=ze(this)[e].apply(this,t);return Yr(),s}}),n}function ex(n){const e=ze(this);return ps(e,"has",n),e.hasOwnProperty(n)}class Ey{constructor(e=!1,t=!1){this._isReadonly=e,this._shallow=t}get(e,t,s){const i=this._isReadonly,r=this._shallow;if(t==="__v_isReactive")return!i;if(t==="__v_isReadonly")return i;if(t==="__v_isShallow")return r;if(t==="__v_raw"&&s===(i?r?Ay:_y:r?Sy:xy).get(e))return e;const a=_e(e);if(!i){if(a&&Xe(Zf,t))return Reflect.get(Zf,t,s);if(t==="hasOwnProperty")return ex}const o=Reflect.get(e,t,s);return(Ca(t)?vy.has(t):Jb(t))||(i||ps(e,"get",t),r)?o:wt(o)?a&&dh(t)?o:o.value:lt(o)?i?yh(o):qt(o):o}}class Ty extends Ey{constructor(e=!1){super(!1,e)}set(e,t,s,i){let r=e[t];if(Wi(r)&&wt(r)&&!wt(s))return!1;if(!this._shallow&&(!Da(s)&&!Wi(s)&&(r=ze(r),s=ze(s)),!_e(e)&&wt(r)&&!wt(s)))return r.value=s,!0;const a=_e(e)&&dh(t)?Number(t)<e.length:Xe(e,t),o=Reflect.set(e,t,s,i);return e===ze(i)&&(a?pi(s,r)&&Un(e,"set",t,s):Un(e,"add",t,s)),o}deleteProperty(e,t){const s=Xe(e,t);e[t];const i=Reflect.deleteProperty(e,t);return i&&s&&Un(e,"delete",t,void 0),i}has(e,t){const s=Reflect.has(e,t);return(!Ca(t)||!vy.has(t))&&ps(e,"has",t),s}ownKeys(e){return ps(e,"iterate",_e(e)?"length":$i),Reflect.ownKeys(e)}}class by extends Ey{constructor(e=!1){super(!0,e)}set(e,t){return!0}deleteProperty(e,t){return!0}}const tx=new Ty,sx=new by,nx=new Ty(!0),ix=new by(!0),mh=n=>n,Kl=n=>Reflect.getPrototypeOf(n);function lo(n,e,t=!1,s=!1){n=n.__v_raw;const i=ze(n),r=ze(e);t||(pi(e,r)&&ps(i,"get",e),ps(i,"get",r));const{has:a}=Kl(i),o=s?mh:t?Eh:ka;if(a.call(i,e))return o(n.get(e));if(a.call(i,r))return o(n.get(r));n!==i&&n.get(e)}function co(n,e=!1){const t=this.__v_raw,s=ze(t),i=ze(n);return e||(pi(n,i)&&ps(s,"has",n),ps(s,"has",i)),n===i?t.has(n):t.has(n)||t.has(i)}function uo(n,e=!1){return n=n.__v_raw,!e&&ps(ze(n),"iterate",$i),Reflect.get(n,"size",n)}function ep(n){n=ze(n);const e=ze(this);return Kl(e).has.call(e,n)||(e.add(n),Un(e,"add",n,n)),this}function tp(n,e){e=ze(e);const t=ze(this),{has:s,get:i}=Kl(t);let r=s.call(t,n);r||(n=ze(n),r=s.call(t,n));const a=i.call(t,n);return t.set(n,e),r?pi(e,a)&&Un(t,"set",n,e):Un(t,"add",n,e),this}function sp(n){const e=ze(this),{has:t,get:s}=Kl(e);let i=t.call(e,n);i||(n=ze(n),i=t.call(e,n)),s&&s.call(e,n);const r=e.delete(n);return i&&Un(e,"delete",n,void 0),r}function np(){const n=ze(this),e=n.size!==0,t=n.clear();return e&&Un(n,"clear",void 0,void 0),t}function ho(n,e){return function(s,i){const r=this,a=r.__v_raw,o=ze(a),l=e?mh:n?Eh:ka;return!n&&ps(o,"iterate",$i),a.forEach((c,u)=>s.call(i,l(c),l(u),r))}}function fo(n,e,t){return function(...s){const i=this.__v_raw,r=ze(i),a=Sr(r),o=n==="entries"||n===Symbol.iterator&&a,l=n==="keys"&&a,c=i[n](...s),u=t?mh:e?Eh:ka;return!e&&ps(r,"iterate",l?zu:$i),{next(){const{value:d,done:h}=c.next();return h?{value:d,done:h}:{value:o?[u(d[0]),u(d[1])]:u(d),done:h}},[Symbol.iterator](){return this}}}}function Wn(n){return function(...e){return n==="delete"?!1:this}}function rx(){const n={get(r){return lo(this,r)},get size(){return uo(this)},has:co,add:ep,set:tp,delete:sp,clear:np,forEach:ho(!1,!1)},e={get(r){return lo(this,r,!1,!0)},get size(){return uo(this)},has:co,add:ep,set:tp,delete:sp,clear:np,forEach:ho(!1,!0)},t={get(r){return lo(this,r,!0)},get size(){return uo(this,!0)},has(r){return co.call(this,r,!0)},add:Wn("add"),set:Wn("set"),delete:Wn("delete"),clear:Wn("clear"),forEach:ho(!0,!1)},s={get(r){return lo(this,r,!0,!0)},get size(){return uo(this,!0)},has(r){return co.call(this,r,!0)},add:Wn("add"),set:Wn("set"),delete:Wn("delete"),clear:Wn("clear"),forEach:ho(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(r=>{n[r]=fo(r,!1,!1),t[r]=fo(r,!0,!1),e[r]=fo(r,!1,!0),s[r]=fo(r,!0,!0)}),[n,t,e,s]}const[ax,ox,lx,cx]=rx();function Wl(n,e){const t=e?n?cx:lx:n?ox:ax;return(s,i,r)=>i==="__v_isReactive"?!n:i==="__v_isReadonly"?n:i==="__v_raw"?s:Reflect.get(Xe(t,i)&&i in s?t:s,i,r)}const ux={get:Wl(!1,!1)},dx={get:Wl(!1,!0)},hx={get:Wl(!0,!1)},fx={get:Wl(!0,!0)},xy=new WeakMap,Sy=new WeakMap,_y=new WeakMap,Ay=new WeakMap;function px(n){switch(n){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function mx(n){return n.__v_skip||!Object.isExtensible(n)?0:px(Ob(n))}function qt(n){return Wi(n)?n:zl(n,!1,tx,ux,xy)}function gh(n){return zl(n,!1,nx,dx,Sy)}function yh(n){return zl(n,!0,sx,hx,_y)}function gx(n){return zl(n,!0,ix,fx,Ay)}function zl(n,e,t,s,i){if(!lt(n)||n.__v_raw&&!(e&&n.__v_isReactive))return n;const r=i.get(n);if(r)return r;const a=mx(n);if(a===0)return n;const o=new Proxy(n,a===2?s:t);return i.set(n,o),o}function ji(n){return Wi(n)?ji(n.__v_raw):!!(n&&n.__v_isReactive)}function Wi(n){return!!(n&&n.__v_isReadonly)}function Da(n){return!!(n&&n.__v_isShallow)}function vh(n){return ji(n)||Wi(n)}function ze(n){const e=n&&n.__v_raw;return e?ze(e):n}function hi(n){return al(n,"__v_skip",!0),n}const ka=n=>lt(n)?qt(n):n,Eh=n=>lt(n)?yh(n):n;function Th(n){di&&Hs&&(n=ze(n),yy(n.dep||(n.dep=ph())))}function Yl(n,e){n=ze(n);const t=n.dep;t&&Yu(t)}function wt(n){return!!(n&&n.__v_isRef===!0)}function ce(n){return Ly(n,!1)}function bh(n){return Ly(n,!0)}function Ly(n,e){return wt(n)?n:new yx(n,e)}class yx{constructor(e,t){this.__v_isShallow=t,this.dep=void 0,this.__v_isRef=!0,this._rawValue=t?e:ze(e),this._value=t?e:ka(e)}get value(){return Th(this),this._value}set value(e){const t=this.__v_isShallow||Da(e)||Wi(e);e=t?e:ze(e),pi(e,this._rawValue)&&(this._rawValue=e,this._value=t?e:ka(e),Yl(this))}}function vx(n){Yl(n)}function De(n){return wt(n)?n.value:n}function Ex(n){return Ue(n)?n():De(n)}const Tx={get:(n,e,t)=>De(Reflect.get(n,e,t)),set:(n,e,t,s)=>{const i=n[e];return wt(i)&&!wt(t)?(i.value=t,!0):Reflect.set(n,e,t,s)}};function xh(n){return ji(n)?n:new Proxy(n,Tx)}class bx{constructor(e){this.dep=void 0,this.__v_isRef=!0;const{get:t,set:s}=e(()=>Th(this),()=>Yl(this));this._get=t,this._set=s}get value(){return this._get()}set value(e){this._set(e)}}function xx(n){return new bx(n)}function Sx(n){const e=_e(n)?new Array(n.length):{};for(const t in n)e[t]=wy(n,t);return e}class _x{constructor(e,t,s){this._object=e,this._key=t,this._defaultValue=s,this.__v_isRef=!0}get value(){const e=this._object[this._key];return e===void 0?this._defaultValue:e}set value(e){this._object[this._key]=e}get dep(){return Qb(ze(this._object),this._key)}}class Ax{constructor(e){this._getter=e,this.__v_isRef=!0,this.__v_isReadonly=!0}get value(){return this._getter()}}function Sh(n,e,t){return wt(n)?n:Ue(n)?new Ax(n):lt(n)&&arguments.length>1?wy(n,e,t):ce(n)}function wy(n,e,t){const s=n[e];return wt(s)?s:new _x(n,e,t)}class Lx{constructor(e,t,s,i){this._setter=t,this.dep=void 0,this.__v_isRef=!0,this.__v_isReadonly=!1,this._dirty=!0,this.effect=new Dr(e,()=>{this._dirty||(this._dirty=!0,Yl(this))}),this.effect.computed=this,this.effect.active=this._cacheable=!i,this.__v_isReadonly=s}get value(){const e=ze(this);return Th(e),(e._dirty||!e._cacheable)&&(e._dirty=!1,e._value=e.effect.run()),e._value}set value(e){this._setter(e)}}function wx(n,e,t=!1){let s,i;const r=Ue(n);return r?(s=n,i=Ys):(s=n.get,i=n.set),new Lx(s,i,r||!i,t)}function Rx(n,...e){}function Ix(n,e){}function $n(n,e,t,s){let i;try{i=s?n(...s):n()}catch(r){Ji(r,e,t)}return i}function _s(n,e,t,s){if(Ue(n)){const r=$n(n,e,t,s);return r&&uh(r)&&r.catch(a=>{Ji(a,e,t)}),r}const i=[];for(let r=0;r<n.length;r++)i.push(_s(n[r],e,t,s));return i}function Ji(n,e,t,s=!0){const i=e?e.vnode:null;if(e){let r=e.parent;const a=e.proxy,o=t;for(;r;){const c=r.ec;if(c){for(let u=0;u<c.length;u++)if(c[u](n,a,o)===!1)return}r=r.parent}const l=e.appContext.config.errorHandler;if(l){$n(l,null,10,[n,a,o]);return}}Cx(n,t,i,s)}function Cx(n,e,t,s=!0){console.error(n)}let Pa=!1,qu=!1;const Zt=[];let dn=0;const Ar=[];let Cn=null,ki=0;const Ry=Promise.resolve();let _h=null;function Gn(n){const e=_h||Ry;return n?e.then(this?n.bind(this):n):e}function Dx(n){let e=dn+1,t=Zt.length;for(;e<t;){const s=e+t>>>1;Oa(Zt[s])<n?e=s+1:t=s}return e}function ql(n){(!Zt.length||!Zt.includes(n,Pa&&n.allowRecurse?dn+1:dn))&&(n.id==null?Zt.push(n):Zt.splice(Dx(n.id),0,n),Iy())}function Iy(){!Pa&&!qu&&(qu=!0,_h=Ry.then(Cy))}function kx(n){const e=Zt.indexOf(n);e>dn&&Zt.splice(e,1)}function Ah(n){_e(n)?Ar.push(...n):(!Cn||!Cn.includes(n,n.allowRecurse?ki+1:ki))&&Ar.push(n),Iy()}function ip(n,e=Pa?dn+1:0){for(;e<Zt.length;e++){const t=Zt[e];t&&t.pre&&(Zt.splice(e,1),e--,t())}}function ul(n){if(Ar.length){const e=[...new Set(Ar)];if(Ar.length=0,Cn){Cn.push(...e);return}for(Cn=e,Cn.sort((t,s)=>Oa(t)-Oa(s)),ki=0;ki<Cn.length;ki++)Cn[ki]();Cn=null,ki=0}}const Oa=n=>n.id==null?1/0:n.id,Px=(n,e)=>{const t=Oa(n)-Oa(e);if(t===0){if(n.pre&&!e.pre)return-1;if(e.pre&&!n.pre)return 1}return t};function Cy(n){qu=!1,Pa=!0,Zt.sort(Px);const e=Ys;try{for(dn=0;dn<Zt.length;dn++){const t=Zt[dn];t&&t.active!==!1&&$n(t,null,14)}}finally{dn=0,Zt.length=0,ul(),Pa=!1,_h=null,(Zt.length||Ar.length)&&Cy()}}let pr,po=[];function Dy(n,e){var t,s;pr=n,pr?(pr.enabled=!0,po.forEach(({event:i,args:r})=>pr.emit(i,...r)),po=[]):typeof window<"u"&&window.HTMLElement&&!((s=(t=window.navigator)==null?void 0:t.userAgent)!=null&&s.includes("jsdom"))?((e.__VUE_DEVTOOLS_HOOK_REPLAY__=e.__VUE_DEVTOOLS_HOOK_REPLAY__||[]).push(r=>{Dy(r,e)}),setTimeout(()=>{pr||(e.__VUE_DEVTOOLS_HOOK_REPLAY__=null,po=[])},3e3)):po=[]}function Ox(n,e,...t){if(n.isUnmounted)return;const s=n.vnode.props||rt;let i=t;const r=e.startsWith("update:"),a=r&&e.slice(7);if(a&&a in s){const u=`${a==="modelValue"?"model":a}Modifiers`,{number:d,trim:h}=s[u]||rt;h&&(i=t.map(f=>yt(f)?f.trim():f)),d&&(i=t.map(ol))}let o,l=s[o=ga(e)]||s[o=ga(hs(e))];!l&&r&&(l=s[o=ga(Ms(e))]),l&&_s(l,n,6,i);const c=s[o+"Once"];if(c){if(!n.emitted)n.emitted={};else if(n.emitted[o])return;n.emitted[o]=!0,_s(c,n,6,i)}}function ky(n,e,t=!1){const s=e.emitsCache,i=s.get(n);if(i!==void 0)return i;const r=n.emits;let a={},o=!1;if(!Ue(n)){const l=c=>{const u=ky(c,e,!0);u&&(o=!0,gt(a,u))};!t&&e.mixins.length&&e.mixins.forEach(l),n.extends&&l(n.extends),n.mixins&&n.mixins.forEach(l)}return!r&&!o?(lt(n)&&s.set(n,null),null):(_e(r)?r.forEach(l=>a[l]=null):gt(a,r),lt(n)&&s.set(n,a),a)}function Xl(n,e){return!n||!Za(e)?!1:(e=e.slice(2).replace(/Once$/,""),Xe(n,e[0].toLowerCase()+e.slice(1))||Xe(n,Ms(e))||Xe(n,e))}let $t=null,Ql=null;function Ma(n){const e=$t;return $t=n,Ql=n&&n.type.__scopeId||null,e}function Ls(n){Ql=n}function ws(){Ql=null}const Mx=n=>Pt;function Pt(n,e=$t,t){if(!e||n._n)return n;const s=(...i)=>{s._d&&sd(-1);const r=Ma(e);let a;try{a=n(...i)}finally{Ma(r),s._d&&sd(1)}return a};return s._n=!0,s._c=!0,s._d=!0,s}function Ko(n){const{type:e,vnode:t,proxy:s,withProxy:i,props:r,propsOptions:[a],slots:o,attrs:l,emit:c,render:u,renderCache:d,data:h,setupState:f,ctx:p,inheritAttrs:m}=n;let y,g;const v=Ma(n);try{if(t.shapeFlag&4){const T=i||s;y=Ss(u.call(T,T,d,r,f,h,p)),g=l}else{const T=e;y=Ss(T.length>1?T(r,{attrs:l,slots:o,emit:c}):T(r,null)),g=e.props?l:Nx(l)}}catch(T){Ea.length=0,Ji(T,n,1),y=fe(es)}let E=y;if(g&&m!==!1){const T=Object.keys(g),{shapeFlag:b}=E;T.length&&b&7&&(a&&T.some(lh)&&(g=Bx(g,a)),E=vn(E,g))}return t.dirs&&(E=vn(E),E.dirs=E.dirs?E.dirs.concat(t.dirs):t.dirs),t.transition&&(E.transition=t.transition),y=E,Ma(v),y}function Fx(n){let e;for(let t=0;t<n.length;t++){const s=n[t];if(vi(s)){if(s.type!==es||s.children==="v-if"){if(e)return;e=s}}else return}return e}const Nx=n=>{let e;for(const t in n)(t==="class"||t==="style"||Za(t))&&((e||(e={}))[t]=n[t]);return e},Bx=(n,e)=>{const t={};for(const s in n)(!lh(s)||!(s.slice(9)in e))&&(t[s]=n[s]);return t};function Ux(n,e,t){const{props:s,children:i,component:r}=n,{props:a,children:o,patchFlag:l}=e,c=r.emitsOptions;if(e.dirs||e.transition)return!0;if(t&&l>=0){if(l&1024)return!0;if(l&16)return s?rp(s,a,c):!!a;if(l&8){const u=e.dynamicProps;for(let d=0;d<u.length;d++){const h=u[d];if(a[h]!==s[h]&&!Xl(c,h))return!0}}}else return(i||o)&&(!o||!o.$stable)?!0:s===a?!1:s?a?rp(s,a,c):!0:!!a;return!1}function rp(n,e,t){const s=Object.keys(e);if(s.length!==Object.keys(n).length)return!0;for(let i=0;i<s.length;i++){const r=s[i];if(e[r]!==n[r]&&!Xl(t,r))return!0}return!1}function Lh({vnode:n,parent:e},t){for(;e&&e.subTree===n;)(n=e.vnode).el=t,e=e.parent}const Py=n=>n.__isSuspense,$x={name:"Suspense",__isSuspense:!0,process(n,e,t,s,i,r,a,o,l,c){n==null?Gx(e,t,s,i,r,a,o,l,c):Vx(n,e,t,s,i,a,o,l,c)},hydrate:Hx,create:wh,normalize:Kx},jx=$x;function Fa(n,e){const t=n.props&&n.props[e];Ue(t)&&t()}function Gx(n,e,t,s,i,r,a,o,l){const{p:c,o:{createElement:u}}=l,d=u("div"),h=n.suspense=wh(n,i,s,e,d,t,r,a,o,l);c(null,h.pendingBranch=n.ssContent,d,null,s,h,r,a),h.deps>0?(Fa(n,"onPending"),Fa(n,"onFallback"),c(null,n.ssFallback,e,t,s,null,r,a),Lr(h,n.ssFallback)):h.resolve(!1,!0)}function Vx(n,e,t,s,i,r,a,o,{p:l,um:c,o:{createElement:u}}){const d=e.suspense=n.suspense;d.vnode=e,e.el=n.el;const h=e.ssContent,f=e.ssFallback,{activeBranch:p,pendingBranch:m,isInFallback:y,isHydrating:g}=d;if(m)d.pendingBranch=h,Ks(h,m)?(l(m,h,d.hiddenContainer,null,i,d,r,a,o),d.deps<=0?d.resolve():y&&(l(p,f,t,s,i,null,r,a,o),Lr(d,f))):(d.pendingId++,g?(d.isHydrating=!1,d.activeBranch=m):c(m,i,d),d.deps=0,d.effects.length=0,d.hiddenContainer=u("div"),y?(l(null,h,d.hiddenContainer,null,i,d,r,a,o),d.deps<=0?d.resolve():(l(p,f,t,s,i,null,r,a,o),Lr(d,f))):p&&Ks(h,p)?(l(p,h,t,s,i,d,r,a,o),d.resolve(!0)):(l(null,h,d.hiddenContainer,null,i,d,r,a,o),d.deps<=0&&d.resolve()));else if(p&&Ks(h,p))l(p,h,t,s,i,d,r,a,o),Lr(d,h);else if(Fa(e,"onPending"),d.pendingBranch=h,d.pendingId++,l(null,h,d.hiddenContainer,null,i,d,r,a,o),d.deps<=0)d.resolve();else{const{timeout:v,pendingId:E}=d;v>0?setTimeout(()=>{d.pendingId===E&&d.fallback(f)},v):v===0&&d.fallback(f)}}function wh(n,e,t,s,i,r,a,o,l,c,u=!1){const{p:d,m:h,um:f,n:p,o:{parentNode:m,remove:y}}=c;let g;const v=Wx(n);v&&e!=null&&e.pendingBranch&&(g=e.pendingId,e.deps++);const E=n.props?ll(n.props.timeout):void 0,T={vnode:n,parent:e,parentComponent:t,isSVG:a,container:s,hiddenContainer:i,anchor:r,deps:0,pendingId:0,timeout:typeof E=="number"?E:-1,activeBranch:null,pendingBranch:null,isInFallback:!0,isHydrating:u,isUnmounted:!1,effects:[],resolve(b=!1,L=!1){const{vnode:x,activeBranch:w,pendingBranch:k,pendingId:R,effects:P,parentComponent:D,container:O}=T;if(T.isHydrating)T.isHydrating=!1;else if(!b){const K=w&&k.transition&&k.transition.mode==="out-in";K&&(w.transition.afterLeave=()=>{R===T.pendingId&&h(k,O,ee,0)});let{anchor:ee}=T;w&&(ee=p(w),f(w,D,T,!0)),K||h(k,O,ee,0)}Lr(T,k),T.pendingBranch=null,T.isInFallback=!1;let N=T.parent,$=!1;for(;N;){if(N.pendingBranch){N.effects.push(...P),$=!0;break}N=N.parent}$||Ah(P),T.effects=[],v&&e&&e.pendingBranch&&g===e.pendingId&&(e.deps--,e.deps===0&&!L&&e.resolve()),Fa(x,"onResolve")},fallback(b){if(!T.pendingBranch)return;const{vnode:L,activeBranch:x,parentComponent:w,container:k,isSVG:R}=T;Fa(L,"onFallback");const P=p(x),D=()=>{T.isInFallback&&(d(null,b,k,P,w,null,R,o,l),Lr(T,b))},O=b.transition&&b.transition.mode==="out-in";O&&(x.transition.afterLeave=D),T.isInFallback=!0,f(x,w,null,!0),O||D()},move(b,L,x){T.activeBranch&&h(T.activeBranch,b,L,x),T.container=b},next(){return T.activeBranch&&p(T.activeBranch)},registerDep(b,L){const x=!!T.pendingBranch;x&&T.deps++;const w=b.vnode.el;b.asyncDep.catch(k=>{Ji(k,b,0)}).then(k=>{if(b.isUnmounted||T.isUnmounted||T.pendingId!==b.suspenseId)return;b.asyncResolved=!0;const{vnode:R}=b;nd(b,k,!1),w&&(R.el=w);const P=!w&&b.subTree.el;L(b,R,m(w||b.subTree.el),w?null:p(b.subTree),T,a,l),P&&y(P),Lh(b,R.el),x&&--T.deps===0&&T.resolve()})},unmount(b,L){T.isUnmounted=!0,T.activeBranch&&f(T.activeBranch,t,b,L),T.pendingBranch&&f(T.pendingBranch,t,b,L)}};return T}function Hx(n,e,t,s,i,r,a,o,l){const c=e.suspense=wh(e,s,t,n.parentNode,document.createElement("div"),null,i,r,a,o,!0),u=l(n,c.pendingBranch=e.ssContent,t,c,r,a);return c.deps===0&&c.resolve(!1,!0),u}function Kx(n){const{shapeFlag:e,children:t}=n,s=e&32;n.ssContent=ap(s?t.default:t),n.ssFallback=s?ap(t.fallback):fe(es)}function ap(n){let e;if(Ue(n)){const t=Yi&&n._c;t&&(n._d=!1,ve()),n=n(),t&&(n._d=!0,e=ds,l1())}return _e(n)&&(n=Fx(n)),n=Ss(n),e&&!n.dynamicChildren&&(n.dynamicChildren=e.filter(t=>t!==n)),n}function Oy(n,e){e&&e.pendingBranch?_e(n)?e.effects.push(...n):e.effects.push(n):Ah(n)}function Lr(n,e){n.activeBranch=e;const{vnode:t,parentComponent:s}=n,i=t.el=e.el;s&&s.subTree===t&&(s.vnode.el=i,Lh(s,i))}function Wx(n){var e;return((e=n.props)==null?void 0:e.suspensible)!=null&&n.props.suspensible!==!1}function zx(n,e){return to(n,null,e)}function My(n,e){return to(n,null,{flush:"post"})}function Yx(n,e){return to(n,null,{flush:"sync"})}const mo={};function _t(n,e,t){return to(n,e,t)}function to(n,e,{immediate:t,deep:s,flush:i,onTrack:r,onTrigger:a}=rt){var o;const l=fy()===((o=Lt)==null?void 0:o.scope)?Lt:null;let c,u=!1,d=!1;if(wt(n)?(c=()=>n.value,u=Da(n)):ji(n)?(c=()=>n,s=!0):_e(n)?(d=!0,u=n.some(T=>ji(T)||Da(T)),c=()=>n.map(T=>{if(wt(T))return T.value;if(ji(T))return Mi(T);if(Ue(T))return $n(T,l,2)})):Ue(n)?e?c=()=>$n(n,l,2):c=()=>{if(!(l&&l.isUnmounted))return h&&h(),_s(n,l,3,[f])}:c=Ys,e&&s){const T=c;c=()=>Mi(T())}let h,f=T=>{h=v.onStop=()=>{$n(T,l,4)}},p;if(Pr)if(f=Ys,e?t&&_s(e,l,3,[c(),d?[]:void 0,f]):c(),i==="sync"){const T=v1();p=T.__watcherHandles||(T.__watcherHandles=[])}else return Ys;let m=d?new Array(n.length).fill(mo):mo;const y=()=>{if(v.active)if(e){const T=v.run();(s||u||(d?T.some((b,L)=>pi(b,m[L])):pi(T,m)))&&(h&&h(),_s(e,l,3,[T,m===mo?void 0:d&&m[0]===mo?[]:m,f]),m=T)}else v.run()};y.allowRecurse=!!e;let g;i==="sync"?g=y:i==="post"?g=()=>Kt(y,l&&l.suspense):(y.pre=!0,l&&(y.id=l.uid),g=()=>ql(y));const v=new Dr(c,g);e?t?y():m=v.run():i==="post"?Kt(v.run.bind(v),l&&l.suspense):v.run();const E=()=>{v.stop(),l&&l.scope&&ch(l.scope.effects,v)};return p&&p.push(E),E}function qx(n,e,t){const s=this.proxy,i=yt(n)?n.includes(".")?Fy(s,n):()=>s[n]:n.bind(s,s);let r;Ue(e)?r=e:(r=e.handler,t=e);const a=Lt;Ei(this);const o=to(i,r.bind(s),t);return a?Ei(a):fi(),o}function Fy(n,e){const t=e.split(".");return()=>{let s=n;for(let i=0;i<t.length&&s;i++)s=s[t[i]];return s}}function Mi(n,e){if(!lt(n)||n.__v_skip||(e=e||new Set,e.has(n)))return n;if(e.add(n),wt(n))Mi(n.value,e);else if(_e(n))for(let t=0;t<n.length;t++)Mi(n[t],e);else if(Qi(n)||Sr(n))n.forEach(t=>{Mi(t,e)});else if(ly(n))for(const t in n)Mi(n[t],e);return n}function ct(n,e){const t=$t;if(t===null)return n;const s=sc(t)||t.proxy,i=n.dirs||(n.dirs=[]);for(let r=0;r<e.length;r++){let[a,o,l,c=rt]=e[r];a&&(Ue(a)&&(a={mounted:a,updated:a}),a.deep&&Mi(o),i.push({dir:a,instance:s,value:o,oldValue:void 0,arg:l,modifiers:c}))}return n}function nn(n,e,t,s){const i=n.dirs,r=e&&e.dirs;for(let a=0;a<i.length;a++){const o=i[a];r&&(o.oldValue=r[a].value);let l=o.dir[s];l&&(zr(),_s(l,t,8,[n.el,o,n,e]),Yr())}}const ni=Symbol("_leaveCb"),go=Symbol("_enterCb");function Rh(){const n={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return vt(()=>{n.isMounted=!0}),Vt(()=>{n.isUnmounting=!0}),n}const Rs=[Function,Array],Ih={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:Rs,onEnter:Rs,onAfterEnter:Rs,onEnterCancelled:Rs,onBeforeLeave:Rs,onLeave:Rs,onAfterLeave:Rs,onLeaveCancelled:Rs,onBeforeAppear:Rs,onAppear:Rs,onAfterAppear:Rs,onAppearCancelled:Rs},Xx={name:"BaseTransition",props:Ih,setup(n,{slots:e}){const t=ts(),s=Rh();let i;return()=>{const r=e.default&&Jl(e.default(),!0);if(!r||!r.length)return;let a=r[0];if(r.length>1){for(const m of r)if(m.type!==es){a=m;break}}const o=ze(n),{mode:l}=o;if(s.isLeaving)return Ac(a);const c=op(a);if(!c)return Ac(a);const u=kr(c,o,s,t);zi(c,u);const d=t.subTree,h=d&&op(d);let f=!1;const{getTransitionKey:p}=c.type;if(p){const m=p();i===void 0?i=m:m!==i&&(i=m,f=!0)}if(h&&h.type!==es&&(!Ks(c,h)||f)){const m=kr(h,o,s,t);if(zi(h,m),l==="out-in")return s.isLeaving=!0,m.afterLeave=()=>{s.isLeaving=!1,t.update.active!==!1&&t.update()},Ac(a);l==="in-out"&&c.type!==es&&(m.delayLeave=(y,g,v)=>{const E=By(s,h);E[String(h.key)]=h,y[ni]=()=>{g(),y[ni]=void 0,delete u.delayedLeave},u.delayedLeave=v})}return a}}},Ny=Xx;function By(n,e){const{leavingVNodes:t}=n;let s=t.get(e.type);return s||(s=Object.create(null),t.set(e.type,s)),s}function kr(n,e,t,s){const{appear:i,mode:r,persisted:a=!1,onBeforeEnter:o,onEnter:l,onAfterEnter:c,onEnterCancelled:u,onBeforeLeave:d,onLeave:h,onAfterLeave:f,onLeaveCancelled:p,onBeforeAppear:m,onAppear:y,onAfterAppear:g,onAppearCancelled:v}=e,E=String(n.key),T=By(t,n),b=(w,k)=>{w&&_s(w,s,9,k)},L=(w,k)=>{const R=k[1];b(w,k),_e(w)?w.every(P=>P.length<=1)&&R():w.length<=1&&R()},x={mode:r,persisted:a,beforeEnter(w){let k=o;if(!t.isMounted)if(i)k=m||o;else return;w[ni]&&w[ni](!0);const R=T[E];R&&Ks(n,R)&&R.el[ni]&&R.el[ni](),b(k,[w])},enter(w){let k=l,R=c,P=u;if(!t.isMounted)if(i)k=y||l,R=g||c,P=v||u;else return;let D=!1;const O=w[go]=N=>{D||(D=!0,N?b(P,[w]):b(R,[w]),x.delayedLeave&&x.delayedLeave(),w[go]=void 0)};k?L(k,[w,O]):O()},leave(w,k){const R=String(n.key);if(w[go]&&w[go](!0),t.isUnmounting)return k();b(d,[w]);let P=!1;const D=w[ni]=O=>{P||(P=!0,k(),O?b(p,[w]):b(f,[w]),w[ni]=void 0,T[R]===n&&delete T[R])};T[R]=n,h?L(h,[w,D]):D()},clone(w){return kr(w,e,t,s)}};return x}function Ac(n){if(so(n))return n=vn(n),n.children=null,n}function op(n){return so(n)?n.children?n.children[0]:void 0:n}function zi(n,e){n.shapeFlag&6&&n.component?zi(n.component.subTree,e):n.shapeFlag&128?(n.ssContent.transition=e.clone(n.ssContent),n.ssFallback.transition=e.clone(n.ssFallback)):n.transition=e}function Jl(n,e=!1,t){let s=[],i=0;for(let r=0;r<n.length;r++){let a=n[r];const o=t==null?a.key:String(t)+String(a.key!=null?a.key:r);a.type===We?(a.patchFlag&128&&i++,s=s.concat(Jl(a.children,e,o))):(e||a.type!==es)&&s.push(o!=null?vn(a,{key:o}):a)}if(i>1)for(let r=0;r<s.length;r++)s[r].patchFlag=-2;return s}/*! #__NO_SIDE_EFFECTS__ */function Ze(n,e){return Ue(n)?(()=>gt({name:n.name},e,{setup:n}))():n}const Gi=n=>!!n.type.__asyncLoader;/*! #__NO_SIDE_EFFECTS__ */function Qx(n){Ue(n)&&(n={loader:n});const{loader:e,loadingComponent:t,errorComponent:s,delay:i=200,timeout:r,suspensible:a=!0,onError:o}=n;let l=null,c,u=0;const d=()=>(u++,l=null,h()),h=()=>{let f;return l||(f=l=e().catch(p=>{if(p=p instanceof Error?p:new Error(String(p)),o)return new Promise((m,y)=>{o(p,()=>m(d()),()=>y(p),u+1)});throw p}).then(p=>f!==l&&l?l:(p&&(p.__esModule||p[Symbol.toStringTag]==="Module")&&(p=p.default),c=p,p)))};return Ze({name:"AsyncComponentWrapper",__asyncLoader:h,get __asyncResolved(){return c},setup(){const f=Lt;if(c)return()=>Lc(c,f);const p=v=>{l=null,Ji(v,f,13,!s)};if(a&&f.suspense||Pr)return h().then(v=>()=>Lc(v,f)).catch(v=>(p(v),()=>s?fe(s,{error:v}):null));const m=ce(!1),y=ce(),g=ce(!!i);return i&&setTimeout(()=>{g.value=!1},i),r!=null&&setTimeout(()=>{if(!m.value&&!y.value){const v=new Error(`Async component timed out after ${r}ms.`);p(v),y.value=v}},r),h().then(()=>{m.value=!0,f.parent&&so(f.parent.vnode)&&ql(f.parent.update)}).catch(v=>{p(v),y.value=v}),()=>{if(m.value&&c)return Lc(c,f);if(y.value&&s)return fe(s,{error:y.value});if(t&&!g.value)return fe(t)}}})}function Lc(n,e){const{ref:t,props:s,children:i,ce:r}=e.vnode,a=fe(n,s,i);return a.ref=t,a.ce=r,delete e.vnode.ce,a}const so=n=>n.type.__isKeepAlive,Jx={name:"KeepAlive",__isKeepAlive:!0,props:{include:[String,RegExp,Array],exclude:[String,RegExp,Array],max:[String,Number]},setup(n,{slots:e}){const t=ts(),s=t.ctx;if(!s.renderer)return()=>{const v=e.default&&e.default();return v&&v.length===1?v[0]:v};const i=new Map,r=new Set;let a=null;const o=t.suspense,{renderer:{p:l,m:c,um:u,o:{createElement:d}}}=s,h=d("div");s.activate=(v,E,T,b,L)=>{const x=v.component;c(v,E,T,0,o),l(x.vnode,v,E,T,x,o,b,v.slotScopeIds,L),Kt(()=>{x.isDeactivated=!1,x.a&&_r(x.a);const w=v.props&&v.props.onVnodeMounted;w&&ls(w,x.parent,v)},o)},s.deactivate=v=>{const E=v.component;c(v,h,null,1,o),Kt(()=>{E.da&&_r(E.da);const T=v.props&&v.props.onVnodeUnmounted;T&&ls(T,E.parent,v),E.isDeactivated=!0},o)};function f(v){wc(v),u(v,t,o,!0)}function p(v){i.forEach((E,T)=>{const b=rd(E.type);b&&(!v||!v(b))&&m(T)})}function m(v){const E=i.get(v);!a||!Ks(E,a)?f(E):a&&wc(a),i.delete(v),r.delete(v)}_t(()=>[n.include,n.exclude],([v,E])=>{v&&p(T=>fa(v,T)),E&&p(T=>!fa(E,T))},{flush:"post",deep:!0});let y=null;const g=()=>{y!=null&&i.set(y,Rc(t.subTree))};return vt(g),Js(g),Vt(()=>{i.forEach(v=>{const{subTree:E,suspense:T}=t,b=Rc(E);if(v.type===b.type&&v.key===b.key){wc(b);const L=b.component.da;L&&Kt(L,T);return}f(v)})}),()=>{if(y=null,!e.default)return null;const v=e.default(),E=v[0];if(v.length>1)return a=null,v;if(!vi(E)||!(E.shapeFlag&4)&&!(E.shapeFlag&128))return a=null,E;let T=Rc(E);const b=T.type,L=rd(Gi(T)?T.type.__asyncResolved||{}:b),{include:x,exclude:w,max:k}=n;if(x&&(!L||!fa(x,L))||w&&L&&fa(w,L))return a=T,E;const R=T.key==null?b:T.key,P=i.get(R);return T.el&&(T=vn(T),E.shapeFlag&128&&(E.ssContent=T)),y=R,P?(T.el=P.el,T.component=P.component,T.transition&&zi(T,T.transition),T.shapeFlag|=512,r.delete(R),r.add(R)):(r.add(R),k&&r.size>parseInt(k,10)&&m(r.values().next().value)),T.shapeFlag|=256,a=T,Py(E.type)?E:T}}},Zx=Jx;function fa(n,e){return _e(n)?n.some(t=>fa(t,e)):yt(n)?n.split(",").includes(e):Pb(n)?n.test(e):!1}function Uy(n,e){jy(n,"a",e)}function $y(n,e){jy(n,"da",e)}function jy(n,e,t=Lt){const s=n.__wdc||(n.__wdc=()=>{let i=t;for(;i;){if(i.isDeactivated)return;i=i.parent}return n()});if(Zl(e,s,t),t){let i=t.parent;for(;i&&i.parent;)so(i.parent.vnode)&&eS(s,e,t,i),i=i.parent}}function eS(n,e,t,s){const i=Zl(e,n,s,!0);Hn(()=>{ch(s[e],i)},t)}function wc(n){n.shapeFlag&=-257,n.shapeFlag&=-513}function Rc(n){return n.shapeFlag&128?n.ssContent:n}function Zl(n,e,t=Lt,s=!1){if(t){const i=t[n]||(t[n]=[]),r=e.__weh||(e.__weh=(...a)=>{if(t.isUnmounted)return;zr(),Ei(t);const o=_s(e,t,n,a);return fi(),Yr(),o});return s?i.unshift(r):i.push(r),r}}const Vn=n=>(e,t=Lt)=>(!Pr||n==="sp")&&Zl(n,(...s)=>e(...s),t),Ch=Vn("bm"),vt=Vn("m"),Dh=Vn("bu"),Js=Vn("u"),Vt=Vn("bum"),Hn=Vn("um"),Gy=Vn("sp"),Vy=Vn("rtg"),Hy=Vn("rtc");function Ky(n,e=Lt){Zl("ec",n,e)}const kh="components",tS="directives";function ec(n,e){return Ph(kh,n,!0,e)||n}const Wy=Symbol.for("v-ndc");function zy(n){return yt(n)?Ph(kh,n,!1)||n:n||Wy}function sS(n){return Ph(tS,n)}function Ph(n,e,t=!0,s=!1){const i=$t||Lt;if(i){const r=i.type;if(n===kh){const o=rd(r,!1);if(o&&(o===e||o===hs(e)||o===eo(hs(e))))return r}const a=lp(i[n]||r[n],e)||lp(i.appContext[n],e);return!a&&s?r:a}}function lp(n,e){return n&&(n[e]||n[hs(e)]||n[eo(hs(e))])}function As(n,e,t,s){let i;const r=t&&t[s];if(_e(n)||yt(n)){i=new Array(n.length);for(let a=0,o=n.length;a<o;a++)i[a]=e(n[a],a,void 0,r&&r[a])}else if(typeof n=="number"){i=new Array(n);for(let a=0;a<n;a++)i[a]=e(a+1,a,void 0,r&&r[a])}else if(lt(n))if(n[Symbol.iterator])i=Array.from(n,(a,o)=>e(a,o,void 0,r&&r[o]));else{const a=Object.keys(n);i=new Array(a.length);for(let o=0,l=a.length;o<l;o++){const c=a[o];i[o]=e(n[c],c,o,r&&r[o])}}else i=[];return t&&(t[s]=i),i}function nS(n,e){for(let t=0;t<e.length;t++){const s=e[t];if(_e(s))for(let i=0;i<s.length;i++)n[s[i].name]=s[i].fn;else s&&(n[s.name]=s.key?(...i)=>{const r=s.fn(...i);return r&&(r.key=s.key),r}:s.fn)}return n}function Yy(n,e,t={},s,i){if($t.isCE||$t.parent&&Gi($t.parent)&&$t.parent.isCE)return e!=="default"&&(t.name=e),fe("slot",t,s&&s());let r=n[e];r&&r._c&&(r._d=!1),ve();const a=r&&qy(r(t)),o=qr(We,{key:t.key||a&&a.key||`_${e}`},a||(s?s():[]),a&&n._===1?64:-2);return!i&&o.scopeId&&(o.slotScopeIds=[o.scopeId+"-s"]),r&&r._c&&(r._d=!0),o}function qy(n){return n.some(e=>vi(e)?!(e.type===es||e.type===We&&!qy(e.children)):!0)?n:null}function iS(n,e){const t={};for(const s in n)t[e&&/[A-Z]/.test(s)?`on:${s}`:ga(s)]=n[s];return t}const Xu=n=>n?f1(n)?sc(n)||n.proxy:Xu(n.parent):null,ya=gt(Object.create(null),{$:n=>n,$el:n=>n.vnode.el,$data:n=>n.data,$props:n=>n.props,$attrs:n=>n.attrs,$slots:n=>n.slots,$refs:n=>n.refs,$parent:n=>Xu(n.parent),$root:n=>Xu(n.root),$emit:n=>n.emit,$options:n=>Mh(n),$forceUpdate:n=>n.f||(n.f=()=>ql(n.update)),$nextTick:n=>n.n||(n.n=Gn.bind(n.proxy)),$watch:n=>qx.bind(n)}),Ic=(n,e)=>n!==rt&&!n.__isScriptSetup&&Xe(n,e),Qu={get({_:n},e){const{ctx:t,setupState:s,data:i,props:r,accessCache:a,type:o,appContext:l}=n;let c;if(e[0]!=="$"){const f=a[e];if(f!==void 0)switch(f){case 1:return s[e];case 2:return i[e];case 4:return t[e];case 3:return r[e]}else{if(Ic(s,e))return a[e]=1,s[e];if(i!==rt&&Xe(i,e))return a[e]=2,i[e];if((c=n.propsOptions[0])&&Xe(c,e))return a[e]=3,r[e];if(t!==rt&&Xe(t,e))return a[e]=4,t[e];Ju&&(a[e]=0)}}const u=ya[e];let d,h;if(u)return e==="$attrs"&&ps(n,"get",e),u(n);if((d=o.__cssModules)&&(d=d[e]))return d;if(t!==rt&&Xe(t,e))return a[e]=4,t[e];if(h=l.config.globalProperties,Xe(h,e))return h[e]},set({_:n},e,t){const{data:s,setupState:i,ctx:r}=n;return Ic(i,e)?(i[e]=t,!0):s!==rt&&Xe(s,e)?(s[e]=t,!0):Xe(n.props,e)||e[0]==="$"&&e.slice(1)in n?!1:(r[e]=t,!0)},has({_:{data:n,setupState:e,accessCache:t,ctx:s,appContext:i,propsOptions:r}},a){let o;return!!t[a]||n!==rt&&Xe(n,a)||Ic(e,a)||(o=r[0])&&Xe(o,a)||Xe(s,a)||Xe(ya,a)||Xe(i.config.globalProperties,a)},defineProperty(n,e,t){return t.get!=null?n._.accessCache[e]=0:Xe(t,"value")&&this.set(n,e,t.value,null),Reflect.defineProperty(n,e,t)}},rS=gt({},Qu,{get(n,e){if(e!==Symbol.unscopables)return Qu.get(n,e,n)},has(n,e){return e[0]!=="_"&&!Bb(e)}});function aS(){return null}function oS(){return null}function lS(n){}function cS(n){}function uS(){return null}function dS(){}function hS(n,e){return null}function fS(){return Xy().slots}function Oh(){return Xy().attrs}function pS(n,e,t){const s=ts();if(t&&t.local){const i=ce(n[e]);return _t(()=>n[e],r=>i.value=r),_t(i,r=>{r!==n[e]&&s.emit(`update:${e}`,r)}),i}else return{__v_isRef:!0,get value(){return n[e]},set value(i){s.emit(`update:${e}`,i)}}}function Xy(){const n=ts();return n.setupContext||(n.setupContext=g1(n))}function Na(n){return _e(n)?n.reduce((e,t)=>(e[t]=null,e),{}):n}function mS(n,e){const t=Na(n);for(const s in e){if(s.startsWith("__skip"))continue;let i=t[s];i?_e(i)||Ue(i)?i=t[s]={type:i,default:e[s]}:i.default=e[s]:i===null&&(i=t[s]={default:e[s]}),i&&e[`__skip_${s}`]&&(i.skipFactory=!0)}return t}function gS(n,e){return!n||!e?n||e:_e(n)&&_e(e)?n.concat(e):gt({},Na(n),Na(e))}function yS(n,e){const t={};for(const s in n)e.includes(s)||Object.defineProperty(t,s,{enumerable:!0,get:()=>n[s]});return t}function vS(n){const e=ts();let t=n();return fi(),uh(t)&&(t=t.catch(s=>{throw Ei(e),s})),[t,()=>Ei(e)]}let Ju=!0;function ES(n){const e=Mh(n),t=n.proxy,s=n.ctx;Ju=!1,e.beforeCreate&&cp(e.beforeCreate,n,"bc");const{data:i,computed:r,methods:a,watch:o,provide:l,inject:c,created:u,beforeMount:d,mounted:h,beforeUpdate:f,updated:p,activated:m,deactivated:y,beforeDestroy:g,beforeUnmount:v,destroyed:E,unmounted:T,render:b,renderTracked:L,renderTriggered:x,errorCaptured:w,serverPrefetch:k,expose:R,inheritAttrs:P,components:D,directives:O,filters:N}=e;if(c&&TS(c,s,null),a)for(const ee in a){const V=a[ee];Ue(V)&&(s[ee]=V.bind(t))}if(i){const ee=i.call(t,t);lt(ee)&&(n.data=qt(ee))}if(Ju=!0,r)for(const ee in r){const V=r[ee],U=Ue(V)?V.bind(t,t):Ue(V.get)?V.get.bind(t,t):Ys,B=!Ue(V)&&Ue(V.set)?V.set.bind(t):Ys,j=Ve({get:U,set:B});Object.defineProperty(s,ee,{enumerable:!0,configurable:!0,get:()=>j.value,set:Y=>j.value=Y})}if(o)for(const ee in o)Qy(o[ee],s,t,ee);if(l){const ee=Ue(l)?l.call(t):l;Reflect.ownKeys(ee).forEach(V=>{qs(V,ee[V])})}u&&cp(u,n,"c");function K(ee,V){_e(V)?V.forEach(U=>ee(U.bind(t))):V&&ee(V.bind(t))}if(K(Ch,d),K(vt,h),K(Dh,f),K(Js,p),K(Uy,m),K($y,y),K(Ky,w),K(Hy,L),K(Vy,x),K(Vt,v),K(Hn,T),K(Gy,k),_e(R))if(R.length){const ee=n.exposed||(n.exposed={});R.forEach(V=>{Object.defineProperty(ee,V,{get:()=>t[V],set:U=>t[V]=U})})}else n.exposed||(n.exposed={});b&&n.render===Ys&&(n.render=b),P!=null&&(n.inheritAttrs=P),D&&(n.components=D),O&&(n.directives=O)}function TS(n,e,t=Ys){_e(n)&&(n=Zu(n));for(const s in n){const i=n[s];let r;lt(i)?"default"in i?r=fs(i.from||s,i.default,!0):r=fs(i.from||s):r=fs(i),wt(r)?Object.defineProperty(e,s,{enumerable:!0,configurable:!0,get:()=>r.value,set:a=>r.value=a}):e[s]=r}}function cp(n,e,t){_s(_e(n)?n.map(s=>s.bind(e.proxy)):n.bind(e.proxy),e,t)}function Qy(n,e,t,s){const i=s.includes(".")?Fy(t,s):()=>t[s];if(yt(n)){const r=e[n];Ue(r)&&_t(i,r)}else if(Ue(n))_t(i,n.bind(t));else if(lt(n))if(_e(n))n.forEach(r=>Qy(r,e,t,s));else{const r=Ue(n.handler)?n.handler.bind(t):e[n.handler];Ue(r)&&_t(i,r,n)}}function Mh(n){const e=n.type,{mixins:t,extends:s}=e,{mixins:i,optionsCache:r,config:{optionMergeStrategies:a}}=n.appContext,o=r.get(e);let l;return o?l=o:!i.length&&!t&&!s?l=e:(l={},i.length&&i.forEach(c=>dl(l,c,a,!0)),dl(l,e,a)),lt(e)&&r.set(e,l),l}function dl(n,e,t,s=!1){const{mixins:i,extends:r}=e;r&&dl(n,r,t,!0),i&&i.forEach(a=>dl(n,a,t,!0));for(const a in e)if(!(s&&a==="expose")){const o=bS[a]||t&&t[a];n[a]=o?o(n[a],e[a]):e[a]}return n}const bS={data:up,props:dp,emits:dp,methods:pa,computed:pa,beforeCreate:ss,created:ss,beforeMount:ss,mounted:ss,beforeUpdate:ss,updated:ss,beforeDestroy:ss,beforeUnmount:ss,destroyed:ss,unmounted:ss,activated:ss,deactivated:ss,errorCaptured:ss,serverPrefetch:ss,components:pa,directives:pa,watch:SS,provide:up,inject:xS};function up(n,e){return e?n?function(){return gt(Ue(n)?n.call(this,this):n,Ue(e)?e.call(this,this):e)}:e:n}function xS(n,e){return pa(Zu(n),Zu(e))}function Zu(n){if(_e(n)){const e={};for(let t=0;t<n.length;t++)e[n[t]]=n[t];return e}return n}function ss(n,e){return n?[...new Set([].concat(n,e))]:e}function pa(n,e){return n?gt(Object.create(null),n,e):e}function dp(n,e){return n?_e(n)&&_e(e)?[...new Set([...n,...e])]:gt(Object.create(null),Na(n),Na(e??{})):e}function SS(n,e){if(!n)return e;if(!e)return n;const t=gt(Object.create(null),n);for(const s in e)t[s]=ss(n[s],e[s]);return t}function Jy(){return{app:null,config:{isNativeTag:Cb,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let _S=0;function AS(n,e){return function(s,i=null){Ue(s)||(s=gt({},s)),i!=null&&!lt(i)&&(i=null);const r=Jy(),a=new WeakSet;let o=!1;const l=r.app={_uid:_S++,_component:s,_props:i,_container:null,_context:r,_instance:null,version:T1,get config(){return r.config},set config(c){},use(c,...u){return a.has(c)||(c&&Ue(c.install)?(a.add(c),c.install(l,...u)):Ue(c)&&(a.add(c),c(l,...u))),l},mixin(c){return r.mixins.includes(c)||r.mixins.push(c),l},component(c,u){return u?(r.components[c]=u,l):r.components[c]},directive(c,u){return u?(r.directives[c]=u,l):r.directives[c]},mount(c,u,d){if(!o){const h=fe(s,i);return h.appContext=r,u&&e?e(h,c):n(h,c,d),o=!0,l._container=c,c.__vue_app__=l,sc(h.component)||h.component.proxy}},unmount(){o&&(n(null,l._container),delete l._container.__vue_app__)},provide(c,u){return r.provides[c]=u,l},runWithContext(c){Ba=l;try{return c()}finally{Ba=null}}};return l}}let Ba=null;function qs(n,e){if(Lt){let t=Lt.provides;const s=Lt.parent&&Lt.parent.provides;s===t&&(t=Lt.provides=Object.create(s)),t[n]=e}}function fs(n,e,t=!1){const s=Lt||$t;if(s||Ba){const i=s?s.parent==null?s.vnode.appContext&&s.vnode.appContext.provides:s.parent.provides:Ba._context.provides;if(i&&n in i)return i[n];if(arguments.length>1)return t&&Ue(e)?e.call(s&&s.proxy):e}}function LS(){return!!(Lt||$t||Ba)}function wS(n,e,t,s=!1){const i={},r={};al(r,tc,1),n.propsDefaults=Object.create(null),Zy(n,e,i,r);for(const a in n.propsOptions[0])a in i||(i[a]=void 0);t?n.props=s?i:gh(i):n.type.props?n.props=i:n.props=r,n.attrs=r}function RS(n,e,t,s){const{props:i,attrs:r,vnode:{patchFlag:a}}=n,o=ze(i),[l]=n.propsOptions;let c=!1;if((s||a>0)&&!(a&16)){if(a&8){const u=n.vnode.dynamicProps;for(let d=0;d<u.length;d++){let h=u[d];if(Xl(n.emitsOptions,h))continue;const f=e[h];if(l)if(Xe(r,h))f!==r[h]&&(r[h]=f,c=!0);else{const p=hs(h);i[p]=ed(l,o,p,f,n,!1)}else f!==r[h]&&(r[h]=f,c=!0)}}}else{Zy(n,e,i,r)&&(c=!0);let u;for(const d in o)(!e||!Xe(e,d)&&((u=Ms(d))===d||!Xe(e,u)))&&(l?t&&(t[d]!==void 0||t[u]!==void 0)&&(i[d]=ed(l,o,d,void 0,n,!0)):delete i[d]);if(r!==o)for(const d in r)(!e||!Xe(e,d))&&(delete r[d],c=!0)}c&&Un(n,"set","$attrs")}function Zy(n,e,t,s){const[i,r]=n.propsOptions;let a=!1,o;if(e)for(let l in e){if(ma(l))continue;const c=e[l];let u;i&&Xe(i,u=hs(l))?!r||!r.includes(u)?t[u]=c:(o||(o={}))[u]=c:Xl(n.emitsOptions,l)||(!(l in s)||c!==s[l])&&(s[l]=c,a=!0)}if(r){const l=ze(t),c=o||rt;for(let u=0;u<r.length;u++){const d=r[u];t[d]=ed(i,l,d,c[d],n,!Xe(c,d))}}return a}function ed(n,e,t,s,i,r){const a=n[t];if(a!=null){const o=Xe(a,"default");if(o&&s===void 0){const l=a.default;if(a.type!==Function&&!a.skipFactory&&Ue(l)){const{propsDefaults:c}=i;t in c?s=c[t]:(Ei(i),s=c[t]=l.call(null,e),fi())}else s=l}a[0]&&(r&&!o?s=!1:a[1]&&(s===""||s===Ms(t))&&(s=!0))}return s}function e1(n,e,t=!1){const s=e.propsCache,i=s.get(n);if(i)return i;const r=n.props,a={},o=[];let l=!1;if(!Ue(n)){const u=d=>{l=!0;const[h,f]=e1(d,e,!0);gt(a,h),f&&o.push(...f)};!t&&e.mixins.length&&e.mixins.forEach(u),n.extends&&u(n.extends),n.mixins&&n.mixins.forEach(u)}if(!r&&!l)return lt(n)&&s.set(n,xr),xr;if(_e(r))for(let u=0;u<r.length;u++){const d=hs(r[u]);hp(d)&&(a[d]=rt)}else if(r)for(const u in r){const d=hs(u);if(hp(d)){const h=r[u],f=a[d]=_e(h)||Ue(h)?{type:h}:gt({},h);if(f){const p=mp(Boolean,f.type),m=mp(String,f.type);f[0]=p>-1,f[1]=m<0||p<m,(p>-1||Xe(f,"default"))&&o.push(d)}}}const c=[a,o];return lt(n)&&s.set(n,c),c}function hp(n){return n[0]!=="$"}function fp(n){const e=n&&n.toString().match(/^\s*(function|class) (\w+)/);return e?e[2]:n===null?"null":""}function pp(n,e){return fp(n)===fp(e)}function mp(n,e){return _e(e)?e.findIndex(t=>pp(t,n)):Ue(e)&&pp(e,n)?0:-1}const t1=n=>n[0]==="_"||n==="$stable",Fh=n=>_e(n)?n.map(Ss):[Ss(n)],IS=(n,e,t)=>{if(e._n)return e;const s=Pt((...i)=>Fh(e(...i)),t);return s._c=!1,s},s1=(n,e,t)=>{const s=n._ctx;for(const i in n){if(t1(i))continue;const r=n[i];if(Ue(r))e[i]=IS(i,r,s);else if(r!=null){const a=Fh(r);e[i]=()=>a}}},n1=(n,e)=>{const t=Fh(e);n.slots.default=()=>t},CS=(n,e)=>{if(n.vnode.shapeFlag&32){const t=e._;t?(n.slots=ze(e),al(e,"_",t)):s1(e,n.slots={})}else n.slots={},e&&n1(n,e);al(n.slots,tc,1)},DS=(n,e,t)=>{const{vnode:s,slots:i}=n;let r=!0,a=rt;if(s.shapeFlag&32){const o=e._;o?t&&o===1?r=!1:(gt(i,e),!t&&o===1&&delete i._):(r=!e.$stable,s1(e,i)),a=e}else e&&(n1(n,e),a={default:1});if(r)for(const o in i)!t1(o)&&a[o]==null&&delete i[o]};function hl(n,e,t,s,i=!1){if(_e(n)){n.forEach((h,f)=>hl(h,e&&(_e(e)?e[f]:e),t,s,i));return}if(Gi(s)&&!i)return;const r=s.shapeFlag&4?sc(s.component)||s.component.proxy:s.el,a=i?null:r,{i:o,r:l}=n,c=e&&e.r,u=o.refs===rt?o.refs={}:o.refs,d=o.setupState;if(c!=null&&c!==l&&(yt(c)?(u[c]=null,Xe(d,c)&&(d[c]=null)):wt(c)&&(c.value=null)),Ue(l))$n(l,o,12,[a,u]);else{const h=yt(l),f=wt(l);if(h||f){const p=()=>{if(n.f){const m=h?Xe(d,l)?d[l]:u[l]:l.value;i?_e(m)&&ch(m,r):_e(m)?m.includes(r)||m.push(r):h?(u[l]=[r],Xe(d,l)&&(d[l]=u[l])):(l.value=[r],n.k&&(u[n.k]=l.value))}else h?(u[l]=a,Xe(d,l)&&(d[l]=a)):f&&(l.value=a,n.k&&(u[n.k]=a))};a?(p.id=-1,Kt(p,t)):p()}}}let zn=!1;const yo=n=>/svg/.test(n.namespaceURI)&&n.tagName!=="foreignObject",vo=n=>n.nodeType===8;function kS(n){const{mt:e,p:t,o:{patchProp:s,createText:i,nextSibling:r,parentNode:a,remove:o,insert:l,createComment:c}}=n,u=(g,v)=>{if(!v.hasChildNodes()){t(null,g,v),ul(),v._vnode=g;return}zn=!1,d(v.firstChild,g,null,null,null),ul(),v._vnode=g,zn&&console.error("Hydration completed but contains mismatches.")},d=(g,v,E,T,b,L=!1)=>{const x=vo(g)&&g.data==="[",w=()=>m(g,v,E,T,b,x),{type:k,ref:R,shapeFlag:P,patchFlag:D}=v;let O=g.nodeType;v.el=g,D===-2&&(L=!1,v.dynamicChildren=null);let N=null;switch(k){case yi:O!==3?v.children===""?(l(v.el=i(""),a(g),g),N=g):N=w():(g.data!==v.children&&(zn=!0,g.data=v.children),N=r(g));break;case es:O!==8||x?N=w():N=r(g);break;case Vi:if(x&&(g=r(g),O=g.nodeType),O===1||O===3){N=g;const $=!v.children.length;for(let K=0;K<v.staticCount;K++)$&&(v.children+=N.nodeType===1?N.outerHTML:N.data),K===v.staticCount-1&&(v.anchor=N),N=r(N);return x?r(N):N}else w();break;case We:x?N=p(g,v,E,T,b,L):N=w();break;default:if(P&1)O!==1||v.type.toLowerCase()!==g.tagName.toLowerCase()?N=w():N=h(g,v,E,T,b,L);else if(P&6){v.slotScopeIds=b;const $=a(g);if(e(v,$,null,E,T,yo($),L),N=x?y(g):r(g),N&&vo(N)&&N.data==="teleport end"&&(N=r(N)),Gi(v)){let K;x?(K=fe(We),K.anchor=N?N.previousSibling:$.lastChild):K=g.nodeType===3?nt(""):fe("div"),K.el=g,v.component.subTree=K}}else P&64?O!==8?N=w():N=v.type.hydrate(g,v,E,T,b,L,n,f):P&128&&(N=v.type.hydrate(g,v,E,T,yo(a(g)),b,L,n,d))}return R!=null&&hl(R,null,T,v),N},h=(g,v,E,T,b,L)=>{L=L||!!v.dynamicChildren;const{type:x,props:w,patchFlag:k,shapeFlag:R,dirs:P}=v,D=x==="input"&&P||x==="option";if(D||k!==-1){if(P&&nn(v,null,E,"created"),w)if(D||!L||k&48)for(const N in w)(D&&N.endsWith("value")||Za(N)&&!ma(N))&&s(g,N,null,w[N],!1,void 0,E);else w.onClick&&s(g,"onClick",null,w.onClick,!1,void 0,E);let O;if((O=w&&w.onVnodeBeforeMount)&&ls(O,E,v),P&&nn(v,null,E,"beforeMount"),((O=w&&w.onVnodeMounted)||P)&&Oy(()=>{O&&ls(O,E,v),P&&nn(v,null,E,"mounted")},T),R&16&&!(w&&(w.innerHTML||w.textContent))){let N=f(g.firstChild,v,g,E,T,b,L);for(;N;){zn=!0;const $=N;N=N.nextSibling,o($)}}else R&8&&g.textContent!==v.children&&(zn=!0,g.textContent=v.children)}return g.nextSibling},f=(g,v,E,T,b,L,x)=>{x=x||!!v.dynamicChildren;const w=v.children,k=w.length;for(let R=0;R<k;R++){const P=x?w[R]:w[R]=Ss(w[R]);if(g)g=d(g,P,T,b,L,x);else{if(P.type===yi&&!P.children)continue;zn=!0,t(null,P,E,null,T,b,yo(E),L)}}return g},p=(g,v,E,T,b,L)=>{const{slotScopeIds:x}=v;x&&(b=b?b.concat(x):x);const w=a(g),k=f(r(g),v,w,E,T,b,L);return k&&vo(k)&&k.data==="]"?r(v.anchor=k):(zn=!0,l(v.anchor=c("]"),w,k),k)},m=(g,v,E,T,b,L)=>{if(zn=!0,v.el=null,L){const k=y(g);for(;;){const R=r(g);if(R&&R!==k)o(R);else break}}const x=r(g),w=a(g);return o(g),t(null,v,w,x,E,T,yo(w),b),x},y=g=>{let v=0;for(;g;)if(g=r(g),g&&vo(g)&&(g.data==="["&&v++,g.data==="]")){if(v===0)return r(g);v--}return g};return[u,d]}const Kt=Oy;function i1(n){return a1(n)}function r1(n){return a1(n,kS)}function a1(n,e){const t=Ku();t.__VUE__=!0;const{insert:s,remove:i,patchProp:r,createElement:a,createText:o,createComment:l,setText:c,setElementText:u,parentNode:d,nextSibling:h,setScopeId:f=Ys,insertStaticContent:p}=n,m=(F,A,S,M=null,G=null,J=null,le=!1,pe=null,ye=!!A.dynamicChildren)=>{if(F===A)return;F&&!Ks(F,A)&&(M=Q(F),Y(F,G,J,!0),F=null),A.patchFlag===-2&&(ye=!1,A.dynamicChildren=null);const{type:ue,ref:Ie,shapeFlag:Ee}=A;switch(ue){case yi:y(F,A,S,M);break;case es:g(F,A,S,M);break;case Vi:F==null&&v(A,S,M,le);break;case We:D(F,A,S,M,G,J,le,pe,ye);break;default:Ee&1?b(F,A,S,M,G,J,le,pe,ye):Ee&6?O(F,A,S,M,G,J,le,pe,ye):(Ee&64||Ee&128)&&ue.process(F,A,S,M,G,J,le,pe,ye,q)}Ie!=null&&G&&hl(Ie,F&&F.ref,J,A||F,!A)},y=(F,A,S,M)=>{if(F==null)s(A.el=o(A.children),S,M);else{const G=A.el=F.el;A.children!==F.children&&c(G,A.children)}},g=(F,A,S,M)=>{F==null?s(A.el=l(A.children||""),S,M):A.el=F.el},v=(F,A,S,M)=>{[F.el,F.anchor]=p(F.children,A,S,M,F.el,F.anchor)},E=({el:F,anchor:A},S,M)=>{let G;for(;F&&F!==A;)G=h(F),s(F,S,M),F=G;s(A,S,M)},T=({el:F,anchor:A})=>{let S;for(;F&&F!==A;)S=h(F),i(F),F=S;i(A)},b=(F,A,S,M,G,J,le,pe,ye)=>{le=le||A.type==="svg",F==null?L(A,S,M,G,J,le,pe,ye):k(F,A,G,J,le,pe,ye)},L=(F,A,S,M,G,J,le,pe)=>{let ye,ue;const{type:Ie,props:Ee,shapeFlag:W,transition:se,dirs:Ae}=F;if(ye=F.el=a(F.type,J,Ee&&Ee.is,Ee),W&8?u(ye,F.children):W&16&&w(F.children,ye,null,M,G,J&&Ie!=="foreignObject",le,pe),Ae&&nn(F,null,M,"created"),x(ye,F,F.scopeId,le,M),Ee){for(const Ke in Ee)Ke!=="value"&&!ma(Ke)&&r(ye,Ke,null,Ee[Ke],J,F.children,M,G,we);"value"in Ee&&r(ye,"value",null,Ee.value),(ue=Ee.onVnodeBeforeMount)&&ls(ue,M,F)}Ae&&nn(F,null,M,"beforeMount");const Be=(!G||G&&!G.pendingBranch)&&se&&!se.persisted;Be&&se.beforeEnter(ye),s(ye,A,S),((ue=Ee&&Ee.onVnodeMounted)||Be||Ae)&&Kt(()=>{ue&&ls(ue,M,F),Be&&se.enter(ye),Ae&&nn(F,null,M,"mounted")},G)},x=(F,A,S,M,G)=>{if(S&&f(F,S),M)for(let J=0;J<M.length;J++)f(F,M[J]);if(G){let J=G.subTree;if(A===J){const le=G.vnode;x(F,le,le.scopeId,le.slotScopeIds,G.parent)}}},w=(F,A,S,M,G,J,le,pe,ye=0)=>{for(let ue=ye;ue<F.length;ue++){const Ie=F[ue]=pe?ii(F[ue]):Ss(F[ue]);m(null,Ie,A,S,M,G,J,le,pe)}},k=(F,A,S,M,G,J,le)=>{const pe=A.el=F.el;let{patchFlag:ye,dynamicChildren:ue,dirs:Ie}=A;ye|=F.patchFlag&16;const Ee=F.props||rt,W=A.props||rt;let se;S&&Li(S,!1),(se=W.onVnodeBeforeUpdate)&&ls(se,S,A,F),Ie&&nn(A,F,S,"beforeUpdate"),S&&Li(S,!0);const Ae=G&&A.type!=="foreignObject";if(ue?R(F.dynamicChildren,ue,pe,S,M,Ae,J):le||V(F,A,pe,null,S,M,Ae,J,!1),ye>0){if(ye&16)P(pe,A,Ee,W,S,M,G);else if(ye&2&&Ee.class!==W.class&&r(pe,"class",null,W.class,G),ye&4&&r(pe,"style",Ee.style,W.style,G),ye&8){const Be=A.dynamicProps;for(let Ke=0;Ke<Be.length;Ke++){const dt=Be[Ke],Ft=Ee[dt],Kn=W[dt];(Kn!==Ft||dt==="value")&&r(pe,dt,Ft,Kn,G,F.children,S,M,we)}}ye&1&&F.children!==A.children&&u(pe,A.children)}else!le&&ue==null&&P(pe,A,Ee,W,S,M,G);((se=W.onVnodeUpdated)||Ie)&&Kt(()=>{se&&ls(se,S,A,F),Ie&&nn(A,F,S,"updated")},M)},R=(F,A,S,M,G,J,le)=>{for(let pe=0;pe<A.length;pe++){const ye=F[pe],ue=A[pe],Ie=ye.el&&(ye.type===We||!Ks(ye,ue)||ye.shapeFlag&70)?d(ye.el):S;m(ye,ue,Ie,null,M,G,J,le,!0)}},P=(F,A,S,M,G,J,le)=>{if(S!==M){if(S!==rt)for(const pe in S)!ma(pe)&&!(pe in M)&&r(F,pe,S[pe],null,le,A.children,G,J,we);for(const pe in M){if(ma(pe))continue;const ye=M[pe],ue=S[pe];ye!==ue&&pe!=="value"&&r(F,pe,ue,ye,le,A.children,G,J,we)}"value"in M&&r(F,"value",S.value,M.value)}},D=(F,A,S,M,G,J,le,pe,ye)=>{const ue=A.el=F?F.el:o(""),Ie=A.anchor=F?F.anchor:o("");let{patchFlag:Ee,dynamicChildren:W,slotScopeIds:se}=A;se&&(pe=pe?pe.concat(se):se),F==null?(s(ue,S,M),s(Ie,S,M),w(A.children,S,Ie,G,J,le,pe,ye)):Ee>0&&Ee&64&&W&&F.dynamicChildren?(R(F.dynamicChildren,W,S,G,J,le,pe),(A.key!=null||G&&A===G.subTree)&&Nh(F,A,!0)):V(F,A,S,Ie,G,J,le,pe,ye)},O=(F,A,S,M,G,J,le,pe,ye)=>{A.slotScopeIds=pe,F==null?A.shapeFlag&512?G.ctx.activate(A,S,M,le,ye):N(A,S,M,G,J,le,ye):$(F,A,ye)},N=(F,A,S,M,G,J,le)=>{const pe=F.component=h1(F,M,G);if(so(F)&&(pe.ctx.renderer=q),p1(pe),pe.asyncDep){if(G&&G.registerDep(pe,K),!F.el){const ye=pe.subTree=fe(es);g(null,ye,A,S)}return}K(pe,F,A,S,G,J,le)},$=(F,A,S)=>{const M=A.component=F.component;if(Ux(F,A,S))if(M.asyncDep&&!M.asyncResolved){ee(M,A,S);return}else M.next=A,kx(M.update),M.update();else A.el=F.el,M.vnode=A},K=(F,A,S,M,G,J,le)=>{const pe=()=>{if(F.isMounted){let{next:Ie,bu:Ee,u:W,parent:se,vnode:Ae}=F,Be=Ie,Ke;Li(F,!1),Ie?(Ie.el=Ae.el,ee(F,Ie,le)):Ie=Ae,Ee&&_r(Ee),(Ke=Ie.props&&Ie.props.onVnodeBeforeUpdate)&&ls(Ke,se,Ie,Ae),Li(F,!0);const dt=Ko(F),Ft=F.subTree;F.subTree=dt,m(Ft,dt,d(Ft.el),Q(Ft),F,G,J),Ie.el=dt.el,Be===null&&Lh(F,dt.el),W&&Kt(W,G),(Ke=Ie.props&&Ie.props.onVnodeUpdated)&&Kt(()=>ls(Ke,se,Ie,Ae),G)}else{let Ie;const{el:Ee,props:W}=A,{bm:se,m:Ae,parent:Be}=F,Ke=Gi(A);if(Li(F,!1),se&&_r(se),!Ke&&(Ie=W&&W.onVnodeBeforeMount)&&ls(Ie,Be,A),Li(F,!0),Ee&&Re){const dt=()=>{F.subTree=Ko(F),Re(Ee,F.subTree,F,G,null)};Ke?A.type.__asyncLoader().then(()=>!F.isUnmounted&&dt()):dt()}else{const dt=F.subTree=Ko(F);m(null,dt,S,M,F,G,J),A.el=dt.el}if(Ae&&Kt(Ae,G),!Ke&&(Ie=W&&W.onVnodeMounted)){const dt=A;Kt(()=>ls(Ie,Be,dt),G)}(A.shapeFlag&256||Be&&Gi(Be.vnode)&&Be.vnode.shapeFlag&256)&&F.a&&Kt(F.a,G),F.isMounted=!0,A=S=M=null}},ye=F.effect=new Dr(pe,()=>ql(ue),F.scope),ue=F.update=()=>ye.run();ue.id=F.uid,Li(F,!0),ue()},ee=(F,A,S)=>{A.component=F;const M=F.vnode.props;F.vnode=A,F.next=null,RS(F,A.props,M,S),DS(F,A.children,S),zr(),ip(),Yr()},V=(F,A,S,M,G,J,le,pe,ye=!1)=>{const ue=F&&F.children,Ie=F?F.shapeFlag:0,Ee=A.children,{patchFlag:W,shapeFlag:se}=A;if(W>0){if(W&128){B(ue,Ee,S,M,G,J,le,pe,ye);return}else if(W&256){U(ue,Ee,S,M,G,J,le,pe,ye);return}}se&8?(Ie&16&&we(ue,G,J),Ee!==ue&&u(S,Ee)):Ie&16?se&16?B(ue,Ee,S,M,G,J,le,pe,ye):we(ue,G,J,!0):(Ie&8&&u(S,""),se&16&&w(Ee,S,M,G,J,le,pe,ye))},U=(F,A,S,M,G,J,le,pe,ye)=>{F=F||xr,A=A||xr;const ue=F.length,Ie=A.length,Ee=Math.min(ue,Ie);let W;for(W=0;W<Ee;W++){const se=A[W]=ye?ii(A[W]):Ss(A[W]);m(F[W],se,S,null,G,J,le,pe,ye)}ue>Ie?we(F,G,J,!0,!1,Ee):w(A,S,M,G,J,le,pe,ye,Ee)},B=(F,A,S,M,G,J,le,pe,ye)=>{let ue=0;const Ie=A.length;let Ee=F.length-1,W=Ie-1;for(;ue<=Ee&&ue<=W;){const se=F[ue],Ae=A[ue]=ye?ii(A[ue]):Ss(A[ue]);if(Ks(se,Ae))m(se,Ae,S,null,G,J,le,pe,ye);else break;ue++}for(;ue<=Ee&&ue<=W;){const se=F[Ee],Ae=A[W]=ye?ii(A[W]):Ss(A[W]);if(Ks(se,Ae))m(se,Ae,S,null,G,J,le,pe,ye);else break;Ee--,W--}if(ue>Ee){if(ue<=W){const se=W+1,Ae=se<Ie?A[se].el:M;for(;ue<=W;)m(null,A[ue]=ye?ii(A[ue]):Ss(A[ue]),S,Ae,G,J,le,pe,ye),ue++}}else if(ue>W)for(;ue<=Ee;)Y(F[ue],G,J,!0),ue++;else{const se=ue,Ae=ue,Be=new Map;for(ue=Ae;ue<=W;ue++){const vs=A[ue]=ye?ii(A[ue]):Ss(A[ue]);vs.key!=null&&Be.set(vs.key,ue)}let Ke,dt=0;const Ft=W-Ae+1;let Kn=!1,_c=0;const ta=new Array(Ft);for(ue=0;ue<Ft;ue++)ta[ue]=0;for(ue=se;ue<=Ee;ue++){const vs=F[ue];if(dt>=Ft){Y(vs,G,J,!0);continue}let en;if(vs.key!=null)en=Be.get(vs.key);else for(Ke=Ae;Ke<=W;Ke++)if(ta[Ke-Ae]===0&&Ks(vs,A[Ke])){en=Ke;break}en===void 0?Y(vs,G,J,!0):(ta[en-Ae]=ue+1,en>=_c?_c=en:Kn=!0,m(vs,A[en],S,null,G,J,le,pe,ye),dt++)}const zf=Kn?PS(ta):xr;for(Ke=zf.length-1,ue=Ft-1;ue>=0;ue--){const vs=Ae+ue,en=A[vs],Yf=vs+1<Ie?A[vs+1].el:M;ta[ue]===0?m(null,en,S,Yf,G,J,le,pe,ye):Kn&&(Ke<0||ue!==zf[Ke]?j(en,S,Yf,2):Ke--)}}},j=(F,A,S,M,G=null)=>{const{el:J,type:le,transition:pe,children:ye,shapeFlag:ue}=F;if(ue&6){j(F.component.subTree,A,S,M);return}if(ue&128){F.suspense.move(A,S,M);return}if(ue&64){le.move(F,A,S,q);return}if(le===We){s(J,A,S);for(let Ee=0;Ee<ye.length;Ee++)j(ye[Ee],A,S,M);s(F.anchor,A,S);return}if(le===Vi){E(F,A,S);return}if(M!==2&&ue&1&&pe)if(M===0)pe.beforeEnter(J),s(J,A,S),Kt(()=>pe.enter(J),G);else{const{leave:Ee,delayLeave:W,afterLeave:se}=pe,Ae=()=>s(J,A,S),Be=()=>{Ee(J,()=>{Ae(),se&&se()})};W?W(J,Ae,Be):Be()}else s(J,A,S)},Y=(F,A,S,M=!1,G=!1)=>{const{type:J,props:le,ref:pe,children:ye,dynamicChildren:ue,shapeFlag:Ie,patchFlag:Ee,dirs:W}=F;if(pe!=null&&hl(pe,null,S,F,!0),Ie&256){A.ctx.deactivate(F);return}const se=Ie&1&&W,Ae=!Gi(F);let Be;if(Ae&&(Be=le&&le.onVnodeBeforeUnmount)&&ls(Be,A,F),Ie&6)Le(F.component,S,M);else{if(Ie&128){F.suspense.unmount(S,M);return}se&&nn(F,null,A,"beforeUnmount"),Ie&64?F.type.remove(F,A,S,G,q,M):ue&&(J!==We||Ee>0&&Ee&64)?we(ue,A,S,!1,!0):(J===We&&Ee&384||!G&&Ie&16)&&we(ye,A,S),M&&me(F)}(Ae&&(Be=le&&le.onVnodeUnmounted)||se)&&Kt(()=>{Be&&ls(Be,A,F),se&&nn(F,null,A,"unmounted")},S)},me=F=>{const{type:A,el:S,anchor:M,transition:G}=F;if(A===We){xe(S,M);return}if(A===Vi){T(F);return}const J=()=>{i(S),G&&!G.persisted&&G.afterLeave&&G.afterLeave()};if(F.shapeFlag&1&&G&&!G.persisted){const{leave:le,delayLeave:pe}=G,ye=()=>le(S,J);pe?pe(F.el,J,ye):ye()}else J()},xe=(F,A)=>{let S;for(;F!==A;)S=h(F),i(F),F=S;i(A)},Le=(F,A,S)=>{const{bum:M,scope:G,update:J,subTree:le,um:pe}=F;M&&_r(M),G.stop(),J&&(J.active=!1,Y(le,F,A,S)),pe&&Kt(pe,A),Kt(()=>{F.isUnmounted=!0},A),A&&A.pendingBranch&&!A.isUnmounted&&F.asyncDep&&!F.asyncResolved&&F.suspenseId===A.pendingId&&(A.deps--,A.deps===0&&A.resolve())},we=(F,A,S,M=!1,G=!1,J=0)=>{for(let le=J;le<F.length;le++)Y(F[le],A,S,M,G)},Q=F=>F.shapeFlag&6?Q(F.component.subTree):F.shapeFlag&128?F.suspense.next():h(F.anchor||F.el),oe=(F,A,S)=>{F==null?A._vnode&&Y(A._vnode,null,null,!0):m(A._vnode||null,F,A,null,null,null,S),ip(),ul(),A._vnode=F},q={p:m,um:Y,m:j,r:me,mt:N,mc:w,pc:V,pbc:R,n:Q,o:n};let ge,Re;return e&&([ge,Re]=e(q)),{render:oe,hydrate:ge,createApp:AS(oe,ge)}}function Li({effect:n,update:e},t){n.allowRecurse=e.allowRecurse=t}function Nh(n,e,t=!1){const s=n.children,i=e.children;if(_e(s)&&_e(i))for(let r=0;r<s.length;r++){const a=s[r];let o=i[r];o.shapeFlag&1&&!o.dynamicChildren&&((o.patchFlag<=0||o.patchFlag===32)&&(o=i[r]=ii(i[r]),o.el=a.el),t||Nh(a,o)),o.type===yi&&(o.el=a.el)}}function PS(n){const e=n.slice(),t=[0];let s,i,r,a,o;const l=n.length;for(s=0;s<l;s++){const c=n[s];if(c!==0){if(i=t[t.length-1],n[i]<c){e[s]=i,t.push(s);continue}for(r=0,a=t.length-1;r<a;)o=r+a>>1,n[t[o]]<c?r=o+1:a=o;c<n[t[r]]&&(r>0&&(e[s]=t[r-1]),t[r]=s)}}for(r=t.length,a=t[r-1];r-- >0;)t[r]=a,a=e[a];return t}const OS=n=>n.__isTeleport,va=n=>n&&(n.disabled||n.disabled===""),gp=n=>typeof SVGElement<"u"&&n instanceof SVGElement,td=(n,e)=>{const t=n&&n.to;return yt(t)?e?e(t):null:t},MS={__isTeleport:!0,process(n,e,t,s,i,r,a,o,l,c){const{mc:u,pc:d,pbc:h,o:{insert:f,querySelector:p,createText:m,createComment:y}}=c,g=va(e.props);let{shapeFlag:v,children:E,dynamicChildren:T}=e;if(n==null){const b=e.el=m(""),L=e.anchor=m("");f(b,t,s),f(L,t,s);const x=e.target=td(e.props,p),w=e.targetAnchor=m("");x&&(f(w,x),a=a||gp(x));const k=(R,P)=>{v&16&&u(E,R,P,i,r,a,o,l)};g?k(t,L):x&&k(x,w)}else{e.el=n.el;const b=e.anchor=n.anchor,L=e.target=n.target,x=e.targetAnchor=n.targetAnchor,w=va(n.props),k=w?t:L,R=w?b:x;if(a=a||gp(L),T?(h(n.dynamicChildren,T,k,i,r,a,o),Nh(n,e,!0)):l||d(n,e,k,R,i,r,a,o,!1),g)w?e.props&&n.props&&e.props.to!==n.props.to&&(e.props.to=n.props.to):Eo(e,t,b,c,1);else if((e.props&&e.props.to)!==(n.props&&n.props.to)){const P=e.target=td(e.props,p);P&&Eo(e,P,null,c,0)}else w&&Eo(e,L,x,c,1)}o1(e)},remove(n,e,t,s,{um:i,o:{remove:r}},a){const{shapeFlag:o,children:l,anchor:c,targetAnchor:u,target:d,props:h}=n;if(d&&r(u),a&&r(c),o&16){const f=a||!va(h);for(let p=0;p<l.length;p++){const m=l[p];i(m,e,t,f,!!m.dynamicChildren)}}},move:Eo,hydrate:FS};function Eo(n,e,t,{o:{insert:s},m:i},r=2){r===0&&s(n.targetAnchor,e,t);const{el:a,anchor:o,shapeFlag:l,children:c,props:u}=n,d=r===2;if(d&&s(a,e,t),(!d||va(u))&&l&16)for(let h=0;h<c.length;h++)i(c[h],e,t,2);d&&s(o,e,t)}function FS(n,e,t,s,i,r,{o:{nextSibling:a,parentNode:o,querySelector:l}},c){const u=e.target=td(e.props,l);if(u){const d=u._lpa||u.firstChild;if(e.shapeFlag&16)if(va(e.props))e.anchor=c(a(n),e,o(n),t,s,i,r),e.targetAnchor=d;else{e.anchor=a(n);let h=d;for(;h;)if(h=a(h),h&&h.nodeType===8&&h.data==="teleport anchor"){e.targetAnchor=h,u._lpa=e.targetAnchor&&a(e.targetAnchor);break}c(d,e,u,t,s,i,r)}o1(e)}return e.anchor&&a(e.anchor)}const NS=MS;function o1(n){const e=n.ctx;if(e&&e.ut){let t=n.children[0].el;for(;t&&t!==n.targetAnchor;)t.nodeType===1&&t.setAttribute("data-v-owner",e.uid),t=t.nextSibling;e.ut()}}const We=Symbol.for("v-fgt"),yi=Symbol.for("v-txt"),es=Symbol.for("v-cmt"),Vi=Symbol.for("v-stc"),Ea=[];let ds=null;function ve(n=!1){Ea.push(ds=n?null:[])}function l1(){Ea.pop(),ds=Ea[Ea.length-1]||null}let Yi=1;function sd(n){Yi+=n}function c1(n){return n.dynamicChildren=Yi>0?ds||xr:null,l1(),Yi>0&&ds&&ds.push(n),n}function Te(n,e,t,s,i,r){return c1(_(n,e,t,s,i,r,!0))}function qr(n,e,t,s,i){return c1(fe(n,e,t,s,i,!0))}function vi(n){return n?n.__v_isVNode===!0:!1}function Ks(n,e){return n.type===e.type&&n.key===e.key}function BS(n){}const tc="__vInternal",u1=({key:n})=>n??null,Wo=({ref:n,ref_key:e,ref_for:t})=>(typeof n=="number"&&(n=""+n),n!=null?yt(n)||wt(n)||Ue(n)?{i:$t,r:n,k:e,f:!!t}:n:null);function _(n,e=null,t=null,s=0,i=null,r=n===We?0:1,a=!1,o=!1){const l={__v_isVNode:!0,__v_skip:!0,type:n,props:e,key:e&&u1(e),ref:e&&Wo(e),scopeId:Ql,slotScopeIds:null,children:t,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:r,patchFlag:s,dynamicProps:i,dynamicChildren:null,appContext:null,ctx:$t};return o?(Uh(l,t),r&128&&n.normalize(l)):t&&(l.shapeFlag|=yt(t)?8:16),Yi>0&&!a&&ds&&(l.patchFlag>0||r&6)&&l.patchFlag!==32&&ds.push(l),l}const fe=US;function US(n,e=null,t=null,s=0,i=null,r=!1){if((!n||n===Wy)&&(n=es),vi(n)){const o=vn(n,e,!0);return t&&Uh(o,t),Yi>0&&!r&&ds&&(o.shapeFlag&6?ds[ds.indexOf(n)]=o:ds.push(o)),o.patchFlag|=-2,o}if(WS(n)&&(n=n.__vccOpts),e){e=Bh(e);let{class:o,style:l}=e;o&&!yt(o)&&(e.class=ft(o)),lt(l)&&(vh(l)&&!_e(l)&&(l=gt({},l)),e.style=de(l))}const a=yt(n)?1:Py(n)?128:OS(n)?64:lt(n)?4:Ue(n)?2:0;return _(n,e,t,s,i,a,r,!0)}function Bh(n){return n?vh(n)||tc in n?gt({},n):n:null}function vn(n,e,t=!1){const{props:s,ref:i,patchFlag:r,children:a}=n,o=e?Xr(s||{},e):s;return{__v_isVNode:!0,__v_skip:!0,type:n.type,props:o,key:o&&u1(o),ref:e&&e.ref?t&&i?_e(i)?i.concat(Wo(e)):[i,Wo(e)]:Wo(e):i,scopeId:n.scopeId,slotScopeIds:n.slotScopeIds,children:a,target:n.target,targetAnchor:n.targetAnchor,staticCount:n.staticCount,shapeFlag:n.shapeFlag,patchFlag:e&&n.type!==We?r===-1?16:r|16:r,dynamicProps:n.dynamicProps,dynamicChildren:n.dynamicChildren,appContext:n.appContext,dirs:n.dirs,transition:n.transition,component:n.component,suspense:n.suspense,ssContent:n.ssContent&&vn(n.ssContent),ssFallback:n.ssFallback&&vn(n.ssFallback),el:n.el,anchor:n.anchor,ctx:n.ctx,ce:n.ce}}function nt(n=" ",e=0){return fe(yi,null,n,e)}function d1(n,e){const t=fe(Vi,null,n);return t.staticCount=e,t}function et(n="",e=!1){return e?(ve(),qr(es,null,n)):fe(es,null,n)}function Ss(n){return n==null||typeof n=="boolean"?fe(es):_e(n)?fe(We,null,n.slice()):typeof n=="object"?ii(n):fe(yi,null,String(n))}function ii(n){return n.el===null&&n.patchFlag!==-1||n.memo?n:vn(n)}function Uh(n,e){let t=0;const{shapeFlag:s}=n;if(e==null)e=null;else if(_e(e))t=16;else if(typeof e=="object")if(s&65){const i=e.default;i&&(i._c&&(i._d=!1),Uh(n,i()),i._c&&(i._d=!0));return}else{t=32;const i=e._;!i&&!(tc in e)?e._ctx=$t:i===3&&$t&&($t.slots._===1?e._=1:(e._=2,n.patchFlag|=1024))}else Ue(e)?(e={default:e,_ctx:$t},t=32):(e=String(e),s&64?(t=16,e=[nt(e)]):t=8);n.children=e,n.shapeFlag|=t}function Xr(...n){const e={};for(let t=0;t<n.length;t++){const s=n[t];for(const i in s)if(i==="class")e.class!==s.class&&(e.class=ft([e.class,s.class]));else if(i==="style")e.style=de([e.style,s.style]);else if(Za(i)){const r=e[i],a=s[i];a&&r!==a&&!(_e(r)&&r.includes(a))&&(e[i]=r?[].concat(r,a):a)}else i!==""&&(e[i]=s[i])}return e}function ls(n,e,t,s=null){_s(n,e,7,[t,s])}const $S=Jy();let jS=0;function h1(n,e,t){const s=n.type,i=(e?e.appContext:n.appContext)||$S,r={uid:jS++,vnode:n,type:s,parent:e,appContext:i,root:null,next:null,subTree:null,effect:null,update:null,scope:new hh(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(i.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:e1(s,i),emitsOptions:ky(s,i),emit:null,emitted:null,propsDefaults:rt,inheritAttrs:s.inheritAttrs,ctx:rt,data:rt,props:rt,attrs:rt,slots:rt,refs:rt,setupState:rt,setupContext:null,attrsProxy:null,slotsProxy:null,suspense:t,suspenseId:t?t.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return r.ctx={_:r},r.root=e?e.root:r,r.emit=Ox.bind(null,r),n.ce&&n.ce(r),r}let Lt=null;const ts=()=>Lt||$t;let $h,tr,yp="__VUE_INSTANCE_SETTERS__";(tr=Ku()[yp])||(tr=Ku()[yp]=[]),tr.push(n=>Lt=n),$h=n=>{tr.length>1?tr.forEach(e=>e(n)):tr[0](n)};const Ei=n=>{$h(n),n.scope.on()},fi=()=>{Lt&&Lt.scope.off(),$h(null)};function f1(n){return n.vnode.shapeFlag&4}let Pr=!1;function p1(n,e=!1){Pr=e;const{props:t,children:s}=n.vnode,i=f1(n);wS(n,t,i,e),CS(n,s);const r=i?GS(n,e):void 0;return Pr=!1,r}function GS(n,e){const t=n.type;n.accessCache=Object.create(null),n.proxy=hi(new Proxy(n.ctx,Qu));const{setup:s}=t;if(s){const i=n.setupContext=s.length>1?g1(n):null;Ei(n),zr();const r=$n(s,n,0,[n.props,i]);if(Yr(),fi(),uh(r)){if(r.then(fi,fi),e)return r.then(a=>{nd(n,a,e)}).catch(a=>{Ji(a,n,0)});n.asyncDep=r}else nd(n,r,e)}else m1(n,e)}function nd(n,e,t){Ue(e)?n.type.__ssrInlineRender?n.ssrRender=e:n.render=e:lt(e)&&(n.setupState=xh(e)),m1(n,t)}let fl,id;function VS(n){fl=n,id=e=>{e.render._rc&&(e.withProxy=new Proxy(e.ctx,rS))}}const HS=()=>!fl;function m1(n,e,t){const s=n.type;if(!n.render){if(!e&&fl&&!s.render){const i=s.template||Mh(n).template;if(i){const{isCustomElement:r,compilerOptions:a}=n.appContext.config,{delimiters:o,compilerOptions:l}=s,c=gt(gt({isCustomElement:r,delimiters:o},a),l);s.render=fl(i,c)}}n.render=s.render||Ys,id&&id(n)}{Ei(n),zr();try{ES(n)}finally{Yr(),fi()}}}function KS(n){return n.attrsProxy||(n.attrsProxy=new Proxy(n.attrs,{get(e,t){return ps(n,"get","$attrs"),e[t]}}))}function g1(n){const e=t=>{n.exposed=t||{}};return{get attrs(){return KS(n)},slots:n.slots,emit:n.emit,expose:e}}function sc(n){if(n.exposed)return n.exposeProxy||(n.exposeProxy=new Proxy(xh(hi(n.exposed)),{get(e,t){if(t in e)return e[t];if(t in ya)return ya[t](n)},has(e,t){return t in e||t in ya}}))}function rd(n,e=!0){return Ue(n)?n.displayName||n.name:n.name||e&&n.__name}function WS(n){return Ue(n)&&"__vccOpts"in n}const Ve=(n,e)=>wx(n,e,Pr);function zt(n,e,t){const s=arguments.length;return s===2?lt(e)&&!_e(e)?vi(e)?fe(n,null,[e]):fe(n,e):fe(n,null,e):(s>3?t=Array.prototype.slice.call(arguments,2):s===3&&vi(t)&&(t=[t]),fe(n,e,t))}const y1=Symbol.for("v-scx"),v1=()=>fs(y1);function zS(){}function YS(n,e,t,s){const i=t[s];if(i&&E1(i,n))return i;const r=e();return r.memo=n.slice(),t[s]=r}function E1(n,e){const t=n.memo;if(t.length!=e.length)return!1;for(let s=0;s<t.length;s++)if(pi(t[s],e[s]))return!1;return Yi>0&&ds&&ds.push(n),!0}const T1="3.3.6",qS={createComponentInstance:h1,setupComponent:p1,renderComponentRoot:Ko,setCurrentRenderingInstance:Ma,isVNode:vi,normalizeVNode:Ss},XS=qS,QS=null,JS=null,ZS="http://www.w3.org/2000/svg",Pi=typeof document<"u"?document:null,vp=Pi&&Pi.createElement("template"),e_={insert:(n,e,t)=>{e.insertBefore(n,t||null)},remove:n=>{const e=n.parentNode;e&&e.removeChild(n)},createElement:(n,e,t,s)=>{const i=e?Pi.createElementNS(ZS,n):Pi.createElement(n,t?{is:t}:void 0);return n==="select"&&s&&s.multiple!=null&&i.setAttribute("multiple",s.multiple),i},createText:n=>Pi.createTextNode(n),createComment:n=>Pi.createComment(n),setText:(n,e)=>{n.nodeValue=e},setElementText:(n,e)=>{n.textContent=e},parentNode:n=>n.parentNode,nextSibling:n=>n.nextSibling,querySelector:n=>Pi.querySelector(n),setScopeId(n,e){n.setAttribute(e,"")},insertStaticContent(n,e,t,s,i,r){const a=t?t.previousSibling:e.lastChild;if(i&&(i===r||i.nextSibling))for(;e.insertBefore(i.cloneNode(!0),t),!(i===r||!(i=i.nextSibling)););else{vp.innerHTML=s?`<svg>${n}</svg>`:n;const o=vp.content;if(s){const l=o.firstChild;for(;l.firstChild;)o.appendChild(l.firstChild);o.removeChild(l)}e.insertBefore(o,t)}return[a?a.nextSibling:e.firstChild,t?t.previousSibling:e.lastChild]}},Yn="transition",sa="animation",Or=Symbol("_vtc"),En=(n,{slots:e})=>zt(Ny,x1(n),e);En.displayName="Transition";const b1={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},t_=En.props=gt({},Ih,b1),wi=(n,e=[])=>{_e(n)?n.forEach(t=>t(...e)):n&&n(...e)},Ep=n=>n?_e(n)?n.some(e=>e.length>1):n.length>1:!1;function x1(n){const e={};for(const D in n)D in b1||(e[D]=n[D]);if(n.css===!1)return e;const{name:t="v",type:s,duration:i,enterFromClass:r=`${t}-enter-from`,enterActiveClass:a=`${t}-enter-active`,enterToClass:o=`${t}-enter-to`,appearFromClass:l=r,appearActiveClass:c=a,appearToClass:u=o,leaveFromClass:d=`${t}-leave-from`,leaveActiveClass:h=`${t}-leave-active`,leaveToClass:f=`${t}-leave-to`}=n,p=s_(i),m=p&&p[0],y=p&&p[1],{onBeforeEnter:g,onEnter:v,onEnterCancelled:E,onLeave:T,onLeaveCancelled:b,onBeforeAppear:L=g,onAppear:x=v,onAppearCancelled:w=E}=e,k=(D,O,N)=>{ti(D,O?u:o),ti(D,O?c:a),N&&N()},R=(D,O)=>{D._isLeaving=!1,ti(D,d),ti(D,f),ti(D,h),O&&O()},P=D=>(O,N)=>{const $=D?x:v,K=()=>k(O,D,N);wi($,[O,K]),Tp(()=>{ti(O,D?l:r),Rn(O,D?u:o),Ep($)||bp(O,s,m,K)})};return gt(e,{onBeforeEnter(D){wi(g,[D]),Rn(D,r),Rn(D,a)},onBeforeAppear(D){wi(L,[D]),Rn(D,l),Rn(D,c)},onEnter:P(!1),onAppear:P(!0),onLeave(D,O){D._isLeaving=!0;const N=()=>R(D,O);Rn(D,d),_1(),Rn(D,h),Tp(()=>{D._isLeaving&&(ti(D,d),Rn(D,f),Ep(T)||bp(D,s,y,N))}),wi(T,[D,N])},onEnterCancelled(D){k(D,!1),wi(E,[D])},onAppearCancelled(D){k(D,!0),wi(w,[D])},onLeaveCancelled(D){R(D),wi(b,[D])}})}function s_(n){if(n==null)return null;if(lt(n))return[Cc(n.enter),Cc(n.leave)];{const e=Cc(n);return[e,e]}}function Cc(n){return ll(n)}function Rn(n,e){e.split(/\s+/).forEach(t=>t&&n.classList.add(t)),(n[Or]||(n[Or]=new Set)).add(e)}function ti(n,e){e.split(/\s+/).forEach(s=>s&&n.classList.remove(s));const t=n[Or];t&&(t.delete(e),t.size||(n[Or]=void 0))}function Tp(n){requestAnimationFrame(()=>{requestAnimationFrame(n)})}let n_=0;function bp(n,e,t,s){const i=n._endId=++n_,r=()=>{i===n._endId&&s()};if(t)return setTimeout(r,t);const{type:a,timeout:o,propCount:l}=S1(n,e);if(!a)return s();const c=a+"end";let u=0;const d=()=>{n.removeEventListener(c,h),r()},h=f=>{f.target===n&&++u>=l&&d()};setTimeout(()=>{u<l&&d()},o+1),n.addEventListener(c,h)}function S1(n,e){const t=window.getComputedStyle(n),s=p=>(t[p]||"").split(", "),i=s(`${Yn}Delay`),r=s(`${Yn}Duration`),a=xp(i,r),o=s(`${sa}Delay`),l=s(`${sa}Duration`),c=xp(o,l);let u=null,d=0,h=0;e===Yn?a>0&&(u=Yn,d=a,h=r.length):e===sa?c>0&&(u=sa,d=c,h=l.length):(d=Math.max(a,c),u=d>0?a>c?Yn:sa:null,h=u?u===Yn?r.length:l.length:0);const f=u===Yn&&/\b(transform|all)(,|$)/.test(s(`${Yn}Property`).toString());return{type:u,timeout:d,propCount:h,hasTransform:f}}function xp(n,e){for(;n.length<e.length;)n=n.concat(n);return Math.max(...e.map((t,s)=>Sp(t)+Sp(n[s])))}function Sp(n){return n==="auto"?0:Number(n.slice(0,-1).replace(",","."))*1e3}function _1(){return document.body.offsetHeight}function i_(n,e,t){const s=n[Or];s&&(e=(e?[e,...s]:[...s]).join(" ")),e==null?n.removeAttribute("class"):t?n.setAttribute("class",e):n.className=e}const jh=Symbol("_vod"),ot={beforeMount(n,{value:e},{transition:t}){n[jh]=n.style.display==="none"?"":n.style.display,t&&e?t.beforeEnter(n):na(n,e)},mounted(n,{value:e},{transition:t}){t&&e&&t.enter(n)},updated(n,{value:e,oldValue:t},{transition:s}){!e!=!t&&(s?e?(s.beforeEnter(n),na(n,!0),s.enter(n)):s.leave(n,()=>{na(n,!1)}):na(n,e))},beforeUnmount(n,{value:e}){na(n,e)}};function na(n,e){n.style.display=e?n[jh]:"none"}function r_(){ot.getSSRProps=({value:n})=>{if(!n)return{style:{display:"none"}}}}function a_(n,e,t){const s=n.style,i=yt(t);if(t&&!i){if(e&&!yt(e))for(const r in e)t[r]==null&&ad(s,r,"");for(const r in t)ad(s,r,t[r])}else{const r=s.display;i?e!==t&&(s.cssText=t):e&&n.removeAttribute("style"),jh in n&&(s.display=r)}}const _p=/\s*!important$/;function ad(n,e,t){if(_e(t))t.forEach(s=>ad(n,e,s));else if(t==null&&(t=""),e.startsWith("--"))n.setProperty(e,t);else{const s=o_(n,e);_p.test(t)?n.setProperty(Ms(s),t.replace(_p,""),"important"):n[s]=t}}const Ap=["Webkit","Moz","ms"],Dc={};function o_(n,e){const t=Dc[e];if(t)return t;let s=hs(e);if(s!=="filter"&&s in n)return Dc[e]=s;s=eo(s);for(let i=0;i<Ap.length;i++){const r=Ap[i]+s;if(r in n)return Dc[e]=r}return e}const Lp="http://www.w3.org/1999/xlink";function l_(n,e,t,s,i){if(s&&e.startsWith("xlink:"))t==null?n.removeAttributeNS(Lp,e.slice(6,e.length)):n.setAttributeNS(Lp,e,t);else{const r=Hb(e);t==null||r&&!uy(t)?n.removeAttribute(e):n.setAttribute(e,r?"":t)}}function c_(n,e,t,s,i,r,a){if(e==="innerHTML"||e==="textContent"){s&&a(s,i,r),n[e]=t??"";return}const o=n.tagName;if(e==="value"&&o!=="PROGRESS"&&!o.includes("-")){n._value=t;const c=o==="OPTION"?n.getAttribute("value"):n.value,u=t??"";c!==u&&(n.value=u),t==null&&n.removeAttribute(e);return}let l=!1;if(t===""||t==null){const c=typeof n[e];c==="boolean"?t=uy(t):t==null&&c==="string"?(t="",l=!0):c==="number"&&(t=0,l=!0)}try{n[e]=t}catch{}l&&n.removeAttribute(e)}function Mn(n,e,t,s){n.addEventListener(e,t,s)}function u_(n,e,t,s){n.removeEventListener(e,t,s)}const wp=Symbol("_vei");function d_(n,e,t,s,i=null){const r=n[wp]||(n[wp]={}),a=r[e];if(s&&a)a.value=s;else{const[o,l]=h_(e);if(s){const c=r[e]=m_(s,i);Mn(n,o,c,l)}else a&&(u_(n,o,a,l),r[e]=void 0)}}const Rp=/(?:Once|Passive|Capture)$/;function h_(n){let e;if(Rp.test(n)){e={};let s;for(;s=n.match(Rp);)n=n.slice(0,n.length-s[0].length),e[s[0].toLowerCase()]=!0}return[n[2]===":"?n.slice(3):Ms(n.slice(2)),e]}let kc=0;const f_=Promise.resolve(),p_=()=>kc||(f_.then(()=>kc=0),kc=Date.now());function m_(n,e){const t=s=>{if(!s._vts)s._vts=Date.now();else if(s._vts<=t.attached)return;_s(g_(s,t.value),e,5,[s])};return t.value=n,t.attached=p_(),t}function g_(n,e){if(_e(e)){const t=n.stopImmediatePropagation;return n.stopImmediatePropagation=()=>{t.call(n),n._stopped=!0},e.map(s=>i=>!i._stopped&&s&&s(i))}else return e}const Ip=/^on[a-z]/,y_=(n,e,t,s,i=!1,r,a,o,l)=>{e==="class"?i_(n,s,i):e==="style"?a_(n,t,s):Za(e)?lh(e)||d_(n,e,t,s,a):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):v_(n,e,s,i))?c_(n,e,s,r,a,o,l):(e==="true-value"?n._trueValue=s:e==="false-value"&&(n._falseValue=s),l_(n,e,s,i))};function v_(n,e,t,s){return s?!!(e==="innerHTML"||e==="textContent"||e in n&&Ip.test(e)&&Ue(t)):e==="spellcheck"||e==="draggable"||e==="translate"||e==="form"||e==="list"&&n.tagName==="INPUT"||e==="type"&&n.tagName==="TEXTAREA"||Ip.test(e)&&yt(t)?!1:e in n}/*! #__NO_SIDE_EFFECTS__ */function A1(n,e){const t=Ze(n);class s extends nc{constructor(r){super(t,r,e)}}return s.def=t,s}/*! #__NO_SIDE_EFFECTS__ */const E_=n=>A1(n,F1),T_=typeof HTMLElement<"u"?HTMLElement:class{};class nc extends T_{constructor(e,t={},s){super(),this._def=e,this._props=t,this._instance=null,this._connected=!1,this._resolved=!1,this._numberProps=null,this._ob=null,this.shadowRoot&&s?s(this._createVNode(),this.shadowRoot):(this.attachShadow({mode:"open"}),this._def.__asyncLoader||this._resolveProps(this._def))}connectedCallback(){this._connected=!0,this._instance||(this._resolved?this._update():this._resolveDef())}disconnectedCallback(){this._connected=!1,this._ob&&(this._ob.disconnect(),this._ob=null),Gn(()=>{this._connected||(cd(null,this.shadowRoot),this._instance=null)})}_resolveDef(){this._resolved=!0;for(let s=0;s<this.attributes.length;s++)this._setAttr(this.attributes[s].name);this._ob=new MutationObserver(s=>{for(const i of s)this._setAttr(i.attributeName)}),this._ob.observe(this,{attributes:!0});const e=(s,i=!1)=>{const{props:r,styles:a}=s;let o;if(r&&!_e(r))for(const l in r){const c=r[l];(c===Number||c&&c.type===Number)&&(l in this._props&&(this._props[l]=ll(this._props[l])),(o||(o=Object.create(null)))[hs(l)]=!0)}this._numberProps=o,i&&this._resolveProps(s),this._applyStyles(a),this._update()},t=this._def.__asyncLoader;t?t().then(s=>e(s,!0)):e(this._def)}_resolveProps(e){const{props:t}=e,s=_e(t)?t:Object.keys(t||{});for(const i of Object.keys(this))i[0]!=="_"&&s.includes(i)&&this._setProp(i,this[i],!0,!1);for(const i of s.map(hs))Object.defineProperty(this,i,{get(){return this._getProp(i)},set(r){this._setProp(i,r)}})}_setAttr(e){let t=this.getAttribute(e);const s=hs(e);this._numberProps&&this._numberProps[s]&&(t=ll(t)),this._setProp(s,t,!1)}_getProp(e){return this._props[e]}_setProp(e,t,s=!0,i=!0){t!==this._props[e]&&(this._props[e]=t,i&&this._instance&&this._update(),s&&(t===!0?this.setAttribute(Ms(e),""):typeof t=="string"||typeof t=="number"?this.setAttribute(Ms(e),t+""):t||this.removeAttribute(Ms(e))))}_update(){cd(this._createVNode(),this.shadowRoot)}_createVNode(){const e=fe(this._def,gt({},this._props));return this._instance||(e.ce=t=>{this._instance=t,t.isCE=!0;const s=(r,a)=>{this.dispatchEvent(new CustomEvent(r,{detail:a}))};t.emit=(r,...a)=>{s(r,a),Ms(r)!==r&&s(Ms(r),a)};let i=this;for(;i=i&&(i.parentNode||i.host);)if(i instanceof nc){t.parent=i._instance,t.provides=i._instance.provides;break}}),e}_applyStyles(e){e&&e.forEach(t=>{const s=document.createElement("style");s.textContent=t,this.shadowRoot.appendChild(s)})}}function b_(n="$style"){{const e=ts();if(!e)return rt;const t=e.type.__cssModules;if(!t)return rt;const s=t[n];return s||rt}}function Zi(n){const e=ts();if(!e)return;const t=e.ut=(i=n(e.proxy))=>{Array.from(document.querySelectorAll(`[data-v-owner="${e.uid}"]`)).forEach(r=>ld(r,i))},s=()=>{const i=n(e.proxy);od(e.subTree,i),t(i)};My(s),vt(()=>{const i=new MutationObserver(s);i.observe(e.subTree.el.parentNode,{childList:!0}),Hn(()=>i.disconnect())})}function od(n,e){if(n.shapeFlag&128){const t=n.suspense;n=t.activeBranch,t.pendingBranch&&!t.isHydrating&&t.effects.push(()=>{od(t.activeBranch,e)})}for(;n.component;)n=n.component.subTree;if(n.shapeFlag&1&&n.el)ld(n.el,e);else if(n.type===We)n.children.forEach(t=>od(t,e));else if(n.type===Vi){let{el:t,anchor:s}=n;for(;t&&(ld(t,e),t!==s);)t=t.nextSibling}}function ld(n,e){if(n.nodeType===1){const t=n.style;for(const s in e)t.setProperty(`--${s}`,e[s])}}const L1=new WeakMap,w1=new WeakMap,pl=Symbol("_moveCb"),Cp=Symbol("_enterCb"),R1={name:"TransitionGroup",props:gt({},t_,{tag:String,moveClass:String}),setup(n,{slots:e}){const t=ts(),s=Rh();let i,r;return Js(()=>{if(!i.length)return;const a=n.moveClass||`${n.name||"v"}-move`;if(!w_(i[0].el,t.vnode.el,a))return;i.forEach(__),i.forEach(A_);const o=i.filter(L_);_1(),o.forEach(l=>{const c=l.el,u=c.style;Rn(c,a),u.transform=u.webkitTransform=u.transitionDuration="";const d=c[pl]=h=>{h&&h.target!==c||(!h||/transform$/.test(h.propertyName))&&(c.removeEventListener("transitionend",d),c[pl]=null,ti(c,a))};c.addEventListener("transitionend",d)})}),()=>{const a=ze(n),o=x1(a);let l=a.tag||We;i=r,r=e.default?Jl(e.default()):[];for(let c=0;c<r.length;c++){const u=r[c];u.key!=null&&zi(u,kr(u,o,s,t))}if(i)for(let c=0;c<i.length;c++){const u=i[c];zi(u,kr(u,o,s,t)),L1.set(u,u.el.getBoundingClientRect())}return fe(l,null,r)}}},x_=n=>delete n.mode;R1.props;const S_=R1;function __(n){const e=n.el;e[pl]&&e[pl](),e[Cp]&&e[Cp]()}function A_(n){w1.set(n,n.el.getBoundingClientRect())}function L_(n){const e=L1.get(n),t=w1.get(n),s=e.left-t.left,i=e.top-t.top;if(s||i){const r=n.el.style;return r.transform=r.webkitTransform=`translate(${s}px,${i}px)`,r.transitionDuration="0s",n}}function w_(n,e,t){const s=n.cloneNode(),i=n[Or];i&&i.forEach(o=>{o.split(/\s+/).forEach(l=>l&&s.classList.remove(l))}),t.split(/\s+/).forEach(o=>o&&s.classList.add(o)),s.style.display="none";const r=e.nodeType===1?e:e.parentNode;r.appendChild(s);const{hasTransform:a}=S1(s);return r.removeChild(s),a}const Ti=n=>{const e=n.props["onUpdate:modelValue"]||!1;return _e(e)?t=>_r(e,t):e};function R_(n){n.target.composing=!0}function Dp(n){const e=n.target;e.composing&&(e.composing=!1,e.dispatchEvent(new Event("input")))}const Fs=Symbol("_assign"),ml={created(n,{modifiers:{lazy:e,trim:t,number:s}},i){n[Fs]=Ti(i);const r=s||i.props&&i.props.type==="number";Mn(n,e?"change":"input",a=>{if(a.target.composing)return;let o=n.value;t&&(o=o.trim()),r&&(o=ol(o)),n[Fs](o)}),t&&Mn(n,"change",()=>{n.value=n.value.trim()}),e||(Mn(n,"compositionstart",R_),Mn(n,"compositionend",Dp),Mn(n,"change",Dp))},mounted(n,{value:e}){n.value=e??""},beforeUpdate(n,{value:e,modifiers:{lazy:t,trim:s,number:i}},r){if(n[Fs]=Ti(r),n.composing||document.activeElement===n&&n.type!=="range"&&(t||s&&n.value.trim()===e||(i||n.type==="number")&&ol(n.value)===e))return;const a=e??"";n.value!==a&&(n.value=a)}},Gh={deep:!0,created(n,e,t){n[Fs]=Ti(t),Mn(n,"change",()=>{const s=n._modelValue,i=Mr(n),r=n.checked,a=n[Fs];if(_e(s)){const o=Hl(s,i),l=o!==-1;if(r&&!l)a(s.concat(i));else if(!r&&l){const c=[...s];c.splice(o,1),a(c)}}else if(Qi(s)){const o=new Set(s);r?o.add(i):o.delete(i),a(o)}else a(C1(n,r))})},mounted:kp,beforeUpdate(n,e,t){n[Fs]=Ti(t),kp(n,e,t)}};function kp(n,{value:e,oldValue:t},s){n._modelValue=e,_e(e)?n.checked=Hl(e,s.props.value)>-1:Qi(e)?n.checked=e.has(s.props.value):e!==t&&(n.checked=mi(e,C1(n,!0)))}const Vh={created(n,{value:e},t){n.checked=mi(e,t.props.value),n[Fs]=Ti(t),Mn(n,"change",()=>{n[Fs](Mr(n))})},beforeUpdate(n,{value:e,oldValue:t},s){n[Fs]=Ti(s),e!==t&&(n.checked=mi(e,s.props.value))}},I1={deep:!0,created(n,{value:e,modifiers:{number:t}},s){const i=Qi(e);Mn(n,"change",()=>{const r=Array.prototype.filter.call(n.options,a=>a.selected).map(a=>t?ol(Mr(a)):Mr(a));n[Fs](n.multiple?i?new Set(r):r:r[0])}),n[Fs]=Ti(s)},mounted(n,{value:e}){Pp(n,e)},beforeUpdate(n,e,t){n[Fs]=Ti(t)},updated(n,{value:e}){Pp(n,e)}};function Pp(n,e){const t=n.multiple;if(!(t&&!_e(e)&&!Qi(e))){for(let s=0,i=n.options.length;s<i;s++){const r=n.options[s],a=Mr(r);if(t)_e(e)?r.selected=Hl(e,a)>-1:r.selected=e.has(a);else if(mi(Mr(r),e)){n.selectedIndex!==s&&(n.selectedIndex=s);return}}!t&&n.selectedIndex!==-1&&(n.selectedIndex=-1)}}function Mr(n){return"_value"in n?n._value:n.value}function C1(n,e){const t=e?"_trueValue":"_falseValue";return t in n?n[t]:e}const D1={created(n,e,t){To(n,e,t,null,"created")},mounted(n,e,t){To(n,e,t,null,"mounted")},beforeUpdate(n,e,t,s){To(n,e,t,s,"beforeUpdate")},updated(n,e,t,s){To(n,e,t,s,"updated")}};function k1(n,e){switch(n){case"SELECT":return I1;case"TEXTAREA":return ml;default:switch(e){case"checkbox":return Gh;case"radio":return Vh;default:return ml}}}function To(n,e,t,s,i){const a=k1(n.tagName,t.props&&t.props.type)[i];a&&a(n,e,t,s)}function I_(){ml.getSSRProps=({value:n})=>({value:n}),Vh.getSSRProps=({value:n},e)=>{if(e.props&&mi(e.props.value,n))return{checked:!0}},Gh.getSSRProps=({value:n},e)=>{if(_e(n)){if(e.props&&Hl(n,e.props.value)>-1)return{checked:!0}}else if(Qi(n)){if(e.props&&n.has(e.props.value))return{checked:!0}}else if(n)return{checked:!0}},D1.getSSRProps=(n,e)=>{if(typeof e.type!="string")return;const t=k1(e.type.toUpperCase(),e.props&&e.props.type);if(t.getSSRProps)return t.getSSRProps(n,e)}}const C_=["ctrl","shift","alt","meta"],D_={stop:n=>n.stopPropagation(),prevent:n=>n.preventDefault(),self:n=>n.target!==n.currentTarget,ctrl:n=>!n.ctrlKey,shift:n=>!n.shiftKey,alt:n=>!n.altKey,meta:n=>!n.metaKey,left:n=>"button"in n&&n.button!==0,middle:n=>"button"in n&&n.button!==1,right:n=>"button"in n&&n.button!==2,exact:(n,e)=>C_.some(t=>n[`${t}Key`]&&!e.includes(t))},Ua=(n,e)=>(t,...s)=>{for(let i=0;i<e.length;i++){const r=D_[e[i]];if(r&&r(t,e))return}return n(t,...s)},k_={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},Ws=(n,e)=>t=>{if(!("key"in t))return;const s=Ms(t.key);if(e.some(i=>i===s||k_[i]===s))return n(t)},P1=gt({patchProp:y_},e_);let Ta,Op=!1;function O1(){return Ta||(Ta=i1(P1))}function M1(){return Ta=Op?Ta:r1(P1),Op=!0,Ta}const cd=(...n)=>{O1().render(...n)},F1=(...n)=>{M1().hydrate(...n)},N1=(...n)=>{const e=O1().createApp(...n),{mount:t}=e;return e.mount=s=>{const i=B1(s);if(!i)return;const r=e._component;!Ue(r)&&!r.render&&!r.template&&(r.template=i.innerHTML),i.innerHTML="";const a=t(i,!1,i instanceof SVGElement);return i instanceof Element&&(i.removeAttribute("v-cloak"),i.setAttribute("data-v-app","")),a},e},P_=(...n)=>{const e=M1().createApp(...n),{mount:t}=e;return e.mount=s=>{const i=B1(s);if(i)return t(i,!0,i instanceof SVGElement)},e};function B1(n){return yt(n)?document.querySelector(n):n}let Mp=!1;const O_=()=>{Mp||(Mp=!0,I_(),r_())},M_=()=>{},F_=Object.freeze(Object.defineProperty({__proto__:null,BaseTransition:Ny,BaseTransitionPropsValidators:Ih,Comment:es,EffectScope:hh,Fragment:We,KeepAlive:Zx,ReactiveEffect:Dr,Static:Vi,Suspense:jx,Teleport:NS,Text:yi,Transition:En,TransitionGroup:S_,VueElement:nc,assertNumber:Ix,callWithAsyncErrorHandling:_s,callWithErrorHandling:$n,camelize:hs,capitalize:eo,cloneVNode:vn,compatUtils:JS,compile:M_,computed:Ve,createApp:N1,createBlock:qr,createCommentVNode:et,createElementBlock:Te,createElementVNode:_,createHydrationRenderer:r1,createPropsRestProxy:yS,createRenderer:i1,createSSRApp:P_,createSlots:nS,createStaticVNode:d1,createTextVNode:nt,createVNode:fe,customRef:xx,defineAsyncComponent:Qx,defineComponent:Ze,defineCustomElement:A1,defineEmits:oS,defineExpose:lS,defineModel:dS,defineOptions:cS,defineProps:aS,defineSSRCustomElement:E_,defineSlots:uS,get devtools(){return pr},effect:qb,effectScope:fh,getCurrentInstance:ts,getCurrentScope:fy,getTransitionRawChildren:Jl,guardReactiveProps:Bh,h:zt,handleError:Ji,hasInjectionContext:LS,hydrate:F1,initCustomFormatter:zS,initDirectivesForSSR:O_,inject:fs,isMemoSame:E1,isProxy:vh,isReactive:ji,isReadonly:Wi,isRef:wt,isRuntimeOnly:HS,isShallow:Da,isVNode:vi,markRaw:hi,mergeDefaults:mS,mergeModels:gS,mergeProps:Xr,nextTick:Gn,normalizeClass:ft,normalizeProps:cy,normalizeStyle:de,onActivated:Uy,onBeforeMount:Ch,onBeforeUnmount:Vt,onBeforeUpdate:Dh,onDeactivated:$y,onErrorCaptured:Ky,onMounted:vt,onRenderTracked:Hy,onRenderTriggered:Vy,onScopeDispose:Wb,onServerPrefetch:Gy,onUnmounted:Hn,onUpdated:Js,openBlock:ve,popScopeId:ws,provide:qs,proxyRefs:xh,pushScopeId:Ls,queuePostFlushCb:Ah,reactive:qt,readonly:yh,ref:ce,registerRuntimeCompiler:VS,render:cd,renderList:As,renderSlot:Yy,resolveComponent:ec,resolveDirective:sS,resolveDynamicComponent:zy,resolveFilter:QS,resolveTransitionHooks:kr,setBlockTracking:sd,setDevtoolsHook:Dy,setTransitionHooks:zi,shallowReactive:gh,shallowReadonly:gx,shallowRef:bh,ssrContextKey:y1,ssrUtils:XS,stop:Xb,toDisplayString:he,toHandlerKey:ga,toHandlers:iS,toRaw:ze,toRef:Sh,toRefs:Sx,toValue:Ex,transformVNodeArgs:BS,triggerRef:vx,unref:De,useAttrs:Oh,useCssModule:b_,useCssVars:Zi,useModel:pS,useSSRContext:v1,useSlots:fS,useTransitionState:Rh,vModelCheckbox:Gh,vModelDynamic:D1,vModelRadio:Vh,vModelSelect:I1,vModelText:ml,vShow:ot,version:T1,warn:Rx,watch:_t,watchEffect:zx,watchPostEffect:My,watchSyncEffect:Yx,withAsyncContext:vS,withCtx:Pt,withDefaults:hS,withDirectives:ct,withKeys:Ws,withMemo:YS,withModifiers:Ua,withScopeId:Mx},Symbol.toStringTag,{value:"Module"}));var Hh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function U1(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}function N_(n){if(n.__esModule)return n;var e=n.default;if(typeof e=="function"){var t=function s(){return this instanceof s?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};t.prototype=e.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(n).forEach(function(s){var i=Object.getOwnPropertyDescriptor(n,s);Object.defineProperty(t,s,i.get?i:{enumerable:!0,get:function(){return n[s]}})}),t}var $1={exports:{}};(function(n,e){(function(s,i){n.exports=i()})(typeof self<"u"?self:Hh,function(){return function(t){var s={};function i(r){if(s[r])return s[r].exports;var a=s[r]={i:r,l:!1,exports:{}};return t[r].call(a.exports,a,a.exports,i),a.l=!0,a.exports}return i.m=t,i.c=s,i.d=function(r,a,o){i.o(r,a)||Object.defineProperty(r,a,{configurable:!1,enumerable:!0,get:o})},i.r=function(r){Object.defineProperty(r,"__esModule",{value:!0})},i.n=function(r){var a=r&&r.__esModule?function(){return r.default}:function(){return r};return i.d(a,"a",a),a},i.o=function(r,a){return Object.prototype.hasOwnProperty.call(r,a)},i.p="",i(i.s=0)}({"./dist/icons.json":function(t){t.exports={activity:'<polyline points="22 12 18 12 15 21 9 3 6 12 2 12"></polyline>',airplay:'<path d="M5 17H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2h-1"></path><polygon points="12 15 17 21 7 21 12 15"></polygon>',"alert-circle":'<circle cx="12" cy="12" r="10"></circle><line x1="12" y1="8" x2="12" y2="12"></line><line x1="12" y1="16" x2="12.01" y2="16"></line>',"alert-octagon":'<polygon points="7.86 2 16.14 2 22 7.86 22 16.14 16.14 22 7.86 22 2 16.14 2 7.86 7.86 2"></polygon><line x1="12" y1="8" x2="12" y2="12"></line><line x1="12" y1="16" x2="12.01" y2="16"></line>',"alert-triangle":'<path d="M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z"></path><line x1="12" y1="9" x2="12" y2="13"></line><line x1="12" y1="17" x2="12.01" y2="17"></line>',"align-center":'<line x1="18" y1="10" x2="6" y2="10"></line><line x1="21" y1="6" x2="3" y2="6"></line><line x1="21" y1="14" x2="3" y2="14"></line><line x1="18" y1="18" x2="6" y2="18"></line>',"align-justify":'<line x1="21" y1="10" x2="3" y2="10"></line><line x1="21" y1="6" x2="3" y2="6"></line><line x1="21" y1="14" x2="3" y2="14"></line><line x1="21" y1="18" x2="3" y2="18"></line>',"align-left":'<line x1="17" y1="10" x2="3" y2="10"></line><line x1="21" y1="6" x2="3" y2="6"></line><line x1="21" y1="14" x2="3" y2="14"></line><line x1="17" y1="18" x2="3" y2="18"></line>',"align-right":'<line x1="21" y1="10" x2="7" y2="10"></line><line x1="21" y1="6" x2="3" y2="6"></line><line x1="21" y1="14" x2="3" y2="14"></line><line x1="21" y1="18" x2="7" y2="18"></line>',anchor:'<circle cx="12" cy="5" r="3"></circle><line x1="12" y1="22" x2="12" y2="8"></line><path d="M5 12H2a10 10 0 0 0 20 0h-3"></path>',aperture:'<circle cx="12" cy="12" r="10"></circle><line x1="14.31" y1="8" x2="20.05" y2="17.94"></line><line x1="9.69" y1="8" x2="21.17" y2="8"></line><line x1="7.38" y1="12" x2="13.12" y2="2.06"></line><line x1="9.69" y1="16" x2="3.95" y2="6.06"></line><line x1="14.31" y1="16" x2="2.83" y2="16"></line><line x1="16.62" y1="12" x2="10.88" y2="21.94"></line>',archive:'<polyline points="21 8 21 21 3 21 3 8"></polyline><rect x="1" y="3" width="22" height="5"></rect><line x1="10" y1="12" x2="14" y2="12"></line>',"arrow-down-circle":'<circle cx="12" cy="12" r="10"></circle><polyline points="8 12 12 16 16 12"></polyline><line x1="12" y1="8" x2="12" y2="16"></line>',"arrow-down-left":'<line x1="17" y1="7" x2="7" y2="17"></line><polyline points="17 17 7 17 7 7"></polyline>',"arrow-down-right":'<line x1="7" y1="7" x2="17" y2="17"></line><polyline points="17 7 17 17 7 17"></polyline>',"arrow-down":'<line x1="12" y1="5" x2="12" y2="19"></line><polyline points="19 12 12 19 5 12"></polyline>',"arrow-left-circle":'<circle cx="12" cy="12" r="10"></circle><polyline points="12 8 8 12 12 16"></polyline><line x1="16" y1="12" x2="8" y2="12"></line>',"arrow-left":'<line x1="19" y1="12" x2="5" y2="12"></line><polyline points="12 19 5 12 12 5"></polyline>',"arrow-right-circle":'<circle cx="12" cy="12" r="10"></circle><polyline points="12 16 16 12 12 8"></polyline><line x1="8" y1="12" x2="16" y2="12"></line>',"arrow-right":'<line x1="5" y1="12" x2="19" y2="12"></line><polyline points="12 5 19 12 12 19"></polyline>',"arrow-up-circle":'<circle cx="12" cy="12" r="10"></circle><polyline points="16 12 12 8 8 12"></polyline><line x1="12" y1="16" x2="12" y2="8"></line>',"arrow-up-left":'<line x1="17" y1="17" x2="7" y2="7"></line><polyline points="7 17 7 7 17 7"></polyline>',"arrow-up-right":'<line x1="7" y1="17" x2="17" y2="7"></line><polyline points="7 7 17 7 17 17"></polyline>',"arrow-up":'<line x1="12" y1="19" x2="12" y2="5"></line><polyline points="5 12 12 5 19 12"></polyline>',"at-sign":'<circle cx="12" cy="12" r="4"></circle><path d="M16 8v5a3 3 0 0 0 6 0v-1a10 10 0 1 0-3.92 7.94"></path>',award:'<circle cx="12" cy="8" r="7"></circle><polyline points="8.21 13.89 7 23 12 20 17 23 15.79 13.88"></polyline>',"bar-chart-2":'<line x1="18" y1="20" x2="18" y2="10"></line><line x1="12" y1="20" x2="12" y2="4"></line><line x1="6" y1="20" x2="6" y2="14"></line>',"bar-chart":'<line x1="12" y1="20" x2="12" y2="10"></line><line x1="18" y1="20" x2="18" y2="4"></line><line x1="6" y1="20" x2="6" y2="16"></line>',"battery-charging":'<path d="M5 18H3a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h3.19M15 6h2a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2h-3.19"></path><line x1="23" y1="13" x2="23" y2="11"></line><polyline points="11 6 7 12 13 12 9 18"></polyline>',battery:'<rect x="1" y="6" width="18" height="12" rx="2" ry="2"></rect><line x1="23" y1="13" x2="23" y2="11"></line>',"bell-off":'<path d="M13.73 21a2 2 0 0 1-3.46 0"></path><path d="M18.63 13A17.89 17.89 0 0 1 18 8"></path><path d="M6.26 6.26A5.86 5.86 0 0 0 6 8c0 7-3 9-3 9h14"></path><path d="M18 8a6 6 0 0 0-9.33-5"></path><line x1="1" y1="1" x2="23" y2="23"></line>',bell:'<path d="M18 8A6 6 0 0 0 6 8c0 7-3 9-3 9h18s-3-2-3-9"></path><path d="M13.73 21a2 2 0 0 1-3.46 0"></path>',bluetooth:'<polyline points="6.5 6.5 17.5 17.5 12 23 12 1 17.5 6.5 6.5 17.5"></polyline>',bold:'<path d="M6 4h8a4 4 0 0 1 4 4 4 4 0 0 1-4 4H6z"></path><path d="M6 12h9a4 4 0 0 1 4 4 4 4 0 0 1-4 4H6z"></path>',"book-open":'<path d="M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z"></path><path d="M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z"></path>',book:'<path d="M4 19.5A2.5 2.5 0 0 1 6.5 17H20"></path><path d="M6.5 2H20v20H6.5A2.5 2.5 0 0 1 4 19.5v-15A2.5 2.5 0 0 1 6.5 2z"></path>',bookmark:'<path d="M19 21l-7-5-7 5V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2z"></path>',box:'<path d="M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z"></path><polyline points="3.27 6.96 12 12.01 20.73 6.96"></polyline><line x1="12" y1="22.08" x2="12" y2="12"></line>',briefcase:'<rect x="2" y="7" width="20" height="14" rx="2" ry="2"></rect><path d="M16 21V5a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16"></path>',calendar:'<rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect><line x1="16" y1="2" x2="16" y2="6"></line><line x1="8" y1="2" x2="8" y2="6"></line><line x1="3" y1="10" x2="21" y2="10"></line>',"camera-off":'<line x1="1" y1="1" x2="23" y2="23"></line><path d="M21 21H3a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h3m3-3h6l2 3h4a2 2 0 0 1 2 2v9.34m-7.72-2.06a4 4 0 1 1-5.56-5.56"></path>',camera:'<path d="M23 19a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h4l2-3h6l2 3h4a2 2 0 0 1 2 2z"></path><circle cx="12" cy="13" r="4"></circle>',cast:'<path d="M2 16.1A5 5 0 0 1 5.9 20M2 12.05A9 9 0 0 1 9.95 20M2 8V6a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2h-6"></path><line x1="2" y1="20" x2="2.01" y2="20"></line>',"check-circle":'<path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"></path><polyline points="22 4 12 14.01 9 11.01"></polyline>',"check-square":'<polyline points="9 11 12 14 22 4"></polyline><path d="M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11"></path>',check:'<polyline points="20 6 9 17 4 12"></polyline>',"chevron-down":'<polyline points="6 9 12 15 18 9"></polyline>',"chevron-left":'<polyline points="15 18 9 12 15 6"></polyline>',"chevron-right":'<polyline points="9 18 15 12 9 6"></polyline>',"chevron-up":'<polyline points="18 15 12 9 6 15"></polyline>',"chevrons-down":'<polyline points="7 13 12 18 17 13"></polyline><polyline points="7 6 12 11 17 6"></polyline>',"chevrons-left":'<polyline points="11 17 6 12 11 7"></polyline><polyline points="18 17 13 12 18 7"></polyline>',"chevrons-right":'<polyline points="13 17 18 12 13 7"></polyline><polyline points="6 17 11 12 6 7"></polyline>',"chevrons-up":'<polyline points="17 11 12 6 7 11"></polyline><polyline points="17 18 12 13 7 18"></polyline>',chrome:'<circle cx="12" cy="12" r="10"></circle><circle cx="12" cy="12" r="4"></circle><line x1="21.17" y1="8" x2="12" y2="8"></line><line x1="3.95" y1="6.06" x2="8.54" y2="14"></line><line x1="10.88" y1="21.94" x2="15.46" y2="14"></line>',circle:'<circle cx="12" cy="12" r="10"></circle>',clipboard:'<path d="M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2"></path><rect x="8" y="2" width="8" height="4" rx="1" ry="1"></rect>',clock:'<circle cx="12" cy="12" r="10"></circle><polyline points="12 6 12 12 16 14"></polyline>',"cloud-drizzle":'<line x1="8" y1="19" x2="8" y2="21"></line><line x1="8" y1="13" x2="8" y2="15"></line><line x1="16" y1="19" x2="16" y2="21"></line><line x1="16" y1="13" x2="16" y2="15"></line><line x1="12" y1="21" x2="12" y2="23"></line><line x1="12" y1="15" x2="12" y2="17"></line><path d="M20 16.58A5 5 0 0 0 18 7h-1.26A8 8 0 1 0 4 15.25"></path>',"cloud-lightning":'<path d="M19 16.9A5 5 0 0 0 18 7h-1.26a8 8 0 1 0-11.62 9"></path><polyline points="13 11 9 17 15 17 11 23"></polyline>',"cloud-off":'<path d="M22.61 16.95A5 5 0 0 0 18 10h-1.26a8 8 0 0 0-7.05-6M5 5a8 8 0 0 0 4 15h9a5 5 0 0 0 1.7-.3"></path><line x1="1" y1="1" x2="23" y2="23"></line>',"cloud-rain":'<line x1="16" y1="13" x2="16" y2="21"></line><line x1="8" y1="13" x2="8" y2="21"></line><line x1="12" y1="15" x2="12" y2="23"></line><path d="M20 16.58A5 5 0 0 0 18 7h-1.26A8 8 0 1 0 4 15.25"></path>',"cloud-snow":'<path d="M20 17.58A5 5 0 0 0 18 8h-1.26A8 8 0 1 0 4 16.25"></path><line x1="8" y1="16" x2="8.01" y2="16"></line><line x1="8" y1="20" x2="8.01" y2="20"></line><line x1="12" y1="18" x2="12.01" y2="18"></line><line x1="12" y1="22" x2="12.01" y2="22"></line><line x1="16" y1="16" x2="16.01" y2="16"></line><line x1="16" y1="20" x2="16.01" y2="20"></line>',cloud:'<path d="M18 10h-1.26A8 8 0 1 0 9 20h9a5 5 0 0 0 0-10z"></path>',code:'<polyline points="16 18 22 12 16 6"></polyline><polyline points="8 6 2 12 8 18"></polyline>',codepen:'<polygon points="12 2 22 8.5 22 15.5 12 22 2 15.5 2 8.5 12 2"></polygon><line x1="12" y1="22" x2="12" y2="15.5"></line><polyline points="22 8.5 12 15.5 2 8.5"></polyline><polyline points="2 15.5 12 8.5 22 15.5"></polyline><line x1="12" y1="2" x2="12" y2="8.5"></line>',codesandbox:'<path d="M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z"></path><polyline points="7.5 4.21 12 6.81 16.5 4.21"></polyline><polyline points="7.5 19.79 7.5 14.6 3 12"></polyline><polyline points="21 12 16.5 14.6 16.5 19.79"></polyline><polyline points="3.27 6.96 12 12.01 20.73 6.96"></polyline><line x1="12" y1="22.08" x2="12" y2="12"></line>',coffee:'<path d="M18 8h1a4 4 0 0 1 0 8h-1"></path><path d="M2 8h16v9a4 4 0 0 1-4 4H6a4 4 0 0 1-4-4V8z"></path><line x1="6" y1="1" x2="6" y2="4"></line><line x1="10" y1="1" x2="10" y2="4"></line><line x1="14" y1="1" x2="14" y2="4"></line>',columns:'<path d="M12 3h7a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-7m0-18H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h7m0-18v18"></path>',command:'<path d="M18 3a3 3 0 0 0-3 3v12a3 3 0 0 0 3 3 3 3 0 0 0 3-3 3 3 0 0 0-3-3H6a3 3 0 0 0-3 3 3 3 0 0 0 3 3 3 3 0 0 0 3-3V6a3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3h12a3 3 0 0 0 3-3 3 3 0 0 0-3-3z"></path>',compass:'<circle cx="12" cy="12" r="10"></circle><polygon points="16.24 7.76 14.12 14.12 7.76 16.24 9.88 9.88 16.24 7.76"></polygon>',copy:'<rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path>',"corner-down-left":'<polyline points="9 10 4 15 9 20"></polyline><path d="M20 4v7a4 4 0 0 1-4 4H4"></path>',"corner-down-right":'<polyline points="15 10 20 15 15 20"></polyline><path d="M4 4v7a4 4 0 0 0 4 4h12"></path>',"corner-left-down":'<polyline points="14 15 9 20 4 15"></polyline><path d="M20 4h-7a4 4 0 0 0-4 4v12"></path>',"corner-left-up":'<polyline points="14 9 9 4 4 9"></polyline><path d="M20 20h-7a4 4 0 0 1-4-4V4"></path>',"corner-right-down":'<polyline points="10 15 15 20 20 15"></polyline><path d="M4 4h7a4 4 0 0 1 4 4v12"></path>',"corner-right-up":'<polyline points="10 9 15 4 20 9"></polyline><path d="M4 20h7a4 4 0 0 0 4-4V4"></path>',"corner-up-left":'<polyline points="9 14 4 9 9 4"></polyline><path d="M20 20v-7a4 4 0 0 0-4-4H4"></path>',"corner-up-right":'<polyline points="15 14 20 9 15 4"></polyline><path d="M4 20v-7a4 4 0 0 1 4-4h12"></path>',cpu:'<rect x="4" y="4" width="16" height="16" rx="2" ry="2"></rect><rect x="9" y="9" width="6" height="6"></rect><line x1="9" y1="1" x2="9" y2="4"></line><line x1="15" y1="1" x2="15" y2="4"></line><line x1="9" y1="20" x2="9" y2="23"></line><line x1="15" y1="20" x2="15" y2="23"></line><line x1="20" y1="9" x2="23" y2="9"></line><line x1="20" y1="14" x2="23" y2="14"></line><line x1="1" y1="9" x2="4" y2="9"></line><line x1="1" y1="14" x2="4" y2="14"></line>',"credit-card":'<rect x="1" y="4" width="22" height="16" rx="2" ry="2"></rect><line x1="1" y1="10" x2="23" y2="10"></line>',crop:'<path d="M6.13 1L6 16a2 2 0 0 0 2 2h15"></path><path d="M1 6.13L16 6a2 2 0 0 1 2 2v15"></path>',crosshair:'<circle cx="12" cy="12" r="10"></circle><line x1="22" y1="12" x2="18" y2="12"></line><line x1="6" y1="12" x2="2" y2="12"></line><line x1="12" y1="6" x2="12" y2="2"></line><line x1="12" y1="22" x2="12" y2="18"></line>',database:'<ellipse cx="12" cy="5" rx="9" ry="3"></ellipse><path d="M21 12c0 1.66-4 3-9 3s-9-1.34-9-3"></path><path d="M3 5v14c0 1.66 4 3 9 3s9-1.34 9-3V5"></path>',delete:'<path d="M21 4H8l-7 8 7 8h13a2 2 0 0 0 2-2V6a2 2 0 0 0-2-2z"></path><line x1="18" y1="9" x2="12" y2="15"></line><line x1="12" y1="9" x2="18" y2="15"></line>',disc:'<circle cx="12" cy="12" r="10"></circle><circle cx="12" cy="12" r="3"></circle>',"divide-circle":'<line x1="8" y1="12" x2="16" y2="12"></line><line x1="12" y1="16" x2="12" y2="16"></line><line x1="12" y1="8" x2="12" y2="8"></line><circle cx="12" cy="12" r="10"></circle>',"divide-square":'<rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect><line x1="8" y1="12" x2="16" y2="12"></line><line x1="12" y1="16" x2="12" y2="16"></line><line x1="12" y1="8" x2="12" y2="8"></line>',divide:'<circle cx="12" cy="6" r="2"></circle><line x1="5" y1="12" x2="19" y2="12"></line><circle cx="12" cy="18" r="2"></circle>',"dollar-sign":'<line x1="12" y1="1" x2="12" y2="23"></line><path d="M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"></path>',"download-cloud":'<polyline points="8 17 12 21 16 17"></polyline><line x1="12" y1="12" x2="12" y2="21"></line><path d="M20.88 18.09A5 5 0 0 0 18 9h-1.26A8 8 0 1 0 3 16.29"></path>',download:'<path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path><polyline points="7 10 12 15 17 10"></polyline><line x1="12" y1="15" x2="12" y2="3"></line>',dribbble:'<circle cx="12" cy="12" r="10"></circle><path d="M8.56 2.75c4.37 6.03 6.02 9.42 8.03 17.72m2.54-15.38c-3.72 4.35-8.94 5.66-16.88 5.85m19.5 1.9c-3.5-.93-6.63-.82-8.94 0-2.58.92-5.01 2.86-7.44 6.32"></path>',droplet:'<path d="M12 2.69l5.66 5.66a8 8 0 1 1-11.31 0z"></path>',"edit-2":'<path d="M17 3a2.828 2.828 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5L17 3z"></path>',"edit-3":'<path d="M12 20h9"></path><path d="M16.5 3.5a2.121 2.121 0 0 1 3 3L7 19l-4 1 1-4L16.5 3.5z"></path>',edit:'<path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"></path><path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"></path>',"external-link":'<path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"></path><polyline points="15 3 21 3 21 9"></polyline><line x1="10" y1="14" x2="21" y2="3"></line>',"eye-off":'<path d="M17.94 17.94A10.07 10.07 0 0 1 12 20c-7 0-11-8-11-8a18.45 18.45 0 0 1 5.06-5.94M9.9 4.24A9.12 9.12 0 0 1 12 4c7 0 11 8 11 8a18.5 18.5 0 0 1-2.16 3.19m-6.72-1.07a3 3 0 1 1-4.24-4.24"></path><line x1="1" y1="1" x2="23" y2="23"></line>',eye:'<path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"></path><circle cx="12" cy="12" r="3"></circle>',facebook:'<path d="M18 2h-3a5 5 0 0 0-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 0 1 1-1h3z"></path>',"fast-forward":'<polygon points="13 19 22 12 13 5 13 19"></polygon><polygon points="2 19 11 12 2 5 2 19"></polygon>',feather:'<path d="M20.24 12.24a6 6 0 0 0-8.49-8.49L5 10.5V19h8.5z"></path><line x1="16" y1="8" x2="2" y2="22"></line><line x1="17.5" y1="15" x2="9" y2="15"></line>',figma:'<path d="M5 5.5A3.5 3.5 0 0 1 8.5 2H12v7H8.5A3.5 3.5 0 0 1 5 5.5z"></path><path d="M12 2h3.5a3.5 3.5 0 1 1 0 7H12V2z"></path><path d="M12 12.5a3.5 3.5 0 1 1 7 0 3.5 3.5 0 1 1-7 0z"></path><path d="M5 19.5A3.5 3.5 0 0 1 8.5 16H12v3.5a3.5 3.5 0 1 1-7 0z"></path><path d="M5 12.5A3.5 3.5 0 0 1 8.5 9H12v7H8.5A3.5 3.5 0 0 1 5 12.5z"></path>',"file-minus":'<path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path><polyline points="14 2 14 8 20 8"></polyline><line x1="9" y1="15" x2="15" y2="15"></line>',"file-plus":'<path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path><polyline points="14 2 14 8 20 8"></polyline><line x1="12" y1="18" x2="12" y2="12"></line><line x1="9" y1="15" x2="15" y2="15"></line>',"file-text":'<path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path><polyline points="14 2 14 8 20 8"></polyline><line x1="16" y1="13" x2="8" y2="13"></line><line x1="16" y1="17" x2="8" y2="17"></line><polyline points="10 9 9 9 8 9"></polyline>',file:'<path d="M13 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V9z"></path><polyline points="13 2 13 9 20 9"></polyline>',film:'<rect x="2" y="2" width="20" height="20" rx="2.18" ry="2.18"></rect><line x1="7" y1="2" x2="7" y2="22"></line><line x1="17" y1="2" x2="17" y2="22"></line><line x1="2" y1="12" x2="22" y2="12"></line><line x1="2" y1="7" x2="7" y2="7"></line><line x1="2" y1="17" x2="7" y2="17"></line><line x1="17" y1="17" x2="22" y2="17"></line><line x1="17" y1="7" x2="22" y2="7"></line>',filter:'<polygon points="22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3"></polygon>',flag:'<path d="M4 15s1-1 4-1 5 2 8 2 4-1 4-1V3s-1 1-4 1-5-2-8-2-4 1-4 1z"></path><line x1="4" y1="22" x2="4" y2="15"></line>',"folder-minus":'<path d="M22 19a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h5l2 3h9a2 2 0 0 1 2 2z"></path><line x1="9" y1="14" x2="15" y2="14"></line>',"folder-plus":'<path d="M22 19a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h5l2 3h9a2 2 0 0 1 2 2z"></path><line x1="12" y1="11" x2="12" y2="17"></line><line x1="9" y1="14" x2="15" y2="14"></line>',folder:'<path d="M22 19a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h5l2 3h9a2 2 0 0 1 2 2z"></path>',framer:'<path d="M5 16V9h14V2H5l14 14h-7m-7 0l7 7v-7m-7 0h7"></path>',frown:'<circle cx="12" cy="12" r="10"></circle><path d="M16 16s-1.5-2-4-2-4 2-4 2"></path><line x1="9" y1="9" x2="9.01" y2="9"></line><line x1="15" y1="9" x2="15.01" y2="9"></line>',gift:'<polyline points="20 12 20 22 4 22 4 12"></polyline><rect x="2" y="7" width="20" height="5"></rect><line x1="12" y1="22" x2="12" y2="7"></line><path d="M12 7H7.5a2.5 2.5 0 0 1 0-5C11 2 12 7 12 7z"></path><path d="M12 7h4.5a2.5 2.5 0 0 0 0-5C13 2 12 7 12 7z"></path>',"git-branch":'<line x1="6" y1="3" x2="6" y2="15"></line><circle cx="18" cy="6" r="3"></circle><circle cx="6" cy="18" r="3"></circle><path d="M18 9a9 9 0 0 1-9 9"></path>',"git-commit":'<circle cx="12" cy="12" r="4"></circle><line x1="1.05" y1="12" x2="7" y2="12"></line><line x1="17.01" y1="12" x2="22.96" y2="12"></line>',"git-merge":'<circle cx="18" cy="18" r="3"></circle><circle cx="6" cy="6" r="3"></circle><path d="M6 21V9a9 9 0 0 0 9 9"></path>',"git-pull-request":'<circle cx="18" cy="18" r="3"></circle><circle cx="6" cy="6" r="3"></circle><path d="M13 6h3a2 2 0 0 1 2 2v7"></path><line x1="6" y1="9" x2="6" y2="21"></line>',github:'<path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37 0 0 0-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44 0 0 0 20 4.77 5.07 5.07 0 0 0 19.91 1S18.73.65 16 2.48a13.38 13.38 0 0 0-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07 0 0 0 5 4.77a5.44 5.44 0 0 0-1.5 3.78c0 5.42 3.3 6.61 6.44 7A3.37 3.37 0 0 0 9 18.13V22"></path>',gitlab:'<path d="M22.65 14.39L12 22.13 1.35 14.39a.84.84 0 0 1-.3-.94l1.22-3.78 2.44-7.51A.42.42 0 0 1 4.82 2a.43.43 0 0 1 .58 0 .42.42 0 0 1 .11.18l2.44 7.49h8.1l2.44-7.51A.42.42 0 0 1 18.6 2a.43.43 0 0 1 .58 0 .42.42 0 0 1 .11.18l2.44 7.51L23 13.45a.84.84 0 0 1-.35.94z"></path>',globe:'<circle cx="12" cy="12" r="10"></circle><line x1="2" y1="12" x2="22" y2="12"></line><path d="M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z"></path>',grid:'<rect x="3" y="3" width="7" height="7"></rect><rect x="14" y="3" width="7" height="7"></rect><rect x="14" y="14" width="7" height="7"></rect><rect x="3" y="14" width="7" height="7"></rect>',"hard-drive":'<line x1="22" y1="12" x2="2" y2="12"></line><path d="M5.45 5.11L2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z"></path><line x1="6" y1="16" x2="6.01" y2="16"></line><line x1="10" y1="16" x2="10.01" y2="16"></line>',hash:'<line x1="4" y1="9" x2="20" y2="9"></line><line x1="4" y1="15" x2="20" y2="15"></line><line x1="10" y1="3" x2="8" y2="21"></line><line x1="16" y1="3" x2="14" y2="21"></line>',headphones:'<path d="M3 18v-6a9 9 0 0 1 18 0v6"></path><path d="M21 19a2 2 0 0 1-2 2h-1a2 2 0 0 1-2-2v-3a2 2 0 0 1 2-2h3zM3 19a2 2 0 0 0 2 2h1a2 2 0 0 0 2-2v-3a2 2 0 0 0-2-2H3z"></path>',heart:'<path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"></path>',"help-circle":'<circle cx="12" cy="12" r="10"></circle><path d="M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3"></path><line x1="12" y1="17" x2="12.01" y2="17"></line>',hexagon:'<path d="M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z"></path>',home:'<path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"></path><polyline points="9 22 9 12 15 12 15 22"></polyline>',image:'<rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect><circle cx="8.5" cy="8.5" r="1.5"></circle><polyline points="21 15 16 10 5 21"></polyline>',inbox:'<polyline points="22 12 16 12 14 15 10 15 8 12 2 12"></polyline><path d="M5.45 5.11L2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z"></path>',info:'<circle cx="12" cy="12" r="10"></circle><line x1="12" y1="16" x2="12" y2="12"></line><line x1="12" y1="8" x2="12.01" y2="8"></line>',instagram:'<rect x="2" y="2" width="20" height="20" rx="5" ry="5"></rect><path d="M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z"></path><line x1="17.5" y1="6.5" x2="17.51" y2="6.5"></line>',italic:'<line x1="19" y1="4" x2="10" y2="4"></line><line x1="14" y1="20" x2="5" y2="20"></line><line x1="15" y1="4" x2="9" y2="20"></line>',key:'<path d="M21 2l-2 2m-7.61 7.61a5.5 5.5 0 1 1-7.778 7.778 5.5 5.5 0 0 1 7.777-7.777zm0 0L15.5 7.5m0 0l3 3L22 7l-3-3m-3.5 3.5L19 4"></path>',layers:'<polygon points="12 2 2 7 12 12 22 7 12 2"></polygon><polyline points="2 17 12 22 22 17"></polyline><polyline points="2 12 12 17 22 12"></polyline>',layout:'<rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect><line x1="3" y1="9" x2="21" y2="9"></line><line x1="9" y1="21" x2="9" y2="9"></line>',"life-buoy":'<circle cx="12" cy="12" r="10"></circle><circle cx="12" cy="12" r="4"></circle><line x1="4.93" y1="4.93" x2="9.17" y2="9.17"></line><line x1="14.83" y1="14.83" x2="19.07" y2="19.07"></line><line x1="14.83" y1="9.17" x2="19.07" y2="4.93"></line><line x1="14.83" y1="9.17" x2="18.36" y2="5.64"></line><line x1="4.93" y1="19.07" x2="9.17" y2="14.83"></line>',"link-2":'<path d="M15 7h3a5 5 0 0 1 5 5 5 5 0 0 1-5 5h-3m-6 0H6a5 5 0 0 1-5-5 5 5 0 0 1 5-5h3"></path><line x1="8" y1="12" x2="16" y2="12"></line>',link:'<path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path>',linkedin:'<path d="M16 8a6 6 0 0 1 6 6v7h-4v-7a2 2 0 0 0-2-2 2 2 0 0 0-2 2v7h-4v-7a6 6 0 0 1 6-6z"></path><rect x="2" y="9" width="4" height="12"></rect><circle cx="4" cy="4" r="2"></circle>',list:'<line x1="8" y1="6" x2="21" y2="6"></line><line x1="8" y1="12" x2="21" y2="12"></line><line x1="8" y1="18" x2="21" y2="18"></line><line x1="3" y1="6" x2="3.01" y2="6"></line><line x1="3" y1="12" x2="3.01" y2="12"></line><line x1="3" y1="18" x2="3.01" y2="18"></line>',loader:'<line x1="12" y1="2" x2="12" y2="6"></line><line x1="12" y1="18" x2="12" y2="22"></line><line x1="4.93" y1="4.93" x2="7.76" y2="7.76"></line><line x1="16.24" y1="16.24" x2="19.07" y2="19.07"></line><line x1="2" y1="12" x2="6" y2="12"></line><line x1="18" y1="12" x2="22" y2="12"></line><line x1="4.93" y1="19.07" x2="7.76" y2="16.24"></line><line x1="16.24" y1="7.76" x2="19.07" y2="4.93"></line>',lock:'<rect x="3" y="11" width="18" height="11" rx="2" ry="2"></rect><path d="M7 11V7a5 5 0 0 1 10 0v4"></path>',"log-in":'<path d="M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4"></path><polyline points="10 17 15 12 10 7"></polyline><line x1="15" y1="12" x2="3" y2="12"></line>',"log-out":'<path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"></path><polyline points="16 17 21 12 16 7"></polyline><line x1="21" y1="12" x2="9" y2="12"></line>',mail:'<path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"></path><polyline points="22,6 12,13 2,6"></polyline>',"map-pin":'<path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"></path><circle cx="12" cy="10" r="3"></circle>',map:'<polygon points="1 6 1 22 8 18 16 22 23 18 23 2 16 6 8 2 1 6"></polygon><line x1="8" y1="2" x2="8" y2="18"></line><line x1="16" y1="6" x2="16" y2="22"></line>',"maximize-2":'<polyline points="15 3 21 3 21 9"></polyline><polyline points="9 21 3 21 3 15"></polyline><line x1="21" y1="3" x2="14" y2="10"></line><line x1="3" y1="21" x2="10" y2="14"></line>',maximize:'<path d="M8 3H5a2 2 0 0 0-2 2v3m18 0V5a2 2 0 0 0-2-2h-3m0 18h3a2 2 0 0 0 2-2v-3M3 16v3a2 2 0 0 0 2 2h3"></path>',meh:'<circle cx="12" cy="12" r="10"></circle><line x1="8" y1="15" x2="16" y2="15"></line><line x1="9" y1="9" x2="9.01" y2="9"></line><line x1="15" y1="9" x2="15.01" y2="9"></line>',menu:'<line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line>',"message-circle":'<path d="M21 11.5a8.38 8.38 0 0 1-.9 3.8 8.5 8.5 0 0 1-7.6 4.7 8.38 8.38 0 0 1-3.8-.9L3 21l1.9-5.7a8.38 8.38 0 0 1-.9-3.8 8.5 8.5 0 0 1 4.7-7.6 8.38 8.38 0 0 1 3.8-.9h.5a8.48 8.48 0 0 1 8 8v.5z"></path>',"message-square":'<path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"></path>',"mic-off":'<line x1="1" y1="1" x2="23" y2="23"></line><path d="M9 9v3a3 3 0 0 0 5.12 2.12M15 9.34V4a3 3 0 0 0-5.94-.6"></path><path d="M17 16.95A7 7 0 0 1 5 12v-2m14 0v2a7 7 0 0 1-.11 1.23"></path><line x1="12" y1="19" x2="12" y2="23"></line><line x1="8" y1="23" x2="16" y2="23"></line>',mic:'<path d="M12 1a3 3 0 0 0-3 3v8a3 3 0 0 0 6 0V4a3 3 0 0 0-3-3z"></path><path d="M19 10v2a7 7 0 0 1-14 0v-2"></path><line x1="12" y1="19" x2="12" y2="23"></line><line x1="8" y1="23" x2="16" y2="23"></line>',"minimize-2":'<polyline points="4 14 10 14 10 20"></polyline><polyline points="20 10 14 10 14 4"></polyline><line x1="14" y1="10" x2="21" y2="3"></line><line x1="3" y1="21" x2="10" y2="14"></line>',minimize:'<path d="M8 3v3a2 2 0 0 1-2 2H3m18 0h-3a2 2 0 0 1-2-2V3m0 18v-3a2 2 0 0 1 2-2h3M3 16h3a2 2 0 0 1 2 2v3"></path>',"minus-circle":'<circle cx="12" cy="12" r="10"></circle><line x1="8" y1="12" x2="16" y2="12"></line>',"minus-square":'<rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect><line x1="8" y1="12" x2="16" y2="12"></line>',minus:'<line x1="5" y1="12" x2="19" y2="12"></line>',monitor:'<rect x="2" y="3" width="20" height="14" rx="2" ry="2"></rect><line x1="8" y1="21" x2="16" y2="21"></line><line x1="12" y1="17" x2="12" y2="21"></line>',moon:'<path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>',"more-horizontal":'<circle cx="12" cy="12" r="1"></circle><circle cx="19" cy="12" r="1"></circle><circle cx="5" cy="12" r="1"></circle>',"more-vertical":'<circle cx="12" cy="12" r="1"></circle><circle cx="12" cy="5" r="1"></circle><circle cx="12" cy="19" r="1"></circle>',"mouse-pointer":'<path d="M3 3l7.07 16.97 2.51-7.39 7.39-2.51L3 3z"></path><path d="M13 13l6 6"></path>',move:'<polyline points="5 9 2 12 5 15"></polyline><polyline points="9 5 12 2 15 5"></polyline><polyline points="15 19 12 22 9 19"></polyline><polyline points="19 9 22 12 19 15"></polyline><line x1="2" y1="12" x2="22" y2="12"></line><line x1="12" y1="2" x2="12" y2="22"></line>',music:'<path d="M9 18V5l12-2v13"></path><circle cx="6" cy="18" r="3"></circle><circle cx="18" cy="16" r="3"></circle>',"navigation-2":'<polygon points="12 2 19 21 12 17 5 21 12 2"></polygon>',navigation:'<polygon points="3 11 22 2 13 21 11 13 3 11"></polygon>',octagon:'<polygon points="7.86 2 16.14 2 22 7.86 22 16.14 16.14 22 7.86 22 2 16.14 2 7.86 7.86 2"></polygon>',package:'<line x1="16.5" y1="9.4" x2="7.5" y2="4.21"></line><path d="M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z"></path><polyline points="3.27 6.96 12 12.01 20.73 6.96"></polyline><line x1="12" y1="22.08" x2="12" y2="12"></line>',paperclip:'<path d="M21.44 11.05l-9.19 9.19a6 6 0 0 1-8.49-8.49l9.19-9.19a4 4 0 0 1 5.66 5.66l-9.2 9.19a2 2 0 0 1-2.83-2.83l8.49-8.48"></path>',"pause-circle":'<circle cx="12" cy="12" r="10"></circle><line x1="10" y1="15" x2="10" y2="9"></line><line x1="14" y1="15" x2="14" y2="9"></line>',pause:'<rect x="6" y="4" width="4" height="16"></rect><rect x="14" y="4" width="4" height="16"></rect>',"pen-tool":'<path d="M12 19l7-7 3 3-7 7-3-3z"></path><path d="M18 13l-1.5-7.5L2 2l3.5 14.5L13 18l5-5z"></path><path d="M2 2l7.586 7.586"></path><circle cx="11" cy="11" r="2"></circle>',percent:'<line x1="19" y1="5" x2="5" y2="19"></line><circle cx="6.5" cy="6.5" r="2.5"></circle><circle cx="17.5" cy="17.5" r="2.5"></circle>',"phone-call":'<path d="M15.05 5A5 5 0 0 1 19 8.95M15.05 1A9 9 0 0 1 23 8.94m-1 7.98v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"></path>',"phone-forwarded":'<polyline points="19 1 23 5 19 9"></polyline><line x1="15" y1="5" x2="23" y2="5"></line><path d="M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"></path>',"phone-incoming":'<polyline points="16 2 16 8 22 8"></polyline><line x1="23" y1="1" x2="16" y2="8"></line><path d="M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"></path>',"phone-missed":'<line x1="23" y1="1" x2="17" y2="7"></line><line x1="17" y1="1" x2="23" y2="7"></line><path d="M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"></path>',"phone-off":'<path d="M10.68 13.31a16 16 0 0 0 3.41 2.6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7 2 2 0 0 1 1.72 2v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.42 19.42 0 0 1-3.33-2.67m-2.67-3.34a19.79 19.79 0 0 1-3.07-8.63A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91"></path><line x1="23" y1="1" x2="1" y2="23"></line>',"phone-outgoing":'<polyline points="23 7 23 1 17 1"></polyline><line x1="16" y1="8" x2="23" y2="1"></line><path d="M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"></path>',phone:'<path d="M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"></path>',"pie-chart":'<path d="M21.21 15.89A10 10 0 1 1 8 2.83"></path><path d="M22 12A10 10 0 0 0 12 2v10z"></path>',"play-circle":'<circle cx="12" cy="12" r="10"></circle><polygon points="10 8 16 12 10 16 10 8"></polygon>',play:'<polygon points="5 3 19 12 5 21 5 3"></polygon>',"plus-circle":'<circle cx="12" cy="12" r="10"></circle><line x1="12" y1="8" x2="12" y2="16"></line><line x1="8" y1="12" x2="16" y2="12"></line>',"plus-square":'<rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect><line x1="12" y1="8" x2="12" y2="16"></line><line x1="8" y1="12" x2="16" y2="12"></line>',plus:'<line x1="12" y1="5" x2="12" y2="19"></line><line x1="5" y1="12" x2="19" y2="12"></line>',pocket:'<path d="M4 3h16a2 2 0 0 1 2 2v6a10 10 0 0 1-10 10A10 10 0 0 1 2 11V5a2 2 0 0 1 2-2z"></path><polyline points="8 10 12 14 16 10"></polyline>',power:'<path d="M18.36 6.64a9 9 0 1 1-12.73 0"></path><line x1="12" y1="2" x2="12" y2="12"></line>',printer:'<polyline points="6 9 6 2 18 2 18 9"></polyline><path d="M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2"></path><rect x="6" y="14" width="12" height="8"></rect>',radio:'<circle cx="12" cy="12" r="2"></circle><path d="M16.24 7.76a6 6 0 0 1 0 8.49m-8.48-.01a6 6 0 0 1 0-8.49m11.31-2.82a10 10 0 0 1 0 14.14m-14.14 0a10 10 0 0 1 0-14.14"></path>',"refresh-ccw":'<polyline points="1 4 1 10 7 10"></polyline><polyline points="23 20 23 14 17 14"></polyline><path d="M20.49 9A9 9 0 0 0 5.64 5.64L1 10m22 4l-4.64 4.36A9 9 0 0 1 3.51 15"></path>',"refresh-cw":'<polyline points="23 4 23 10 17 10"></polyline><polyline points="1 20 1 14 7 14"></polyline><path d="M3.51 9a9 9 0 0 1 14.85-3.36L23 10M1 14l4.64 4.36A9 9 0 0 0 20.49 15"></path>',repeat:'<polyline points="17 1 21 5 17 9"></polyline><path d="M3 11V9a4 4 0 0 1 4-4h14"></path><polyline points="7 23 3 19 7 15"></polyline><path d="M21 13v2a4 4 0 0 1-4 4H3"></path>',rewind:'<polygon points="11 19 2 12 11 5 11 19"></polygon><polygon points="22 19 13 12 22 5 22 19"></polygon>',"rotate-ccw":'<polyline points="1 4 1 10 7 10"></polyline><path d="M3.51 15a9 9 0 1 0 2.13-9.36L1 10"></path>',"rotate-cw":'<polyline points="23 4 23 10 17 10"></polyline><path d="M20.49 15a9 9 0 1 1-2.12-9.36L23 10"></path>',rss:'<path d="M4 11a9 9 0 0 1 9 9"></path><path d="M4 4a16 16 0 0 1 16 16"></path><circle cx="5" cy="19" r="1"></circle>',save:'<path d="M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z"></path><polyline points="17 21 17 13 7 13 7 21"></polyline><polyline points="7 3 7 8 15 8"></polyline>',scissors:'<circle cx="6" cy="6" r="3"></circle><circle cx="6" cy="18" r="3"></circle><line x1="20" y1="4" x2="8.12" y2="15.88"></line><line x1="14.47" y1="14.48" x2="20" y2="20"></line><line x1="8.12" y1="8.12" x2="12" y2="12"></line>',search:'<circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line>',send:'<line x1="22" y1="2" x2="11" y2="13"></line><polygon points="22 2 15 22 11 13 2 9 22 2"></polygon>',server:'<rect x="2" y="2" width="20" height="8" rx="2" ry="2"></rect><rect x="2" y="14" width="20" height="8" rx="2" ry="2"></rect><line x1="6" y1="6" x2="6.01" y2="6"></line><line x1="6" y1="18" x2="6.01" y2="18"></line>',settings:'<circle cx="12" cy="12" r="3"></circle><path d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"></path>',"share-2":'<circle cx="18" cy="5" r="3"></circle><circle cx="6" cy="12" r="3"></circle><circle cx="18" cy="19" r="3"></circle><line x1="8.59" y1="13.51" x2="15.42" y2="17.49"></line><line x1="15.41" y1="6.51" x2="8.59" y2="10.49"></line>',share:'<path d="M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8"></path><polyline points="16 6 12 2 8 6"></polyline><line x1="12" y1="2" x2="12" y2="15"></line>',"shield-off":'<path d="M19.69 14a6.9 6.9 0 0 0 .31-2V5l-8-3-3.16 1.18"></path><path d="M4.73 4.73L4 5v7c0 6 8 10 8 10a20.29 20.29 0 0 0 5.62-4.38"></path><line x1="1" y1="1" x2="23" y2="23"></line>',shield:'<path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"></path>',"shopping-bag":'<path d="M6 2L3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4z"></path><line x1="3" y1="6" x2="21" y2="6"></line><path d="M16 10a4 4 0 0 1-8 0"></path>',"shopping-cart":'<circle cx="9" cy="21" r="1"></circle><circle cx="20" cy="21" r="1"></circle><path d="M1 1h4l2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61L23 6H6"></path>',shuffle:'<polyline points="16 3 21 3 21 8"></polyline><line x1="4" y1="20" x2="21" y2="3"></line><polyline points="21 16 21 21 16 21"></polyline><line x1="15" y1="15" x2="21" y2="21"></line><line x1="4" y1="4" x2="9" y2="9"></line>',sidebar:'<rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect><line x1="9" y1="3" x2="9" y2="21"></line>',"skip-back":'<polygon points="19 20 9 12 19 4 19 20"></polygon><line x1="5" y1="19" x2="5" y2="5"></line>',"skip-forward":'<polygon points="5 4 15 12 5 20 5 4"></polygon><line x1="19" y1="5" x2="19" y2="19"></line>',slack:'<path d="M14.5 10c-.83 0-1.5-.67-1.5-1.5v-5c0-.83.67-1.5 1.5-1.5s1.5.67 1.5 1.5v5c0 .83-.67 1.5-1.5 1.5z"></path><path d="M20.5 10H19V8.5c0-.83.67-1.5 1.5-1.5s1.5.67 1.5 1.5-.67 1.5-1.5 1.5z"></path><path d="M9.5 14c.83 0 1.5.67 1.5 1.5v5c0 .83-.67 1.5-1.5 1.5S8 21.33 8 20.5v-5c0-.83.67-1.5 1.5-1.5z"></path><path d="M3.5 14H5v1.5c0 .83-.67 1.5-1.5 1.5S2 16.33 2 15.5 2.67 14 3.5 14z"></path><path d="M14 14.5c0-.83.67-1.5 1.5-1.5h5c.83 0 1.5.67 1.5 1.5s-.67 1.5-1.5 1.5h-5c-.83 0-1.5-.67-1.5-1.5z"></path><path d="M15.5 19H14v1.5c0 .83.67 1.5 1.5 1.5s1.5-.67 1.5-1.5-.67-1.5-1.5-1.5z"></path><path d="M10 9.5C10 8.67 9.33 8 8.5 8h-5C2.67 8 2 8.67 2 9.5S2.67 11 3.5 11h5c.83 0 1.5-.67 1.5-1.5z"></path><path d="M8.5 5H10V3.5C10 2.67 9.33 2 8.5 2S7 2.67 7 3.5 7.67 5 8.5 5z"></path>',slash:'<circle cx="12" cy="12" r="10"></circle><line x1="4.93" y1="4.93" x2="19.07" y2="19.07"></line>',sliders:'<line x1="4" y1="21" x2="4" y2="14"></line><line x1="4" y1="10" x2="4" y2="3"></line><line x1="12" y1="21" x2="12" y2="12"></line><line x1="12" y1="8" x2="12" y2="3"></line><line x1="20" y1="21" x2="20" y2="16"></line><line x1="20" y1="12" x2="20" y2="3"></line><line x1="1" y1="14" x2="7" y2="14"></line><line x1="9" y1="8" x2="15" y2="8"></line><line x1="17" y1="16" x2="23" y2="16"></line>',smartphone:'<rect x="5" y="2" width="14" height="20" rx="2" ry="2"></rect><line x1="12" y1="18" x2="12.01" y2="18"></line>',smile:'<circle cx="12" cy="12" r="10"></circle><path d="M8 14s1.5 2 4 2 4-2 4-2"></path><line x1="9" y1="9" x2="9.01" y2="9"></line><line x1="15" y1="9" x2="15.01" y2="9"></line>',speaker:'<rect x="4" y="2" width="16" height="20" rx="2" ry="2"></rect><circle cx="12" cy="14" r="4"></circle><line x1="12" y1="6" x2="12.01" y2="6"></line>',square:'<rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect>',star:'<polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"></polygon>',"stop-circle":'<circle cx="12" cy="12" r="10"></circle><rect x="9" y="9" width="6" height="6"></rect>',sun:'<circle cx="12" cy="12" r="5"></circle><line x1="12" y1="1" x2="12" y2="3"></line><line x1="12" y1="21" x2="12" y2="23"></line><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line><line x1="1" y1="12" x2="3" y2="12"></line><line x1="21" y1="12" x2="23" y2="12"></line><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>',sunrise:'<path d="M17 18a5 5 0 0 0-10 0"></path><line x1="12" y1="2" x2="12" y2="9"></line><line x1="4.22" y1="10.22" x2="5.64" y2="11.64"></line><line x1="1" y1="18" x2="3" y2="18"></line><line x1="21" y1="18" x2="23" y2="18"></line><line x1="18.36" y1="11.64" x2="19.78" y2="10.22"></line><line x1="23" y1="22" x2="1" y2="22"></line><polyline points="8 6 12 2 16 6"></polyline>',sunset:'<path d="M17 18a5 5 0 0 0-10 0"></path><line x1="12" y1="9" x2="12" y2="2"></line><line x1="4.22" y1="10.22" x2="5.64" y2="11.64"></line><line x1="1" y1="18" x2="3" y2="18"></line><line x1="21" y1="18" x2="23" y2="18"></line><line x1="18.36" y1="11.64" x2="19.78" y2="10.22"></line><line x1="23" y1="22" x2="1" y2="22"></line><polyline points="16 5 12 9 8 5"></polyline>',table:'<path d="M9 3H5a2 2 0 0 0-2 2v4m6-6h10a2 2 0 0 1 2 2v4M9 3v18m0 0h10a2 2 0 0 0 2-2V9M9 21H5a2 2 0 0 1-2-2V9m0 0h18"></path>',tablet:'<rect x="4" y="2" width="16" height="20" rx="2" ry="2"></rect><line x1="12" y1="18" x2="12.01" y2="18"></line>',tag:'<path d="M20.59 13.41l-7.17 7.17a2 2 0 0 1-2.83 0L2 12V2h10l8.59 8.59a2 2 0 0 1 0 2.82z"></path><line x1="7" y1="7" x2="7.01" y2="7"></line>',target:'<circle cx="12" cy="12" r="10"></circle><circle cx="12" cy="12" r="6"></circle><circle cx="12" cy="12" r="2"></circle>',terminal:'<polyline points="4 17 10 11 4 5"></polyline><line x1="12" y1="19" x2="20" y2="19"></line>',thermometer:'<path d="M14 14.76V3.5a2.5 2.5 0 0 0-5 0v11.26a4.5 4.5 0 1 0 5 0z"></path>',"thumbs-down":'<path d="M10 15v4a3 3 0 0 0 3 3l4-9V2H5.72a2 2 0 0 0-2 1.7l-1.38 9a2 2 0 0 0 2 2.3zm7-13h2.67A2.31 2.31 0 0 1 22 4v7a2.31 2.31 0 0 1-2.33 2H17"></path>',"thumbs-up":'<path d="M14 9V5a3 3 0 0 0-3-3l-4 9v11h11.28a2 2 0 0 0 2-1.7l1.38-9a2 2 0 0 0-2-2.3zM7 22H4a2 2 0 0 1-2-2v-7a2 2 0 0 1 2-2h3"></path>',"toggle-left":'<rect x="1" y="5" width="22" height="14" rx="7" ry="7"></rect><circle cx="8" cy="12" r="3"></circle>',"toggle-right":'<rect x="1" y="5" width="22" height="14" rx="7" ry="7"></rect><circle cx="16" cy="12" r="3"></circle>',tool:'<path d="M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z"></path>',"trash-2":'<polyline points="3 6 5 6 21 6"></polyline><path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"></path><line x1="10" y1="11" x2="10" y2="17"></line><line x1="14" y1="11" x2="14" y2="17"></line>',trash:'<polyline points="3 6 5 6 21 6"></polyline><path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"></path>',trello:'<rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect><rect x="7" y="7" width="3" height="9"></rect><rect x="14" y="7" width="3" height="5"></rect>',"trending-down":'<polyline points="23 18 13.5 8.5 8.5 13.5 1 6"></polyline><polyline points="17 18 23 18 23 12"></polyline>',"trending-up":'<polyline points="23 6 13.5 15.5 8.5 10.5 1 18"></polyline><polyline points="17 6 23 6 23 12"></polyline>',triangle:'<path d="M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z"></path>',truck:'<rect x="1" y="3" width="15" height="13"></rect><polygon points="16 8 20 8 23 11 23 16 16 16 16 8"></polygon><circle cx="5.5" cy="18.5" r="2.5"></circle><circle cx="18.5" cy="18.5" r="2.5"></circle>',tv:'<rect x="2" y="7" width="20" height="15" rx="2" ry="2"></rect><polyline points="17 2 12 7 7 2"></polyline>',twitch:'<path d="M21 2H3v16h5v4l4-4h5l4-4V2zM11 11V7M16 11V7"></path>',twitter:'<path d="M23 3a10.9 10.9 0 0 1-3.14 1.53 4.48 4.48 0 0 0-7.86 3v1A10.66 10.66 0 0 1 3 4s-4 9 5 13a11.64 11.64 0 0 1-7 2c9 5 20 0 20-11.5a4.5 4.5 0 0 0-.08-.83A7.72 7.72 0 0 0 23 3z"></path>',type:'<polyline points="4 7 4 4 20 4 20 7"></polyline><line x1="9" y1="20" x2="15" y2="20"></line><line x1="12" y1="4" x2="12" y2="20"></line>',umbrella:'<path d="M23 12a11.05 11.05 0 0 0-22 0zm-5 7a3 3 0 0 1-6 0v-7"></path>',underline:'<path d="M6 3v7a6 6 0 0 0 6 6 6 6 0 0 0 6-6V3"></path><line x1="4" y1="21" x2="20" y2="21"></line>',unlock:'<rect x="3" y="11" width="18" height="11" rx="2" ry="2"></rect><path d="M7 11V7a5 5 0 0 1 9.9-1"></path>',"upload-cloud":'<polyline points="16 16 12 12 8 16"></polyline><line x1="12" y1="12" x2="12" y2="21"></line><path d="M20.39 18.39A5 5 0 0 0 18 9h-1.26A8 8 0 1 0 3 16.3"></path><polyline points="16 16 12 12 8 16"></polyline>',upload:'<path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path><polyline points="17 8 12 3 7 8"></polyline><line x1="12" y1="3" x2="12" y2="15"></line>',"user-check":'<path d="M16 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"></path><circle cx="8.5" cy="7" r="4"></circle><polyline points="17 11 19 13 23 9"></polyline>',"user-minus":'<path d="M16 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"></path><circle cx="8.5" cy="7" r="4"></circle><line x1="23" y1="11" x2="17" y2="11"></line>',"user-plus":'<path d="M16 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"></path><circle cx="8.5" cy="7" r="4"></circle><line x1="20" y1="8" x2="20" y2="14"></line><line x1="23" y1="11" x2="17" y2="11"></line>',"user-x":'<path d="M16 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"></path><circle cx="8.5" cy="7" r="4"></circle><line x1="18" y1="8" x2="23" y2="13"></line><line x1="23" y1="8" x2="18" y2="13"></line>',user:'<path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path><circle cx="12" cy="7" r="4"></circle>',users:'<path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"></path><circle cx="9" cy="7" r="4"></circle><path d="M23 21v-2a4 4 0 0 0-3-3.87"></path><path d="M16 3.13a4 4 0 0 1 0 7.75"></path>',"video-off":'<path d="M16 16v1a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V7a2 2 0 0 1 2-2h2m5.66 0H14a2 2 0 0 1 2 2v3.34l1 1L23 7v10"></path><line x1="1" y1="1" x2="23" y2="23"></line>',video:'<polygon points="23 7 16 12 23 17 23 7"></polygon><rect x="1" y="5" width="15" height="14" rx="2" ry="2"></rect>',voicemail:'<circle cx="5.5" cy="11.5" r="4.5"></circle><circle cx="18.5" cy="11.5" r="4.5"></circle><line x1="5.5" y1="16" x2="18.5" y2="16"></line>',"volume-1":'<polygon points="11 5 6 9 2 9 2 15 6 15 11 19 11 5"></polygon><path d="M15.54 8.46a5 5 0 0 1 0 7.07"></path>',"volume-2":'<polygon points="11 5 6 9 2 9 2 15 6 15 11 19 11 5"></polygon><path d="M19.07 4.93a10 10 0 0 1 0 14.14M15.54 8.46a5 5 0 0 1 0 7.07"></path>',"volume-x":'<polygon points="11 5 6 9 2 9 2 15 6 15 11 19 11 5"></polygon><line x1="23" y1="9" x2="17" y2="15"></line><line x1="17" y1="9" x2="23" y2="15"></line>',volume:'<polygon points="11 5 6 9 2 9 2 15 6 15 11 19 11 5"></polygon>',watch:'<circle cx="12" cy="12" r="7"></circle><polyline points="12 9 12 12 13.5 13.5"></polyline><path d="M16.51 17.35l-.35 3.83a2 2 0 0 1-2 1.82H9.83a2 2 0 0 1-2-1.82l-.35-3.83m.01-10.7l.35-3.83A2 2 0 0 1 9.83 1h4.35a2 2 0 0 1 2 1.82l.35 3.83"></path>',"wifi-off":'<line x1="1" y1="1" x2="23" y2="23"></line><path d="M16.72 11.06A10.94 10.94 0 0 1 19 12.55"></path><path d="M5 12.55a10.94 10.94 0 0 1 5.17-2.39"></path><path d="M10.71 5.05A16 16 0 0 1 22.58 9"></path><path d="M1.42 9a15.91 15.91 0 0 1 4.7-2.88"></path><path d="M8.53 16.11a6 6 0 0 1 6.95 0"></path><line x1="12" y1="20" x2="12.01" y2="20"></line>',wifi:'<path d="M5 12.55a11 11 0 0 1 14.08 0"></path><path d="M1.42 9a16 16 0 0 1 21.16 0"></path><path d="M8.53 16.11a6 6 0 0 1 6.95 0"></path><line x1="12" y1="20" x2="12.01" y2="20"></line>',wind:'<path d="M9.59 4.59A2 2 0 1 1 11 8H2m10.59 11.41A2 2 0 1 0 14 16H2m15.73-8.27A2.5 2.5 0 1 1 19.5 12H2"></path>',"x-circle":'<circle cx="12" cy="12" r="10"></circle><line x1="15" y1="9" x2="9" y2="15"></line><line x1="9" y1="9" x2="15" y2="15"></line>',"x-octagon":'<polygon points="7.86 2 16.14 2 22 7.86 22 16.14 16.14 22 7.86 22 2 16.14 2 7.86 7.86 2"></polygon><line x1="15" y1="9" x2="9" y2="15"></line><line x1="9" y1="9" x2="15" y2="15"></line>',"x-square":'<rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect><line x1="9" y1="9" x2="15" y2="15"></line><line x1="15" y1="9" x2="9" y2="15"></line>',x:'<line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line>',youtube:'<path d="M22.54 6.42a2.78 2.78 0 0 0-1.94-2C18.88 4 12 4 12 4s-6.88 0-8.6.46a2.78 2.78 0 0 0-1.94 2A29 29 0 0 0 1 11.75a29 29 0 0 0 .46 5.33A2.78 2.78 0 0 0 3.4 19c1.72.46 8.6.46 8.6.46s6.88 0 8.6-.46a2.78 2.78 0 0 0 1.94-2 29 29 0 0 0 .46-5.25 29 29 0 0 0-.46-5.33z"></path><polygon points="9.75 15.02 15.5 11.75 9.75 8.48 9.75 15.02"></polygon>',"zap-off":'<polyline points="12.41 6.75 13 2 10.57 4.92"></polyline><polyline points="18.57 12.91 21 10 15.66 10"></polyline><polyline points="8 8 3 14 12 14 11 22 16 16"></polyline><line x1="1" y1="1" x2="23" y2="23"></line>',zap:'<polygon points="13 2 3 14 12 14 11 22 21 10 12 10 13 2"></polygon>',"zoom-in":'<circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line><line x1="11" y1="8" x2="11" y2="14"></line><line x1="8" y1="11" x2="14" y2="11"></line>',"zoom-out":'<circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line><line x1="8" y1="11" x2="14" y2="11"></line>'}},"./node_modules/classnames/dedupe.js":function(t,s,i){var r,a;/*!
  Copyright (c) 2016 Jed Watson.
  Licensed under the MIT License (MIT), see
  http://jedwatson.github.io/classnames
*/(function(){var o=function(){function l(){}l.prototype=Object.create(null);function c(g,v){for(var E=v.length,T=0;T<E;++T)m(g,v[T])}var u={}.hasOwnProperty;function d(g,v){g[v]=!0}function h(g,v){for(var E in v)u.call(v,E)&&(g[E]=!!v[E])}var f=/\s+/;function p(g,v){for(var E=v.split(f),T=E.length,b=0;b<T;++b)g[E[b]]=!0}function m(g,v){if(v){var E=typeof v;E==="string"?p(g,v):Array.isArray(v)?c(g,v):E==="object"?h(g,v):E==="number"&&d(g,v)}}function y(){for(var g=arguments.length,v=Array(g),E=0;E<g;E++)v[E]=arguments[E];var T=new l;c(T,v);var b=[];for(var L in T)T[L]&&b.push(L);return b.join(" ")}return y}();typeof t<"u"&&t.exports?t.exports=o:(r=[],a=(function(){return o}).apply(s,r),a!==void 0&&(t.exports=a))})()},"./node_modules/core-js/es/array/from.js":function(t,s,i){i("./node_modules/core-js/modules/es.string.iterator.js"),i("./node_modules/core-js/modules/es.array.from.js");var r=i("./node_modules/core-js/internals/path.js");t.exports=r.Array.from},"./node_modules/core-js/internals/a-function.js":function(t,s){t.exports=function(i){if(typeof i!="function")throw TypeError(String(i)+" is not a function");return i}},"./node_modules/core-js/internals/an-object.js":function(t,s,i){var r=i("./node_modules/core-js/internals/is-object.js");t.exports=function(a){if(!r(a))throw TypeError(String(a)+" is not an object");return a}},"./node_modules/core-js/internals/array-from.js":function(t,s,i){var r=i("./node_modules/core-js/internals/bind-context.js"),a=i("./node_modules/core-js/internals/to-object.js"),o=i("./node_modules/core-js/internals/call-with-safe-iteration-closing.js"),l=i("./node_modules/core-js/internals/is-array-iterator-method.js"),c=i("./node_modules/core-js/internals/to-length.js"),u=i("./node_modules/core-js/internals/create-property.js"),d=i("./node_modules/core-js/internals/get-iterator-method.js");t.exports=function(f){var p=a(f),m=typeof this=="function"?this:Array,y=arguments.length,g=y>1?arguments[1]:void 0,v=g!==void 0,E=0,T=d(p),b,L,x,w;if(v&&(g=r(g,y>2?arguments[2]:void 0,2)),T!=null&&!(m==Array&&l(T)))for(w=T.call(p),L=new m;!(x=w.next()).done;E++)u(L,E,v?o(w,g,[x.value,E],!0):x.value);else for(b=c(p.length),L=new m(b);b>E;E++)u(L,E,v?g(p[E],E):p[E]);return L.length=E,L}},"./node_modules/core-js/internals/array-includes.js":function(t,s,i){var r=i("./node_modules/core-js/internals/to-indexed-object.js"),a=i("./node_modules/core-js/internals/to-length.js"),o=i("./node_modules/core-js/internals/to-absolute-index.js");t.exports=function(l){return function(c,u,d){var h=r(c),f=a(h.length),p=o(d,f),m;if(l&&u!=u){for(;f>p;)if(m=h[p++],m!=m)return!0}else for(;f>p;p++)if((l||p in h)&&h[p]===u)return l||p||0;return!l&&-1}}},"./node_modules/core-js/internals/bind-context.js":function(t,s,i){var r=i("./node_modules/core-js/internals/a-function.js");t.exports=function(a,o,l){if(r(a),o===void 0)return a;switch(l){case 0:return function(){return a.call(o)};case 1:return function(c){return a.call(o,c)};case 2:return function(c,u){return a.call(o,c,u)};case 3:return function(c,u,d){return a.call(o,c,u,d)}}return function(){return a.apply(o,arguments)}}},"./node_modules/core-js/internals/call-with-safe-iteration-closing.js":function(t,s,i){var r=i("./node_modules/core-js/internals/an-object.js");t.exports=function(a,o,l,c){try{return c?o(r(l)[0],l[1]):o(l)}catch(d){var u=a.return;throw u!==void 0&&r(u.call(a)),d}}},"./node_modules/core-js/internals/check-correctness-of-iteration.js":function(t,s,i){var r=i("./node_modules/core-js/internals/well-known-symbol.js"),a=r("iterator"),o=!1;try{var l=0,c={next:function(){return{done:!!l++}},return:function(){o=!0}};c[a]=function(){return this},Array.from(c,function(){throw 2})}catch{}t.exports=function(u,d){if(!d&&!o)return!1;var h=!1;try{var f={};f[a]=function(){return{next:function(){return{done:h=!0}}}},u(f)}catch{}return h}},"./node_modules/core-js/internals/classof-raw.js":function(t,s){var i={}.toString;t.exports=function(r){return i.call(r).slice(8,-1)}},"./node_modules/core-js/internals/classof.js":function(t,s,i){var r=i("./node_modules/core-js/internals/classof-raw.js"),a=i("./node_modules/core-js/internals/well-known-symbol.js"),o=a("toStringTag"),l=r(function(){return arguments}())=="Arguments",c=function(u,d){try{return u[d]}catch{}};t.exports=function(u){var d,h,f;return u===void 0?"Undefined":u===null?"Null":typeof(h=c(d=Object(u),o))=="string"?h:l?r(d):(f=r(d))=="Object"&&typeof d.callee=="function"?"Arguments":f}},"./node_modules/core-js/internals/copy-constructor-properties.js":function(t,s,i){var r=i("./node_modules/core-js/internals/has.js"),a=i("./node_modules/core-js/internals/own-keys.js"),o=i("./node_modules/core-js/internals/object-get-own-property-descriptor.js"),l=i("./node_modules/core-js/internals/object-define-property.js");t.exports=function(c,u){for(var d=a(u),h=l.f,f=o.f,p=0;p<d.length;p++){var m=d[p];r(c,m)||h(c,m,f(u,m))}}},"./node_modules/core-js/internals/correct-prototype-getter.js":function(t,s,i){var r=i("./node_modules/core-js/internals/fails.js");t.exports=!r(function(){function a(){}return a.prototype.constructor=null,Object.getPrototypeOf(new a)!==a.prototype})},"./node_modules/core-js/internals/create-iterator-constructor.js":function(t,s,i){var r=i("./node_modules/core-js/internals/iterators-core.js").IteratorPrototype,a=i("./node_modules/core-js/internals/object-create.js"),o=i("./node_modules/core-js/internals/create-property-descriptor.js"),l=i("./node_modules/core-js/internals/set-to-string-tag.js"),c=i("./node_modules/core-js/internals/iterators.js"),u=function(){return this};t.exports=function(d,h,f){var p=h+" Iterator";return d.prototype=a(r,{next:o(1,f)}),l(d,p,!1,!0),c[p]=u,d}},"./node_modules/core-js/internals/create-property-descriptor.js":function(t,s){t.exports=function(i,r){return{enumerable:!(i&1),configurable:!(i&2),writable:!(i&4),value:r}}},"./node_modules/core-js/internals/create-property.js":function(t,s,i){var r=i("./node_modules/core-js/internals/to-primitive.js"),a=i("./node_modules/core-js/internals/object-define-property.js"),o=i("./node_modules/core-js/internals/create-property-descriptor.js");t.exports=function(l,c,u){var d=r(c);d in l?a.f(l,d,o(0,u)):l[d]=u}},"./node_modules/core-js/internals/define-iterator.js":function(t,s,i){var r=i("./node_modules/core-js/internals/export.js"),a=i("./node_modules/core-js/internals/create-iterator-constructor.js"),o=i("./node_modules/core-js/internals/object-get-prototype-of.js"),l=i("./node_modules/core-js/internals/object-set-prototype-of.js"),c=i("./node_modules/core-js/internals/set-to-string-tag.js"),u=i("./node_modules/core-js/internals/hide.js"),d=i("./node_modules/core-js/internals/redefine.js"),h=i("./node_modules/core-js/internals/well-known-symbol.js"),f=i("./node_modules/core-js/internals/is-pure.js"),p=i("./node_modules/core-js/internals/iterators.js"),m=i("./node_modules/core-js/internals/iterators-core.js"),y=m.IteratorPrototype,g=m.BUGGY_SAFARI_ITERATORS,v=h("iterator"),E="keys",T="values",b="entries",L=function(){return this};t.exports=function(x,w,k,R,P,D,O){a(k,w,R);var N=function(xe){if(xe===P&&U)return U;if(!g&&xe in ee)return ee[xe];switch(xe){case E:return function(){return new k(this,xe)};case T:return function(){return new k(this,xe)};case b:return function(){return new k(this,xe)}}return function(){return new k(this)}},$=w+" Iterator",K=!1,ee=x.prototype,V=ee[v]||ee["@@iterator"]||P&&ee[P],U=!g&&V||N(P),B=w=="Array"&&ee.entries||V,j,Y,me;if(B&&(j=o(B.call(new x)),y!==Object.prototype&&j.next&&(!f&&o(j)!==y&&(l?l(j,y):typeof j[v]!="function"&&u(j,v,L)),c(j,$,!0,!0),f&&(p[$]=L))),P==T&&V&&V.name!==T&&(K=!0,U=function(){return V.call(this)}),(!f||O)&&ee[v]!==U&&u(ee,v,U),p[w]=U,P)if(Y={values:N(T),keys:D?U:N(E),entries:N(b)},O)for(me in Y)(g||K||!(me in ee))&&d(ee,me,Y[me]);else r({target:w,proto:!0,forced:g||K},Y);return Y}},"./node_modules/core-js/internals/descriptors.js":function(t,s,i){var r=i("./node_modules/core-js/internals/fails.js");t.exports=!r(function(){return Object.defineProperty({},"a",{get:function(){return 7}}).a!=7})},"./node_modules/core-js/internals/document-create-element.js":function(t,s,i){var r=i("./node_modules/core-js/internals/global.js"),a=i("./node_modules/core-js/internals/is-object.js"),o=r.document,l=a(o)&&a(o.createElement);t.exports=function(c){return l?o.createElement(c):{}}},"./node_modules/core-js/internals/enum-bug-keys.js":function(t,s){t.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},"./node_modules/core-js/internals/export.js":function(t,s,i){var r=i("./node_modules/core-js/internals/global.js"),a=i("./node_modules/core-js/internals/object-get-own-property-descriptor.js").f,o=i("./node_modules/core-js/internals/hide.js"),l=i("./node_modules/core-js/internals/redefine.js"),c=i("./node_modules/core-js/internals/set-global.js"),u=i("./node_modules/core-js/internals/copy-constructor-properties.js"),d=i("./node_modules/core-js/internals/is-forced.js");t.exports=function(h,f){var p=h.target,m=h.global,y=h.stat,g,v,E,T,b,L;if(m?v=r:y?v=r[p]||c(p,{}):v=(r[p]||{}).prototype,v)for(E in f){if(b=f[E],h.noTargetGet?(L=a(v,E),T=L&&L.value):T=v[E],g=d(m?E:p+(y?".":"#")+E,h.forced),!g&&T!==void 0){if(typeof b==typeof T)continue;u(b,T)}(h.sham||T&&T.sham)&&o(b,"sham",!0),l(v,E,b,h)}}},"./node_modules/core-js/internals/fails.js":function(t,s){t.exports=function(i){try{return!!i()}catch{return!0}}},"./node_modules/core-js/internals/function-to-string.js":function(t,s,i){var r=i("./node_modules/core-js/internals/shared.js");t.exports=r("native-function-to-string",Function.toString)},"./node_modules/core-js/internals/get-iterator-method.js":function(t,s,i){var r=i("./node_modules/core-js/internals/classof.js"),a=i("./node_modules/core-js/internals/iterators.js"),o=i("./node_modules/core-js/internals/well-known-symbol.js"),l=o("iterator");t.exports=function(c){if(c!=null)return c[l]||c["@@iterator"]||a[r(c)]}},"./node_modules/core-js/internals/global.js":function(t,s,i){(function(r){var a="object",o=function(l){return l&&l.Math==Math&&l};t.exports=o(typeof globalThis==a&&globalThis)||o(typeof window==a&&window)||o(typeof self==a&&self)||o(typeof r==a&&r)||Function("return this")()}).call(this,i("./node_modules/webpack/buildin/global.js"))},"./node_modules/core-js/internals/has.js":function(t,s){var i={}.hasOwnProperty;t.exports=function(r,a){return i.call(r,a)}},"./node_modules/core-js/internals/hidden-keys.js":function(t,s){t.exports={}},"./node_modules/core-js/internals/hide.js":function(t,s,i){var r=i("./node_modules/core-js/internals/descriptors.js"),a=i("./node_modules/core-js/internals/object-define-property.js"),o=i("./node_modules/core-js/internals/create-property-descriptor.js");t.exports=r?function(l,c,u){return a.f(l,c,o(1,u))}:function(l,c,u){return l[c]=u,l}},"./node_modules/core-js/internals/html.js":function(t,s,i){var r=i("./node_modules/core-js/internals/global.js"),a=r.document;t.exports=a&&a.documentElement},"./node_modules/core-js/internals/ie8-dom-define.js":function(t,s,i){var r=i("./node_modules/core-js/internals/descriptors.js"),a=i("./node_modules/core-js/internals/fails.js"),o=i("./node_modules/core-js/internals/document-create-element.js");t.exports=!r&&!a(function(){return Object.defineProperty(o("div"),"a",{get:function(){return 7}}).a!=7})},"./node_modules/core-js/internals/indexed-object.js":function(t,s,i){var r=i("./node_modules/core-js/internals/fails.js"),a=i("./node_modules/core-js/internals/classof-raw.js"),o="".split;t.exports=r(function(){return!Object("z").propertyIsEnumerable(0)})?function(l){return a(l)=="String"?o.call(l,""):Object(l)}:Object},"./node_modules/core-js/internals/internal-state.js":function(t,s,i){var r=i("./node_modules/core-js/internals/native-weak-map.js"),a=i("./node_modules/core-js/internals/global.js"),o=i("./node_modules/core-js/internals/is-object.js"),l=i("./node_modules/core-js/internals/hide.js"),c=i("./node_modules/core-js/internals/has.js"),u=i("./node_modules/core-js/internals/shared-key.js"),d=i("./node_modules/core-js/internals/hidden-keys.js"),h=a.WeakMap,f,p,m,y=function(x){return m(x)?p(x):f(x,{})},g=function(x){return function(w){var k;if(!o(w)||(k=p(w)).type!==x)throw TypeError("Incompatible receiver, "+x+" required");return k}};if(r){var v=new h,E=v.get,T=v.has,b=v.set;f=function(x,w){return b.call(v,x,w),w},p=function(x){return E.call(v,x)||{}},m=function(x){return T.call(v,x)}}else{var L=u("state");d[L]=!0,f=function(x,w){return l(x,L,w),w},p=function(x){return c(x,L)?x[L]:{}},m=function(x){return c(x,L)}}t.exports={set:f,get:p,has:m,enforce:y,getterFor:g}},"./node_modules/core-js/internals/is-array-iterator-method.js":function(t,s,i){var r=i("./node_modules/core-js/internals/well-known-symbol.js"),a=i("./node_modules/core-js/internals/iterators.js"),o=r("iterator"),l=Array.prototype;t.exports=function(c){return c!==void 0&&(a.Array===c||l[o]===c)}},"./node_modules/core-js/internals/is-forced.js":function(t,s,i){var r=i("./node_modules/core-js/internals/fails.js"),a=/#|\.prototype\./,o=function(h,f){var p=c[l(h)];return p==d?!0:p==u?!1:typeof f=="function"?r(f):!!f},l=o.normalize=function(h){return String(h).replace(a,".").toLowerCase()},c=o.data={},u=o.NATIVE="N",d=o.POLYFILL="P";t.exports=o},"./node_modules/core-js/internals/is-object.js":function(t,s){t.exports=function(i){return typeof i=="object"?i!==null:typeof i=="function"}},"./node_modules/core-js/internals/is-pure.js":function(t,s){t.exports=!1},"./node_modules/core-js/internals/iterators-core.js":function(t,s,i){var r=i("./node_modules/core-js/internals/object-get-prototype-of.js"),a=i("./node_modules/core-js/internals/hide.js"),o=i("./node_modules/core-js/internals/has.js"),l=i("./node_modules/core-js/internals/well-known-symbol.js"),c=i("./node_modules/core-js/internals/is-pure.js"),u=l("iterator"),d=!1,h=function(){return this},f,p,m;[].keys&&(m=[].keys(),"next"in m?(p=r(r(m)),p!==Object.prototype&&(f=p)):d=!0),f==null&&(f={}),!c&&!o(f,u)&&a(f,u,h),t.exports={IteratorPrototype:f,BUGGY_SAFARI_ITERATORS:d}},"./node_modules/core-js/internals/iterators.js":function(t,s){t.exports={}},"./node_modules/core-js/internals/native-symbol.js":function(t,s,i){var r=i("./node_modules/core-js/internals/fails.js");t.exports=!!Object.getOwnPropertySymbols&&!r(function(){return!String(Symbol())})},"./node_modules/core-js/internals/native-weak-map.js":function(t,s,i){var r=i("./node_modules/core-js/internals/global.js"),a=i("./node_modules/core-js/internals/function-to-string.js"),o=r.WeakMap;t.exports=typeof o=="function"&&/native code/.test(a.call(o))},"./node_modules/core-js/internals/object-create.js":function(t,s,i){var r=i("./node_modules/core-js/internals/an-object.js"),a=i("./node_modules/core-js/internals/object-define-properties.js"),o=i("./node_modules/core-js/internals/enum-bug-keys.js"),l=i("./node_modules/core-js/internals/hidden-keys.js"),c=i("./node_modules/core-js/internals/html.js"),u=i("./node_modules/core-js/internals/document-create-element.js"),d=i("./node_modules/core-js/internals/shared-key.js"),h=d("IE_PROTO"),f="prototype",p=function(){},m=function(){var y=u("iframe"),g=o.length,v="<",E="script",T=">",b="java"+E+":",L;for(y.style.display="none",c.appendChild(y),y.src=String(b),L=y.contentWindow.document,L.open(),L.write(v+E+T+"document.F=Object"+v+"/"+E+T),L.close(),m=L.F;g--;)delete m[f][o[g]];return m()};t.exports=Object.create||function(g,v){var E;return g!==null?(p[f]=r(g),E=new p,p[f]=null,E[h]=g):E=m(),v===void 0?E:a(E,v)},l[h]=!0},"./node_modules/core-js/internals/object-define-properties.js":function(t,s,i){var r=i("./node_modules/core-js/internals/descriptors.js"),a=i("./node_modules/core-js/internals/object-define-property.js"),o=i("./node_modules/core-js/internals/an-object.js"),l=i("./node_modules/core-js/internals/object-keys.js");t.exports=r?Object.defineProperties:function(u,d){o(u);for(var h=l(d),f=h.length,p=0,m;f>p;)a.f(u,m=h[p++],d[m]);return u}},"./node_modules/core-js/internals/object-define-property.js":function(t,s,i){var r=i("./node_modules/core-js/internals/descriptors.js"),a=i("./node_modules/core-js/internals/ie8-dom-define.js"),o=i("./node_modules/core-js/internals/an-object.js"),l=i("./node_modules/core-js/internals/to-primitive.js"),c=Object.defineProperty;s.f=r?c:function(d,h,f){if(o(d),h=l(h,!0),o(f),a)try{return c(d,h,f)}catch{}if("get"in f||"set"in f)throw TypeError("Accessors not supported");return"value"in f&&(d[h]=f.value),d}},"./node_modules/core-js/internals/object-get-own-property-descriptor.js":function(t,s,i){var r=i("./node_modules/core-js/internals/descriptors.js"),a=i("./node_modules/core-js/internals/object-property-is-enumerable.js"),o=i("./node_modules/core-js/internals/create-property-descriptor.js"),l=i("./node_modules/core-js/internals/to-indexed-object.js"),c=i("./node_modules/core-js/internals/to-primitive.js"),u=i("./node_modules/core-js/internals/has.js"),d=i("./node_modules/core-js/internals/ie8-dom-define.js"),h=Object.getOwnPropertyDescriptor;s.f=r?h:function(p,m){if(p=l(p),m=c(m,!0),d)try{return h(p,m)}catch{}if(u(p,m))return o(!a.f.call(p,m),p[m])}},"./node_modules/core-js/internals/object-get-own-property-names.js":function(t,s,i){var r=i("./node_modules/core-js/internals/object-keys-internal.js"),a=i("./node_modules/core-js/internals/enum-bug-keys.js"),o=a.concat("length","prototype");s.f=Object.getOwnPropertyNames||function(c){return r(c,o)}},"./node_modules/core-js/internals/object-get-own-property-symbols.js":function(t,s){s.f=Object.getOwnPropertySymbols},"./node_modules/core-js/internals/object-get-prototype-of.js":function(t,s,i){var r=i("./node_modules/core-js/internals/has.js"),a=i("./node_modules/core-js/internals/to-object.js"),o=i("./node_modules/core-js/internals/shared-key.js"),l=i("./node_modules/core-js/internals/correct-prototype-getter.js"),c=o("IE_PROTO"),u=Object.prototype;t.exports=l?Object.getPrototypeOf:function(d){return d=a(d),r(d,c)?d[c]:typeof d.constructor=="function"&&d instanceof d.constructor?d.constructor.prototype:d instanceof Object?u:null}},"./node_modules/core-js/internals/object-keys-internal.js":function(t,s,i){var r=i("./node_modules/core-js/internals/has.js"),a=i("./node_modules/core-js/internals/to-indexed-object.js"),o=i("./node_modules/core-js/internals/array-includes.js"),l=i("./node_modules/core-js/internals/hidden-keys.js"),c=o(!1);t.exports=function(u,d){var h=a(u),f=0,p=[],m;for(m in h)!r(l,m)&&r(h,m)&&p.push(m);for(;d.length>f;)r(h,m=d[f++])&&(~c(p,m)||p.push(m));return p}},"./node_modules/core-js/internals/object-keys.js":function(t,s,i){var r=i("./node_modules/core-js/internals/object-keys-internal.js"),a=i("./node_modules/core-js/internals/enum-bug-keys.js");t.exports=Object.keys||function(l){return r(l,a)}},"./node_modules/core-js/internals/object-property-is-enumerable.js":function(t,s,i){var r={}.propertyIsEnumerable,a=Object.getOwnPropertyDescriptor,o=a&&!r.call({1:2},1);s.f=o?function(c){var u=a(this,c);return!!u&&u.enumerable}:r},"./node_modules/core-js/internals/object-set-prototype-of.js":function(t,s,i){var r=i("./node_modules/core-js/internals/validate-set-prototype-of-arguments.js");t.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var a=!1,o={},l;try{l=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set,l.call(o,[]),a=o instanceof Array}catch{}return function(u,d){return r(u,d),a?l.call(u,d):u.__proto__=d,u}}():void 0)},"./node_modules/core-js/internals/own-keys.js":function(t,s,i){var r=i("./node_modules/core-js/internals/global.js"),a=i("./node_modules/core-js/internals/object-get-own-property-names.js"),o=i("./node_modules/core-js/internals/object-get-own-property-symbols.js"),l=i("./node_modules/core-js/internals/an-object.js"),c=r.Reflect;t.exports=c&&c.ownKeys||function(d){var h=a.f(l(d)),f=o.f;return f?h.concat(f(d)):h}},"./node_modules/core-js/internals/path.js":function(t,s,i){t.exports=i("./node_modules/core-js/internals/global.js")},"./node_modules/core-js/internals/redefine.js":function(t,s,i){var r=i("./node_modules/core-js/internals/global.js"),a=i("./node_modules/core-js/internals/shared.js"),o=i("./node_modules/core-js/internals/hide.js"),l=i("./node_modules/core-js/internals/has.js"),c=i("./node_modules/core-js/internals/set-global.js"),u=i("./node_modules/core-js/internals/function-to-string.js"),d=i("./node_modules/core-js/internals/internal-state.js"),h=d.get,f=d.enforce,p=String(u).split("toString");a("inspectSource",function(m){return u.call(m)}),(t.exports=function(m,y,g,v){var E=v?!!v.unsafe:!1,T=v?!!v.enumerable:!1,b=v?!!v.noTargetGet:!1;if(typeof g=="function"&&(typeof y=="string"&&!l(g,"name")&&o(g,"name",y),f(g).source=p.join(typeof y=="string"?y:"")),m===r){T?m[y]=g:c(y,g);return}else E?!b&&m[y]&&(T=!0):delete m[y];T?m[y]=g:o(m,y,g)})(Function.prototype,"toString",function(){return typeof this=="function"&&h(this).source||u.call(this)})},"./node_modules/core-js/internals/require-object-coercible.js":function(t,s){t.exports=function(i){if(i==null)throw TypeError("Can't call method on "+i);return i}},"./node_modules/core-js/internals/set-global.js":function(t,s,i){var r=i("./node_modules/core-js/internals/global.js"),a=i("./node_modules/core-js/internals/hide.js");t.exports=function(o,l){try{a(r,o,l)}catch{r[o]=l}return l}},"./node_modules/core-js/internals/set-to-string-tag.js":function(t,s,i){var r=i("./node_modules/core-js/internals/object-define-property.js").f,a=i("./node_modules/core-js/internals/has.js"),o=i("./node_modules/core-js/internals/well-known-symbol.js"),l=o("toStringTag");t.exports=function(c,u,d){c&&!a(c=d?c:c.prototype,l)&&r(c,l,{configurable:!0,value:u})}},"./node_modules/core-js/internals/shared-key.js":function(t,s,i){var r=i("./node_modules/core-js/internals/shared.js"),a=i("./node_modules/core-js/internals/uid.js"),o=r("keys");t.exports=function(l){return o[l]||(o[l]=a(l))}},"./node_modules/core-js/internals/shared.js":function(t,s,i){var r=i("./node_modules/core-js/internals/global.js"),a=i("./node_modules/core-js/internals/set-global.js"),o=i("./node_modules/core-js/internals/is-pure.js"),l="__core-js_shared__",c=r[l]||a(l,{});(t.exports=function(u,d){return c[u]||(c[u]=d!==void 0?d:{})})("versions",[]).push({version:"3.1.3",mode:o?"pure":"global",copyright:"© 2019 Denis Pushkarev (zloirock.ru)"})},"./node_modules/core-js/internals/string-at.js":function(t,s,i){var r=i("./node_modules/core-js/internals/to-integer.js"),a=i("./node_modules/core-js/internals/require-object-coercible.js");t.exports=function(o,l,c){var u=String(a(o)),d=r(l),h=u.length,f,p;return d<0||d>=h?c?"":void 0:(f=u.charCodeAt(d),f<55296||f>56319||d+1===h||(p=u.charCodeAt(d+1))<56320||p>57343?c?u.charAt(d):f:c?u.slice(d,d+2):(f-55296<<10)+(p-56320)+65536)}},"./node_modules/core-js/internals/to-absolute-index.js":function(t,s,i){var r=i("./node_modules/core-js/internals/to-integer.js"),a=Math.max,o=Math.min;t.exports=function(l,c){var u=r(l);return u<0?a(u+c,0):o(u,c)}},"./node_modules/core-js/internals/to-indexed-object.js":function(t,s,i){var r=i("./node_modules/core-js/internals/indexed-object.js"),a=i("./node_modules/core-js/internals/require-object-coercible.js");t.exports=function(o){return r(a(o))}},"./node_modules/core-js/internals/to-integer.js":function(t,s){var i=Math.ceil,r=Math.floor;t.exports=function(a){return isNaN(a=+a)?0:(a>0?r:i)(a)}},"./node_modules/core-js/internals/to-length.js":function(t,s,i){var r=i("./node_modules/core-js/internals/to-integer.js"),a=Math.min;t.exports=function(o){return o>0?a(r(o),9007199254740991):0}},"./node_modules/core-js/internals/to-object.js":function(t,s,i){var r=i("./node_modules/core-js/internals/require-object-coercible.js");t.exports=function(a){return Object(r(a))}},"./node_modules/core-js/internals/to-primitive.js":function(t,s,i){var r=i("./node_modules/core-js/internals/is-object.js");t.exports=function(a,o){if(!r(a))return a;var l,c;if(o&&typeof(l=a.toString)=="function"&&!r(c=l.call(a))||typeof(l=a.valueOf)=="function"&&!r(c=l.call(a))||!o&&typeof(l=a.toString)=="function"&&!r(c=l.call(a)))return c;throw TypeError("Can't convert object to primitive value")}},"./node_modules/core-js/internals/uid.js":function(t,s){var i=0,r=Math.random();t.exports=function(a){return"Symbol(".concat(a===void 0?"":a,")_",(++i+r).toString(36))}},"./node_modules/core-js/internals/validate-set-prototype-of-arguments.js":function(t,s,i){var r=i("./node_modules/core-js/internals/is-object.js"),a=i("./node_modules/core-js/internals/an-object.js");t.exports=function(o,l){if(a(o),!r(l)&&l!==null)throw TypeError("Can't set "+String(l)+" as a prototype")}},"./node_modules/core-js/internals/well-known-symbol.js":function(t,s,i){var r=i("./node_modules/core-js/internals/global.js"),a=i("./node_modules/core-js/internals/shared.js"),o=i("./node_modules/core-js/internals/uid.js"),l=i("./node_modules/core-js/internals/native-symbol.js"),c=r.Symbol,u=a("wks");t.exports=function(d){return u[d]||(u[d]=l&&c[d]||(l?c:o)("Symbol."+d))}},"./node_modules/core-js/modules/es.array.from.js":function(t,s,i){var r=i("./node_modules/core-js/internals/export.js"),a=i("./node_modules/core-js/internals/array-from.js"),o=i("./node_modules/core-js/internals/check-correctness-of-iteration.js"),l=!o(function(c){Array.from(c)});r({target:"Array",stat:!0,forced:l},{from:a})},"./node_modules/core-js/modules/es.string.iterator.js":function(t,s,i){var r=i("./node_modules/core-js/internals/string-at.js"),a=i("./node_modules/core-js/internals/internal-state.js"),o=i("./node_modules/core-js/internals/define-iterator.js"),l="String Iterator",c=a.set,u=a.getterFor(l);o(String,"String",function(d){c(this,{type:l,string:String(d),index:0})},function(){var h=u(this),f=h.string,p=h.index,m;return p>=f.length?{value:void 0,done:!0}:(m=r(f,p,!0),h.index+=m.length,{value:m,done:!1})})},"./node_modules/webpack/buildin/global.js":function(t,s){var i;i=function(){return this}();try{i=i||Function("return this")()||(0,eval)("this")}catch{typeof window=="object"&&(i=window)}t.exports=i},"./src/default-attrs.json":function(t){t.exports={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":2,"stroke-linecap":"round","stroke-linejoin":"round"}},"./src/icon.js":function(t,s,i){Object.defineProperty(s,"__esModule",{value:!0});var r=Object.assign||function(m){for(var y=1;y<arguments.length;y++){var g=arguments[y];for(var v in g)Object.prototype.hasOwnProperty.call(g,v)&&(m[v]=g[v])}return m},a=function(){function m(y,g){for(var v=0;v<g.length;v++){var E=g[v];E.enumerable=E.enumerable||!1,E.configurable=!0,"value"in E&&(E.writable=!0),Object.defineProperty(y,E.key,E)}}return function(y,g,v){return g&&m(y.prototype,g),v&&m(y,v),y}}(),o=i("./node_modules/classnames/dedupe.js"),l=d(o),c=i("./src/default-attrs.json"),u=d(c);function d(m){return m&&m.__esModule?m:{default:m}}function h(m,y){if(!(m instanceof y))throw new TypeError("Cannot call a class as a function")}var f=function(){function m(y,g){var v=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[];h(this,m),this.name=y,this.contents=g,this.tags=v,this.attrs=r({},u.default,{class:"feather feather-"+y})}return a(m,[{key:"toSvg",value:function(){var g=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},v=r({},this.attrs,g,{class:(0,l.default)(this.attrs.class,g.class)});return"<svg "+p(v)+">"+this.contents+"</svg>"}},{key:"toString",value:function(){return this.contents}}]),m}();function p(m){return Object.keys(m).map(function(y){return y+'="'+m[y]+'"'}).join(" ")}s.default=f},"./src/icons.js":function(t,s,i){Object.defineProperty(s,"__esModule",{value:!0});var r=i("./src/icon.js"),a=d(r),o=i("./dist/icons.json"),l=d(o),c=i("./src/tags.json"),u=d(c);function d(h){return h&&h.__esModule?h:{default:h}}s.default=Object.keys(l.default).map(function(h){return new a.default(h,l.default[h],u.default[h])}).reduce(function(h,f){return h[f.name]=f,h},{})},"./src/index.js":function(t,s,i){var r=i("./src/icons.js"),a=d(r),o=i("./src/to-svg.js"),l=d(o),c=i("./src/replace.js"),u=d(c);function d(h){return h&&h.__esModule?h:{default:h}}t.exports={icons:a.default,toSvg:l.default,replace:u.default}},"./src/replace.js":function(t,s,i){Object.defineProperty(s,"__esModule",{value:!0});var r=Object.assign||function(p){for(var m=1;m<arguments.length;m++){var y=arguments[m];for(var g in y)Object.prototype.hasOwnProperty.call(y,g)&&(p[g]=y[g])}return p},a=i("./node_modules/classnames/dedupe.js"),o=u(a),l=i("./src/icons.js"),c=u(l);function u(p){return p&&p.__esModule?p:{default:p}}function d(){var p=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(typeof document>"u")throw new Error("`feather.replace()` only works in a browser environment.");var m=document.querySelectorAll("[data-feather]");Array.from(m).forEach(function(y){return h(y,p)})}function h(p){var m=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},y=f(p),g=y["data-feather"];delete y["data-feather"];var v=c.default[g].toSvg(r({},m,y,{class:(0,o.default)(m.class,y.class)})),E=new DOMParser().parseFromString(v,"image/svg+xml"),T=E.querySelector("svg");p.parentNode.replaceChild(T,p)}function f(p){return Array.from(p.attributes).reduce(function(m,y){return m[y.name]=y.value,m},{})}s.default=d},"./src/tags.json":function(t){t.exports={activity:["pulse","health","action","motion"],airplay:["stream","cast","mirroring"],"alert-circle":["warning","alert","danger"],"alert-octagon":["warning","alert","danger"],"alert-triangle":["warning","alert","danger"],"align-center":["text alignment","center"],"align-justify":["text alignment","justified"],"align-left":["text alignment","left"],"align-right":["text alignment","right"],anchor:[],archive:["index","box"],"at-sign":["mention","at","email","message"],award:["achievement","badge"],aperture:["camera","photo"],"bar-chart":["statistics","diagram","graph"],"bar-chart-2":["statistics","diagram","graph"],battery:["power","electricity"],"battery-charging":["power","electricity"],bell:["alarm","notification","sound"],"bell-off":["alarm","notification","silent"],bluetooth:["wireless"],"book-open":["read","library"],book:["read","dictionary","booklet","magazine","library"],bookmark:["read","clip","marker","tag"],box:["cube"],briefcase:["work","bag","baggage","folder"],calendar:["date"],camera:["photo"],cast:["chromecast","airplay"],"chevron-down":["expand"],"chevron-up":["collapse"],circle:["off","zero","record"],clipboard:["copy"],clock:["time","watch","alarm"],"cloud-drizzle":["weather","shower"],"cloud-lightning":["weather","bolt"],"cloud-rain":["weather"],"cloud-snow":["weather","blizzard"],cloud:["weather"],codepen:["logo"],codesandbox:["logo"],code:["source","programming"],coffee:["drink","cup","mug","tea","cafe","hot","beverage"],columns:["layout"],command:["keyboard","cmd","terminal","prompt"],compass:["navigation","safari","travel","direction"],copy:["clone","duplicate"],"corner-down-left":["arrow","return"],"corner-down-right":["arrow"],"corner-left-down":["arrow"],"corner-left-up":["arrow"],"corner-right-down":["arrow"],"corner-right-up":["arrow"],"corner-up-left":["arrow"],"corner-up-right":["arrow"],cpu:["processor","technology"],"credit-card":["purchase","payment","cc"],crop:["photo","image"],crosshair:["aim","target"],database:["storage","memory"],delete:["remove"],disc:["album","cd","dvd","music"],"dollar-sign":["currency","money","payment"],droplet:["water"],edit:["pencil","change"],"edit-2":["pencil","change"],"edit-3":["pencil","change"],eye:["view","watch"],"eye-off":["view","watch","hide","hidden"],"external-link":["outbound"],facebook:["logo","social"],"fast-forward":["music"],figma:["logo","design","tool"],"file-minus":["delete","remove","erase"],"file-plus":["add","create","new"],"file-text":["data","txt","pdf"],film:["movie","video"],filter:["funnel","hopper"],flag:["report"],"folder-minus":["directory"],"folder-plus":["directory"],folder:["directory"],framer:["logo","design","tool"],frown:["emoji","face","bad","sad","emotion"],gift:["present","box","birthday","party"],"git-branch":["code","version control"],"git-commit":["code","version control"],"git-merge":["code","version control"],"git-pull-request":["code","version control"],github:["logo","version control"],gitlab:["logo","version control"],globe:["world","browser","language","translate"],"hard-drive":["computer","server","memory","data"],hash:["hashtag","number","pound"],headphones:["music","audio","sound"],heart:["like","love","emotion"],"help-circle":["question mark"],hexagon:["shape","node.js","logo"],home:["house","living"],image:["picture"],inbox:["email"],instagram:["logo","camera"],key:["password","login","authentication","secure"],layers:["stack"],layout:["window","webpage"],"life-buoy":["help","life ring","support"],link:["chain","url"],"link-2":["chain","url"],linkedin:["logo","social media"],list:["options"],lock:["security","password","secure"],"log-in":["sign in","arrow","enter"],"log-out":["sign out","arrow","exit"],mail:["email","message"],"map-pin":["location","navigation","travel","marker"],map:["location","navigation","travel"],maximize:["fullscreen"],"maximize-2":["fullscreen","arrows","expand"],meh:["emoji","face","neutral","emotion"],menu:["bars","navigation","hamburger"],"message-circle":["comment","chat"],"message-square":["comment","chat"],"mic-off":["record","sound","mute"],mic:["record","sound","listen"],minimize:["exit fullscreen","close"],"minimize-2":["exit fullscreen","arrows","close"],minus:["subtract"],monitor:["tv","screen","display"],moon:["dark","night"],"more-horizontal":["ellipsis"],"more-vertical":["ellipsis"],"mouse-pointer":["arrow","cursor"],move:["arrows"],music:["note"],navigation:["location","travel"],"navigation-2":["location","travel"],octagon:["stop"],package:["box","container"],paperclip:["attachment"],pause:["music","stop"],"pause-circle":["music","audio","stop"],"pen-tool":["vector","drawing"],percent:["discount"],"phone-call":["ring"],"phone-forwarded":["call"],"phone-incoming":["call"],"phone-missed":["call"],"phone-off":["call","mute"],"phone-outgoing":["call"],phone:["call"],play:["music","start"],"pie-chart":["statistics","diagram"],"play-circle":["music","start"],plus:["add","new"],"plus-circle":["add","new"],"plus-square":["add","new"],pocket:["logo","save"],power:["on","off"],printer:["fax","office","device"],radio:["signal"],"refresh-cw":["synchronise","arrows"],"refresh-ccw":["arrows"],repeat:["loop","arrows"],rewind:["music"],"rotate-ccw":["arrow"],"rotate-cw":["arrow"],rss:["feed","subscribe"],save:["floppy disk"],scissors:["cut"],search:["find","magnifier","magnifying glass"],send:["message","mail","email","paper airplane","paper aeroplane"],settings:["cog","edit","gear","preferences"],"share-2":["network","connections"],shield:["security","secure"],"shield-off":["security","insecure"],"shopping-bag":["ecommerce","cart","purchase","store"],"shopping-cart":["ecommerce","cart","purchase","store"],shuffle:["music"],"skip-back":["music"],"skip-forward":["music"],slack:["logo"],slash:["ban","no"],sliders:["settings","controls"],smartphone:["cellphone","device"],smile:["emoji","face","happy","good","emotion"],speaker:["audio","music"],star:["bookmark","favorite","like"],"stop-circle":["media","music"],sun:["brightness","weather","light"],sunrise:["weather","time","morning","day"],sunset:["weather","time","evening","night"],tablet:["device"],tag:["label"],target:["logo","bullseye"],terminal:["code","command line","prompt"],thermometer:["temperature","celsius","fahrenheit","weather"],"thumbs-down":["dislike","bad","emotion"],"thumbs-up":["like","good","emotion"],"toggle-left":["on","off","switch"],"toggle-right":["on","off","switch"],tool:["settings","spanner"],trash:["garbage","delete","remove","bin"],"trash-2":["garbage","delete","remove","bin"],triangle:["delta"],truck:["delivery","van","shipping","transport","lorry"],tv:["television","stream"],twitch:["logo"],twitter:["logo","social"],type:["text"],umbrella:["rain","weather"],unlock:["security"],"user-check":["followed","subscribed"],"user-minus":["delete","remove","unfollow","unsubscribe"],"user-plus":["new","add","create","follow","subscribe"],"user-x":["delete","remove","unfollow","unsubscribe","unavailable"],user:["person","account"],users:["group"],"video-off":["camera","movie","film"],video:["camera","movie","film"],voicemail:["phone"],volume:["music","sound","mute"],"volume-1":["music","sound"],"volume-2":["music","sound"],"volume-x":["music","sound","mute"],watch:["clock","time"],"wifi-off":["disabled"],wifi:["connection","signal","wireless"],wind:["weather","air"],"x-circle":["cancel","close","delete","remove","times","clear"],"x-octagon":["delete","stop","alert","warning","times","clear"],"x-square":["cancel","close","delete","remove","times","clear"],x:["cancel","close","delete","remove","times","clear"],youtube:["logo","video","play"],"zap-off":["flash","camera","lightning"],zap:["flash","camera","lightning"],"zoom-in":["magnifying glass"],"zoom-out":["magnifying glass"]}},"./src/to-svg.js":function(t,s,i){Object.defineProperty(s,"__esModule",{value:!0});var r=i("./src/icons.js"),a=o(r);function o(c){return c&&c.__esModule?c:{default:c}}function l(c){var u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(console.warn("feather.toSvg() is deprecated. Please use feather.icons[name].toSvg() instead."),!c)throw new Error("The required `key` (icon name) parameter is missing.");if(!a.default[c])throw new Error("No icon matching '"+c+"'. See the complete list of icons at https://feathericons.com");return a.default[c].toSvg(u)}s.default=l},0:function(t,s,i){i("./node_modules/core-js/es/array/from.js"),t.exports=i("./src/index.js")}})})})($1);var B_=$1.exports;const Tn=U1(B_);function Pc(n,e){return ve(),Te("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true"},[_("path",{"fill-rule":"evenodd",d:"M19.916 4.626a.75.75 0 01.208 1.04l-9 13.5a.75.75 0 01-1.154.114l-6-6a.75.75 0 011.06-1.06l5.353 5.353 8.493-12.739a.75.75 0 011.04-.208z","clip-rule":"evenodd"})])}/*!
  * shared v9.7.0
  * (c) 2023 kazuya kawaguchi
  * Released under the MIT License.
  */const ud=typeof window<"u",xi=(n,e=!1)=>e?Symbol.for(n):Symbol(n),U_=(n,e,t)=>$_({l:n,k:e,s:t}),$_=n=>JSON.stringify(n).replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029").replace(/\u0027/g,"\\u0027"),kt=n=>typeof n=="number"&&isFinite(n),j_=n=>G1(n)==="[object Date]",bi=n=>G1(n)==="[object RegExp]",ic=n=>je(n)&&Object.keys(n).length===0,Yt=Object.assign;let Fp;const Fn=()=>Fp||(Fp=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function Np(n){return n.replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;")}const G_=Object.prototype.hasOwnProperty;function $a(n,e){return G_.call(n,e)}const pt=Array.isArray,bt=n=>typeof n=="function",be=n=>typeof n=="string",He=n=>typeof n=="boolean",it=n=>n!==null&&typeof n=="object",j1=Object.prototype.toString,G1=n=>j1.call(n),je=n=>{if(!it(n))return!1;const e=Object.getPrototypeOf(n);return e===null||e.constructor===Object},V_=n=>n==null?"":pt(n)||je(n)&&n.toString===j1?JSON.stringify(n,null,2):String(n);function H_(n,e=""){return n.reduce((t,s,i)=>i===0?t+s:t+e+s,"")}function Kh(n){let e=n;return()=>++e}function K_(n,e){typeof console<"u"&&(console.warn("[intlify] "+n),e&&console.warn(e.stack))}const bo=n=>!it(n)||pt(n);function ba(n,e){if(bo(n)||bo(e))throw new Error("Invalid value");for(const t in n)$a(n,t)&&(bo(n[t])||bo(e[t])?e[t]=n[t]:ba(n[t],e[t]))}/*!
  * message-compiler v9.7.0
  * (c) 2023 kazuya kawaguchi
  * Released under the MIT License.
  */function W_(n,e,t){return{line:n,column:e,offset:t}}function dd(n,e,t){const s={start:n,end:e};return t!=null&&(s.source=t),s}const z_=/\{([0-9a-zA-Z]+)\}/g;function Y_(n,...e){return e.length===1&&q_(e[0])&&(e=e[0]),(!e||!e.hasOwnProperty)&&(e={}),n.replace(z_,(t,s)=>e.hasOwnProperty(s)?e[s]:"")}const V1=Object.assign,Bp=n=>typeof n=="string",q_=n=>n!==null&&typeof n=="object";function H1(n,e=""){return n.reduce((t,s,i)=>i===0?t+s:t+e+s,"")}const Fe={EXPECTED_TOKEN:1,INVALID_TOKEN_IN_PLACEHOLDER:2,UNTERMINATED_SINGLE_QUOTE_IN_PLACEHOLDER:3,UNKNOWN_ESCAPE_SEQUENCE:4,INVALID_UNICODE_ESCAPE_SEQUENCE:5,UNBALANCED_CLOSING_BRACE:6,UNTERMINATED_CLOSING_BRACE:7,EMPTY_PLACEHOLDER:8,NOT_ALLOW_NEST_PLACEHOLDER:9,INVALID_LINKED_FORMAT:10,MUST_HAVE_MESSAGES_IN_PLURAL:11,UNEXPECTED_EMPTY_LINKED_MODIFIER:12,UNEXPECTED_EMPTY_LINKED_KEY:13,UNEXPECTED_LEXICAL_ANALYSIS:14,UNHANDLED_CODEGEN_NODE_TYPE:15,UNHANDLED_MINIFIER_NODE_TYPE:16,__EXTEND_POINT__:17},X_={[Fe.EXPECTED_TOKEN]:"Expected token: '{0}'",[Fe.INVALID_TOKEN_IN_PLACEHOLDER]:"Invalid token in placeholder: '{0}'",[Fe.UNTERMINATED_SINGLE_QUOTE_IN_PLACEHOLDER]:"Unterminated single quote in placeholder",[Fe.UNKNOWN_ESCAPE_SEQUENCE]:"Unknown escape sequence: \\{0}",[Fe.INVALID_UNICODE_ESCAPE_SEQUENCE]:"Invalid unicode escape sequence: {0}",[Fe.UNBALANCED_CLOSING_BRACE]:"Unbalanced closing brace",[Fe.UNTERMINATED_CLOSING_BRACE]:"Unterminated closing brace",[Fe.EMPTY_PLACEHOLDER]:"Empty placeholder",[Fe.NOT_ALLOW_NEST_PLACEHOLDER]:"Not allowed nest placeholder",[Fe.INVALID_LINKED_FORMAT]:"Invalid linked format",[Fe.MUST_HAVE_MESSAGES_IN_PLURAL]:"Plural must have messages",[Fe.UNEXPECTED_EMPTY_LINKED_MODIFIER]:"Unexpected empty linked modifier",[Fe.UNEXPECTED_EMPTY_LINKED_KEY]:"Unexpected empty linked key",[Fe.UNEXPECTED_LEXICAL_ANALYSIS]:"Unexpected lexical analysis in token: '{0}'",[Fe.UNHANDLED_CODEGEN_NODE_TYPE]:"unhandled codegen node type: '{0}'",[Fe.UNHANDLED_MINIFIER_NODE_TYPE]:"unhandled mimifier node type: '{0}'"};function Qr(n,e,t={}){const{domain:s,messages:i,args:r}=t,a=Y_((i||X_)[n]||"",...r||[]),o=new SyntaxError(String(a));return o.code=n,e&&(o.location=e),o.domain=s,o}function Q_(n){throw n}const Sn=" ",J_="\r",ns=`
`,Z_=String.fromCharCode(8232),eA=String.fromCharCode(8233);function tA(n){const e=n;let t=0,s=1,i=1,r=0;const a=x=>e[x]===J_&&e[x+1]===ns,o=x=>e[x]===ns,l=x=>e[x]===eA,c=x=>e[x]===Z_,u=x=>a(x)||o(x)||l(x)||c(x),d=()=>t,h=()=>s,f=()=>i,p=()=>r,m=x=>a(x)||l(x)||c(x)?ns:e[x],y=()=>m(t),g=()=>m(t+r);function v(){return r=0,u(t)&&(s++,i=0),a(t)&&t++,t++,i++,e[t]}function E(){return a(t+r)&&r++,r++,e[t+r]}function T(){t=0,s=1,i=1,r=0}function b(x=0){r=x}function L(){const x=t+r;for(;x!==t;)v();r=0}return{index:d,line:h,column:f,peekOffset:p,charAt:m,currentChar:y,currentPeek:g,next:v,peek:E,reset:T,resetPeek:b,skipToPeek:L}}const qn=void 0,sA=".",Up="'",nA="tokenizer";function iA(n,e={}){const t=e.location!==!1,s=tA(n),i=()=>s.index(),r=()=>W_(s.line(),s.column(),s.index()),a=r(),o=i(),l={currentType:14,offset:o,startLoc:a,endLoc:a,lastType:14,lastOffset:o,lastStartLoc:a,lastEndLoc:a,braceNest:0,inLinked:!1,text:""},c=()=>l,{onError:u}=e;function d(A,S,M,...G){const J=c();if(S.column+=M,S.offset+=M,u){const le=t?dd(J.startLoc,S):null,pe=Qr(A,le,{domain:nA,args:G});u(pe)}}function h(A,S,M){A.endLoc=r(),A.currentType=S;const G={type:S};return t&&(G.loc=dd(A.startLoc,A.endLoc)),M!=null&&(G.value=M),G}const f=A=>h(A,14);function p(A,S){return A.currentChar()===S?(A.next(),S):(d(Fe.EXPECTED_TOKEN,r(),0,S),"")}function m(A){let S="";for(;A.currentPeek()===Sn||A.currentPeek()===ns;)S+=A.currentPeek(),A.peek();return S}function y(A){const S=m(A);return A.skipToPeek(),S}function g(A){if(A===qn)return!1;const S=A.charCodeAt(0);return S>=97&&S<=122||S>=65&&S<=90||S===95}function v(A){if(A===qn)return!1;const S=A.charCodeAt(0);return S>=48&&S<=57}function E(A,S){const{currentType:M}=S;if(M!==2)return!1;m(A);const G=g(A.currentPeek());return A.resetPeek(),G}function T(A,S){const{currentType:M}=S;if(M!==2)return!1;m(A);const G=A.currentPeek()==="-"?A.peek():A.currentPeek(),J=v(G);return A.resetPeek(),J}function b(A,S){const{currentType:M}=S;if(M!==2)return!1;m(A);const G=A.currentPeek()===Up;return A.resetPeek(),G}function L(A,S){const{currentType:M}=S;if(M!==8)return!1;m(A);const G=A.currentPeek()===".";return A.resetPeek(),G}function x(A,S){const{currentType:M}=S;if(M!==9)return!1;m(A);const G=g(A.currentPeek());return A.resetPeek(),G}function w(A,S){const{currentType:M}=S;if(!(M===8||M===12))return!1;m(A);const G=A.currentPeek()===":";return A.resetPeek(),G}function k(A,S){const{currentType:M}=S;if(M!==10)return!1;const G=()=>{const le=A.currentPeek();return le==="{"?g(A.peek()):le==="@"||le==="%"||le==="|"||le===":"||le==="."||le===Sn||!le?!1:le===ns?(A.peek(),G()):g(le)},J=G();return A.resetPeek(),J}function R(A){m(A);const S=A.currentPeek()==="|";return A.resetPeek(),S}function P(A){const S=m(A),M=A.currentPeek()==="%"&&A.peek()==="{";return A.resetPeek(),{isModulo:M,hasSpace:S.length>0}}function D(A,S=!0){const M=(J=!1,le="",pe=!1)=>{const ye=A.currentPeek();return ye==="{"?le==="%"?!1:J:ye==="@"||!ye?le==="%"?!0:J:ye==="%"?(A.peek(),M(J,"%",!0)):ye==="|"?le==="%"||pe?!0:!(le===Sn||le===ns):ye===Sn?(A.peek(),M(!0,Sn,pe)):ye===ns?(A.peek(),M(!0,ns,pe)):!0},G=M();return S&&A.resetPeek(),G}function O(A,S){const M=A.currentChar();return M===qn?qn:S(M)?(A.next(),M):null}function N(A){return O(A,M=>{const G=M.charCodeAt(0);return G>=97&&G<=122||G>=65&&G<=90||G>=48&&G<=57||G===95||G===36})}function $(A){return O(A,M=>{const G=M.charCodeAt(0);return G>=48&&G<=57})}function K(A){return O(A,M=>{const G=M.charCodeAt(0);return G>=48&&G<=57||G>=65&&G<=70||G>=97&&G<=102})}function ee(A){let S="",M="";for(;S=$(A);)M+=S;return M}function V(A){y(A);const S=A.currentChar();return S!=="%"&&d(Fe.EXPECTED_TOKEN,r(),0,S),A.next(),"%"}function U(A){let S="";for(;;){const M=A.currentChar();if(M==="{"||M==="}"||M==="@"||M==="|"||!M)break;if(M==="%")if(D(A))S+=M,A.next();else break;else if(M===Sn||M===ns)if(D(A))S+=M,A.next();else{if(R(A))break;S+=M,A.next()}else S+=M,A.next()}return S}function B(A){y(A);let S="",M="";for(;S=N(A);)M+=S;return A.currentChar()===qn&&d(Fe.UNTERMINATED_CLOSING_BRACE,r(),0),M}function j(A){y(A);let S="";return A.currentChar()==="-"?(A.next(),S+=`-${ee(A)}`):S+=ee(A),A.currentChar()===qn&&d(Fe.UNTERMINATED_CLOSING_BRACE,r(),0),S}function Y(A){y(A),p(A,"'");let S="",M="";const G=le=>le!==Up&&le!==ns;for(;S=O(A,G);)S==="\\"?M+=me(A):M+=S;const J=A.currentChar();return J===ns||J===qn?(d(Fe.UNTERMINATED_SINGLE_QUOTE_IN_PLACEHOLDER,r(),0),J===ns&&(A.next(),p(A,"'")),M):(p(A,"'"),M)}function me(A){const S=A.currentChar();switch(S){case"\\":case"'":return A.next(),`\\${S}`;case"u":return xe(A,S,4);case"U":return xe(A,S,6);default:return d(Fe.UNKNOWN_ESCAPE_SEQUENCE,r(),0,S),""}}function xe(A,S,M){p(A,S);let G="";for(let J=0;J<M;J++){const le=K(A);if(!le){d(Fe.INVALID_UNICODE_ESCAPE_SEQUENCE,r(),0,`\\${S}${G}${A.currentChar()}`);break}G+=le}return`\\${S}${G}`}function Le(A){y(A);let S="",M="";const G=J=>J!=="{"&&J!=="}"&&J!==Sn&&J!==ns;for(;S=O(A,G);)M+=S;return M}function we(A){let S="",M="";for(;S=N(A);)M+=S;return M}function Q(A){const S=(M=!1,G)=>{const J=A.currentChar();return J==="{"||J==="%"||J==="@"||J==="|"||J==="("||J===")"||!J||J===Sn?G:J===ns||J===sA?(G+=J,A.next(),S(M,G)):(G+=J,A.next(),S(!0,G))};return S(!1,"")}function oe(A){y(A);const S=p(A,"|");return y(A),S}function q(A,S){let M=null;switch(A.currentChar()){case"{":return S.braceNest>=1&&d(Fe.NOT_ALLOW_NEST_PLACEHOLDER,r(),0),A.next(),M=h(S,2,"{"),y(A),S.braceNest++,M;case"}":return S.braceNest>0&&S.currentType===2&&d(Fe.EMPTY_PLACEHOLDER,r(),0),A.next(),M=h(S,3,"}"),S.braceNest--,S.braceNest>0&&y(A),S.inLinked&&S.braceNest===0&&(S.inLinked=!1),M;case"@":return S.braceNest>0&&d(Fe.UNTERMINATED_CLOSING_BRACE,r(),0),M=ge(A,S)||f(S),S.braceNest=0,M;default:let J=!0,le=!0,pe=!0;if(R(A))return S.braceNest>0&&d(Fe.UNTERMINATED_CLOSING_BRACE,r(),0),M=h(S,1,oe(A)),S.braceNest=0,S.inLinked=!1,M;if(S.braceNest>0&&(S.currentType===5||S.currentType===6||S.currentType===7))return d(Fe.UNTERMINATED_CLOSING_BRACE,r(),0),S.braceNest=0,Re(A,S);if(J=E(A,S))return M=h(S,5,B(A)),y(A),M;if(le=T(A,S))return M=h(S,6,j(A)),y(A),M;if(pe=b(A,S))return M=h(S,7,Y(A)),y(A),M;if(!J&&!le&&!pe)return M=h(S,13,Le(A)),d(Fe.INVALID_TOKEN_IN_PLACEHOLDER,r(),0,M.value),y(A),M;break}return M}function ge(A,S){const{currentType:M}=S;let G=null;const J=A.currentChar();switch((M===8||M===9||M===12||M===10)&&(J===ns||J===Sn)&&d(Fe.INVALID_LINKED_FORMAT,r(),0),J){case"@":return A.next(),G=h(S,8,"@"),S.inLinked=!0,G;case".":return y(A),A.next(),h(S,9,".");case":":return y(A),A.next(),h(S,10,":");default:return R(A)?(G=h(S,1,oe(A)),S.braceNest=0,S.inLinked=!1,G):L(A,S)||w(A,S)?(y(A),ge(A,S)):x(A,S)?(y(A),h(S,12,we(A))):k(A,S)?(y(A),J==="{"?q(A,S)||G:h(S,11,Q(A))):(M===8&&d(Fe.INVALID_LINKED_FORMAT,r(),0),S.braceNest=0,S.inLinked=!1,Re(A,S))}}function Re(A,S){let M={type:14};if(S.braceNest>0)return q(A,S)||f(S);if(S.inLinked)return ge(A,S)||f(S);switch(A.currentChar()){case"{":return q(A,S)||f(S);case"}":return d(Fe.UNBALANCED_CLOSING_BRACE,r(),0),A.next(),h(S,3,"}");case"@":return ge(A,S)||f(S);default:if(R(A))return M=h(S,1,oe(A)),S.braceNest=0,S.inLinked=!1,M;const{isModulo:J,hasSpace:le}=P(A);if(J)return le?h(S,0,U(A)):h(S,4,V(A));if(D(A))return h(S,0,U(A));break}return M}function F(){const{currentType:A,offset:S,startLoc:M,endLoc:G}=l;return l.lastType=A,l.lastOffset=S,l.lastStartLoc=M,l.lastEndLoc=G,l.offset=i(),l.startLoc=r(),s.currentChar()===qn?h(l,14):Re(s,l)}return{nextToken:F,currentOffset:i,currentPosition:r,context:c}}const rA="parser",aA=/(?:\\\\|\\'|\\u([0-9a-fA-F]{4})|\\U([0-9a-fA-F]{6}))/g;function oA(n,e,t){switch(n){case"\\\\":return"\\";case"\\'":return"'";default:{const s=parseInt(e||t,16);return s<=55295||s>=57344?String.fromCodePoint(s):"�"}}}function lA(n={}){const e=n.location!==!1,{onError:t}=n;function s(g,v,E,T,...b){const L=g.currentPosition();if(L.offset+=T,L.column+=T,t){const x=e?dd(E,L):null,w=Qr(v,x,{domain:rA,args:b});t(w)}}function i(g,v,E){const T={type:g};return e&&(T.start=v,T.end=v,T.loc={start:E,end:E}),T}function r(g,v,E,T){T&&(g.type=T),e&&(g.end=v,g.loc&&(g.loc.end=E))}function a(g,v){const E=g.context(),T=i(3,E.offset,E.startLoc);return T.value=v,r(T,g.currentOffset(),g.currentPosition()),T}function o(g,v){const E=g.context(),{lastOffset:T,lastStartLoc:b}=E,L=i(5,T,b);return L.index=parseInt(v,10),g.nextToken(),r(L,g.currentOffset(),g.currentPosition()),L}function l(g,v){const E=g.context(),{lastOffset:T,lastStartLoc:b}=E,L=i(4,T,b);return L.key=v,g.nextToken(),r(L,g.currentOffset(),g.currentPosition()),L}function c(g,v){const E=g.context(),{lastOffset:T,lastStartLoc:b}=E,L=i(9,T,b);return L.value=v.replace(aA,oA),g.nextToken(),r(L,g.currentOffset(),g.currentPosition()),L}function u(g){const v=g.nextToken(),E=g.context(),{lastOffset:T,lastStartLoc:b}=E,L=i(8,T,b);return v.type!==12?(s(g,Fe.UNEXPECTED_EMPTY_LINKED_MODIFIER,E.lastStartLoc,0),L.value="",r(L,T,b),{nextConsumeToken:v,node:L}):(v.value==null&&s(g,Fe.UNEXPECTED_LEXICAL_ANALYSIS,E.lastStartLoc,0,tn(v)),L.value=v.value||"",r(L,g.currentOffset(),g.currentPosition()),{node:L})}function d(g,v){const E=g.context(),T=i(7,E.offset,E.startLoc);return T.value=v,r(T,g.currentOffset(),g.currentPosition()),T}function h(g){const v=g.context(),E=i(6,v.offset,v.startLoc);let T=g.nextToken();if(T.type===9){const b=u(g);E.modifier=b.node,T=b.nextConsumeToken||g.nextToken()}switch(T.type!==10&&s(g,Fe.UNEXPECTED_LEXICAL_ANALYSIS,v.lastStartLoc,0,tn(T)),T=g.nextToken(),T.type===2&&(T=g.nextToken()),T.type){case 11:T.value==null&&s(g,Fe.UNEXPECTED_LEXICAL_ANALYSIS,v.lastStartLoc,0,tn(T)),E.key=d(g,T.value||"");break;case 5:T.value==null&&s(g,Fe.UNEXPECTED_LEXICAL_ANALYSIS,v.lastStartLoc,0,tn(T)),E.key=l(g,T.value||"");break;case 6:T.value==null&&s(g,Fe.UNEXPECTED_LEXICAL_ANALYSIS,v.lastStartLoc,0,tn(T)),E.key=o(g,T.value||"");break;case 7:T.value==null&&s(g,Fe.UNEXPECTED_LEXICAL_ANALYSIS,v.lastStartLoc,0,tn(T)),E.key=c(g,T.value||"");break;default:s(g,Fe.UNEXPECTED_EMPTY_LINKED_KEY,v.lastStartLoc,0);const b=g.context(),L=i(7,b.offset,b.startLoc);return L.value="",r(L,b.offset,b.startLoc),E.key=L,r(E,b.offset,b.startLoc),{nextConsumeToken:T,node:E}}return r(E,g.currentOffset(),g.currentPosition()),{node:E}}function f(g){const v=g.context(),E=v.currentType===1?g.currentOffset():v.offset,T=v.currentType===1?v.endLoc:v.startLoc,b=i(2,E,T);b.items=[];let L=null;do{const k=L||g.nextToken();switch(L=null,k.type){case 0:k.value==null&&s(g,Fe.UNEXPECTED_LEXICAL_ANALYSIS,v.lastStartLoc,0,tn(k)),b.items.push(a(g,k.value||""));break;case 6:k.value==null&&s(g,Fe.UNEXPECTED_LEXICAL_ANALYSIS,v.lastStartLoc,0,tn(k)),b.items.push(o(g,k.value||""));break;case 5:k.value==null&&s(g,Fe.UNEXPECTED_LEXICAL_ANALYSIS,v.lastStartLoc,0,tn(k)),b.items.push(l(g,k.value||""));break;case 7:k.value==null&&s(g,Fe.UNEXPECTED_LEXICAL_ANALYSIS,v.lastStartLoc,0,tn(k)),b.items.push(c(g,k.value||""));break;case 8:const R=h(g);b.items.push(R.node),L=R.nextConsumeToken||null;break}}while(v.currentType!==14&&v.currentType!==1);const x=v.currentType===1?v.lastOffset:g.currentOffset(),w=v.currentType===1?v.lastEndLoc:g.currentPosition();return r(b,x,w),b}function p(g,v,E,T){const b=g.context();let L=T.items.length===0;const x=i(1,v,E);x.cases=[],x.cases.push(T);do{const w=f(g);L||(L=w.items.length===0),x.cases.push(w)}while(b.currentType!==14);return L&&s(g,Fe.MUST_HAVE_MESSAGES_IN_PLURAL,E,0),r(x,g.currentOffset(),g.currentPosition()),x}function m(g){const v=g.context(),{offset:E,startLoc:T}=v,b=f(g);return v.currentType===14?b:p(g,E,T,b)}function y(g){const v=iA(g,V1({},n)),E=v.context(),T=i(0,E.offset,E.startLoc);return e&&T.loc&&(T.loc.source=g),T.body=m(v),n.onCacheKey&&(T.cacheKey=n.onCacheKey(g)),E.currentType!==14&&s(v,Fe.UNEXPECTED_LEXICAL_ANALYSIS,E.lastStartLoc,0,g[E.offset]||""),r(T,v.currentOffset(),v.currentPosition()),T}return{parse:y}}function tn(n){if(n.type===14)return"EOF";const e=(n.value||"").replace(/\r?\n/gu,"\\n");return e.length>10?e.slice(0,9)+"…":e}function cA(n,e={}){const t={ast:n,helpers:new Set};return{context:()=>t,helper:r=>(t.helpers.add(r),r)}}function $p(n,e){for(let t=0;t<n.length;t++)Wh(n[t],e)}function Wh(n,e){switch(n.type){case 1:$p(n.cases,e),e.helper("plural");break;case 2:$p(n.items,e);break;case 6:Wh(n.key,e),e.helper("linked"),e.helper("type");break;case 5:e.helper("interpolate"),e.helper("list");break;case 4:e.helper("interpolate"),e.helper("named");break}}function uA(n,e={}){const t=cA(n);t.helper("normalize"),n.body&&Wh(n.body,t);const s=t.context();n.helpers=Array.from(s.helpers)}function dA(n){const e=n.body;return e.type===2?jp(e):e.cases.forEach(t=>jp(t)),n}function jp(n){if(n.items.length===1){const e=n.items[0];(e.type===3||e.type===9)&&(n.static=e.value,delete e.value)}else{const e=[];for(let t=0;t<n.items.length;t++){const s=n.items[t];if(!(s.type===3||s.type===9)||s.value==null)break;e.push(s.value)}if(e.length===n.items.length){n.static=H1(e);for(let t=0;t<n.items.length;t++){const s=n.items[t];(s.type===3||s.type===9)&&delete s.value}}}}const hA="minifier";function mr(n){switch(n.t=n.type,n.type){case 0:const e=n;mr(e.body),e.b=e.body,delete e.body;break;case 1:const t=n,s=t.cases;for(let u=0;u<s.length;u++)mr(s[u]);t.c=s,delete t.cases;break;case 2:const i=n,r=i.items;for(let u=0;u<r.length;u++)mr(r[u]);i.i=r,delete i.items,i.static&&(i.s=i.static,delete i.static);break;case 3:case 9:case 8:case 7:const a=n;a.value&&(a.v=a.value,delete a.value);break;case 6:const o=n;mr(o.key),o.k=o.key,delete o.key,o.modifier&&(mr(o.modifier),o.m=o.modifier,delete o.modifier);break;case 5:const l=n;l.i=l.index,delete l.index;break;case 4:const c=n;c.k=c.key,delete c.key;break;default:throw Qr(Fe.UNHANDLED_MINIFIER_NODE_TYPE,null,{domain:hA,args:[n.type]})}delete n.type}const fA="parser";function pA(n,e){const{sourceMap:t,filename:s,breakLineCode:i,needIndent:r}=e,a=e.location!==!1,o={filename:s,code:"",column:1,line:1,offset:0,map:void 0,breakLineCode:i,needIndent:r,indentLevel:0};a&&n.loc&&(o.source=n.loc.source);const l=()=>o;function c(y,g){o.code+=y}function u(y,g=!0){const v=g?i:"";c(r?v+"  ".repeat(y):v)}function d(y=!0){const g=++o.indentLevel;y&&u(g)}function h(y=!0){const g=--o.indentLevel;y&&u(g)}function f(){u(o.indentLevel)}return{context:l,push:c,indent:d,deindent:h,newline:f,helper:y=>`_${y}`,needIndent:()=>o.needIndent}}function mA(n,e){const{helper:t}=n;n.push(`${t("linked")}(`),Fr(n,e.key),e.modifier?(n.push(", "),Fr(n,e.modifier),n.push(", _type")):n.push(", undefined, _type"),n.push(")")}function gA(n,e){const{helper:t,needIndent:s}=n;n.push(`${t("normalize")}([`),n.indent(s());const i=e.items.length;for(let r=0;r<i&&(Fr(n,e.items[r]),r!==i-1);r++)n.push(", ");n.deindent(s()),n.push("])")}function yA(n,e){const{helper:t,needIndent:s}=n;if(e.cases.length>1){n.push(`${t("plural")}([`),n.indent(s());const i=e.cases.length;for(let r=0;r<i&&(Fr(n,e.cases[r]),r!==i-1);r++)n.push(", ");n.deindent(s()),n.push("])")}}function vA(n,e){e.body?Fr(n,e.body):n.push("null")}function Fr(n,e){const{helper:t}=n;switch(e.type){case 0:vA(n,e);break;case 1:yA(n,e);break;case 2:gA(n,e);break;case 6:mA(n,e);break;case 8:n.push(JSON.stringify(e.value),e);break;case 7:n.push(JSON.stringify(e.value),e);break;case 5:n.push(`${t("interpolate")}(${t("list")}(${e.index}))`,e);break;case 4:n.push(`${t("interpolate")}(${t("named")}(${JSON.stringify(e.key)}))`,e);break;case 9:n.push(JSON.stringify(e.value),e);break;case 3:n.push(JSON.stringify(e.value),e);break;default:throw Qr(Fe.UNHANDLED_CODEGEN_NODE_TYPE,null,{domain:fA,args:[e.type]})}}const EA=(n,e={})=>{const t=Bp(e.mode)?e.mode:"normal",s=Bp(e.filename)?e.filename:"message.intl",i=!!e.sourceMap,r=e.breakLineCode!=null?e.breakLineCode:t==="arrow"?";":`
`,a=e.needIndent?e.needIndent:t!=="arrow",o=n.helpers||[],l=pA(n,{mode:t,filename:s,sourceMap:i,breakLineCode:r,needIndent:a});l.push(t==="normal"?"function __msg__ (ctx) {":"(ctx) => {"),l.indent(a),o.length>0&&(l.push(`const { ${H1(o.map(d=>`${d}: _${d}`),", ")} } = ctx`),l.newline()),l.push("return "),Fr(l,n),l.deindent(a),l.push("}"),delete n.helpers;const{code:c,map:u}=l.context();return{ast:n,code:c,map:u?u.toJSON():void 0}};function TA(n,e={}){const t=V1({},e),s=!!t.jit,i=!!t.minify,r=t.optimize==null?!0:t.optimize,o=lA(t).parse(n);return s?(r&&dA(o),i&&mr(o),{ast:o,code:""}):(uA(o,t),EA(o,t))}/*!
  * core-base v9.7.0
  * (c) 2023 kazuya kawaguchi
  * Released under the MIT License.
  */function bA(){typeof __INTLIFY_PROD_DEVTOOLS__!="boolean"&&(Fn().__INTLIFY_PROD_DEVTOOLS__=!1),typeof __INTLIFY_JIT_COMPILATION__!="boolean"&&(Fn().__INTLIFY_JIT_COMPILATION__=!1),typeof __INTLIFY_DROP_MESSAGE_COMPILER__!="boolean"&&(Fn().__INTLIFY_DROP_MESSAGE_COMPILER__=!1)}const Si=[];Si[0]={w:[0],i:[3,0],"[":[4],o:[7]};Si[1]={w:[1],".":[2],"[":[4],o:[7]};Si[2]={w:[2],i:[3,0],0:[3,0]};Si[3]={i:[3,0],0:[3,0],w:[1,1],".":[2,1],"[":[4,1],o:[7,1]};Si[4]={"'":[5,0],'"':[6,0],"[":[4,2],"]":[1,3],o:8,l:[4,0]};Si[5]={"'":[4,0],o:8,l:[5,0]};Si[6]={'"':[4,0],o:8,l:[6,0]};const xA=/^\s?(?:true|false|-?[\d.]+|'[^']*'|"[^"]*")\s?$/;function SA(n){return xA.test(n)}function _A(n){const e=n.charCodeAt(0),t=n.charCodeAt(n.length-1);return e===t&&(e===34||e===39)?n.slice(1,-1):n}function AA(n){if(n==null)return"o";switch(n.charCodeAt(0)){case 91:case 93:case 46:case 34:case 39:return n;case 95:case 36:case 45:return"i";case 9:case 10:case 13:case 160:case 65279:case 8232:case 8233:return"w"}return"i"}function LA(n){const e=n.trim();return n.charAt(0)==="0"&&isNaN(parseInt(n))?!1:SA(e)?_A(e):"*"+e}function wA(n){const e=[];let t=-1,s=0,i=0,r,a,o,l,c,u,d;const h=[];h[0]=()=>{a===void 0?a=o:a+=o},h[1]=()=>{a!==void 0&&(e.push(a),a=void 0)},h[2]=()=>{h[0](),i++},h[3]=()=>{if(i>0)i--,s=4,h[0]();else{if(i=0,a===void 0||(a=LA(a),a===!1))return!1;h[1]()}};function f(){const p=n[t+1];if(s===5&&p==="'"||s===6&&p==='"')return t++,o="\\"+p,h[0](),!0}for(;s!==null;)if(t++,r=n[t],!(r==="\\"&&f())){if(l=AA(r),d=Si[s],c=d[l]||d.l||8,c===8||(s=c[0],c[1]!==void 0&&(u=h[c[1]],u&&(o=r,u()===!1))))return;if(s===7)return e}}const Gp=new Map;function RA(n,e){return it(n)?n[e]:null}function IA(n,e){if(!it(n))return null;let t=Gp.get(e);if(t||(t=wA(e),t&&Gp.set(e,t)),!t)return null;const s=t.length;let i=n,r=0;for(;r<s;){const a=i[t[r]];if(a===void 0||bt(i))return null;i=a,r++}return i}const CA=n=>n,DA=n=>"",kA="text",PA=n=>n.length===0?"":H_(n),OA=V_;function Vp(n,e){return n=Math.abs(n),e===2?n?n>1?1:0:1:n?Math.min(n,2):0}function MA(n){const e=kt(n.pluralIndex)?n.pluralIndex:-1;return n.named&&(kt(n.named.count)||kt(n.named.n))?kt(n.named.count)?n.named.count:kt(n.named.n)?n.named.n:e:e}function FA(n,e){e.count||(e.count=n),e.n||(e.n=n)}function NA(n={}){const e=n.locale,t=MA(n),s=it(n.pluralRules)&&be(e)&&bt(n.pluralRules[e])?n.pluralRules[e]:Vp,i=it(n.pluralRules)&&be(e)&&bt(n.pluralRules[e])?Vp:void 0,r=g=>g[s(t,g.length,i)],a=n.list||[],o=g=>a[g],l=n.named||{};kt(n.pluralIndex)&&FA(t,l);const c=g=>l[g];function u(g){const v=bt(n.messages)?n.messages(g):it(n.messages)?n.messages[g]:!1;return v||(n.parent?n.parent.message(g):DA)}const d=g=>n.modifiers?n.modifiers[g]:CA,h=je(n.processor)&&bt(n.processor.normalize)?n.processor.normalize:PA,f=je(n.processor)&&bt(n.processor.interpolate)?n.processor.interpolate:OA,p=je(n.processor)&&be(n.processor.type)?n.processor.type:kA,y={list:o,named:c,plural:r,linked:(g,...v)=>{const[E,T]=v;let b="text",L="";v.length===1?it(E)?(L=E.modifier||L,b=E.type||b):be(E)&&(L=E||L):v.length===2&&(be(E)&&(L=E||L),be(T)&&(b=T||b));const x=u(g)(y),w=b==="vnode"&&pt(x)&&L?x[0]:x;return L?d(L)(w,b):w},message:u,type:p,interpolate:f,normalize:h,values:Yt({},a,l)};return y}let ja=null;function BA(n){ja=n}function UA(n,e,t){ja&&ja.emit("i18n:init",{timestamp:Date.now(),i18n:n,version:e,meta:t})}const $A=jA("function:translate");function jA(n){return e=>ja&&ja.emit(n,e)}const GA={NOT_FOUND_KEY:1,FALLBACK_TO_TRANSLATE:2,CANNOT_FORMAT_NUMBER:3,FALLBACK_TO_NUMBER_FORMAT:4,CANNOT_FORMAT_DATE:5,FALLBACK_TO_DATE_FORMAT:6,EXPERIMENTAL_CUSTOM_MESSAGE_COMPILER:7,__EXTEND_POINT__:8};function zh(n,e){return e.locale!=null?Hp(e.locale):Hp(n.locale)}let Oc;function Hp(n){return be(n)?n:Oc!=null&&n.resolvedOnce?Oc:Oc=n()}function VA(n,e,t){return[...new Set([t,...pt(e)?e:it(e)?Object.keys(e):be(e)?[e]:[t]])]}function K1(n,e,t){const s=be(t)?t:Nr,i=n;i.__localeChainCache||(i.__localeChainCache=new Map);let r=i.__localeChainCache.get(s);if(!r){r=[];let a=[t];for(;pt(a);)a=Kp(r,a,e);const o=pt(e)||!je(e)?e:e.default?e.default:null;a=be(o)?[o]:o,pt(a)&&Kp(r,a,!1),i.__localeChainCache.set(s,r)}return r}function Kp(n,e,t){let s=!0;for(let i=0;i<e.length&&He(s);i++){const r=e[i];be(r)&&(s=HA(n,e[i],t))}return s}function HA(n,e,t){let s;const i=e.split("-");do{const r=i.join("-");s=KA(n,r,t),i.splice(-1,1)}while(i.length&&s===!0);return s}function KA(n,e,t){let s=!1;if(!n.includes(e)&&(s=!0,e)){s=e[e.length-1]!=="!";const i=e.replace(/!/g,"");n.push(i),(pt(t)||je(t))&&t[i]&&(s=t[i])}return s}const WA="9.7.0",rc=-1,Nr="en-US",Wp="",zp=n=>`${n.charAt(0).toLocaleUpperCase()}${n.substr(1)}`;function zA(){return{upper:(n,e)=>e==="text"&&be(n)?n.toUpperCase():e==="vnode"&&it(n)&&"__v_isVNode"in n?n.children.toUpperCase():n,lower:(n,e)=>e==="text"&&be(n)?n.toLowerCase():e==="vnode"&&it(n)&&"__v_isVNode"in n?n.children.toLowerCase():n,capitalize:(n,e)=>e==="text"&&be(n)?zp(n):e==="vnode"&&it(n)&&"__v_isVNode"in n?zp(n.children):n}}let W1;function Yp(n){W1=n}let z1;function YA(n){z1=n}let Y1;function qA(n){Y1=n}let q1=null;const XA=n=>{q1=n},QA=()=>q1;let X1=null;const qp=n=>{X1=n},JA=()=>X1;let Xp=0;function ZA(n={}){const e=bt(n.onWarn)?n.onWarn:K_,t=be(n.version)?n.version:WA,s=be(n.locale)||bt(n.locale)?n.locale:Nr,i=bt(s)?Nr:s,r=pt(n.fallbackLocale)||je(n.fallbackLocale)||be(n.fallbackLocale)||n.fallbackLocale===!1?n.fallbackLocale:i,a=je(n.messages)?n.messages:{[i]:{}},o=je(n.datetimeFormats)?n.datetimeFormats:{[i]:{}},l=je(n.numberFormats)?n.numberFormats:{[i]:{}},c=Yt({},n.modifiers||{},zA()),u=n.pluralRules||{},d=bt(n.missing)?n.missing:null,h=He(n.missingWarn)||bi(n.missingWarn)?n.missingWarn:!0,f=He(n.fallbackWarn)||bi(n.fallbackWarn)?n.fallbackWarn:!0,p=!!n.fallbackFormat,m=!!n.unresolving,y=bt(n.postTranslation)?n.postTranslation:null,g=je(n.processor)?n.processor:null,v=He(n.warnHtmlMessage)?n.warnHtmlMessage:!0,E=!!n.escapeParameter,T=bt(n.messageCompiler)?n.messageCompiler:W1,b=bt(n.messageResolver)?n.messageResolver:z1||RA,L=bt(n.localeFallbacker)?n.localeFallbacker:Y1||VA,x=it(n.fallbackContext)?n.fallbackContext:void 0,w=n,k=it(w.__datetimeFormatters)?w.__datetimeFormatters:new Map,R=it(w.__numberFormatters)?w.__numberFormatters:new Map,P=it(w.__meta)?w.__meta:{};Xp++;const D={version:t,cid:Xp,locale:s,fallbackLocale:r,messages:a,modifiers:c,pluralRules:u,missing:d,missingWarn:h,fallbackWarn:f,fallbackFormat:p,unresolving:m,postTranslation:y,processor:g,warnHtmlMessage:v,escapeParameter:E,messageCompiler:T,messageResolver:b,localeFallbacker:L,fallbackContext:x,onWarn:e,__meta:P};return D.datetimeFormats=o,D.numberFormats=l,D.__datetimeFormatters=k,D.__numberFormatters=R,__INTLIFY_PROD_DEVTOOLS__&&UA(D,t,P),D}function Yh(n,e,t,s,i){const{missing:r,onWarn:a}=n;if(r!==null){const o=r(n,t,e,i);return be(o)?o:e}else return e}function ia(n,e,t){const s=n;s.__localeChainCache=new Map,n.localeFallbacker(n,t,e)}function Mc(n){return t=>e2(t,n)}function e2(n,e){const t=e.b||e.body;if((t.t||t.type)===1){const s=t,i=s.c||s.cases;return n.plural(i.reduce((r,a)=>[...r,Qp(n,a)],[]))}else return Qp(n,t)}function Qp(n,e){const t=e.s||e.static;if(t)return n.type==="text"?t:n.normalize([t]);{const s=(e.i||e.items).reduce((i,r)=>[...i,hd(n,r)],[]);return n.normalize(s)}}function hd(n,e){const t=e.t||e.type;switch(t){case 3:const s=e;return s.v||s.value;case 9:const i=e;return i.v||i.value;case 4:const r=e;return n.interpolate(n.named(r.k||r.key));case 5:const a=e;return n.interpolate(n.list(a.i!=null?a.i:a.index));case 6:const o=e,l=o.m||o.modifier;return n.linked(hd(n,o.k||o.key),l?hd(n,l):void 0,n.type);case 7:const c=e;return c.v||c.value;case 8:const u=e;return u.v||u.value;default:throw new Error(`unhandled node type on format message part: ${t}`)}}const Q1=Fe.__EXTEND_POINT__,xo=Kh(Q1),ci={INVALID_ARGUMENT:Q1,INVALID_DATE_ARGUMENT:xo(),INVALID_ISO_DATE_ARGUMENT:xo(),NOT_SUPPORT_NON_STRING_MESSAGE:xo(),__EXTEND_POINT__:xo()};function Fi(n){return Qr(n,null,void 0)}const J1=n=>n;let vr=Object.create(null);const Br=n=>it(n)&&(n.t===0||n.type===0)&&("b"in n||"body"in n);function Z1(n,e={}){let t=!1;const s=e.onError||Q_;return e.onError=i=>{t=!0,s(i)},{...TA(n,e),detectError:t}}const t2=(n,e)=>{if(!be(n))throw Fi(ci.NOT_SUPPORT_NON_STRING_MESSAGE);{He(e.warnHtmlMessage)&&e.warnHtmlMessage;const s=(e.onCacheKey||J1)(n),i=vr[s];if(i)return i;const{code:r,detectError:a}=Z1(n,e),o=new Function(`return ${r}`)();return a?o:vr[s]=o}};function s2(n,e){if(__INTLIFY_JIT_COMPILATION__&&!__INTLIFY_DROP_MESSAGE_COMPILER__&&be(n)){He(e.warnHtmlMessage)&&e.warnHtmlMessage;const s=(e.onCacheKey||J1)(n),i=vr[s];if(i)return i;const{ast:r,detectError:a}=Z1(n,{...e,location:!1,jit:!0}),o=Mc(r);return a?o:vr[s]=o}else{const t=n.cacheKey;if(t){const s=vr[t];return s||(vr[t]=Mc(n))}else return Mc(n)}}const Jp=()=>"",Os=n=>bt(n);function Zp(n,...e){const{fallbackFormat:t,postTranslation:s,unresolving:i,messageCompiler:r,fallbackLocale:a,messages:o}=n,[l,c]=fd(...e),u=He(c.missingWarn)?c.missingWarn:n.missingWarn,d=He(c.fallbackWarn)?c.fallbackWarn:n.fallbackWarn,h=He(c.escapeParameter)?c.escapeParameter:n.escapeParameter,f=!!c.resolvedMessage,p=be(c.default)||He(c.default)?He(c.default)?r?l:()=>l:c.default:t?r?l:()=>l:"",m=t||p!=="",y=zh(n,c);h&&n2(c);let[g,v,E]=f?[l,y,o[y]||{}]:ev(n,l,y,a,d,u),T=g,b=l;if(!f&&!(be(T)||Br(T)||Os(T))&&m&&(T=p,b=T),!f&&(!(be(T)||Br(T)||Os(T))||!be(v)))return i?rc:l;let L=!1;const x=()=>{L=!0},w=Os(T)?T:tv(n,l,v,T,b,x);if(L)return T;const k=a2(n,v,E,c),R=NA(k),P=i2(n,w,R),D=s?s(P,l):P;if(__INTLIFY_PROD_DEVTOOLS__){const O={timestamp:Date.now(),key:be(l)?l:Os(T)?T.key:"",locale:v||(Os(T)?T.locale:""),format:be(T)?T:Os(T)?T.source:"",message:D};O.meta=Yt({},n.__meta,QA()||{}),$A(O)}return D}function n2(n){pt(n.list)?n.list=n.list.map(e=>be(e)?Np(e):e):it(n.named)&&Object.keys(n.named).forEach(e=>{be(n.named[e])&&(n.named[e]=Np(n.named[e]))})}function ev(n,e,t,s,i,r){const{messages:a,onWarn:o,messageResolver:l,localeFallbacker:c}=n,u=c(n,s,t);let d={},h,f=null;const p="translate";for(let m=0;m<u.length&&(h=u[m],d=a[h]||{},(f=l(d,e))===null&&(f=d[e]),!(be(f)||Br(f)||Os(f)));m++){const y=Yh(n,e,h,r,p);y!==e&&(f=y)}return[f,h,d]}function tv(n,e,t,s,i,r){const{messageCompiler:a,warnHtmlMessage:o}=n;if(Os(s)){const c=s;return c.locale=c.locale||t,c.key=c.key||e,c}if(a==null){const c=()=>s;return c.locale=t,c.key=e,c}const l=a(s,r2(n,t,i,s,o,r));return l.locale=t,l.key=e,l.source=s,l}function i2(n,e,t){return e(t)}function fd(...n){const[e,t,s]=n,i={};if(!be(e)&&!kt(e)&&!Os(e)&&!Br(e))throw Fi(ci.INVALID_ARGUMENT);const r=kt(e)?String(e):(Os(e),e);return kt(t)?i.plural=t:be(t)?i.default=t:je(t)&&!ic(t)?i.named=t:pt(t)&&(i.list=t),kt(s)?i.plural=s:be(s)?i.default=s:je(s)&&Yt(i,s),[r,i]}function r2(n,e,t,s,i,r){return{locale:e,key:t,warnHtmlMessage:i,onError:a=>{throw r&&r(a),a},onCacheKey:a=>U_(e,t,a)}}function a2(n,e,t,s){const{modifiers:i,pluralRules:r,messageResolver:a,fallbackLocale:o,fallbackWarn:l,missingWarn:c,fallbackContext:u}=n,h={locale:e,modifiers:i,pluralRules:r,messages:f=>{let p=a(t,f);if(p==null&&u){const[,,m]=ev(u,f,e,o,l,c);p=a(m,f)}if(be(p)||Br(p)){let m=!1;const g=tv(n,f,e,p,f,()=>{m=!0});return m?Jp:g}else return Os(p)?p:Jp}};return n.processor&&(h.processor=n.processor),s.list&&(h.list=s.list),s.named&&(h.named=s.named),kt(s.plural)&&(h.pluralIndex=s.plural),h}function em(n,...e){const{datetimeFormats:t,unresolving:s,fallbackLocale:i,onWarn:r,localeFallbacker:a}=n,{__datetimeFormatters:o}=n,[l,c,u,d]=pd(...e),h=He(u.missingWarn)?u.missingWarn:n.missingWarn;He(u.fallbackWarn)?u.fallbackWarn:n.fallbackWarn;const f=!!u.part,p=zh(n,u),m=a(n,i,p);if(!be(l)||l==="")return new Intl.DateTimeFormat(p,d).format(c);let y={},g,v=null;const E="datetime format";for(let L=0;L<m.length&&(g=m[L],y=t[g]||{},v=y[l],!je(v));L++)Yh(n,l,g,h,E);if(!je(v)||!be(g))return s?rc:l;let T=`${g}__${l}`;ic(d)||(T=`${T}__${JSON.stringify(d)}`);let b=o.get(T);return b||(b=new Intl.DateTimeFormat(g,Yt({},v,d)),o.set(T,b)),f?b.formatToParts(c):b.format(c)}const sv=["localeMatcher","weekday","era","year","month","day","hour","minute","second","timeZoneName","formatMatcher","hour12","timeZone","dateStyle","timeStyle","calendar","dayPeriod","numberingSystem","hourCycle","fractionalSecondDigits"];function pd(...n){const[e,t,s,i]=n,r={};let a={},o;if(be(e)){const l=e.match(/(\d{4}-\d{2}-\d{2})(T|\s)?(.*)/);if(!l)throw Fi(ci.INVALID_ISO_DATE_ARGUMENT);const c=l[3]?l[3].trim().startsWith("T")?`${l[1].trim()}${l[3].trim()}`:`${l[1].trim()}T${l[3].trim()}`:l[1].trim();o=new Date(c);try{o.toISOString()}catch{throw Fi(ci.INVALID_ISO_DATE_ARGUMENT)}}else if(j_(e)){if(isNaN(e.getTime()))throw Fi(ci.INVALID_DATE_ARGUMENT);o=e}else if(kt(e))o=e;else throw Fi(ci.INVALID_ARGUMENT);return be(t)?r.key=t:je(t)&&Object.keys(t).forEach(l=>{sv.includes(l)?a[l]=t[l]:r[l]=t[l]}),be(s)?r.locale=s:je(s)&&(a=s),je(i)&&(a=i),[r.key||"",o,r,a]}function tm(n,e,t){const s=n;for(const i in t){const r=`${e}__${i}`;s.__datetimeFormatters.has(r)&&s.__datetimeFormatters.delete(r)}}function sm(n,...e){const{numberFormats:t,unresolving:s,fallbackLocale:i,onWarn:r,localeFallbacker:a}=n,{__numberFormatters:o}=n,[l,c,u,d]=md(...e),h=He(u.missingWarn)?u.missingWarn:n.missingWarn;He(u.fallbackWarn)?u.fallbackWarn:n.fallbackWarn;const f=!!u.part,p=zh(n,u),m=a(n,i,p);if(!be(l)||l==="")return new Intl.NumberFormat(p,d).format(c);let y={},g,v=null;const E="number format";for(let L=0;L<m.length&&(g=m[L],y=t[g]||{},v=y[l],!je(v));L++)Yh(n,l,g,h,E);if(!je(v)||!be(g))return s?rc:l;let T=`${g}__${l}`;ic(d)||(T=`${T}__${JSON.stringify(d)}`);let b=o.get(T);return b||(b=new Intl.NumberFormat(g,Yt({},v,d)),o.set(T,b)),f?b.formatToParts(c):b.format(c)}const nv=["localeMatcher","style","currency","currencyDisplay","currencySign","useGrouping","minimumIntegerDigits","minimumFractionDigits","maximumFractionDigits","minimumSignificantDigits","maximumSignificantDigits","compactDisplay","notation","signDisplay","unit","unitDisplay","roundingMode","roundingPriority","roundingIncrement","trailingZeroDisplay"];function md(...n){const[e,t,s,i]=n,r={};let a={};if(!kt(e))throw Fi(ci.INVALID_ARGUMENT);const o=e;return be(t)?r.key=t:je(t)&&Object.keys(t).forEach(l=>{nv.includes(l)?a[l]=t[l]:r[l]=t[l]}),be(s)?r.locale=s:je(s)&&(a=s),je(i)&&(a=i),[r.key||"",o,r,a]}function nm(n,e,t){const s=n;for(const i in t){const r=`${e}__${i}`;s.__numberFormatters.has(r)&&s.__numberFormatters.delete(r)}}bA();function o2(){return iv().__VUE_DEVTOOLS_GLOBAL_HOOK__}function iv(){return typeof navigator<"u"&&typeof window<"u"?window:typeof global<"u"?global:{}}const l2=typeof Proxy=="function",c2="devtools-plugin:setup",u2="plugin:settings:set";let sr,gd;function d2(){var n;return sr!==void 0||(typeof window<"u"&&window.performance?(sr=!0,gd=window.performance):typeof global<"u"&&(!((n=global.perf_hooks)===null||n===void 0)&&n.performance)?(sr=!0,gd=global.perf_hooks.performance):sr=!1),sr}function h2(){return d2()?gd.now():Date.now()}class f2{constructor(e,t){this.target=null,this.targetQueue=[],this.onQueue=[],this.plugin=e,this.hook=t;const s={};if(e.settings)for(const a in e.settings){const o=e.settings[a];s[a]=o.defaultValue}const i=`__vue-devtools-plugin-settings__${e.id}`;let r=Object.assign({},s);try{const a=localStorage.getItem(i),o=JSON.parse(a);Object.assign(r,o)}catch{}this.fallbacks={getSettings(){return r},setSettings(a){try{localStorage.setItem(i,JSON.stringify(a))}catch{}r=a},now(){return h2()}},t&&t.on(u2,(a,o)=>{a===this.plugin.id&&this.fallbacks.setSettings(o)}),this.proxiedOn=new Proxy({},{get:(a,o)=>this.target?this.target.on[o]:(...l)=>{this.onQueue.push({method:o,args:l})}}),this.proxiedTarget=new Proxy({},{get:(a,o)=>this.target?this.target[o]:o==="on"?this.proxiedOn:Object.keys(this.fallbacks).includes(o)?(...l)=>(this.targetQueue.push({method:o,args:l,resolve:()=>{}}),this.fallbacks[o](...l)):(...l)=>new Promise(c=>{this.targetQueue.push({method:o,args:l,resolve:c})})})}async setRealTarget(e){this.target=e;for(const t of this.onQueue)this.target.on[t.method](...t.args);for(const t of this.targetQueue)t.resolve(await this.target[t.method](...t.args))}}function p2(n,e){const t=n,s=iv(),i=o2(),r=l2&&t.enableEarlyProxy;if(i&&(s.__VUE_DEVTOOLS_PLUGIN_API_AVAILABLE__||!r))i.emit(c2,n,e);else{const a=r?new f2(t,i):null;(s.__VUE_DEVTOOLS_PLUGINS__=s.__VUE_DEVTOOLS_PLUGINS__||[]).push({pluginDescriptor:t,setupFn:e,proxy:a}),a&&e(a.proxiedTarget)}}/*!
  * vue-i18n v9.7.0
  * (c) 2023 kazuya kawaguchi
  * Released under the MIT License.
  */const m2="9.7.0";function g2(){typeof __VUE_I18N_FULL_INSTALL__!="boolean"&&(Fn().__VUE_I18N_FULL_INSTALL__=!0),typeof __VUE_I18N_LEGACY_API__!="boolean"&&(Fn().__VUE_I18N_LEGACY_API__=!0),typeof __INTLIFY_JIT_COMPILATION__!="boolean"&&(Fn().__INTLIFY_JIT_COMPILATION__=!1),typeof __INTLIFY_DROP_MESSAGE_COMPILER__!="boolean"&&(Fn().__INTLIFY_DROP_MESSAGE_COMPILER__=!1),typeof __INTLIFY_PROD_DEVTOOLS__!="boolean"&&(Fn().__INTLIFY_PROD_DEVTOOLS__=!1)}const rv=GA.__EXTEND_POINT__,Xn=Kh(rv);Xn(),Xn(),Xn(),Xn(),Xn(),Xn(),Xn(),Xn();const av=ci.__EXTEND_POINT__,is=Kh(av),Ot={UNEXPECTED_RETURN_TYPE:av,INVALID_ARGUMENT:is(),MUST_BE_CALL_SETUP_TOP:is(),NOT_INSTALLED:is(),NOT_AVAILABLE_IN_LEGACY_MODE:is(),REQUIRED_VALUE:is(),INVALID_VALUE:is(),CANNOT_SETUP_VUE_DEVTOOLS_PLUGIN:is(),NOT_INSTALLED_WITH_PROVIDE:is(),UNEXPECTED_ERROR:is(),NOT_COMPATIBLE_LEGACY_VUE_I18N:is(),BRIDGE_SUPPORT_VUE_2_ONLY:is(),MUST_DEFINE_I18N_OPTION_IN_ALLOW_COMPOSITION:is(),NOT_AVAILABLE_COMPOSITION_IN_LEGACY:is(),__EXTEND_POINT__:is()};function jt(n,...e){return Qr(n,null,void 0)}const yd=xi("__translateVNode"),vd=xi("__datetimeParts"),Ed=xi("__numberParts"),ov=xi("__setPluralRules"),lv=xi("__injectWithOption"),Td=xi("__dispose");function Ga(n){if(!it(n))return n;for(const e in n)if($a(n,e))if(!e.includes("."))it(n[e])&&Ga(n[e]);else{const t=e.split("."),s=t.length-1;let i=n,r=!1;for(let a=0;a<s;a++){if(t[a]in i||(i[t[a]]={}),!it(i[t[a]])){r=!0;break}i=i[t[a]]}r||(i[t[s]]=n[e],delete n[e]),it(i[t[s]])&&Ga(i[t[s]])}return n}function ac(n,e){const{messages:t,__i18n:s,messageResolver:i,flatJson:r}=e,a=je(t)?t:pt(s)?{}:{[n]:{}};if(pt(s)&&s.forEach(o=>{if("locale"in o&&"resource"in o){const{locale:l,resource:c}=o;l?(a[l]=a[l]||{},ba(c,a[l])):ba(c,a)}else be(o)&&ba(JSON.parse(o),a)}),i==null&&r)for(const o in a)$a(a,o)&&Ga(a[o]);return a}function cv(n){return n.type}function uv(n,e,t){let s=it(e.messages)?e.messages:{};"__i18nGlobal"in t&&(s=ac(n.locale.value,{messages:s,__i18n:t.__i18nGlobal}));const i=Object.keys(s);i.length&&i.forEach(r=>{n.mergeLocaleMessage(r,s[r])});{if(it(e.datetimeFormats)){const r=Object.keys(e.datetimeFormats);r.length&&r.forEach(a=>{n.mergeDateTimeFormat(a,e.datetimeFormats[a])})}if(it(e.numberFormats)){const r=Object.keys(e.numberFormats);r.length&&r.forEach(a=>{n.mergeNumberFormat(a,e.numberFormats[a])})}}}function im(n){return fe(yi,null,n,0)}const rm="__INTLIFY_META__",am=()=>[],y2=()=>!1;let om=0;function lm(n){return(e,t,s,i)=>n(t,s,ts()||void 0,i)}const v2=()=>{const n=ts();let e=null;return n&&(e=cv(n)[rm])?{[rm]:e}:null};function qh(n={},e){const{__root:t,__injectWithOption:s}=n,i=t===void 0,r=n.flatJson;let a=He(n.inheritLocale)?n.inheritLocale:!0;const o=ce(t&&a?t.locale.value:be(n.locale)?n.locale:Nr),l=ce(t&&a?t.fallbackLocale.value:be(n.fallbackLocale)||pt(n.fallbackLocale)||je(n.fallbackLocale)||n.fallbackLocale===!1?n.fallbackLocale:o.value),c=ce(ac(o.value,n)),u=ce(je(n.datetimeFormats)?n.datetimeFormats:{[o.value]:{}}),d=ce(je(n.numberFormats)?n.numberFormats:{[o.value]:{}});let h=t?t.missingWarn:He(n.missingWarn)||bi(n.missingWarn)?n.missingWarn:!0,f=t?t.fallbackWarn:He(n.fallbackWarn)||bi(n.fallbackWarn)?n.fallbackWarn:!0,p=t?t.fallbackRoot:He(n.fallbackRoot)?n.fallbackRoot:!0,m=!!n.fallbackFormat,y=bt(n.missing)?n.missing:null,g=bt(n.missing)?lm(n.missing):null,v=bt(n.postTranslation)?n.postTranslation:null,E=t?t.warnHtmlMessage:He(n.warnHtmlMessage)?n.warnHtmlMessage:!0,T=!!n.escapeParameter;const b=t?t.modifiers:je(n.modifiers)?n.modifiers:{};let L=n.pluralRules||t&&t.pluralRules,x;x=(()=>{i&&qp(null);const W={version:m2,locale:o.value,fallbackLocale:l.value,messages:c.value,modifiers:b,pluralRules:L,missing:g===null?void 0:g,missingWarn:h,fallbackWarn:f,fallbackFormat:m,unresolving:!0,postTranslation:v===null?void 0:v,warnHtmlMessage:E,escapeParameter:T,messageResolver:n.messageResolver,messageCompiler:n.messageCompiler,__meta:{framework:"vue"}};W.datetimeFormats=u.value,W.numberFormats=d.value,W.__datetimeFormatters=je(x)?x.__datetimeFormatters:void 0,W.__numberFormatters=je(x)?x.__numberFormatters:void 0;const se=ZA(W);return i&&qp(se),se})(),ia(x,o.value,l.value);function k(){return[o.value,l.value,c.value,u.value,d.value]}const R=Ve({get:()=>o.value,set:W=>{o.value=W,x.locale=o.value}}),P=Ve({get:()=>l.value,set:W=>{l.value=W,x.fallbackLocale=l.value,ia(x,o.value,W)}}),D=Ve(()=>c.value),O=Ve(()=>u.value),N=Ve(()=>d.value);function $(){return bt(v)?v:null}function K(W){v=W,x.postTranslation=W}function ee(){return y}function V(W){W!==null&&(g=lm(W)),y=W,x.missing=g}const U=(W,se,Ae,Be,Ke,dt)=>{k();let Ft;try{__INTLIFY_PROD_DEVTOOLS__,i||(x.fallbackContext=t?JA():void 0),Ft=W(x)}finally{__INTLIFY_PROD_DEVTOOLS__,i||(x.fallbackContext=void 0)}if(Ae!=="translate exists"&&kt(Ft)&&Ft===rc||Ae==="translate exists"&&!Ft){const[Kn,_c]=se();return t&&p?Be(t):Ke(Kn)}else{if(dt(Ft))return Ft;throw jt(Ot.UNEXPECTED_RETURN_TYPE)}};function B(...W){return U(se=>Reflect.apply(Zp,null,[se,...W]),()=>fd(...W),"translate",se=>Reflect.apply(se.t,se,[...W]),se=>se,se=>be(se))}function j(...W){const[se,Ae,Be]=W;if(Be&&!it(Be))throw jt(Ot.INVALID_ARGUMENT);return B(se,Ae,Yt({resolvedMessage:!0},Be||{}))}function Y(...W){return U(se=>Reflect.apply(em,null,[se,...W]),()=>pd(...W),"datetime format",se=>Reflect.apply(se.d,se,[...W]),()=>Wp,se=>be(se))}function me(...W){return U(se=>Reflect.apply(sm,null,[se,...W]),()=>md(...W),"number format",se=>Reflect.apply(se.n,se,[...W]),()=>Wp,se=>be(se))}function xe(W){return W.map(se=>be(se)||kt(se)||He(se)?im(String(se)):se)}const we={normalize:xe,interpolate:W=>W,type:"vnode"};function Q(...W){return U(se=>{let Ae;const Be=se;try{Be.processor=we,Ae=Reflect.apply(Zp,null,[Be,...W])}finally{Be.processor=null}return Ae},()=>fd(...W),"translate",se=>se[yd](...W),se=>[im(se)],se=>pt(se))}function oe(...W){return U(se=>Reflect.apply(sm,null,[se,...W]),()=>md(...W),"number format",se=>se[Ed](...W),am,se=>be(se)||pt(se))}function q(...W){return U(se=>Reflect.apply(em,null,[se,...W]),()=>pd(...W),"datetime format",se=>se[vd](...W),am,se=>be(se)||pt(se))}function ge(W){L=W,x.pluralRules=L}function Re(W,se){return U(()=>{if(!W)return!1;const Ae=be(se)?se:o.value,Be=S(Ae),Ke=x.messageResolver(Be,W);return Br(Ke)||Os(Ke)||be(Ke)},()=>[W],"translate exists",Ae=>Reflect.apply(Ae.te,Ae,[W,se]),y2,Ae=>He(Ae))}function F(W){let se=null;const Ae=K1(x,l.value,o.value);for(let Be=0;Be<Ae.length;Be++){const Ke=c.value[Ae[Be]]||{},dt=x.messageResolver(Ke,W);if(dt!=null){se=dt;break}}return se}function A(W){const se=F(W);return se??(t?t.tm(W)||{}:{})}function S(W){return c.value[W]||{}}function M(W,se){if(r){const Ae={[W]:se};for(const Be in Ae)$a(Ae,Be)&&Ga(Ae[Be]);se=Ae[W]}c.value[W]=se,x.messages=c.value}function G(W,se){c.value[W]=c.value[W]||{};const Ae={[W]:se};for(const Be in Ae)$a(Ae,Be)&&Ga(Ae[Be]);se=Ae[W],ba(se,c.value[W]),x.messages=c.value}function J(W){return u.value[W]||{}}function le(W,se){u.value[W]=se,x.datetimeFormats=u.value,tm(x,W,se)}function pe(W,se){u.value[W]=Yt(u.value[W]||{},se),x.datetimeFormats=u.value,tm(x,W,se)}function ye(W){return d.value[W]||{}}function ue(W,se){d.value[W]=se,x.numberFormats=d.value,nm(x,W,se)}function Ie(W,se){d.value[W]=Yt(d.value[W]||{},se),x.numberFormats=d.value,nm(x,W,se)}om++,t&&ud&&(_t(t.locale,W=>{a&&(o.value=W,x.locale=W,ia(x,o.value,l.value))}),_t(t.fallbackLocale,W=>{a&&(l.value=W,x.fallbackLocale=W,ia(x,o.value,l.value))}));const Ee={id:om,locale:R,fallbackLocale:P,get inheritLocale(){return a},set inheritLocale(W){a=W,W&&t&&(o.value=t.locale.value,l.value=t.fallbackLocale.value,ia(x,o.value,l.value))},get availableLocales(){return Object.keys(c.value).sort()},messages:D,get modifiers(){return b},get pluralRules(){return L||{}},get isGlobal(){return i},get missingWarn(){return h},set missingWarn(W){h=W,x.missingWarn=h},get fallbackWarn(){return f},set fallbackWarn(W){f=W,x.fallbackWarn=f},get fallbackRoot(){return p},set fallbackRoot(W){p=W},get fallbackFormat(){return m},set fallbackFormat(W){m=W,x.fallbackFormat=m},get warnHtmlMessage(){return E},set warnHtmlMessage(W){E=W,x.warnHtmlMessage=W},get escapeParameter(){return T},set escapeParameter(W){T=W,x.escapeParameter=W},t:B,getLocaleMessage:S,setLocaleMessage:M,mergeLocaleMessage:G,getPostTranslationHandler:$,setPostTranslationHandler:K,getMissingHandler:ee,setMissingHandler:V,[ov]:ge};return Ee.datetimeFormats=O,Ee.numberFormats=N,Ee.rt=j,Ee.te=Re,Ee.tm=A,Ee.d=Y,Ee.n=me,Ee.getDateTimeFormat=J,Ee.setDateTimeFormat=le,Ee.mergeDateTimeFormat=pe,Ee.getNumberFormat=ye,Ee.setNumberFormat=ue,Ee.mergeNumberFormat=Ie,Ee[lv]=s,Ee[yd]=Q,Ee[vd]=q,Ee[Ed]=oe,Ee}function E2(n){const e=be(n.locale)?n.locale:Nr,t=be(n.fallbackLocale)||pt(n.fallbackLocale)||je(n.fallbackLocale)||n.fallbackLocale===!1?n.fallbackLocale:e,s=bt(n.missing)?n.missing:void 0,i=He(n.silentTranslationWarn)||bi(n.silentTranslationWarn)?!n.silentTranslationWarn:!0,r=He(n.silentFallbackWarn)||bi(n.silentFallbackWarn)?!n.silentFallbackWarn:!0,a=He(n.fallbackRoot)?n.fallbackRoot:!0,o=!!n.formatFallbackMessages,l=je(n.modifiers)?n.modifiers:{},c=n.pluralizationRules,u=bt(n.postTranslation)?n.postTranslation:void 0,d=be(n.warnHtmlInMessage)?n.warnHtmlInMessage!=="off":!0,h=!!n.escapeParameterHtml,f=He(n.sync)?n.sync:!0;let p=n.messages;if(je(n.sharedMessages)){const b=n.sharedMessages;p=Object.keys(b).reduce((x,w)=>{const k=x[w]||(x[w]={});return Yt(k,b[w]),x},p||{})}const{__i18n:m,__root:y,__injectWithOption:g}=n,v=n.datetimeFormats,E=n.numberFormats,T=n.flatJson;return{locale:e,fallbackLocale:t,messages:p,flatJson:T,datetimeFormats:v,numberFormats:E,missing:s,missingWarn:i,fallbackWarn:r,fallbackRoot:a,fallbackFormat:o,modifiers:l,pluralRules:c,postTranslation:u,warnHtmlMessage:d,escapeParameter:h,messageResolver:n.messageResolver,inheritLocale:f,__i18n:m,__root:y,__injectWithOption:g}}function bd(n={},e){{const t=qh(E2(n)),{__extender:s}=n,i={id:t.id,get locale(){return t.locale.value},set locale(r){t.locale.value=r},get fallbackLocale(){return t.fallbackLocale.value},set fallbackLocale(r){t.fallbackLocale.value=r},get messages(){return t.messages.value},get datetimeFormats(){return t.datetimeFormats.value},get numberFormats(){return t.numberFormats.value},get availableLocales(){return t.availableLocales},get formatter(){return{interpolate(){return[]}}},set formatter(r){},get missing(){return t.getMissingHandler()},set missing(r){t.setMissingHandler(r)},get silentTranslationWarn(){return He(t.missingWarn)?!t.missingWarn:t.missingWarn},set silentTranslationWarn(r){t.missingWarn=He(r)?!r:r},get silentFallbackWarn(){return He(t.fallbackWarn)?!t.fallbackWarn:t.fallbackWarn},set silentFallbackWarn(r){t.fallbackWarn=He(r)?!r:r},get modifiers(){return t.modifiers},get formatFallbackMessages(){return t.fallbackFormat},set formatFallbackMessages(r){t.fallbackFormat=r},get postTranslation(){return t.getPostTranslationHandler()},set postTranslation(r){t.setPostTranslationHandler(r)},get sync(){return t.inheritLocale},set sync(r){t.inheritLocale=r},get warnHtmlInMessage(){return t.warnHtmlMessage?"warn":"off"},set warnHtmlInMessage(r){t.warnHtmlMessage=r!=="off"},get escapeParameterHtml(){return t.escapeParameter},set escapeParameterHtml(r){t.escapeParameter=r},get preserveDirectiveContent(){return!0},set preserveDirectiveContent(r){},get pluralizationRules(){return t.pluralRules||{}},__composer:t,t(...r){const[a,o,l]=r,c={};let u=null,d=null;if(!be(a))throw jt(Ot.INVALID_ARGUMENT);const h=a;return be(o)?c.locale=o:pt(o)?u=o:je(o)&&(d=o),pt(l)?u=l:je(l)&&(d=l),Reflect.apply(t.t,t,[h,u||d||{},c])},rt(...r){return Reflect.apply(t.rt,t,[...r])},tc(...r){const[a,o,l]=r,c={plural:1};let u=null,d=null;if(!be(a))throw jt(Ot.INVALID_ARGUMENT);const h=a;return be(o)?c.locale=o:kt(o)?c.plural=o:pt(o)?u=o:je(o)&&(d=o),be(l)?c.locale=l:pt(l)?u=l:je(l)&&(d=l),Reflect.apply(t.t,t,[h,u||d||{},c])},te(r,a){return t.te(r,a)},tm(r){return t.tm(r)},getLocaleMessage(r){return t.getLocaleMessage(r)},setLocaleMessage(r,a){t.setLocaleMessage(r,a)},mergeLocaleMessage(r,a){t.mergeLocaleMessage(r,a)},d(...r){return Reflect.apply(t.d,t,[...r])},getDateTimeFormat(r){return t.getDateTimeFormat(r)},setDateTimeFormat(r,a){t.setDateTimeFormat(r,a)},mergeDateTimeFormat(r,a){t.mergeDateTimeFormat(r,a)},n(...r){return Reflect.apply(t.n,t,[...r])},getNumberFormat(r){return t.getNumberFormat(r)},setNumberFormat(r,a){t.setNumberFormat(r,a)},mergeNumberFormat(r,a){t.mergeNumberFormat(r,a)},getChoiceIndex(r,a){return-1}};return i.__extender=s,i}}const Xh={tag:{type:[String,Object]},locale:{type:String},scope:{type:String,validator:n=>n==="parent"||n==="global",default:"parent"},i18n:{type:Object}};function T2({slots:n},e){return e.length===1&&e[0]==="default"?(n.default?n.default():[]).reduce((s,i)=>[...s,...i.type===We?i.children:[i]],[]):e.reduce((t,s)=>{const i=n[s];return i&&(t[s]=i()),t},{})}function dv(n){return We}const b2=Ze({name:"i18n-t",props:Yt({keypath:{type:String,required:!0},plural:{type:[Number,String],validator:n=>kt(n)||!isNaN(n)}},Xh),setup(n,e){const{slots:t,attrs:s}=e,i=n.i18n||oc({useScope:n.scope,__useComponent:!0});return()=>{const r=Object.keys(t).filter(d=>d!=="_"),a={};n.locale&&(a.locale=n.locale),n.plural!==void 0&&(a.plural=be(n.plural)?+n.plural:n.plural);const o=T2(e,r),l=i[yd](n.keypath,o,a),c=Yt({},s),u=be(n.tag)||it(n.tag)?n.tag:dv();return zt(u,c,l)}}}),cm=b2;function x2(n){return pt(n)&&!be(n[0])}function hv(n,e,t,s){const{slots:i,attrs:r}=e;return()=>{const a={part:!0};let o={};n.locale&&(a.locale=n.locale),be(n.format)?a.key=n.format:it(n.format)&&(be(n.format.key)&&(a.key=n.format.key),o=Object.keys(n.format).reduce((h,f)=>t.includes(f)?Yt({},h,{[f]:n.format[f]}):h,{}));const l=s(n.value,a,o);let c=[a.key];pt(l)?c=l.map((h,f)=>{const p=i[h.type],m=p?p({[h.type]:h.value,index:f,parts:l}):[h.value];return x2(m)&&(m[0].key=`${h.type}-${f}`),m}):be(l)&&(c=[l]);const u=Yt({},r),d=be(n.tag)||it(n.tag)?n.tag:dv();return zt(d,u,c)}}const S2=Ze({name:"i18n-n",props:Yt({value:{type:Number,required:!0},format:{type:[String,Object]}},Xh),setup(n,e){const t=n.i18n||oc({useScope:"parent",__useComponent:!0});return hv(n,e,nv,(...s)=>t[Ed](...s))}}),um=S2,_2=Ze({name:"i18n-d",props:Yt({value:{type:[Number,Date],required:!0},format:{type:[String,Object]}},Xh),setup(n,e){const t=n.i18n||oc({useScope:"parent",__useComponent:!0});return hv(n,e,sv,(...s)=>t[vd](...s))}}),dm=_2;function A2(n,e){const t=n;if(n.mode==="composition")return t.__getInstance(e)||n.global;{const s=t.__getInstance(e);return s!=null?s.__composer:n.global.__composer}}function L2(n){const e=a=>{const{instance:o,modifiers:l,value:c}=a;if(!o||!o.$)throw jt(Ot.UNEXPECTED_ERROR);const u=A2(n,o.$),d=hm(c);return[Reflect.apply(u.t,u,[...fm(d)]),u]};return{created:(a,o)=>{const[l,c]=e(o);ud&&n.global===c&&(a.__i18nWatcher=_t(c.locale,()=>{o.instance&&o.instance.$forceUpdate()})),a.__composer=c,a.textContent=l},unmounted:a=>{ud&&a.__i18nWatcher&&(a.__i18nWatcher(),a.__i18nWatcher=void 0,delete a.__i18nWatcher),a.__composer&&(a.__composer=void 0,delete a.__composer)},beforeUpdate:(a,{value:o})=>{if(a.__composer){const l=a.__composer,c=hm(o);a.textContent=Reflect.apply(l.t,l,[...fm(c)])}},getSSRProps:a=>{const[o]=e(a);return{textContent:o}}}}function hm(n){if(be(n))return{path:n};if(je(n)){if(!("path"in n))throw jt(Ot.REQUIRED_VALUE,"path");return n}else throw jt(Ot.INVALID_VALUE)}function fm(n){const{path:e,locale:t,args:s,choice:i,plural:r}=n,a={},o=s||{};return be(t)&&(a.locale=t),kt(i)&&(a.plural=i),kt(r)&&(a.plural=r),[e,o,a]}function w2(n,e,...t){const s=je(t[0])?t[0]:{},i=!!s.useI18nComponentName;(He(s.globalInstall)?s.globalInstall:!0)&&([i?"i18n":cm.name,"I18nT"].forEach(a=>n.component(a,cm)),[um.name,"I18nN"].forEach(a=>n.component(a,um)),[dm.name,"I18nD"].forEach(a=>n.component(a,dm))),n.directive("t",L2(e))}function R2(n,e,t){return{beforeCreate(){const s=ts();if(!s)throw jt(Ot.UNEXPECTED_ERROR);const i=this.$options;if(i.i18n){const r=i.i18n;if(i.__i18n&&(r.__i18n=i.__i18n),r.__root=e,this===this.$root)this.$i18n=pm(n,r);else{r.__injectWithOption=!0,r.__extender=t.__vueI18nExtend,this.$i18n=bd(r);const a=this.$i18n;a.__extender&&(a.__disposer=a.__extender(this.$i18n))}}else if(i.__i18n)if(this===this.$root)this.$i18n=pm(n,i);else{this.$i18n=bd({__i18n:i.__i18n,__injectWithOption:!0,__extender:t.__vueI18nExtend,__root:e});const r=this.$i18n;r.__extender&&(r.__disposer=r.__extender(this.$i18n))}else this.$i18n=n;i.__i18nGlobal&&uv(e,i,i),this.$t=(...r)=>this.$i18n.t(...r),this.$rt=(...r)=>this.$i18n.rt(...r),this.$tc=(...r)=>this.$i18n.tc(...r),this.$te=(r,a)=>this.$i18n.te(r,a),this.$d=(...r)=>this.$i18n.d(...r),this.$n=(...r)=>this.$i18n.n(...r),this.$tm=r=>this.$i18n.tm(r),t.__setInstance(s,this.$i18n)},mounted(){},unmounted(){const s=ts();if(!s)throw jt(Ot.UNEXPECTED_ERROR);const i=this.$i18n;delete this.$t,delete this.$rt,delete this.$tc,delete this.$te,delete this.$d,delete this.$n,delete this.$tm,i.__disposer&&(i.__disposer(),delete i.__disposer,delete i.__extender),t.__deleteInstance(s),delete this.$i18n}}}function pm(n,e){n.locale=e.locale||n.locale,n.fallbackLocale=e.fallbackLocale||n.fallbackLocale,n.missing=e.missing||n.missing,n.silentTranslationWarn=e.silentTranslationWarn||n.silentFallbackWarn,n.silentFallbackWarn=e.silentFallbackWarn||n.silentFallbackWarn,n.formatFallbackMessages=e.formatFallbackMessages||n.formatFallbackMessages,n.postTranslation=e.postTranslation||n.postTranslation,n.warnHtmlInMessage=e.warnHtmlInMessage||n.warnHtmlInMessage,n.escapeParameterHtml=e.escapeParameterHtml||n.escapeParameterHtml,n.sync=e.sync||n.sync,n.__composer[ov](e.pluralizationRules||n.pluralizationRules);const t=ac(n.locale,{messages:e.messages,__i18n:e.__i18n});return Object.keys(t).forEach(s=>n.mergeLocaleMessage(s,t[s])),e.datetimeFormats&&Object.keys(e.datetimeFormats).forEach(s=>n.mergeDateTimeFormat(s,e.datetimeFormats[s])),e.numberFormats&&Object.keys(e.numberFormats).forEach(s=>n.mergeNumberFormat(s,e.numberFormats[s])),n}const I2=xi("global-vue-i18n");function C2(n={},e){const t=__VUE_I18N_LEGACY_API__&&He(n.legacy)?n.legacy:__VUE_I18N_LEGACY_API__,s=He(n.globalInjection)?n.globalInjection:!0,i=__VUE_I18N_LEGACY_API__&&t?!!n.allowComposition:!0,r=new Map,[a,o]=D2(n,t),l=xi("");function c(h){return r.get(h)||null}function u(h,f){r.set(h,f)}function d(h){r.delete(h)}{const h={get mode(){return __VUE_I18N_LEGACY_API__&&t?"legacy":"composition"},get allowComposition(){return i},async install(f,...p){if(f.__VUE_I18N_SYMBOL__=l,f.provide(f.__VUE_I18N_SYMBOL__,h),je(p[0])){const g=p[0];h.__composerExtend=g.__composerExtend,h.__vueI18nExtend=g.__vueI18nExtend}let m=null;!t&&s&&(m=$2(f,h.global)),__VUE_I18N_FULL_INSTALL__&&w2(f,h,...p),__VUE_I18N_LEGACY_API__&&t&&f.mixin(R2(o,o.__composer,h));const y=f.unmount;f.unmount=()=>{m&&m(),h.dispose(),y()}},get global(){return o},dispose(){a.stop()},__instances:r,__getInstance:c,__setInstance:u,__deleteInstance:d};return h}}function oc(n={}){const e=ts();if(e==null)throw jt(Ot.MUST_BE_CALL_SETUP_TOP);if(!e.isCE&&e.appContext.app!=null&&!e.appContext.app.__VUE_I18N_SYMBOL__)throw jt(Ot.NOT_INSTALLED);const t=k2(e),s=O2(t),i=cv(e),r=P2(n,i);if(__VUE_I18N_LEGACY_API__&&t.mode==="legacy"&&!n.__useComponent){if(!t.allowComposition)throw jt(Ot.NOT_AVAILABLE_IN_LEGACY_MODE);return B2(e,r,s,n)}if(r==="global")return uv(s,n,i),s;if(r==="parent"){let l=M2(t,e,n.__useComponent);return l==null&&(l=s),l}const a=t;let o=a.__getInstance(e);if(o==null){const l=Yt({},n);"__i18n"in i&&(l.__i18n=i.__i18n),s&&(l.__root=s),o=qh(l),a.__composerExtend&&(o[Td]=a.__composerExtend(o)),N2(a,e,o),a.__setInstance(e,o)}return o}function D2(n,e,t){const s=fh();{const i=__VUE_I18N_LEGACY_API__&&e?s.run(()=>bd(n)):s.run(()=>qh(n));if(i==null)throw jt(Ot.UNEXPECTED_ERROR);return[s,i]}}function k2(n){{const e=fs(n.isCE?I2:n.appContext.app.__VUE_I18N_SYMBOL__);if(!e)throw jt(n.isCE?Ot.NOT_INSTALLED_WITH_PROVIDE:Ot.UNEXPECTED_ERROR);return e}}function P2(n,e){return ic(n)?"__i18n"in e?"local":"global":n.useScope?n.useScope:"local"}function O2(n){return n.mode==="composition"?n.global:n.global.__composer}function M2(n,e,t=!1){let s=null;const i=e.root;let r=F2(e,t);for(;r!=null;){const a=n;if(n.mode==="composition")s=a.__getInstance(r);else if(__VUE_I18N_LEGACY_API__){const o=a.__getInstance(r);o!=null&&(s=o.__composer,t&&s&&!s[lv]&&(s=null))}if(s!=null||i===r)break;r=r.parent}return s}function F2(n,e=!1){return n==null?null:e&&n.vnode.ctx||n.parent}function N2(n,e,t){vt(()=>{},e),Hn(()=>{const s=t;n.__deleteInstance(e);const i=s[Td];i&&(i(),delete s[Td])},e)}function B2(n,e,t,s={}){const i=e==="local",r=bh(null);if(i&&n.proxy&&!(n.proxy.$options.i18n||n.proxy.$options.__i18n))throw jt(Ot.MUST_DEFINE_I18N_OPTION_IN_ALLOW_COMPOSITION);const a=He(s.inheritLocale)?s.inheritLocale:!be(s.locale),o=ce(!i||a?t.locale.value:be(s.locale)?s.locale:Nr),l=ce(!i||a?t.fallbackLocale.value:be(s.fallbackLocale)||pt(s.fallbackLocale)||je(s.fallbackLocale)||s.fallbackLocale===!1?s.fallbackLocale:o.value),c=ce(ac(o.value,s)),u=ce(je(s.datetimeFormats)?s.datetimeFormats:{[o.value]:{}}),d=ce(je(s.numberFormats)?s.numberFormats:{[o.value]:{}}),h=i?t.missingWarn:He(s.missingWarn)||bi(s.missingWarn)?s.missingWarn:!0,f=i?t.fallbackWarn:He(s.fallbackWarn)||bi(s.fallbackWarn)?s.fallbackWarn:!0,p=i?t.fallbackRoot:He(s.fallbackRoot)?s.fallbackRoot:!0,m=!!s.fallbackFormat,y=bt(s.missing)?s.missing:null,g=bt(s.postTranslation)?s.postTranslation:null,v=i?t.warnHtmlMessage:He(s.warnHtmlMessage)?s.warnHtmlMessage:!0,E=!!s.escapeParameter,T=i?t.modifiers:je(s.modifiers)?s.modifiers:{},b=s.pluralRules||i&&t.pluralRules;function L(){return[o.value,l.value,c.value,u.value,d.value]}const x=Ve({get:()=>r.value?r.value.locale.value:o.value,set:S=>{r.value&&(r.value.locale.value=S),o.value=S}}),w=Ve({get:()=>r.value?r.value.fallbackLocale.value:l.value,set:S=>{r.value&&(r.value.fallbackLocale.value=S),l.value=S}}),k=Ve(()=>r.value?r.value.messages.value:c.value),R=Ve(()=>u.value),P=Ve(()=>d.value);function D(){return r.value?r.value.getPostTranslationHandler():g}function O(S){r.value&&r.value.setPostTranslationHandler(S)}function N(){return r.value?r.value.getMissingHandler():y}function $(S){r.value&&r.value.setMissingHandler(S)}function K(S){return L(),S()}function ee(...S){return r.value?K(()=>Reflect.apply(r.value.t,null,[...S])):K(()=>"")}function V(...S){return r.value?Reflect.apply(r.value.rt,null,[...S]):""}function U(...S){return r.value?K(()=>Reflect.apply(r.value.d,null,[...S])):K(()=>"")}function B(...S){return r.value?K(()=>Reflect.apply(r.value.n,null,[...S])):K(()=>"")}function j(S){return r.value?r.value.tm(S):{}}function Y(S,M){return r.value?r.value.te(S,M):!1}function me(S){return r.value?r.value.getLocaleMessage(S):{}}function xe(S,M){r.value&&(r.value.setLocaleMessage(S,M),c.value[S]=M)}function Le(S,M){r.value&&r.value.mergeLocaleMessage(S,M)}function we(S){return r.value?r.value.getDateTimeFormat(S):{}}function Q(S,M){r.value&&(r.value.setDateTimeFormat(S,M),u.value[S]=M)}function oe(S,M){r.value&&r.value.mergeDateTimeFormat(S,M)}function q(S){return r.value?r.value.getNumberFormat(S):{}}function ge(S,M){r.value&&(r.value.setNumberFormat(S,M),d.value[S]=M)}function Re(S,M){r.value&&r.value.mergeNumberFormat(S,M)}const F={get id(){return r.value?r.value.id:-1},locale:x,fallbackLocale:w,messages:k,datetimeFormats:R,numberFormats:P,get inheritLocale(){return r.value?r.value.inheritLocale:a},set inheritLocale(S){r.value&&(r.value.inheritLocale=S)},get availableLocales(){return r.value?r.value.availableLocales:Object.keys(c.value)},get modifiers(){return r.value?r.value.modifiers:T},get pluralRules(){return r.value?r.value.pluralRules:b},get isGlobal(){return r.value?r.value.isGlobal:!1},get missingWarn(){return r.value?r.value.missingWarn:h},set missingWarn(S){r.value&&(r.value.missingWarn=S)},get fallbackWarn(){return r.value?r.value.fallbackWarn:f},set fallbackWarn(S){r.value&&(r.value.missingWarn=S)},get fallbackRoot(){return r.value?r.value.fallbackRoot:p},set fallbackRoot(S){r.value&&(r.value.fallbackRoot=S)},get fallbackFormat(){return r.value?r.value.fallbackFormat:m},set fallbackFormat(S){r.value&&(r.value.fallbackFormat=S)},get warnHtmlMessage(){return r.value?r.value.warnHtmlMessage:v},set warnHtmlMessage(S){r.value&&(r.value.warnHtmlMessage=S)},get escapeParameter(){return r.value?r.value.escapeParameter:E},set escapeParameter(S){r.value&&(r.value.escapeParameter=S)},t:ee,getPostTranslationHandler:D,setPostTranslationHandler:O,getMissingHandler:N,setMissingHandler:$,rt:V,d:U,n:B,tm:j,te:Y,getLocaleMessage:me,setLocaleMessage:xe,mergeLocaleMessage:Le,getDateTimeFormat:we,setDateTimeFormat:Q,mergeDateTimeFormat:oe,getNumberFormat:q,setNumberFormat:ge,mergeNumberFormat:Re};function A(S){S.locale.value=o.value,S.fallbackLocale.value=l.value,Object.keys(c.value).forEach(M=>{S.mergeLocaleMessage(M,c.value[M])}),Object.keys(u.value).forEach(M=>{S.mergeDateTimeFormat(M,u.value[M])}),Object.keys(d.value).forEach(M=>{S.mergeNumberFormat(M,d.value[M])}),S.escapeParameter=E,S.fallbackFormat=m,S.fallbackRoot=p,S.fallbackWarn=f,S.missingWarn=h,S.warnHtmlMessage=v}return Ch(()=>{if(n.proxy==null||n.proxy.$i18n==null)throw jt(Ot.NOT_AVAILABLE_COMPOSITION_IN_LEGACY);const S=r.value=n.proxy.$i18n.__composer;e==="global"?(o.value=S.locale.value,l.value=S.fallbackLocale.value,c.value=S.messages.value,u.value=S.datetimeFormats.value,d.value=S.numberFormats.value):i&&A(S)}),F}const U2=["locale","fallbackLocale","availableLocales"],mm=["t","rt","d","n","tm","te"];function $2(n,e){const t=Object.create(null);return U2.forEach(i=>{const r=Object.getOwnPropertyDescriptor(e,i);if(!r)throw jt(Ot.UNEXPECTED_ERROR);const a=wt(r.value)?{get(){return r.value.value},set(o){r.value.value=o}}:{get(){return r.get&&r.get()}};Object.defineProperty(t,i,a)}),n.config.globalProperties.$i18n=t,mm.forEach(i=>{const r=Object.getOwnPropertyDescriptor(e,i);if(!r||!r.value)throw jt(Ot.UNEXPECTED_ERROR);Object.defineProperty(n.config.globalProperties,`$${i}`,r)}),()=>{delete n.config.globalProperties.$i18n,mm.forEach(i=>{delete n.config.globalProperties[`$${i}`]})}}g2();__INTLIFY_JIT_COMPILATION__?Yp(s2):Yp(t2);YA(IA);qA(K1);if(__INTLIFY_PROD_DEVTOOLS__){const n=Fn();n.__INTLIFY__=!0,BA(n.__INTLIFY_DEVTOOLS_GLOBAL_HOOK__)}const j2=n=>(Ls("data-v-55d0121f"),n=n(),ws(),n),G2={class:"sm:container sm:mx-auto"},V2={class:"max-w-lg mx-auto my-6"},H2={class:"flex space-x-8 mr-2"},K2={href:"/PersonalWeb/",class:"ml-4"},W2=j2(()=>_("i",{"data-feather":"globe"},null,-1)),z2=[W2],Y2={class:"py-1 text-sm text-gray-700 dark:text-gray-200","aria-labelledby":"langs-button"},q2={class:"inline-flex items-center"},X2={class:"w-6"},Q2={class:"inline-flex items-center"},J2={class:"w-6"},Z2={class:"inline-flex items-center"},eL={class:"w-6"},tL=Ze({__name:"Header",setup(n){const e=ce(""),{locale:t}=oc(),s=ce(!0),i=ce(localStorage.getItem("selectedLanguage")||"zh-TW"),r=o=>{localStorage.setItem("selectedLanguage",o),t.value=o,i.value=o,s.value=!0,console.log(i.value)},a=()=>{window.innerWidth<=768?e.value="space-x-10":e.value="space-x-30"};return vt(()=>{Tn.replace(),a(),window.addEventListener("resize",a)}),Js(()=>{Tn.replace()}),Vt(()=>{window.removeEventListener("resize",a)}),(o,l)=>{const c=ec("router-link");return ve(),Te("nav",G2,[_("div",V2,[_("div",null,[_("div",{class:ft(["custom-font flex",e.value])},[_("ul",H2,[_("a",K2,he(o.$t("home")),1),fe(c,{to:"/PersonalWeb/projects",class:"nav-link"},{default:Pt(()=>[nt(he(o.$t("project-title")),1)]),_:1}),fe(c,{to:"/PersonalWeb/about",class:"nav-link"},{default:Pt(()=>[nt(he(o.$t("about-title")),1)]),_:1}),fe(c,{to:"/PersonalWeb/contact",class:"nav-link"},{default:Pt(()=>[nt(he(o.$t("contact-title")),1)]),_:1}),_("div",null,[_("button",{type:"button",class:"relative content-centers flex",onClick:l[0]||(l[0]=()=>{s.value=!s.value})},z2),_("div",{id:"dropdown-langs",class:ft([{hidden:s.value},"z-50 bg-white divide-y divide-gray-100 rounded-lg shadow w-44 dark:bg-gray-700 absolute top-16"]),style:{transform:"translateX(-140px)"}},[_("ul",Y2,[_("li",null,[_("button",{type:"button",class:"inline-flex px-4 py-2 text-sm",onClick:l[1]||(l[1]=u=>r("en-US"))},[_("div",q2,[_("div",X2,[fe(De(Pc),{class:ft(["h-4 w-4",{hidden:i.value!="en-US"}])},null,8,["class"])]),nt(" English ")])])]),_("li",null,[_("button",{type:"button",class:"inline-flex px-4 py-2 text-sm",onClick:l[2]||(l[2]=u=>r("zh-TW"))},[_("div",Q2,[_("div",J2,[fe(De(Pc),{class:ft(["h-4 w-4",{hidden:i.value!="zh-TW"}])},null,8,["class"])]),nt(" 繁體中文 ")])])]),_("li",null,[_("button",{type:"button",class:"inline-flex px-4 py-2 text-sm",onClick:l[3]||(l[3]=u=>r("ja-JP"))},[_("div",Z2,[_("div",eL,[fe(De(Pc),{class:ft(["h-4 w-4",{hidden:i.value!="ja-JP"}])},null,8,["class"])]),nt(" 日本語 ")])])])])],2)])])],2)])])])}}}),At=(n,e)=>{const t=n.__vccOpts||n;for(const[s,i]of e)t[s]=i;return t},sL=At(tL,[["__scopeId","data-v-55d0121f"]]),nL="/PersonalWeb/assets/linkedin_logo-40bd1caf.svg",iL="/PersonalWeb/assets/github_logo-e9c82671.svg",rL="/PersonalWeb/assets/instagram_logo-107bcf82.svg",aL={class:"container mx-auto"},oL=_("div",{style:{height:"50px"}},null,-1),lL={class:"flex justify-center custom-font"},cL=["src"],uL=["href"],dL=_("div",{style:{height:"20px"}},null,-1),hL=Ze({__name:"Footer",setup(n){const e=ce(""),t=qt([{id:2,name:"LinkedIn",url:"https://www.linkedin.com/in/yi-xiang-su-898396169/",image:nL},{id:3,name:"GitHub",url:"https://github.com/owwwwwo03",image:iL},{id:4,name:"Instagram",url:"https://instagram.com",image:rL}]),s=()=>{window.innerWidth<=768?e.value="space-x-4":e.value="space-x-16"};return vt(()=>{Tn.replace(),s(),window.addEventListener("resize",s)}),Js(()=>{Tn.replace()}),Vt(()=>{window.removeEventListener("resize",s)}),(i,r)=>(ve(),Te("div",aL,[oL,_("div",lL,[_("ul",{class:ft(["list-none flex",e.value])},[(ve(!0),Te(We,null,As(t,a=>(ve(),Te("li",{key:a.id},[_("img",{src:a.image,width:"30",style:{display:"inline-block"},class:"mr-2"},null,8,cL),_("a",{href:a.url,target:"_blank",style:{display:"inline-block"}},he(a.name),9,uL)]))),128))],2)]),dL]))}});var fv={exports:{}};(function(n,e){(function(t,s){n.exports=s()})(Hh,function(){return function(t){function s(r){if(i[r])return i[r].exports;var a=i[r]={exports:{},id:r,loaded:!1};return t[r].call(a.exports,a,a.exports,s),a.loaded=!0,a.exports}var i={};return s.m=t,s.c=i,s.p="dist/",s(0)}([function(t,s,i){function r(N){return N&&N.__esModule?N:{default:N}}var a=Object.assign||function(N){for(var $=1;$<arguments.length;$++){var K=arguments[$];for(var ee in K)Object.prototype.hasOwnProperty.call(K,ee)&&(N[ee]=K[ee])}return N},o=i(1),l=(r(o),i(6)),c=r(l),u=i(7),d=r(u),h=i(8),f=r(h),p=i(9),m=r(p),y=i(10),g=r(y),v=i(11),E=r(v),T=i(14),b=r(T),L=[],x=!1,w={offset:120,delay:0,easing:"ease",duration:400,disable:!1,once:!1,startEvent:"DOMContentLoaded",throttleDelay:99,debounceDelay:50,disableMutationObserver:!1},k=function(){var N=arguments.length>0&&arguments[0]!==void 0&&arguments[0];if(N&&(x=!0),x)return L=(0,E.default)(L,w),(0,g.default)(L,w.once),L},R=function(){L=(0,b.default)(),k()},P=function(){L.forEach(function(N,$){N.node.removeAttribute("data-aos"),N.node.removeAttribute("data-aos-easing"),N.node.removeAttribute("data-aos-duration"),N.node.removeAttribute("data-aos-delay")})},D=function(N){return N===!0||N==="mobile"&&m.default.mobile()||N==="phone"&&m.default.phone()||N==="tablet"&&m.default.tablet()||typeof N=="function"&&N()===!0},O=function(N){w=a(w,N),L=(0,b.default)();var $=document.all&&!window.atob;return D(w.disable)||$?P():(w.disableMutationObserver||f.default.isSupported()||(console.info(`
      aos: MutationObserver is not supported on this browser,
      code mutations observing has been disabled.
      You may have to call "refreshHard()" by yourself.
    `),w.disableMutationObserver=!0),document.querySelector("body").setAttribute("data-aos-easing",w.easing),document.querySelector("body").setAttribute("data-aos-duration",w.duration),document.querySelector("body").setAttribute("data-aos-delay",w.delay),w.startEvent==="DOMContentLoaded"&&["complete","interactive"].indexOf(document.readyState)>-1?k(!0):w.startEvent==="load"?window.addEventListener(w.startEvent,function(){k(!0)}):document.addEventListener(w.startEvent,function(){k(!0)}),window.addEventListener("resize",(0,d.default)(k,w.debounceDelay,!0)),window.addEventListener("orientationchange",(0,d.default)(k,w.debounceDelay,!0)),window.addEventListener("scroll",(0,c.default)(function(){(0,g.default)(L,w.once)},w.throttleDelay)),w.disableMutationObserver||f.default.ready("[data-aos]",R),L)};t.exports={init:O,refresh:k,refreshHard:R}},function(t,s){},,,,,function(t,s){(function(i){function r(D,O,N){function $(S){var M=xe,G=Le;return xe=Le=void 0,ge=S,Q=D.apply(G,M)}function K(S){return ge=S,oe=setTimeout(U,O),Re?$(S):Q}function ee(S){var M=S-q,G=S-ge,J=O-M;return F?R(J,we-G):J}function V(S){var M=S-q,G=S-ge;return q===void 0||M>=O||M<0||F&&G>=we}function U(){var S=P();return V(S)?B(S):void(oe=setTimeout(U,ee(S)))}function B(S){return oe=void 0,A&&xe?$(S):(xe=Le=void 0,Q)}function j(){oe!==void 0&&clearTimeout(oe),ge=0,xe=q=Le=oe=void 0}function Y(){return oe===void 0?Q:B(P())}function me(){var S=P(),M=V(S);if(xe=arguments,Le=this,q=S,M){if(oe===void 0)return K(q);if(F)return oe=setTimeout(U,O),$(q)}return oe===void 0&&(oe=setTimeout(U,O)),Q}var xe,Le,we,Q,oe,q,ge=0,Re=!1,F=!1,A=!0;if(typeof D!="function")throw new TypeError(h);return O=u(O)||0,o(N)&&(Re=!!N.leading,F="maxWait"in N,we=F?k(u(N.maxWait)||0,O):we,A="trailing"in N?!!N.trailing:A),me.cancel=j,me.flush=Y,me}function a(D,O,N){var $=!0,K=!0;if(typeof D!="function")throw new TypeError(h);return o(N)&&($="leading"in N?!!N.leading:$,K="trailing"in N?!!N.trailing:K),r(D,O,{leading:$,maxWait:O,trailing:K})}function o(D){var O=typeof D>"u"?"undefined":d(D);return!!D&&(O=="object"||O=="function")}function l(D){return!!D&&(typeof D>"u"?"undefined":d(D))=="object"}function c(D){return(typeof D>"u"?"undefined":d(D))=="symbol"||l(D)&&w.call(D)==p}function u(D){if(typeof D=="number")return D;if(c(D))return f;if(o(D)){var O=typeof D.valueOf=="function"?D.valueOf():D;D=o(O)?O+"":O}if(typeof D!="string")return D===0?D:+D;D=D.replace(m,"");var N=g.test(D);return N||v.test(D)?E(D.slice(2),N?2:8):y.test(D)?f:+D}var d=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(D){return typeof D}:function(D){return D&&typeof Symbol=="function"&&D.constructor===Symbol&&D!==Symbol.prototype?"symbol":typeof D},h="Expected a function",f=NaN,p="[object Symbol]",m=/^\s+|\s+$/g,y=/^[-+]0x[0-9a-f]+$/i,g=/^0b[01]+$/i,v=/^0o[0-7]+$/i,E=parseInt,T=(typeof i>"u"?"undefined":d(i))=="object"&&i&&i.Object===Object&&i,b=(typeof self>"u"?"undefined":d(self))=="object"&&self&&self.Object===Object&&self,L=T||b||Function("return this")(),x=Object.prototype,w=x.toString,k=Math.max,R=Math.min,P=function(){return L.Date.now()};t.exports=a}).call(s,function(){return this}())},function(t,s){(function(i){function r(P,D,O){function N(A){var S=me,M=xe;return me=xe=void 0,q=A,we=P.apply(M,S)}function $(A){return q=A,Q=setTimeout(V,D),ge?N(A):we}function K(A){var S=A-oe,M=A-q,G=D-S;return Re?k(G,Le-M):G}function ee(A){var S=A-oe,M=A-q;return oe===void 0||S>=D||S<0||Re&&M>=Le}function V(){var A=R();return ee(A)?U(A):void(Q=setTimeout(V,K(A)))}function U(A){return Q=void 0,F&&me?N(A):(me=xe=void 0,we)}function B(){Q!==void 0&&clearTimeout(Q),q=0,me=oe=xe=Q=void 0}function j(){return Q===void 0?we:U(R())}function Y(){var A=R(),S=ee(A);if(me=arguments,xe=this,oe=A,S){if(Q===void 0)return $(oe);if(Re)return Q=setTimeout(V,D),N(oe)}return Q===void 0&&(Q=setTimeout(V,D)),we}var me,xe,Le,we,Q,oe,q=0,ge=!1,Re=!1,F=!0;if(typeof P!="function")throw new TypeError(d);return D=c(D)||0,a(O)&&(ge=!!O.leading,Re="maxWait"in O,Le=Re?w(c(O.maxWait)||0,D):Le,F="trailing"in O?!!O.trailing:F),Y.cancel=B,Y.flush=j,Y}function a(P){var D=typeof P>"u"?"undefined":u(P);return!!P&&(D=="object"||D=="function")}function o(P){return!!P&&(typeof P>"u"?"undefined":u(P))=="object"}function l(P){return(typeof P>"u"?"undefined":u(P))=="symbol"||o(P)&&x.call(P)==f}function c(P){if(typeof P=="number")return P;if(l(P))return h;if(a(P)){var D=typeof P.valueOf=="function"?P.valueOf():P;P=a(D)?D+"":D}if(typeof P!="string")return P===0?P:+P;P=P.replace(p,"");var O=y.test(P);return O||g.test(P)?v(P.slice(2),O?2:8):m.test(P)?h:+P}var u=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(P){return typeof P}:function(P){return P&&typeof Symbol=="function"&&P.constructor===Symbol&&P!==Symbol.prototype?"symbol":typeof P},d="Expected a function",h=NaN,f="[object Symbol]",p=/^\s+|\s+$/g,m=/^[-+]0x[0-9a-f]+$/i,y=/^0b[01]+$/i,g=/^0o[0-7]+$/i,v=parseInt,E=(typeof i>"u"?"undefined":u(i))=="object"&&i&&i.Object===Object&&i,T=(typeof self>"u"?"undefined":u(self))=="object"&&self&&self.Object===Object&&self,b=E||T||Function("return this")(),L=Object.prototype,x=L.toString,w=Math.max,k=Math.min,R=function(){return b.Date.now()};t.exports=r}).call(s,function(){return this}())},function(t,s){function i(u){var d=void 0,h=void 0;for(d=0;d<u.length;d+=1)if(h=u[d],h.dataset&&h.dataset.aos||h.children&&i(h.children))return!0;return!1}function r(){return window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver}function a(){return!!r()}function o(u,d){var h=window.document,f=r(),p=new f(l);c=d,p.observe(h.documentElement,{childList:!0,subtree:!0,removedNodes:!0})}function l(u){u&&u.forEach(function(d){var h=Array.prototype.slice.call(d.addedNodes),f=Array.prototype.slice.call(d.removedNodes),p=h.concat(f);if(i(p))return c()})}Object.defineProperty(s,"__esModule",{value:!0});var c=function(){};s.default={isSupported:a,ready:o}},function(t,s){function i(h,f){if(!(h instanceof f))throw new TypeError("Cannot call a class as a function")}function r(){return navigator.userAgent||navigator.vendor||window.opera||""}Object.defineProperty(s,"__esModule",{value:!0});var a=function(){function h(f,p){for(var m=0;m<p.length;m++){var y=p[m];y.enumerable=y.enumerable||!1,y.configurable=!0,"value"in y&&(y.writable=!0),Object.defineProperty(f,y.key,y)}}return function(f,p,m){return p&&h(f.prototype,p),m&&h(f,m),f}}(),o=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i,l=/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i,c=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i,u=/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i,d=function(){function h(){i(this,h)}return a(h,[{key:"phone",value:function(){var f=r();return!(!o.test(f)&&!l.test(f.substr(0,4)))}},{key:"mobile",value:function(){var f=r();return!(!c.test(f)&&!u.test(f.substr(0,4)))}},{key:"tablet",value:function(){return this.mobile()&&!this.phone()}}]),h}();s.default=new d},function(t,s){Object.defineProperty(s,"__esModule",{value:!0});var i=function(a,o,l){var c=a.node.getAttribute("data-aos-once");o>a.position?a.node.classList.add("aos-animate"):typeof c<"u"&&(c==="false"||!l&&c!=="true")&&a.node.classList.remove("aos-animate")},r=function(a,o){var l=window.pageYOffset,c=window.innerHeight;a.forEach(function(u,d){i(u,c+l,o)})};s.default=r},function(t,s,i){function r(c){return c&&c.__esModule?c:{default:c}}Object.defineProperty(s,"__esModule",{value:!0});var a=i(12),o=r(a),l=function(c,u){return c.forEach(function(d,h){d.node.classList.add("aos-init"),d.position=(0,o.default)(d.node,u.offset)}),c};s.default=l},function(t,s,i){function r(c){return c&&c.__esModule?c:{default:c}}Object.defineProperty(s,"__esModule",{value:!0});var a=i(13),o=r(a),l=function(c,u){var d=0,h=0,f=window.innerHeight,p={offset:c.getAttribute("data-aos-offset"),anchor:c.getAttribute("data-aos-anchor"),anchorPlacement:c.getAttribute("data-aos-anchor-placement")};switch(p.offset&&!isNaN(p.offset)&&(h=parseInt(p.offset)),p.anchor&&document.querySelectorAll(p.anchor)&&(c=document.querySelectorAll(p.anchor)[0]),d=(0,o.default)(c).top,p.anchorPlacement){case"top-bottom":break;case"center-bottom":d+=c.offsetHeight/2;break;case"bottom-bottom":d+=c.offsetHeight;break;case"top-center":d+=f/2;break;case"bottom-center":d+=f/2+c.offsetHeight;break;case"center-center":d+=f/2+c.offsetHeight/2;break;case"top-top":d+=f;break;case"bottom-top":d+=c.offsetHeight+f;break;case"center-top":d+=c.offsetHeight/2+f}return p.anchorPlacement||p.offset||isNaN(u)||(h=u),d+h};s.default=l},function(t,s){Object.defineProperty(s,"__esModule",{value:!0});var i=function(r){for(var a=0,o=0;r&&!isNaN(r.offsetLeft)&&!isNaN(r.offsetTop);)a+=r.offsetLeft-(r.tagName!="BODY"?r.scrollLeft:0),o+=r.offsetTop-(r.tagName!="BODY"?r.scrollTop:0),r=r.offsetParent;return{top:o,left:a}};s.default=i},function(t,s){Object.defineProperty(s,"__esModule",{value:!0});var i=function(r){return r=r||document.querySelectorAll("[data-aos]"),Array.prototype.map.call(r,function(a){return{node:a}})};s.default=i}])})})(fv);var fL=fv.exports;const pL=U1(fL),mL=n=>(Ls("data-v-e594dfe7"),n=n(),ws(),n),gL=mL(()=>_("i",{"data-feather":"chevron-up"},null,-1)),yL=[gL],vL=Ze({__name:"App",setup(n){pL.init();const e=()=>{document.body.scrollTop=0,document.documentElement.scrollTop=0};return vt(()=>{Tn.replace()}),Js(()=>{Tn.replace()}),(t,s)=>{const i=ec("router-view");return ve(),Te("div",null,[fe(sL),fe(i,null,{default:Pt(({Component:r})=>[fe(En,{name:"fade",mode:"out-in"},{default:Pt(()=>[_("div",null,[(ve(),qr(zy(r)))])]),_:2},1024)]),_:1}),_("button",{onClick:s[0]||(s[0]=r=>e()),class:"btn back-to-top btn-lg circular-bg","data-bs-toggle":"backtotop"},yL),fe(hL)])}}}),EL=At(vL,[["__scopeId","data-v-e594dfe7"]]);function pv(n,e){return function(){return n.apply(e,arguments)}}const{toString:TL}=Object.prototype,{getPrototypeOf:Qh}=Object,lc=(n=>e=>{const t=TL.call(e);return n[t]||(n[t]=t.slice(8,-1).toLowerCase())})(Object.create(null)),xn=n=>(n=n.toLowerCase(),e=>lc(e)===n),cc=n=>e=>typeof e===n,{isArray:Jr}=Array,Va=cc("undefined");function bL(n){return n!==null&&!Va(n)&&n.constructor!==null&&!Va(n.constructor)&&Ns(n.constructor.isBuffer)&&n.constructor.isBuffer(n)}const mv=xn("ArrayBuffer");function xL(n){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(n):e=n&&n.buffer&&mv(n.buffer),e}const SL=cc("string"),Ns=cc("function"),gv=cc("number"),uc=n=>n!==null&&typeof n=="object",_L=n=>n===!0||n===!1,zo=n=>{if(lc(n)!=="object")return!1;const e=Qh(n);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in n)&&!(Symbol.iterator in n)},AL=xn("Date"),LL=xn("File"),wL=xn("Blob"),RL=xn("FileList"),IL=n=>uc(n)&&Ns(n.pipe),CL=n=>{let e;return n&&(typeof FormData=="function"&&n instanceof FormData||Ns(n.append)&&((e=lc(n))==="formdata"||e==="object"&&Ns(n.toString)&&n.toString()==="[object FormData]"))},DL=xn("URLSearchParams"),kL=n=>n.trim?n.trim():n.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function no(n,e,{allOwnKeys:t=!1}={}){if(n===null||typeof n>"u")return;let s,i;if(typeof n!="object"&&(n=[n]),Jr(n))for(s=0,i=n.length;s<i;s++)e.call(null,n[s],s,n);else{const r=t?Object.getOwnPropertyNames(n):Object.keys(n),a=r.length;let o;for(s=0;s<a;s++)o=r[s],e.call(null,n[o],o,n)}}function yv(n,e){e=e.toLowerCase();const t=Object.keys(n);let s=t.length,i;for(;s-- >0;)if(i=t[s],e===i.toLowerCase())return i;return null}const vv=(()=>typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global)(),Ev=n=>!Va(n)&&n!==vv;function xd(){const{caseless:n}=Ev(this)&&this||{},e={},t=(s,i)=>{const r=n&&yv(e,i)||i;zo(e[r])&&zo(s)?e[r]=xd(e[r],s):zo(s)?e[r]=xd({},s):Jr(s)?e[r]=s.slice():e[r]=s};for(let s=0,i=arguments.length;s<i;s++)arguments[s]&&no(arguments[s],t);return e}const PL=(n,e,t,{allOwnKeys:s}={})=>(no(e,(i,r)=>{t&&Ns(i)?n[r]=pv(i,t):n[r]=i},{allOwnKeys:s}),n),OL=n=>(n.charCodeAt(0)===65279&&(n=n.slice(1)),n),ML=(n,e,t,s)=>{n.prototype=Object.create(e.prototype,s),n.prototype.constructor=n,Object.defineProperty(n,"super",{value:e.prototype}),t&&Object.assign(n.prototype,t)},FL=(n,e,t,s)=>{let i,r,a;const o={};if(e=e||{},n==null)return e;do{for(i=Object.getOwnPropertyNames(n),r=i.length;r-- >0;)a=i[r],(!s||s(a,n,e))&&!o[a]&&(e[a]=n[a],o[a]=!0);n=t!==!1&&Qh(n)}while(n&&(!t||t(n,e))&&n!==Object.prototype);return e},NL=(n,e,t)=>{n=String(n),(t===void 0||t>n.length)&&(t=n.length),t-=e.length;const s=n.indexOf(e,t);return s!==-1&&s===t},BL=n=>{if(!n)return null;if(Jr(n))return n;let e=n.length;if(!gv(e))return null;const t=new Array(e);for(;e-- >0;)t[e]=n[e];return t},UL=(n=>e=>n&&e instanceof n)(typeof Uint8Array<"u"&&Qh(Uint8Array)),$L=(n,e)=>{const s=(n&&n[Symbol.iterator]).call(n);let i;for(;(i=s.next())&&!i.done;){const r=i.value;e.call(n,r[0],r[1])}},jL=(n,e)=>{let t;const s=[];for(;(t=n.exec(e))!==null;)s.push(t);return s},GL=xn("HTMLFormElement"),VL=n=>n.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(t,s,i){return s.toUpperCase()+i}),gm=(({hasOwnProperty:n})=>(e,t)=>n.call(e,t))(Object.prototype),HL=xn("RegExp"),Tv=(n,e)=>{const t=Object.getOwnPropertyDescriptors(n),s={};no(t,(i,r)=>{let a;(a=e(i,r,n))!==!1&&(s[r]=a||i)}),Object.defineProperties(n,s)},KL=n=>{Tv(n,(e,t)=>{if(Ns(n)&&["arguments","caller","callee"].indexOf(t)!==-1)return!1;const s=n[t];if(Ns(s)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+t+"'")})}})},WL=(n,e)=>{const t={},s=i=>{i.forEach(r=>{t[r]=!0})};return Jr(n)?s(n):s(String(n).split(e)),t},zL=()=>{},YL=(n,e)=>(n=+n,Number.isFinite(n)?n:e),Fc="abcdefghijklmnopqrstuvwxyz",ym="0123456789",bv={DIGIT:ym,ALPHA:Fc,ALPHA_DIGIT:Fc+Fc.toUpperCase()+ym},qL=(n=16,e=bv.ALPHA_DIGIT)=>{let t="";const{length:s}=e;for(;n--;)t+=e[Math.random()*s|0];return t};function XL(n){return!!(n&&Ns(n.append)&&n[Symbol.toStringTag]==="FormData"&&n[Symbol.iterator])}const QL=n=>{const e=new Array(10),t=(s,i)=>{if(uc(s)){if(e.indexOf(s)>=0)return;if(!("toJSON"in s)){e[i]=s;const r=Jr(s)?[]:{};return no(s,(a,o)=>{const l=t(a,i+1);!Va(l)&&(r[o]=l)}),e[i]=void 0,r}}return s};return t(n,0)},JL=xn("AsyncFunction"),ZL=n=>n&&(uc(n)||Ns(n))&&Ns(n.then)&&Ns(n.catch),ie={isArray:Jr,isArrayBuffer:mv,isBuffer:bL,isFormData:CL,isArrayBufferView:xL,isString:SL,isNumber:gv,isBoolean:_L,isObject:uc,isPlainObject:zo,isUndefined:Va,isDate:AL,isFile:LL,isBlob:wL,isRegExp:HL,isFunction:Ns,isStream:IL,isURLSearchParams:DL,isTypedArray:UL,isFileList:RL,forEach:no,merge:xd,extend:PL,trim:kL,stripBOM:OL,inherits:ML,toFlatObject:FL,kindOf:lc,kindOfTest:xn,endsWith:NL,toArray:BL,forEachEntry:$L,matchAll:jL,isHTMLForm:GL,hasOwnProperty:gm,hasOwnProp:gm,reduceDescriptors:Tv,freezeMethods:KL,toObjectSet:WL,toCamelCase:VL,noop:zL,toFiniteNumber:YL,findKey:yv,global:vv,isContextDefined:Ev,ALPHABET:bv,generateString:qL,isSpecCompliantForm:XL,toJSONObject:QL,isAsyncFn:JL,isThenable:ZL};function qe(n,e,t,s,i){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=n,this.name="AxiosError",e&&(this.code=e),t&&(this.config=t),s&&(this.request=s),i&&(this.response=i)}ie.inherits(qe,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:ie.toJSONObject(this.config),code:this.code,status:this.response&&this.response.status?this.response.status:null}}});const xv=qe.prototype,Sv={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(n=>{Sv[n]={value:n}});Object.defineProperties(qe,Sv);Object.defineProperty(xv,"isAxiosError",{value:!0});qe.from=(n,e,t,s,i,r)=>{const a=Object.create(xv);return ie.toFlatObject(n,a,function(l){return l!==Error.prototype},o=>o!=="isAxiosError"),qe.call(a,n.message,e,t,s,i),a.cause=n,a.name=n.name,r&&Object.assign(a,r),a};const ew=null;function Sd(n){return ie.isPlainObject(n)||ie.isArray(n)}function _v(n){return ie.endsWith(n,"[]")?n.slice(0,-2):n}function vm(n,e,t){return n?n.concat(e).map(function(i,r){return i=_v(i),!t&&r?"["+i+"]":i}).join(t?".":""):e}function tw(n){return ie.isArray(n)&&!n.some(Sd)}const sw=ie.toFlatObject(ie,{},null,function(e){return/^is[A-Z]/.test(e)});function dc(n,e,t){if(!ie.isObject(n))throw new TypeError("target must be an object");e=e||new FormData,t=ie.toFlatObject(t,{metaTokens:!0,dots:!1,indexes:!1},!1,function(m,y){return!ie.isUndefined(y[m])});const s=t.metaTokens,i=t.visitor||u,r=t.dots,a=t.indexes,l=(t.Blob||typeof Blob<"u"&&Blob)&&ie.isSpecCompliantForm(e);if(!ie.isFunction(i))throw new TypeError("visitor must be a function");function c(p){if(p===null)return"";if(ie.isDate(p))return p.toISOString();if(!l&&ie.isBlob(p))throw new qe("Blob is not supported. Use a Buffer instead.");return ie.isArrayBuffer(p)||ie.isTypedArray(p)?l&&typeof Blob=="function"?new Blob([p]):Buffer.from(p):p}function u(p,m,y){let g=p;if(p&&!y&&typeof p=="object"){if(ie.endsWith(m,"{}"))m=s?m:m.slice(0,-2),p=JSON.stringify(p);else if(ie.isArray(p)&&tw(p)||(ie.isFileList(p)||ie.endsWith(m,"[]"))&&(g=ie.toArray(p)))return m=_v(m),g.forEach(function(E,T){!(ie.isUndefined(E)||E===null)&&e.append(a===!0?vm([m],T,r):a===null?m:m+"[]",c(E))}),!1}return Sd(p)?!0:(e.append(vm(y,m,r),c(p)),!1)}const d=[],h=Object.assign(sw,{defaultVisitor:u,convertValue:c,isVisitable:Sd});function f(p,m){if(!ie.isUndefined(p)){if(d.indexOf(p)!==-1)throw Error("Circular reference detected in "+m.join("."));d.push(p),ie.forEach(p,function(g,v){(!(ie.isUndefined(g)||g===null)&&i.call(e,g,ie.isString(v)?v.trim():v,m,h))===!0&&f(g,m?m.concat(v):[v])}),d.pop()}}if(!ie.isObject(n))throw new TypeError("data must be an object");return f(n),e}function Em(n){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(n).replace(/[!'()~]|%20|%00/g,function(s){return e[s]})}function Jh(n,e){this._pairs=[],n&&dc(n,this,e)}const Av=Jh.prototype;Av.append=function(e,t){this._pairs.push([e,t])};Av.toString=function(e){const t=e?function(s){return e.call(this,s,Em)}:Em;return this._pairs.map(function(i){return t(i[0])+"="+t(i[1])},"").join("&")};function nw(n){return encodeURIComponent(n).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function Lv(n,e,t){if(!e)return n;const s=t&&t.encode||nw,i=t&&t.serialize;let r;if(i?r=i(e,t):r=ie.isURLSearchParams(e)?e.toString():new Jh(e,t).toString(s),r){const a=n.indexOf("#");a!==-1&&(n=n.slice(0,a)),n+=(n.indexOf("?")===-1?"?":"&")+r}return n}class iw{constructor(){this.handlers=[]}use(e,t,s){return this.handlers.push({fulfilled:e,rejected:t,synchronous:s?s.synchronous:!1,runWhen:s?s.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){ie.forEach(this.handlers,function(s){s!==null&&e(s)})}}const Tm=iw,wv={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},rw=typeof URLSearchParams<"u"?URLSearchParams:Jh,aw=typeof FormData<"u"?FormData:null,ow=typeof Blob<"u"?Blob:null,lw=(()=>{let n;return typeof navigator<"u"&&((n=navigator.product)==="ReactNative"||n==="NativeScript"||n==="NS")?!1:typeof window<"u"&&typeof document<"u"})(),cw=(()=>typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function")(),hn={isBrowser:!0,classes:{URLSearchParams:rw,FormData:aw,Blob:ow},isStandardBrowserEnv:lw,isStandardBrowserWebWorkerEnv:cw,protocols:["http","https","file","blob","url","data"]};function uw(n,e){return dc(n,new hn.classes.URLSearchParams,Object.assign({visitor:function(t,s,i,r){return hn.isNode&&ie.isBuffer(t)?(this.append(s,t.toString("base64")),!1):r.defaultVisitor.apply(this,arguments)}},e))}function dw(n){return ie.matchAll(/\w+|\[(\w*)]/g,n).map(e=>e[0]==="[]"?"":e[1]||e[0])}function hw(n){const e={},t=Object.keys(n);let s;const i=t.length;let r;for(s=0;s<i;s++)r=t[s],e[r]=n[r];return e}function Rv(n){function e(t,s,i,r){let a=t[r++];const o=Number.isFinite(+a),l=r>=t.length;return a=!a&&ie.isArray(i)?i.length:a,l?(ie.hasOwnProp(i,a)?i[a]=[i[a],s]:i[a]=s,!o):((!i[a]||!ie.isObject(i[a]))&&(i[a]=[]),e(t,s,i[a],r)&&ie.isArray(i[a])&&(i[a]=hw(i[a])),!o)}if(ie.isFormData(n)&&ie.isFunction(n.entries)){const t={};return ie.forEachEntry(n,(s,i)=>{e(dw(s),i,t,0)}),t}return null}function fw(n,e,t){if(ie.isString(n))try{return(e||JSON.parse)(n),ie.trim(n)}catch(s){if(s.name!=="SyntaxError")throw s}return(t||JSON.stringify)(n)}const Zh={transitional:wv,adapter:["xhr","http"],transformRequest:[function(e,t){const s=t.getContentType()||"",i=s.indexOf("application/json")>-1,r=ie.isObject(e);if(r&&ie.isHTMLForm(e)&&(e=new FormData(e)),ie.isFormData(e))return i&&i?JSON.stringify(Rv(e)):e;if(ie.isArrayBuffer(e)||ie.isBuffer(e)||ie.isStream(e)||ie.isFile(e)||ie.isBlob(e))return e;if(ie.isArrayBufferView(e))return e.buffer;if(ie.isURLSearchParams(e))return t.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let o;if(r){if(s.indexOf("application/x-www-form-urlencoded")>-1)return uw(e,this.formSerializer).toString();if((o=ie.isFileList(e))||s.indexOf("multipart/form-data")>-1){const l=this.env&&this.env.FormData;return dc(o?{"files[]":e}:e,l&&new l,this.formSerializer)}}return r||i?(t.setContentType("application/json",!1),fw(e)):e}],transformResponse:[function(e){const t=this.transitional||Zh.transitional,s=t&&t.forcedJSONParsing,i=this.responseType==="json";if(e&&ie.isString(e)&&(s&&!this.responseType||i)){const a=!(t&&t.silentJSONParsing)&&i;try{return JSON.parse(e)}catch(o){if(a)throw o.name==="SyntaxError"?qe.from(o,qe.ERR_BAD_RESPONSE,this,null,this.response):o}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:hn.classes.FormData,Blob:hn.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};ie.forEach(["delete","get","head","post","put","patch"],n=>{Zh.headers[n]={}});const ef=Zh,pw=ie.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),mw=n=>{const e={};let t,s,i;return n&&n.split(`
`).forEach(function(a){i=a.indexOf(":"),t=a.substring(0,i).trim().toLowerCase(),s=a.substring(i+1).trim(),!(!t||e[t]&&pw[t])&&(t==="set-cookie"?e[t]?e[t].push(s):e[t]=[s]:e[t]=e[t]?e[t]+", "+s:s)}),e},bm=Symbol("internals");function ra(n){return n&&String(n).trim().toLowerCase()}function Yo(n){return n===!1||n==null?n:ie.isArray(n)?n.map(Yo):String(n)}function gw(n){const e=Object.create(null),t=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let s;for(;s=t.exec(n);)e[s[1]]=s[2];return e}const yw=n=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(n.trim());function Nc(n,e,t,s,i){if(ie.isFunction(s))return s.call(this,e,t);if(i&&(e=t),!!ie.isString(e)){if(ie.isString(s))return e.indexOf(s)!==-1;if(ie.isRegExp(s))return s.test(e)}}function vw(n){return n.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,t,s)=>t.toUpperCase()+s)}function Ew(n,e){const t=ie.toCamelCase(" "+e);["get","set","has"].forEach(s=>{Object.defineProperty(n,s+t,{value:function(i,r,a){return this[s].call(this,e,i,r,a)},configurable:!0})})}class hc{constructor(e){e&&this.set(e)}set(e,t,s){const i=this;function r(o,l,c){const u=ra(l);if(!u)throw new Error("header name must be a non-empty string");const d=ie.findKey(i,u);(!d||i[d]===void 0||c===!0||c===void 0&&i[d]!==!1)&&(i[d||l]=Yo(o))}const a=(o,l)=>ie.forEach(o,(c,u)=>r(c,u,l));return ie.isPlainObject(e)||e instanceof this.constructor?a(e,t):ie.isString(e)&&(e=e.trim())&&!yw(e)?a(mw(e),t):e!=null&&r(t,e,s),this}get(e,t){if(e=ra(e),e){const s=ie.findKey(this,e);if(s){const i=this[s];if(!t)return i;if(t===!0)return gw(i);if(ie.isFunction(t))return t.call(this,i,s);if(ie.isRegExp(t))return t.exec(i);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,t){if(e=ra(e),e){const s=ie.findKey(this,e);return!!(s&&this[s]!==void 0&&(!t||Nc(this,this[s],s,t)))}return!1}delete(e,t){const s=this;let i=!1;function r(a){if(a=ra(a),a){const o=ie.findKey(s,a);o&&(!t||Nc(s,s[o],o,t))&&(delete s[o],i=!0)}}return ie.isArray(e)?e.forEach(r):r(e),i}clear(e){const t=Object.keys(this);let s=t.length,i=!1;for(;s--;){const r=t[s];(!e||Nc(this,this[r],r,e,!0))&&(delete this[r],i=!0)}return i}normalize(e){const t=this,s={};return ie.forEach(this,(i,r)=>{const a=ie.findKey(s,r);if(a){t[a]=Yo(i),delete t[r];return}const o=e?vw(r):String(r).trim();o!==r&&delete t[r],t[o]=Yo(i),s[o]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const t=Object.create(null);return ie.forEach(this,(s,i)=>{s!=null&&s!==!1&&(t[i]=e&&ie.isArray(s)?s.join(", "):s)}),t}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,t])=>e+": "+t).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...t){const s=new this(e);return t.forEach(i=>s.set(i)),s}static accessor(e){const s=(this[bm]=this[bm]={accessors:{}}).accessors,i=this.prototype;function r(a){const o=ra(a);s[o]||(Ew(i,a),s[o]=!0)}return ie.isArray(e)?e.forEach(r):r(e),this}}hc.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);ie.reduceDescriptors(hc.prototype,({value:n},e)=>{let t=e[0].toUpperCase()+e.slice(1);return{get:()=>n,set(s){this[t]=s}}});ie.freezeMethods(hc);const jn=hc;function Bc(n,e){const t=this||ef,s=e||t,i=jn.from(s.headers);let r=s.data;return ie.forEach(n,function(o){r=o.call(t,r,i.normalize(),e?e.status:void 0)}),i.normalize(),r}function Iv(n){return!!(n&&n.__CANCEL__)}function io(n,e,t){qe.call(this,n??"canceled",qe.ERR_CANCELED,e,t),this.name="CanceledError"}ie.inherits(io,qe,{__CANCEL__:!0});function Tw(n,e,t){const s=t.config.validateStatus;!t.status||!s||s(t.status)?n(t):e(new qe("Request failed with status code "+t.status,[qe.ERR_BAD_REQUEST,qe.ERR_BAD_RESPONSE][Math.floor(t.status/100)-4],t.config,t.request,t))}const bw=hn.isStandardBrowserEnv?function(){return{write:function(t,s,i,r,a,o){const l=[];l.push(t+"="+encodeURIComponent(s)),ie.isNumber(i)&&l.push("expires="+new Date(i).toGMTString()),ie.isString(r)&&l.push("path="+r),ie.isString(a)&&l.push("domain="+a),o===!0&&l.push("secure"),document.cookie=l.join("; ")},read:function(t){const s=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return s?decodeURIComponent(s[3]):null},remove:function(t){this.write(t,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}();function xw(n){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(n)}function Sw(n,e){return e?n.replace(/\/+$/,"")+"/"+e.replace(/^\/+/,""):n}function Cv(n,e){return n&&!xw(e)?Sw(n,e):e}const _w=hn.isStandardBrowserEnv?function(){const e=/(msie|trident)/i.test(navigator.userAgent),t=document.createElement("a");let s;function i(r){let a=r;return e&&(t.setAttribute("href",a),a=t.href),t.setAttribute("href",a),{href:t.href,protocol:t.protocol?t.protocol.replace(/:$/,""):"",host:t.host,search:t.search?t.search.replace(/^\?/,""):"",hash:t.hash?t.hash.replace(/^#/,""):"",hostname:t.hostname,port:t.port,pathname:t.pathname.charAt(0)==="/"?t.pathname:"/"+t.pathname}}return s=i(window.location.href),function(a){const o=ie.isString(a)?i(a):a;return o.protocol===s.protocol&&o.host===s.host}}():function(){return function(){return!0}}();function Aw(n){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(n);return e&&e[1]||""}function Lw(n,e){n=n||10;const t=new Array(n),s=new Array(n);let i=0,r=0,a;return e=e!==void 0?e:1e3,function(l){const c=Date.now(),u=s[r];a||(a=c),t[i]=l,s[i]=c;let d=r,h=0;for(;d!==i;)h+=t[d++],d=d%n;if(i=(i+1)%n,i===r&&(r=(r+1)%n),c-a<e)return;const f=u&&c-u;return f?Math.round(h*1e3/f):void 0}}function xm(n,e){let t=0;const s=Lw(50,250);return i=>{const r=i.loaded,a=i.lengthComputable?i.total:void 0,o=r-t,l=s(o),c=r<=a;t=r;const u={loaded:r,total:a,progress:a?r/a:void 0,bytes:o,rate:l||void 0,estimated:l&&a&&c?(a-r)/l:void 0,event:i};u[e?"download":"upload"]=!0,n(u)}}const ww=typeof XMLHttpRequest<"u",Rw=ww&&function(n){return new Promise(function(t,s){let i=n.data;const r=jn.from(n.headers).normalize(),a=n.responseType;let o;function l(){n.cancelToken&&n.cancelToken.unsubscribe(o),n.signal&&n.signal.removeEventListener("abort",o)}let c;ie.isFormData(i)&&(hn.isStandardBrowserEnv||hn.isStandardBrowserWebWorkerEnv?r.setContentType(!1):r.getContentType(/^\s*multipart\/form-data/)?ie.isString(c=r.getContentType())&&r.setContentType(c.replace(/^\s*(multipart\/form-data);+/,"$1")):r.setContentType("multipart/form-data"));let u=new XMLHttpRequest;if(n.auth){const p=n.auth.username||"",m=n.auth.password?unescape(encodeURIComponent(n.auth.password)):"";r.set("Authorization","Basic "+btoa(p+":"+m))}const d=Cv(n.baseURL,n.url);u.open(n.method.toUpperCase(),Lv(d,n.params,n.paramsSerializer),!0),u.timeout=n.timeout;function h(){if(!u)return;const p=jn.from("getAllResponseHeaders"in u&&u.getAllResponseHeaders()),y={data:!a||a==="text"||a==="json"?u.responseText:u.response,status:u.status,statusText:u.statusText,headers:p,config:n,request:u};Tw(function(v){t(v),l()},function(v){s(v),l()},y),u=null}if("onloadend"in u?u.onloadend=h:u.onreadystatechange=function(){!u||u.readyState!==4||u.status===0&&!(u.responseURL&&u.responseURL.indexOf("file:")===0)||setTimeout(h)},u.onabort=function(){u&&(s(new qe("Request aborted",qe.ECONNABORTED,n,u)),u=null)},u.onerror=function(){s(new qe("Network Error",qe.ERR_NETWORK,n,u)),u=null},u.ontimeout=function(){let m=n.timeout?"timeout of "+n.timeout+"ms exceeded":"timeout exceeded";const y=n.transitional||wv;n.timeoutErrorMessage&&(m=n.timeoutErrorMessage),s(new qe(m,y.clarifyTimeoutError?qe.ETIMEDOUT:qe.ECONNABORTED,n,u)),u=null},hn.isStandardBrowserEnv){const p=_w(d)&&n.xsrfCookieName&&bw.read(n.xsrfCookieName);p&&r.set(n.xsrfHeaderName,p)}i===void 0&&r.setContentType(null),"setRequestHeader"in u&&ie.forEach(r.toJSON(),function(m,y){u.setRequestHeader(y,m)}),ie.isUndefined(n.withCredentials)||(u.withCredentials=!!n.withCredentials),a&&a!=="json"&&(u.responseType=n.responseType),typeof n.onDownloadProgress=="function"&&u.addEventListener("progress",xm(n.onDownloadProgress,!0)),typeof n.onUploadProgress=="function"&&u.upload&&u.upload.addEventListener("progress",xm(n.onUploadProgress)),(n.cancelToken||n.signal)&&(o=p=>{u&&(s(!p||p.type?new io(null,n,u):p),u.abort(),u=null)},n.cancelToken&&n.cancelToken.subscribe(o),n.signal&&(n.signal.aborted?o():n.signal.addEventListener("abort",o)));const f=Aw(d);if(f&&hn.protocols.indexOf(f)===-1){s(new qe("Unsupported protocol "+f+":",qe.ERR_BAD_REQUEST,n));return}u.send(i||null)})},_d={http:ew,xhr:Rw};ie.forEach(_d,(n,e)=>{if(n){try{Object.defineProperty(n,"name",{value:e})}catch{}Object.defineProperty(n,"adapterName",{value:e})}});const Sm=n=>`- ${n}`,Iw=n=>ie.isFunction(n)||n===null||n===!1,Dv={getAdapter:n=>{n=ie.isArray(n)?n:[n];const{length:e}=n;let t,s;const i={};for(let r=0;r<e;r++){t=n[r];let a;if(s=t,!Iw(t)&&(s=_d[(a=String(t)).toLowerCase()],s===void 0))throw new qe(`Unknown adapter '${a}'`);if(s)break;i[a||"#"+r]=s}if(!s){const r=Object.entries(i).map(([o,l])=>`adapter ${o} `+(l===!1?"is not supported by the environment":"is not available in the build"));let a=e?r.length>1?`since :
`+r.map(Sm).join(`
`):" "+Sm(r[0]):"as no adapter specified";throw new qe("There is no suitable adapter to dispatch the request "+a,"ERR_NOT_SUPPORT")}return s},adapters:_d};function Uc(n){if(n.cancelToken&&n.cancelToken.throwIfRequested(),n.signal&&n.signal.aborted)throw new io(null,n)}function _m(n){return Uc(n),n.headers=jn.from(n.headers),n.data=Bc.call(n,n.transformRequest),["post","put","patch"].indexOf(n.method)!==-1&&n.headers.setContentType("application/x-www-form-urlencoded",!1),Dv.getAdapter(n.adapter||ef.adapter)(n).then(function(s){return Uc(n),s.data=Bc.call(n,n.transformResponse,s),s.headers=jn.from(s.headers),s},function(s){return Iv(s)||(Uc(n),s&&s.response&&(s.response.data=Bc.call(n,n.transformResponse,s.response),s.response.headers=jn.from(s.response.headers))),Promise.reject(s)})}const Am=n=>n instanceof jn?n.toJSON():n;function Ur(n,e){e=e||{};const t={};function s(c,u,d){return ie.isPlainObject(c)&&ie.isPlainObject(u)?ie.merge.call({caseless:d},c,u):ie.isPlainObject(u)?ie.merge({},u):ie.isArray(u)?u.slice():u}function i(c,u,d){if(ie.isUndefined(u)){if(!ie.isUndefined(c))return s(void 0,c,d)}else return s(c,u,d)}function r(c,u){if(!ie.isUndefined(u))return s(void 0,u)}function a(c,u){if(ie.isUndefined(u)){if(!ie.isUndefined(c))return s(void 0,c)}else return s(void 0,u)}function o(c,u,d){if(d in e)return s(c,u);if(d in n)return s(void 0,c)}const l={url:r,method:r,data:r,baseURL:a,transformRequest:a,transformResponse:a,paramsSerializer:a,timeout:a,timeoutMessage:a,withCredentials:a,adapter:a,responseType:a,xsrfCookieName:a,xsrfHeaderName:a,onUploadProgress:a,onDownloadProgress:a,decompress:a,maxContentLength:a,maxBodyLength:a,beforeRedirect:a,transport:a,httpAgent:a,httpsAgent:a,cancelToken:a,socketPath:a,responseEncoding:a,validateStatus:o,headers:(c,u)=>i(Am(c),Am(u),!0)};return ie.forEach(Object.keys(Object.assign({},n,e)),function(u){const d=l[u]||i,h=d(n[u],e[u],u);ie.isUndefined(h)&&d!==o||(t[u]=h)}),t}const kv="1.6.0",tf={};["object","boolean","number","function","string","symbol"].forEach((n,e)=>{tf[n]=function(s){return typeof s===n||"a"+(e<1?"n ":" ")+n}});const Lm={};tf.transitional=function(e,t,s){function i(r,a){return"[Axios v"+kv+"] Transitional option '"+r+"'"+a+(s?". "+s:"")}return(r,a,o)=>{if(e===!1)throw new qe(i(a," has been removed"+(t?" in "+t:"")),qe.ERR_DEPRECATED);return t&&!Lm[a]&&(Lm[a]=!0,console.warn(i(a," has been deprecated since v"+t+" and will be removed in the near future"))),e?e(r,a,o):!0}};function Cw(n,e,t){if(typeof n!="object")throw new qe("options must be an object",qe.ERR_BAD_OPTION_VALUE);const s=Object.keys(n);let i=s.length;for(;i-- >0;){const r=s[i],a=e[r];if(a){const o=n[r],l=o===void 0||a(o,r,n);if(l!==!0)throw new qe("option "+r+" must be "+l,qe.ERR_BAD_OPTION_VALUE);continue}if(t!==!0)throw new qe("Unknown option "+r,qe.ERR_BAD_OPTION)}}const Ad={assertOptions:Cw,validators:tf},Qn=Ad.validators;class gl{constructor(e){this.defaults=e,this.interceptors={request:new Tm,response:new Tm}}request(e,t){typeof e=="string"?(t=t||{},t.url=e):t=e||{},t=Ur(this.defaults,t);const{transitional:s,paramsSerializer:i,headers:r}=t;s!==void 0&&Ad.assertOptions(s,{silentJSONParsing:Qn.transitional(Qn.boolean),forcedJSONParsing:Qn.transitional(Qn.boolean),clarifyTimeoutError:Qn.transitional(Qn.boolean)},!1),i!=null&&(ie.isFunction(i)?t.paramsSerializer={serialize:i}:Ad.assertOptions(i,{encode:Qn.function,serialize:Qn.function},!0)),t.method=(t.method||this.defaults.method||"get").toLowerCase();let a=r&&ie.merge(r.common,r[t.method]);r&&ie.forEach(["delete","get","head","post","put","patch","common"],p=>{delete r[p]}),t.headers=jn.concat(a,r);const o=[];let l=!0;this.interceptors.request.forEach(function(m){typeof m.runWhen=="function"&&m.runWhen(t)===!1||(l=l&&m.synchronous,o.unshift(m.fulfilled,m.rejected))});const c=[];this.interceptors.response.forEach(function(m){c.push(m.fulfilled,m.rejected)});let u,d=0,h;if(!l){const p=[_m.bind(this),void 0];for(p.unshift.apply(p,o),p.push.apply(p,c),h=p.length,u=Promise.resolve(t);d<h;)u=u.then(p[d++],p[d++]);return u}h=o.length;let f=t;for(d=0;d<h;){const p=o[d++],m=o[d++];try{f=p(f)}catch(y){m.call(this,y);break}}try{u=_m.call(this,f)}catch(p){return Promise.reject(p)}for(d=0,h=c.length;d<h;)u=u.then(c[d++],c[d++]);return u}getUri(e){e=Ur(this.defaults,e);const t=Cv(e.baseURL,e.url);return Lv(t,e.params,e.paramsSerializer)}}ie.forEach(["delete","get","head","options"],function(e){gl.prototype[e]=function(t,s){return this.request(Ur(s||{},{method:e,url:t,data:(s||{}).data}))}});ie.forEach(["post","put","patch"],function(e){function t(s){return function(r,a,o){return this.request(Ur(o||{},{method:e,headers:s?{"Content-Type":"multipart/form-data"}:{},url:r,data:a}))}}gl.prototype[e]=t(),gl.prototype[e+"Form"]=t(!0)});const qo=gl;class sf{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let t;this.promise=new Promise(function(r){t=r});const s=this;this.promise.then(i=>{if(!s._listeners)return;let r=s._listeners.length;for(;r-- >0;)s._listeners[r](i);s._listeners=null}),this.promise.then=i=>{let r;const a=new Promise(o=>{s.subscribe(o),r=o}).then(i);return a.cancel=function(){s.unsubscribe(r)},a},e(function(r,a,o){s.reason||(s.reason=new io(r,a,o),t(s.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const t=this._listeners.indexOf(e);t!==-1&&this._listeners.splice(t,1)}static source(){let e;return{token:new sf(function(i){e=i}),cancel:e}}}const Dw=sf;function kw(n){return function(t){return n.apply(null,t)}}function Pw(n){return ie.isObject(n)&&n.isAxiosError===!0}const Ld={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(Ld).forEach(([n,e])=>{Ld[e]=n});const Ow=Ld;function Pv(n){const e=new qo(n),t=pv(qo.prototype.request,e);return ie.extend(t,qo.prototype,e,{allOwnKeys:!0}),ie.extend(t,e,null,{allOwnKeys:!0}),t.create=function(i){return Pv(Ur(n,i))},t}const Rt=Pv(ef);Rt.Axios=qo;Rt.CanceledError=io;Rt.CancelToken=Dw;Rt.isCancel=Iv;Rt.VERSION=kv;Rt.toFormData=dc;Rt.AxiosError=qe;Rt.Cancel=Rt.CanceledError;Rt.all=function(e){return Promise.all(e)};Rt.spread=kw;Rt.isAxiosError=Pw;Rt.mergeConfig=Ur;Rt.AxiosHeaders=jn;Rt.formToJSON=n=>Rv(ie.isHTMLForm(n)?new FormData(n):n);Rt.getAdapter=Dv.getAdapter;Rt.HttpStatusCode=Ow;Rt.default=Rt;const Mw=Rt;function yl(n){return yl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},yl(n)}function Xo(n,e){if(!n.vueAxiosInstalled){var t=Ov(e)?Bw(e):e;if(Uw(t)){var s=$w(n);if(s){var i=s<3?Fw:Nw;Object.keys(t).forEach(function(r){i(n,r,t[r])}),n.vueAxiosInstalled=!0}else console.error("[vue-axios] unknown Vue version")}else console.error("[vue-axios] configuration is invalid, expected options are either <axios_instance> or { <registration_key>: <axios_instance> }")}}function Fw(n,e,t){Object.defineProperty(n.prototype,e,{get:function(){return t}}),n[e]=t}function Nw(n,e,t){n.config.globalProperties[e]=t,n[e]=t}function Ov(n){return n&&typeof n.get=="function"&&typeof n.post=="function"}function Bw(n){return{axios:n,$http:n}}function Uw(n){return yl(n)==="object"&&Object.keys(n).every(function(e){return Ov(n[e])})}function $w(n){return n&&n.version&&Number(n.version.split(".")[0])}(typeof oh>"u"?"undefined":yl(oh))=="object"?Rb.exports=Xo:typeof define=="function"&&define.amd?define([],function(){return Xo}):window.Vue&&window.axios&&window.Vue.use&&Vue.use(Xo,window.axios);/*!
  * vue-router v4.2.5
  * (c) 2023 Eduardo San Martin Morote
  * @license MIT
  */const gr=typeof window<"u";function jw(n){return n.__esModule||n[Symbol.toStringTag]==="Module"}const tt=Object.assign;function $c(n,e){const t={};for(const s in e){const i=e[s];t[s]=Qs(i)?i.map(n):n(i)}return t}const xa=()=>{},Qs=Array.isArray,Gw=/\/$/,Vw=n=>n.replace(Gw,"");function jc(n,e,t="/"){let s,i={},r="",a="";const o=e.indexOf("#");let l=e.indexOf("?");return o<l&&o>=0&&(l=-1),l>-1&&(s=e.slice(0,l),r=e.slice(l+1,o>-1?o:e.length),i=n(r)),o>-1&&(s=s||e.slice(0,o),a=e.slice(o,e.length)),s=zw(s??e,t),{fullPath:s+(r&&"?")+r+a,path:s,query:i,hash:a}}function Hw(n,e){const t=e.query?n(e.query):"";return e.path+(t&&"?")+t+(e.hash||"")}function wm(n,e){return!e||!n.toLowerCase().startsWith(e.toLowerCase())?n:n.slice(e.length)||"/"}function Kw(n,e,t){const s=e.matched.length-1,i=t.matched.length-1;return s>-1&&s===i&&$r(e.matched[s],t.matched[i])&&Mv(e.params,t.params)&&n(e.query)===n(t.query)&&e.hash===t.hash}function $r(n,e){return(n.aliasOf||n)===(e.aliasOf||e)}function Mv(n,e){if(Object.keys(n).length!==Object.keys(e).length)return!1;for(const t in n)if(!Ww(n[t],e[t]))return!1;return!0}function Ww(n,e){return Qs(n)?Rm(n,e):Qs(e)?Rm(e,n):n===e}function Rm(n,e){return Qs(e)?n.length===e.length&&n.every((t,s)=>t===e[s]):n.length===1&&n[0]===e}function zw(n,e){if(n.startsWith("/"))return n;if(!n)return e;const t=e.split("/"),s=n.split("/"),i=s[s.length-1];(i===".."||i===".")&&s.push("");let r=t.length-1,a,o;for(a=0;a<s.length;a++)if(o=s[a],o!==".")if(o==="..")r>1&&r--;else break;return t.slice(0,r).join("/")+"/"+s.slice(a-(a===s.length?1:0)).join("/")}var Ha;(function(n){n.pop="pop",n.push="push"})(Ha||(Ha={}));var Sa;(function(n){n.back="back",n.forward="forward",n.unknown=""})(Sa||(Sa={}));function Yw(n){if(!n)if(gr){const e=document.querySelector("base");n=e&&e.getAttribute("href")||"/",n=n.replace(/^\w+:\/\/[^\/]+/,"")}else n="/";return n[0]!=="/"&&n[0]!=="#"&&(n="/"+n),Vw(n)}const qw=/^[^#]+#/;function Xw(n,e){return n.replace(qw,"#")+e}function Qw(n,e){const t=document.documentElement.getBoundingClientRect(),s=n.getBoundingClientRect();return{behavior:e.behavior,left:s.left-t.left-(e.left||0),top:s.top-t.top-(e.top||0)}}const fc=()=>({left:window.pageXOffset,top:window.pageYOffset});function Jw(n){let e;if("el"in n){const t=n.el,s=typeof t=="string"&&t.startsWith("#"),i=typeof t=="string"?s?document.getElementById(t.slice(1)):document.querySelector(t):t;if(!i)return;e=Qw(i,n)}else e=n;"scrollBehavior"in document.documentElement.style?window.scrollTo(e):window.scrollTo(e.left!=null?e.left:window.pageXOffset,e.top!=null?e.top:window.pageYOffset)}function Im(n,e){return(history.state?history.state.position-e:-1)+n}const wd=new Map;function Zw(n,e){wd.set(n,e)}function eR(n){const e=wd.get(n);return wd.delete(n),e}let tR=()=>location.protocol+"//"+location.host;function Fv(n,e){const{pathname:t,search:s,hash:i}=e,r=n.indexOf("#");if(r>-1){let o=i.includes(n.slice(r))?n.slice(r).length:1,l=i.slice(o);return l[0]!=="/"&&(l="/"+l),wm(l,"")}return wm(t,n)+s+i}function sR(n,e,t,s){let i=[],r=[],a=null;const o=({state:h})=>{const f=Fv(n,location),p=t.value,m=e.value;let y=0;if(h){if(t.value=f,e.value=h,a&&a===p){a=null;return}y=m?h.position-m.position:0}else s(f);i.forEach(g=>{g(t.value,p,{delta:y,type:Ha.pop,direction:y?y>0?Sa.forward:Sa.back:Sa.unknown})})};function l(){a=t.value}function c(h){i.push(h);const f=()=>{const p=i.indexOf(h);p>-1&&i.splice(p,1)};return r.push(f),f}function u(){const{history:h}=window;h.state&&h.replaceState(tt({},h.state,{scroll:fc()}),"")}function d(){for(const h of r)h();r=[],window.removeEventListener("popstate",o),window.removeEventListener("beforeunload",u)}return window.addEventListener("popstate",o),window.addEventListener("beforeunload",u,{passive:!0}),{pauseListeners:l,listen:c,destroy:d}}function Cm(n,e,t,s=!1,i=!1){return{back:n,current:e,forward:t,replaced:s,position:window.history.length,scroll:i?fc():null}}function nR(n){const{history:e,location:t}=window,s={value:Fv(n,t)},i={value:e.state};i.value||r(s.value,{back:null,current:s.value,forward:null,position:e.length-1,replaced:!0,scroll:null},!0);function r(l,c,u){const d=n.indexOf("#"),h=d>-1?(t.host&&document.querySelector("base")?n:n.slice(d))+l:tR()+n+l;try{e[u?"replaceState":"pushState"](c,"",h),i.value=c}catch(f){console.error(f),t[u?"replace":"assign"](h)}}function a(l,c){const u=tt({},e.state,Cm(i.value.back,l,i.value.forward,!0),c,{position:i.value.position});r(l,u,!0),s.value=l}function o(l,c){const u=tt({},i.value,e.state,{forward:l,scroll:fc()});r(u.current,u,!0);const d=tt({},Cm(s.value,l,null),{position:u.position+1},c);r(l,d,!1),s.value=l}return{location:s,state:i,push:o,replace:a}}function iR(n){n=Yw(n);const e=nR(n),t=sR(n,e.state,e.location,e.replace);function s(r,a=!0){a||t.pauseListeners(),history.go(r)}const i=tt({location:"",base:n,go:s,createHref:Xw.bind(null,n)},e,t);return Object.defineProperty(i,"location",{enumerable:!0,get:()=>e.location.value}),Object.defineProperty(i,"state",{enumerable:!0,get:()=>e.state.value}),i}function rR(n){return typeof n=="string"||n&&typeof n=="object"}function Nv(n){return typeof n=="string"||typeof n=="symbol"}const Jn={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0},Bv=Symbol("");var Dm;(function(n){n[n.aborted=4]="aborted",n[n.cancelled=8]="cancelled",n[n.duplicated=16]="duplicated"})(Dm||(Dm={}));function jr(n,e){return tt(new Error,{type:n,[Bv]:!0},e)}function _n(n,e){return n instanceof Error&&Bv in n&&(e==null||!!(n.type&e))}const km="[^/]+?",aR={sensitive:!1,strict:!1,start:!0,end:!0},oR=/[.+*?^${}()[\]/\\]/g;function lR(n,e){const t=tt({},aR,e),s=[];let i=t.start?"^":"";const r=[];for(const c of n){const u=c.length?[]:[90];t.strict&&!c.length&&(i+="/");for(let d=0;d<c.length;d++){const h=c[d];let f=40+(t.sensitive?.25:0);if(h.type===0)d||(i+="/"),i+=h.value.replace(oR,"\\$&"),f+=40;else if(h.type===1){const{value:p,repeatable:m,optional:y,regexp:g}=h;r.push({name:p,repeatable:m,optional:y});const v=g||km;if(v!==km){f+=10;try{new RegExp(`(${v})`)}catch(T){throw new Error(`Invalid custom RegExp for param "${p}" (${v}): `+T.message)}}let E=m?`((?:${v})(?:/(?:${v}))*)`:`(${v})`;d||(E=y&&c.length<2?`(?:/${E})`:"/"+E),y&&(E+="?"),i+=E,f+=20,y&&(f+=-8),m&&(f+=-20),v===".*"&&(f+=-50)}u.push(f)}s.push(u)}if(t.strict&&t.end){const c=s.length-1;s[c][s[c].length-1]+=.7000000000000001}t.strict||(i+="/?"),t.end?i+="$":t.strict&&(i+="(?:/|$)");const a=new RegExp(i,t.sensitive?"":"i");function o(c){const u=c.match(a),d={};if(!u)return null;for(let h=1;h<u.length;h++){const f=u[h]||"",p=r[h-1];d[p.name]=f&&p.repeatable?f.split("/"):f}return d}function l(c){let u="",d=!1;for(const h of n){(!d||!u.endsWith("/"))&&(u+="/"),d=!1;for(const f of h)if(f.type===0)u+=f.value;else if(f.type===1){const{value:p,repeatable:m,optional:y}=f,g=p in c?c[p]:"";if(Qs(g)&&!m)throw new Error(`Provided param "${p}" is an array but it is not repeatable (* or + modifiers)`);const v=Qs(g)?g.join("/"):g;if(!v)if(y)h.length<2&&(u.endsWith("/")?u=u.slice(0,-1):d=!0);else throw new Error(`Missing required param "${p}"`);u+=v}}return u||"/"}return{re:a,score:s,keys:r,parse:o,stringify:l}}function cR(n,e){let t=0;for(;t<n.length&&t<e.length;){const s=e[t]-n[t];if(s)return s;t++}return n.length<e.length?n.length===1&&n[0]===40+40?-1:1:n.length>e.length?e.length===1&&e[0]===40+40?1:-1:0}function uR(n,e){let t=0;const s=n.score,i=e.score;for(;t<s.length&&t<i.length;){const r=cR(s[t],i[t]);if(r)return r;t++}if(Math.abs(i.length-s.length)===1){if(Pm(s))return 1;if(Pm(i))return-1}return i.length-s.length}function Pm(n){const e=n[n.length-1];return n.length>0&&e[e.length-1]<0}const dR={type:0,value:""},hR=/[a-zA-Z0-9_]/;function fR(n){if(!n)return[[]];if(n==="/")return[[dR]];if(!n.startsWith("/"))throw new Error(`Invalid path "${n}"`);function e(f){throw new Error(`ERR (${t})/"${c}": ${f}`)}let t=0,s=t;const i=[];let r;function a(){r&&i.push(r),r=[]}let o=0,l,c="",u="";function d(){c&&(t===0?r.push({type:0,value:c}):t===1||t===2||t===3?(r.length>1&&(l==="*"||l==="+")&&e(`A repeatable param (${c}) must be alone in its segment. eg: '/:ids+.`),r.push({type:1,value:c,regexp:u,repeatable:l==="*"||l==="+",optional:l==="*"||l==="?"})):e("Invalid state to consume buffer"),c="")}function h(){c+=l}for(;o<n.length;){if(l=n[o++],l==="\\"&&t!==2){s=t,t=4;continue}switch(t){case 0:l==="/"?(c&&d(),a()):l===":"?(d(),t=1):h();break;case 4:h(),t=s;break;case 1:l==="("?t=2:hR.test(l)?h():(d(),t=0,l!=="*"&&l!=="?"&&l!=="+"&&o--);break;case 2:l===")"?u[u.length-1]=="\\"?u=u.slice(0,-1)+l:t=3:u+=l;break;case 3:d(),t=0,l!=="*"&&l!=="?"&&l!=="+"&&o--,u="";break;default:e("Unknown state");break}}return t===2&&e(`Unfinished custom RegExp for param "${c}"`),d(),a(),i}function pR(n,e,t){const s=lR(fR(n.path),t),i=tt(s,{record:n,parent:e,children:[],alias:[]});return e&&!i.record.aliasOf==!e.record.aliasOf&&e.children.push(i),i}function mR(n,e){const t=[],s=new Map;e=Fm({strict:!1,end:!0,sensitive:!1},e);function i(u){return s.get(u)}function r(u,d,h){const f=!h,p=gR(u);p.aliasOf=h&&h.record;const m=Fm(e,u),y=[p];if("alias"in u){const E=typeof u.alias=="string"?[u.alias]:u.alias;for(const T of E)y.push(tt({},p,{components:h?h.record.components:p.components,path:T,aliasOf:h?h.record:p}))}let g,v;for(const E of y){const{path:T}=E;if(d&&T[0]!=="/"){const b=d.record.path,L=b[b.length-1]==="/"?"":"/";E.path=d.record.path+(T&&L+T)}if(g=pR(E,d,m),h?h.alias.push(g):(v=v||g,v!==g&&v.alias.push(g),f&&u.name&&!Mm(g)&&a(u.name)),p.children){const b=p.children;for(let L=0;L<b.length;L++)r(b[L],g,h&&h.children[L])}h=h||g,(g.record.components&&Object.keys(g.record.components).length||g.record.name||g.record.redirect)&&l(g)}return v?()=>{a(v)}:xa}function a(u){if(Nv(u)){const d=s.get(u);d&&(s.delete(u),t.splice(t.indexOf(d),1),d.children.forEach(a),d.alias.forEach(a))}else{const d=t.indexOf(u);d>-1&&(t.splice(d,1),u.record.name&&s.delete(u.record.name),u.children.forEach(a),u.alias.forEach(a))}}function o(){return t}function l(u){let d=0;for(;d<t.length&&uR(u,t[d])>=0&&(u.record.path!==t[d].record.path||!Uv(u,t[d]));)d++;t.splice(d,0,u),u.record.name&&!Mm(u)&&s.set(u.record.name,u)}function c(u,d){let h,f={},p,m;if("name"in u&&u.name){if(h=s.get(u.name),!h)throw jr(1,{location:u});m=h.record.name,f=tt(Om(d.params,h.keys.filter(v=>!v.optional).map(v=>v.name)),u.params&&Om(u.params,h.keys.map(v=>v.name))),p=h.stringify(f)}else if("path"in u)p=u.path,h=t.find(v=>v.re.test(p)),h&&(f=h.parse(p),m=h.record.name);else{if(h=d.name?s.get(d.name):t.find(v=>v.re.test(d.path)),!h)throw jr(1,{location:u,currentLocation:d});m=h.record.name,f=tt({},d.params,u.params),p=h.stringify(f)}const y=[];let g=h;for(;g;)y.unshift(g.record),g=g.parent;return{name:m,path:p,params:f,matched:y,meta:vR(y)}}return n.forEach(u=>r(u)),{addRoute:r,resolve:c,removeRoute:a,getRoutes:o,getRecordMatcher:i}}function Om(n,e){const t={};for(const s of e)s in n&&(t[s]=n[s]);return t}function gR(n){return{path:n.path,redirect:n.redirect,name:n.name,meta:n.meta||{},aliasOf:void 0,beforeEnter:n.beforeEnter,props:yR(n),children:n.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in n?n.components||null:n.component&&{default:n.component}}}function yR(n){const e={},t=n.props||!1;if("component"in n)e.default=t;else for(const s in n.components)e[s]=typeof t=="object"?t[s]:t;return e}function Mm(n){for(;n;){if(n.record.aliasOf)return!0;n=n.parent}return!1}function vR(n){return n.reduce((e,t)=>tt(e,t.meta),{})}function Fm(n,e){const t={};for(const s in n)t[s]=s in e?e[s]:n[s];return t}function Uv(n,e){return e.children.some(t=>t===n||Uv(n,t))}const $v=/#/g,ER=/&/g,TR=/\//g,bR=/=/g,xR=/\?/g,jv=/\+/g,SR=/%5B/g,_R=/%5D/g,Gv=/%5E/g,AR=/%60/g,Vv=/%7B/g,LR=/%7C/g,Hv=/%7D/g,wR=/%20/g;function nf(n){return encodeURI(""+n).replace(LR,"|").replace(SR,"[").replace(_R,"]")}function RR(n){return nf(n).replace(Vv,"{").replace(Hv,"}").replace(Gv,"^")}function Rd(n){return nf(n).replace(jv,"%2B").replace(wR,"+").replace($v,"%23").replace(ER,"%26").replace(AR,"`").replace(Vv,"{").replace(Hv,"}").replace(Gv,"^")}function IR(n){return Rd(n).replace(bR,"%3D")}function CR(n){return nf(n).replace($v,"%23").replace(xR,"%3F")}function DR(n){return n==null?"":CR(n).replace(TR,"%2F")}function vl(n){try{return decodeURIComponent(""+n)}catch{}return""+n}function kR(n){const e={};if(n===""||n==="?")return e;const s=(n[0]==="?"?n.slice(1):n).split("&");for(let i=0;i<s.length;++i){const r=s[i].replace(jv," "),a=r.indexOf("="),o=vl(a<0?r:r.slice(0,a)),l=a<0?null:vl(r.slice(a+1));if(o in e){let c=e[o];Qs(c)||(c=e[o]=[c]),c.push(l)}else e[o]=l}return e}function Nm(n){let e="";for(let t in n){const s=n[t];if(t=IR(t),s==null){s!==void 0&&(e+=(e.length?"&":"")+t);continue}(Qs(s)?s.map(r=>r&&Rd(r)):[s&&Rd(s)]).forEach(r=>{r!==void 0&&(e+=(e.length?"&":"")+t,r!=null&&(e+="="+r))})}return e}function PR(n){const e={};for(const t in n){const s=n[t];s!==void 0&&(e[t]=Qs(s)?s.map(i=>i==null?null:""+i):s==null?s:""+s)}return e}const OR=Symbol(""),Bm=Symbol(""),rf=Symbol(""),Kv=Symbol(""),Id=Symbol("");function aa(){let n=[];function e(s){return n.push(s),()=>{const i=n.indexOf(s);i>-1&&n.splice(i,1)}}function t(){n=[]}return{add:e,list:()=>n.slice(),reset:t}}function ri(n,e,t,s,i){const r=s&&(s.enterCallbacks[i]=s.enterCallbacks[i]||[]);return()=>new Promise((a,o)=>{const l=d=>{d===!1?o(jr(4,{from:t,to:e})):d instanceof Error?o(d):rR(d)?o(jr(2,{from:e,to:d})):(r&&s.enterCallbacks[i]===r&&typeof d=="function"&&r.push(d),a())},c=n.call(s&&s.instances[i],e,t,l);let u=Promise.resolve(c);n.length<3&&(u=u.then(l)),u.catch(d=>o(d))})}function Gc(n,e,t,s){const i=[];for(const r of n)for(const a in r.components){let o=r.components[a];if(!(e!=="beforeRouteEnter"&&!r.instances[a]))if(MR(o)){const c=(o.__vccOpts||o)[e];c&&i.push(ri(c,t,s,r,a))}else{let l=o();i.push(()=>l.then(c=>{if(!c)return Promise.reject(new Error(`Couldn't resolve component "${a}" at "${r.path}"`));const u=jw(c)?c.default:c;r.components[a]=u;const h=(u.__vccOpts||u)[e];return h&&ri(h,t,s,r,a)()}))}}return i}function MR(n){return typeof n=="object"||"displayName"in n||"props"in n||"__vccOpts"in n}function Um(n){const e=fs(rf),t=fs(Kv),s=Ve(()=>e.resolve(De(n.to))),i=Ve(()=>{const{matched:l}=s.value,{length:c}=l,u=l[c-1],d=t.matched;if(!u||!d.length)return-1;const h=d.findIndex($r.bind(null,u));if(h>-1)return h;const f=$m(l[c-2]);return c>1&&$m(u)===f&&d[d.length-1].path!==f?d.findIndex($r.bind(null,l[c-2])):h}),r=Ve(()=>i.value>-1&&UR(t.params,s.value.params)),a=Ve(()=>i.value>-1&&i.value===t.matched.length-1&&Mv(t.params,s.value.params));function o(l={}){return BR(l)?e[De(n.replace)?"replace":"push"](De(n.to)).catch(xa):Promise.resolve()}return{route:s,href:Ve(()=>s.value.href),isActive:r,isExactActive:a,navigate:o}}const FR=Ze({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"}},useLink:Um,setup(n,{slots:e}){const t=qt(Um(n)),{options:s}=fs(rf),i=Ve(()=>({[jm(n.activeClass,s.linkActiveClass,"router-link-active")]:t.isActive,[jm(n.exactActiveClass,s.linkExactActiveClass,"router-link-exact-active")]:t.isExactActive}));return()=>{const r=e.default&&e.default(t);return n.custom?r:zt("a",{"aria-current":t.isExactActive?n.ariaCurrentValue:null,href:t.href,onClick:t.navigate,class:i.value},r)}}}),NR=FR;function BR(n){if(!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)&&!n.defaultPrevented&&!(n.button!==void 0&&n.button!==0)){if(n.currentTarget&&n.currentTarget.getAttribute){const e=n.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(e))return}return n.preventDefault&&n.preventDefault(),!0}}function UR(n,e){for(const t in e){const s=e[t],i=n[t];if(typeof s=="string"){if(s!==i)return!1}else if(!Qs(i)||i.length!==s.length||s.some((r,a)=>r!==i[a]))return!1}return!0}function $m(n){return n?n.aliasOf?n.aliasOf.path:n.path:""}const jm=(n,e,t)=>n??e??t,$R=Ze({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(n,{attrs:e,slots:t}){const s=fs(Id),i=Ve(()=>n.route||s.value),r=fs(Bm,0),a=Ve(()=>{let c=De(r);const{matched:u}=i.value;let d;for(;(d=u[c])&&!d.components;)c++;return c}),o=Ve(()=>i.value.matched[a.value]);qs(Bm,Ve(()=>a.value+1)),qs(OR,o),qs(Id,i);const l=ce();return _t(()=>[l.value,o.value,n.name],([c,u,d],[h,f,p])=>{u&&(u.instances[d]=c,f&&f!==u&&c&&c===h&&(u.leaveGuards.size||(u.leaveGuards=f.leaveGuards),u.updateGuards.size||(u.updateGuards=f.updateGuards))),c&&u&&(!f||!$r(u,f)||!h)&&(u.enterCallbacks[d]||[]).forEach(m=>m(c))},{flush:"post"}),()=>{const c=i.value,u=n.name,d=o.value,h=d&&d.components[u];if(!h)return Gm(t.default,{Component:h,route:c});const f=d.props[u],p=f?f===!0?c.params:typeof f=="function"?f(c):f:null,y=zt(h,tt({},p,e,{onVnodeUnmounted:g=>{g.component.isUnmounted&&(d.instances[u]=null)},ref:l}));return Gm(t.default,{Component:y,route:c})||y}}});function Gm(n,e){if(!n)return null;const t=n(e);return t.length===1?t[0]:t}const jR=$R;function GR(n){const e=mR(n.routes,n),t=n.parseQuery||kR,s=n.stringifyQuery||Nm,i=n.history,r=aa(),a=aa(),o=aa(),l=bh(Jn);let c=Jn;gr&&n.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const u=$c.bind(null,Q=>""+Q),d=$c.bind(null,DR),h=$c.bind(null,vl);function f(Q,oe){let q,ge;return Nv(Q)?(q=e.getRecordMatcher(Q),ge=oe):ge=Q,e.addRoute(ge,q)}function p(Q){const oe=e.getRecordMatcher(Q);oe&&e.removeRoute(oe)}function m(){return e.getRoutes().map(Q=>Q.record)}function y(Q){return!!e.getRecordMatcher(Q)}function g(Q,oe){if(oe=tt({},oe||l.value),typeof Q=="string"){const S=jc(t,Q,oe.path),M=e.resolve({path:S.path},oe),G=i.createHref(S.fullPath);return tt(S,M,{params:h(M.params),hash:vl(S.hash),redirectedFrom:void 0,href:G})}let q;if("path"in Q)q=tt({},Q,{path:jc(t,Q.path,oe.path).path});else{const S=tt({},Q.params);for(const M in S)S[M]==null&&delete S[M];q=tt({},Q,{params:d(S)}),oe.params=d(oe.params)}const ge=e.resolve(q,oe),Re=Q.hash||"";ge.params=u(h(ge.params));const F=Hw(s,tt({},Q,{hash:RR(Re),path:ge.path})),A=i.createHref(F);return tt({fullPath:F,hash:Re,query:s===Nm?PR(Q.query):Q.query||{}},ge,{redirectedFrom:void 0,href:A})}function v(Q){return typeof Q=="string"?jc(t,Q,l.value.path):tt({},Q)}function E(Q,oe){if(c!==Q)return jr(8,{from:oe,to:Q})}function T(Q){return x(Q)}function b(Q){return T(tt(v(Q),{replace:!0}))}function L(Q){const oe=Q.matched[Q.matched.length-1];if(oe&&oe.redirect){const{redirect:q}=oe;let ge=typeof q=="function"?q(Q):q;return typeof ge=="string"&&(ge=ge.includes("?")||ge.includes("#")?ge=v(ge):{path:ge},ge.params={}),tt({query:Q.query,hash:Q.hash,params:"path"in ge?{}:Q.params},ge)}}function x(Q,oe){const q=c=g(Q),ge=l.value,Re=Q.state,F=Q.force,A=Q.replace===!0,S=L(q);if(S)return x(tt(v(S),{state:typeof S=="object"?tt({},Re,S.state):Re,force:F,replace:A}),oe||q);const M=q;M.redirectedFrom=oe;let G;return!F&&Kw(s,ge,q)&&(G=jr(16,{to:M,from:ge}),j(ge,ge,!0,!1)),(G?Promise.resolve(G):R(M,ge)).catch(J=>_n(J)?_n(J,2)?J:B(J):V(J,M,ge)).then(J=>{if(J){if(_n(J,2))return x(tt({replace:A},v(J.to),{state:typeof J.to=="object"?tt({},Re,J.to.state):Re,force:F}),oe||M)}else J=D(M,ge,!0,A,Re);return P(M,ge,J),J})}function w(Q,oe){const q=E(Q,oe);return q?Promise.reject(q):Promise.resolve()}function k(Q){const oe=xe.values().next().value;return oe&&typeof oe.runWithContext=="function"?oe.runWithContext(Q):Q()}function R(Q,oe){let q;const[ge,Re,F]=VR(Q,oe);q=Gc(ge.reverse(),"beforeRouteLeave",Q,oe);for(const S of ge)S.leaveGuards.forEach(M=>{q.push(ri(M,Q,oe))});const A=w.bind(null,Q,oe);return q.push(A),we(q).then(()=>{q=[];for(const S of r.list())q.push(ri(S,Q,oe));return q.push(A),we(q)}).then(()=>{q=Gc(Re,"beforeRouteUpdate",Q,oe);for(const S of Re)S.updateGuards.forEach(M=>{q.push(ri(M,Q,oe))});return q.push(A),we(q)}).then(()=>{q=[];for(const S of F)if(S.beforeEnter)if(Qs(S.beforeEnter))for(const M of S.beforeEnter)q.push(ri(M,Q,oe));else q.push(ri(S.beforeEnter,Q,oe));return q.push(A),we(q)}).then(()=>(Q.matched.forEach(S=>S.enterCallbacks={}),q=Gc(F,"beforeRouteEnter",Q,oe),q.push(A),we(q))).then(()=>{q=[];for(const S of a.list())q.push(ri(S,Q,oe));return q.push(A),we(q)}).catch(S=>_n(S,8)?S:Promise.reject(S))}function P(Q,oe,q){o.list().forEach(ge=>k(()=>ge(Q,oe,q)))}function D(Q,oe,q,ge,Re){const F=E(Q,oe);if(F)return F;const A=oe===Jn,S=gr?history.state:{};q&&(ge||A?i.replace(Q.fullPath,tt({scroll:A&&S&&S.scroll},Re)):i.push(Q.fullPath,Re)),l.value=Q,j(Q,oe,q,A),B()}let O;function N(){O||(O=i.listen((Q,oe,q)=>{if(!Le.listening)return;const ge=g(Q),Re=L(ge);if(Re){x(tt(Re,{replace:!0}),ge).catch(xa);return}c=ge;const F=l.value;gr&&Zw(Im(F.fullPath,q.delta),fc()),R(ge,F).catch(A=>_n(A,12)?A:_n(A,2)?(x(A.to,ge).then(S=>{_n(S,20)&&!q.delta&&q.type===Ha.pop&&i.go(-1,!1)}).catch(xa),Promise.reject()):(q.delta&&i.go(-q.delta,!1),V(A,ge,F))).then(A=>{A=A||D(ge,F,!1),A&&(q.delta&&!_n(A,8)?i.go(-q.delta,!1):q.type===Ha.pop&&_n(A,20)&&i.go(-1,!1)),P(ge,F,A)}).catch(xa)}))}let $=aa(),K=aa(),ee;function V(Q,oe,q){B(Q);const ge=K.list();return ge.length?ge.forEach(Re=>Re(Q,oe,q)):console.error(Q),Promise.reject(Q)}function U(){return ee&&l.value!==Jn?Promise.resolve():new Promise((Q,oe)=>{$.add([Q,oe])})}function B(Q){return ee||(ee=!Q,N(),$.list().forEach(([oe,q])=>Q?q(Q):oe()),$.reset()),Q}function j(Q,oe,q,ge){const{scrollBehavior:Re}=n;if(!gr||!Re)return Promise.resolve();const F=!q&&eR(Im(Q.fullPath,0))||(ge||!q)&&history.state&&history.state.scroll||null;return Gn().then(()=>Re(Q,oe,F)).then(A=>A&&Jw(A)).catch(A=>V(A,Q,oe))}const Y=Q=>i.go(Q);let me;const xe=new Set,Le={currentRoute:l,listening:!0,addRoute:f,removeRoute:p,hasRoute:y,getRoutes:m,resolve:g,options:n,push:T,replace:b,go:Y,back:()=>Y(-1),forward:()=>Y(1),beforeEach:r.add,beforeResolve:a.add,afterEach:o.add,onError:K.add,isReady:U,install(Q){const oe=this;Q.component("RouterLink",NR),Q.component("RouterView",jR),Q.config.globalProperties.$router=oe,Object.defineProperty(Q.config.globalProperties,"$route",{enumerable:!0,get:()=>De(l)}),gr&&!me&&l.value===Jn&&(me=!0,T(i.location).catch(Re=>{}));const q={};for(const Re in Jn)Object.defineProperty(q,Re,{get:()=>l.value[Re],enumerable:!0});Q.provide(rf,oe),Q.provide(Kv,gh(q)),Q.provide(Id,l);const ge=Q.unmount;xe.add(Q),Q.unmount=function(){xe.delete(Q),xe.size<1&&(c=Jn,O&&O(),O=null,l.value=Jn,me=!1,ee=!1),ge()}}};function we(Q){return Q.reduce((oe,q)=>oe.then(()=>k(q)),Promise.resolve())}return Le}function VR(n,e){const t=[],s=[],i=[],r=Math.max(e.matched.length,n.matched.length);for(let a=0;a<r;a++){const o=e.matched[a];o&&(n.matched.find(c=>$r(c,o))?s.push(o):t.push(o));const l=n.matched[a];l&&(e.matched.find(c=>$r(c,l))||i.push(l))}return[t,s,i]}const HR="/PersonalWeb/assets/banner_picture01_1-19834468.svg",KR="/PersonalWeb/assets/banner_picture01_2-bec6c46f.svg",WR="/PersonalWeb/assets/banner_picture02_1-fa638ec0.svg",zR="/PersonalWeb/assets/banner_picture02_2-b5db4613.svg";function Vm(n){return n!==null&&typeof n=="object"&&"constructor"in n&&n.constructor===Object}function af(n,e){n===void 0&&(n={}),e===void 0&&(e={}),Object.keys(e).forEach(t=>{typeof n[t]>"u"?n[t]=e[t]:Vm(e[t])&&Vm(n[t])&&Object.keys(e[t]).length>0&&af(n[t],e[t])})}const Wv={body:{},addEventListener(){},removeEventListener(){},activeElement:{blur(){},nodeName:""},querySelector(){return null},querySelectorAll(){return[]},getElementById(){return null},createEvent(){return{initEvent(){}}},createElement(){return{children:[],childNodes:[],style:{},setAttribute(){},getElementsByTagName(){return[]}}},createElementNS(){return{}},importNode(){return null},location:{hash:"",host:"",hostname:"",href:"",origin:"",pathname:"",protocol:"",search:""}};function Xs(){const n=typeof document<"u"?document:{};return af(n,Wv),n}const YR={document:Wv,navigator:{userAgent:""},location:{hash:"",host:"",hostname:"",href:"",origin:"",pathname:"",protocol:"",search:""},history:{replaceState(){},pushState(){},go(){},back(){}},CustomEvent:function(){return this},addEventListener(){},removeEventListener(){},getComputedStyle(){return{getPropertyValue(){return""}}},Image(){},Date(){},screen:{},setTimeout(){},clearTimeout(){},matchMedia(){return{}},requestAnimationFrame(n){return typeof setTimeout>"u"?(n(),null):setTimeout(n,0)},cancelAnimationFrame(n){typeof setTimeout>"u"||clearTimeout(n)}};function gs(){const n=typeof window<"u"?window:{};return af(n,YR),n}function si(n){return n===void 0&&(n=""),n.trim().split(" ").filter(e=>!!e.trim())}function qR(n){const e=n;Object.keys(e).forEach(t=>{try{e[t]=null}catch{}try{delete e[t]}catch{}})}function El(n,e){return e===void 0&&(e=0),setTimeout(n,e)}function Tl(){return Date.now()}function XR(n){const e=gs();let t;return e.getComputedStyle&&(t=e.getComputedStyle(n,null)),!t&&n.currentStyle&&(t=n.currentStyle),t||(t=n.style),t}function QR(n,e){e===void 0&&(e="x");const t=gs();let s,i,r;const a=XR(n);return t.WebKitCSSMatrix?(i=a.transform||a.webkitTransform,i.split(",").length>6&&(i=i.split(", ").map(o=>o.replace(",",".")).join(", ")),r=new t.WebKitCSSMatrix(i==="none"?"":i)):(r=a.MozTransform||a.OTransform||a.MsTransform||a.msTransform||a.transform||a.getPropertyValue("transform").replace("translate(","matrix(1, 0, 0, 1,"),s=r.toString().split(",")),e==="x"&&(t.WebKitCSSMatrix?i=r.m41:s.length===16?i=parseFloat(s[12]):i=parseFloat(s[4])),e==="y"&&(t.WebKitCSSMatrix?i=r.m42:s.length===16?i=parseFloat(s[13]):i=parseFloat(s[5])),i||0}function So(n){return typeof n=="object"&&n!==null&&n.constructor&&Object.prototype.toString.call(n).slice(8,-1)==="Object"}function JR(n){return typeof window<"u"&&typeof window.HTMLElement<"u"?n instanceof HTMLElement:n&&(n.nodeType===1||n.nodeType===11)}function xs(){const n=Object(arguments.length<=0?void 0:arguments[0]),e=["__proto__","constructor","prototype"];for(let t=1;t<arguments.length;t+=1){const s=t<0||arguments.length<=t?void 0:arguments[t];if(s!=null&&!JR(s)){const i=Object.keys(Object(s)).filter(r=>e.indexOf(r)<0);for(let r=0,a=i.length;r<a;r+=1){const o=i[r],l=Object.getOwnPropertyDescriptor(s,o);l!==void 0&&l.enumerable&&(So(n[o])&&So(s[o])?s[o].__swiper__?n[o]=s[o]:xs(n[o],s[o]):!So(n[o])&&So(s[o])?(n[o]={},s[o].__swiper__?n[o]=s[o]:xs(n[o],s[o])):n[o]=s[o])}}}return n}function _o(n,e,t){n.style.setProperty(e,t)}function zv(n){let{swiper:e,targetPosition:t,side:s}=n;const i=gs(),r=-e.translate;let a=null,o;const l=e.params.speed;e.wrapperEl.style.scrollSnapType="none",i.cancelAnimationFrame(e.cssModeFrameID);const c=t>r?"next":"prev",u=(h,f)=>c==="next"&&h>=f||c==="prev"&&h<=f,d=()=>{o=new Date().getTime(),a===null&&(a=o);const h=Math.max(Math.min((o-a)/l,1),0),f=.5-Math.cos(h*Math.PI)/2;let p=r+f*(t-r);if(u(p,t)&&(p=t),e.wrapperEl.scrollTo({[s]:p}),u(p,t)){e.wrapperEl.style.overflow="hidden",e.wrapperEl.style.scrollSnapType="",setTimeout(()=>{e.wrapperEl.style.overflow="",e.wrapperEl.scrollTo({[s]:p})}),i.cancelAnimationFrame(e.cssModeFrameID);return}e.cssModeFrameID=i.requestAnimationFrame(d)};d()}function fn(n,e){return e===void 0&&(e=""),[...n.children].filter(t=>t.matches(e))}function bl(n){try{console.warn(n);return}catch{}}function Ka(n,e){e===void 0&&(e=[]);const t=document.createElement(n);return t.classList.add(...Array.isArray(e)?e:si(e)),t}function ZR(n){const e=gs(),t=Xs(),s=n.getBoundingClientRect(),i=t.body,r=n.clientTop||i.clientTop||0,a=n.clientLeft||i.clientLeft||0,o=n===e?e.scrollY:n.scrollTop,l=n===e?e.scrollX:n.scrollLeft;return{top:s.top+o-r,left:s.left+l-a}}function eI(n,e){const t=[];for(;n.previousElementSibling;){const s=n.previousElementSibling;e?s.matches(e)&&t.push(s):t.push(s),n=s}return t}function tI(n,e){const t=[];for(;n.nextElementSibling;){const s=n.nextElementSibling;e?s.matches(e)&&t.push(s):t.push(s),n=s}return t}function ui(n,e){return gs().getComputedStyle(n,null).getPropertyValue(e)}function xl(n){let e=n,t;if(e){for(t=0;(e=e.previousSibling)!==null;)e.nodeType===1&&(t+=1);return t}}function Yv(n,e){const t=[];let s=n.parentElement;for(;s;)e?s.matches(e)&&t.push(s):t.push(s),s=s.parentElement;return t}function Cd(n,e,t){const s=gs();return t?n[e==="width"?"offsetWidth":"offsetHeight"]+parseFloat(s.getComputedStyle(n,null).getPropertyValue(e==="width"?"margin-right":"margin-top"))+parseFloat(s.getComputedStyle(n,null).getPropertyValue(e==="width"?"margin-left":"margin-bottom")):n.offsetWidth}function Dt(n){return(Array.isArray(n)?n:[n]).filter(e=>!!e)}let Vc;function sI(){const n=gs(),e=Xs();return{smoothScroll:e.documentElement&&e.documentElement.style&&"scrollBehavior"in e.documentElement.style,touch:!!("ontouchstart"in n||n.DocumentTouch&&e instanceof n.DocumentTouch)}}function qv(){return Vc||(Vc=sI()),Vc}let Hc;function nI(n){let{userAgent:e}=n===void 0?{}:n;const t=qv(),s=gs(),i=s.navigator.platform,r=e||s.navigator.userAgent,a={ios:!1,android:!1},o=s.screen.width,l=s.screen.height,c=r.match(/(Android);?[\s\/]+([\d.]+)?/);let u=r.match(/(iPad).*OS\s([\d_]+)/);const d=r.match(/(iPod)(.*OS\s([\d_]+))?/),h=!u&&r.match(/(iPhone\sOS|iOS)\s([\d_]+)/),f=i==="Win32";let p=i==="MacIntel";const m=["1024x1366","1366x1024","834x1194","1194x834","834x1112","1112x834","768x1024","1024x768","820x1180","1180x820","810x1080","1080x810"];return!u&&p&&t.touch&&m.indexOf(`${o}x${l}`)>=0&&(u=r.match(/(Version)\/([\d.]+)/),u||(u=[0,1,"13_0_0"]),p=!1),c&&!f&&(a.os="android",a.android=!0),(u||h||d)&&(a.os="ios",a.ios=!0),a}function Xv(n){return n===void 0&&(n={}),Hc||(Hc=nI(n)),Hc}let Kc;function iI(){const n=gs(),e=Xv();let t=!1;function s(){const o=n.navigator.userAgent.toLowerCase();return o.indexOf("safari")>=0&&o.indexOf("chrome")<0&&o.indexOf("android")<0}if(s()){const o=String(n.navigator.userAgent);if(o.includes("Version/")){const[l,c]=o.split("Version/")[1].split(" ")[0].split(".").map(u=>Number(u));t=l<16||l===16&&c<2}}const i=/(iPhone|iPod|iPad).*AppleWebKit(?!.*Safari)/i.test(n.navigator.userAgent),r=s(),a=r||i&&e.ios;return{isSafari:t||r,needPerspectiveFix:t,need3dFix:a,isWebView:i}}function rI(){return Kc||(Kc=iI()),Kc}function aI(n){let{swiper:e,on:t,emit:s}=n;const i=gs();let r=null,a=null;const o=()=>{!e||e.destroyed||!e.initialized||(s("beforeResize"),s("resize"))},l=()=>{!e||e.destroyed||!e.initialized||(r=new ResizeObserver(d=>{a=i.requestAnimationFrame(()=>{const{width:h,height:f}=e;let p=h,m=f;d.forEach(y=>{let{contentBoxSize:g,contentRect:v,target:E}=y;E&&E!==e.el||(p=v?v.width:(g[0]||g).inlineSize,m=v?v.height:(g[0]||g).blockSize)}),(p!==h||m!==f)&&o()})}),r.observe(e.el))},c=()=>{a&&i.cancelAnimationFrame(a),r&&r.unobserve&&e.el&&(r.unobserve(e.el),r=null)},u=()=>{!e||e.destroyed||!e.initialized||s("orientationchange")};t("init",()=>{if(e.params.resizeObserver&&typeof i.ResizeObserver<"u"){l();return}i.addEventListener("resize",o),i.addEventListener("orientationchange",u)}),t("destroy",()=>{c(),i.removeEventListener("resize",o),i.removeEventListener("orientationchange",u)})}function oI(n){let{swiper:e,extendParams:t,on:s,emit:i}=n;const r=[],a=gs(),o=function(u,d){d===void 0&&(d={});const h=a.MutationObserver||a.WebkitMutationObserver,f=new h(p=>{if(e.__preventObserver__)return;if(p.length===1){i("observerUpdate",p[0]);return}const m=function(){i("observerUpdate",p[0])};a.requestAnimationFrame?a.requestAnimationFrame(m):a.setTimeout(m,0)});f.observe(u,{attributes:typeof d.attributes>"u"?!0:d.attributes,childList:typeof d.childList>"u"?!0:d.childList,characterData:typeof d.characterData>"u"?!0:d.characterData}),r.push(f)},l=()=>{if(e.params.observer){if(e.params.observeParents){const u=Yv(e.hostEl);for(let d=0;d<u.length;d+=1)o(u[d])}o(e.hostEl,{childList:e.params.observeSlideChildren}),o(e.wrapperEl,{attributes:!1})}},c=()=>{r.forEach(u=>{u.disconnect()}),r.splice(0,r.length)};t({observer:!1,observeParents:!1,observeSlideChildren:!1}),s("init",l),s("destroy",c)}var lI={on(n,e,t){const s=this;if(!s.eventsListeners||s.destroyed||typeof e!="function")return s;const i=t?"unshift":"push";return n.split(" ").forEach(r=>{s.eventsListeners[r]||(s.eventsListeners[r]=[]),s.eventsListeners[r][i](e)}),s},once(n,e,t){const s=this;if(!s.eventsListeners||s.destroyed||typeof e!="function")return s;function i(){s.off(n,i),i.__emitterProxy&&delete i.__emitterProxy;for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];e.apply(s,a)}return i.__emitterProxy=e,s.on(n,i,t)},onAny(n,e){const t=this;if(!t.eventsListeners||t.destroyed||typeof n!="function")return t;const s=e?"unshift":"push";return t.eventsAnyListeners.indexOf(n)<0&&t.eventsAnyListeners[s](n),t},offAny(n){const e=this;if(!e.eventsListeners||e.destroyed||!e.eventsAnyListeners)return e;const t=e.eventsAnyListeners.indexOf(n);return t>=0&&e.eventsAnyListeners.splice(t,1),e},off(n,e){const t=this;return!t.eventsListeners||t.destroyed||!t.eventsListeners||n.split(" ").forEach(s=>{typeof e>"u"?t.eventsListeners[s]=[]:t.eventsListeners[s]&&t.eventsListeners[s].forEach((i,r)=>{(i===e||i.__emitterProxy&&i.__emitterProxy===e)&&t.eventsListeners[s].splice(r,1)})}),t},emit(){const n=this;if(!n.eventsListeners||n.destroyed||!n.eventsListeners)return n;let e,t,s;for(var i=arguments.length,r=new Array(i),a=0;a<i;a++)r[a]=arguments[a];return typeof r[0]=="string"||Array.isArray(r[0])?(e=r[0],t=r.slice(1,r.length),s=n):(e=r[0].events,t=r[0].data,s=r[0].context||n),t.unshift(s),(Array.isArray(e)?e:e.split(" ")).forEach(l=>{n.eventsAnyListeners&&n.eventsAnyListeners.length&&n.eventsAnyListeners.forEach(c=>{c.apply(s,[l,...t])}),n.eventsListeners&&n.eventsListeners[l]&&n.eventsListeners[l].forEach(c=>{c.apply(s,t)})}),n}};function cI(){const n=this;let e,t;const s=n.el;typeof n.params.width<"u"&&n.params.width!==null?e=n.params.width:e=s.clientWidth,typeof n.params.height<"u"&&n.params.height!==null?t=n.params.height:t=s.clientHeight,!(e===0&&n.isHorizontal()||t===0&&n.isVertical())&&(e=e-parseInt(ui(s,"padding-left")||0,10)-parseInt(ui(s,"padding-right")||0,10),t=t-parseInt(ui(s,"padding-top")||0,10)-parseInt(ui(s,"padding-bottom")||0,10),Number.isNaN(e)&&(e=0),Number.isNaN(t)&&(t=0),Object.assign(n,{width:e,height:t,size:n.isHorizontal()?e:t}))}function uI(){const n=this;function e(R,P){return parseFloat(R.getPropertyValue(n.getDirectionLabel(P))||0)}const t=n.params,{wrapperEl:s,slidesEl:i,size:r,rtlTranslate:a,wrongRTL:o}=n,l=n.virtual&&t.virtual.enabled,c=l?n.virtual.slides.length:n.slides.length,u=fn(i,`.${n.params.slideClass}, swiper-slide`),d=l?n.virtual.slides.length:u.length;let h=[];const f=[],p=[];let m=t.slidesOffsetBefore;typeof m=="function"&&(m=t.slidesOffsetBefore.call(n));let y=t.slidesOffsetAfter;typeof y=="function"&&(y=t.slidesOffsetAfter.call(n));const g=n.snapGrid.length,v=n.slidesGrid.length;let E=t.spaceBetween,T=-m,b=0,L=0;if(typeof r>"u")return;typeof E=="string"&&E.indexOf("%")>=0?E=parseFloat(E.replace("%",""))/100*r:typeof E=="string"&&(E=parseFloat(E)),n.virtualSize=-E,u.forEach(R=>{a?R.style.marginLeft="":R.style.marginRight="",R.style.marginBottom="",R.style.marginTop=""}),t.centeredSlides&&t.cssMode&&(_o(s,"--swiper-centered-offset-before",""),_o(s,"--swiper-centered-offset-after",""));const x=t.grid&&t.grid.rows>1&&n.grid;x?n.grid.initSlides(u):n.grid&&n.grid.unsetSlides();let w;const k=t.slidesPerView==="auto"&&t.breakpoints&&Object.keys(t.breakpoints).filter(R=>typeof t.breakpoints[R].slidesPerView<"u").length>0;for(let R=0;R<d;R+=1){w=0;let P;if(u[R]&&(P=u[R]),x&&n.grid.updateSlide(R,P,u),!(u[R]&&ui(P,"display")==="none")){if(t.slidesPerView==="auto"){k&&(u[R].style[n.getDirectionLabel("width")]="");const D=getComputedStyle(P),O=P.style.transform,N=P.style.webkitTransform;if(O&&(P.style.transform="none"),N&&(P.style.webkitTransform="none"),t.roundLengths)w=n.isHorizontal()?Cd(P,"width",!0):Cd(P,"height",!0);else{const $=e(D,"width"),K=e(D,"padding-left"),ee=e(D,"padding-right"),V=e(D,"margin-left"),U=e(D,"margin-right"),B=D.getPropertyValue("box-sizing");if(B&&B==="border-box")w=$+V+U;else{const{clientWidth:j,offsetWidth:Y}=P;w=$+K+ee+V+U+(Y-j)}}O&&(P.style.transform=O),N&&(P.style.webkitTransform=N),t.roundLengths&&(w=Math.floor(w))}else w=(r-(t.slidesPerView-1)*E)/t.slidesPerView,t.roundLengths&&(w=Math.floor(w)),u[R]&&(u[R].style[n.getDirectionLabel("width")]=`${w}px`);u[R]&&(u[R].swiperSlideSize=w),p.push(w),t.centeredSlides?(T=T+w/2+b/2+E,b===0&&R!==0&&(T=T-r/2-E),R===0&&(T=T-r/2-E),Math.abs(T)<1/1e3&&(T=0),t.roundLengths&&(T=Math.floor(T)),L%t.slidesPerGroup===0&&h.push(T),f.push(T)):(t.roundLengths&&(T=Math.floor(T)),(L-Math.min(n.params.slidesPerGroupSkip,L))%n.params.slidesPerGroup===0&&h.push(T),f.push(T),T=T+w+E),n.virtualSize+=w+E,b=w,L+=1}}if(n.virtualSize=Math.max(n.virtualSize,r)+y,a&&o&&(t.effect==="slide"||t.effect==="coverflow")&&(s.style.width=`${n.virtualSize+E}px`),t.setWrapperSize&&(s.style[n.getDirectionLabel("width")]=`${n.virtualSize+E}px`),x&&n.grid.updateWrapperSize(w,h),!t.centeredSlides){const R=[];for(let P=0;P<h.length;P+=1){let D=h[P];t.roundLengths&&(D=Math.floor(D)),h[P]<=n.virtualSize-r&&R.push(D)}h=R,Math.floor(n.virtualSize-r)-Math.floor(h[h.length-1])>1&&h.push(n.virtualSize-r)}if(l&&t.loop){const R=p[0]+E;if(t.slidesPerGroup>1){const P=Math.ceil((n.virtual.slidesBefore+n.virtual.slidesAfter)/t.slidesPerGroup),D=R*t.slidesPerGroup;for(let O=0;O<P;O+=1)h.push(h[h.length-1]+D)}for(let P=0;P<n.virtual.slidesBefore+n.virtual.slidesAfter;P+=1)t.slidesPerGroup===1&&h.push(h[h.length-1]+R),f.push(f[f.length-1]+R),n.virtualSize+=R}if(h.length===0&&(h=[0]),E!==0){const R=n.isHorizontal()&&a?"marginLeft":n.getDirectionLabel("marginRight");u.filter((P,D)=>!t.cssMode||t.loop?!0:D!==u.length-1).forEach(P=>{P.style[R]=`${E}px`})}if(t.centeredSlides&&t.centeredSlidesBounds){let R=0;p.forEach(D=>{R+=D+(E||0)}),R-=E;const P=R-r;h=h.map(D=>D<=0?-m:D>P?P+y:D)}if(t.centerInsufficientSlides){let R=0;if(p.forEach(P=>{R+=P+(E||0)}),R-=E,R<r){const P=(r-R)/2;h.forEach((D,O)=>{h[O]=D-P}),f.forEach((D,O)=>{f[O]=D+P})}}if(Object.assign(n,{slides:u,snapGrid:h,slidesGrid:f,slidesSizesGrid:p}),t.centeredSlides&&t.cssMode&&!t.centeredSlidesBounds){_o(s,"--swiper-centered-offset-before",`${-h[0]}px`),_o(s,"--swiper-centered-offset-after",`${n.size/2-p[p.length-1]/2}px`);const R=-n.snapGrid[0],P=-n.slidesGrid[0];n.snapGrid=n.snapGrid.map(D=>D+R),n.slidesGrid=n.slidesGrid.map(D=>D+P)}if(d!==c&&n.emit("slidesLengthChange"),h.length!==g&&(n.params.watchOverflow&&n.checkOverflow(),n.emit("snapGridLengthChange")),f.length!==v&&n.emit("slidesGridLengthChange"),t.watchSlidesProgress&&n.updateSlidesOffset(),n.emit("slidesUpdated"),!l&&!t.cssMode&&(t.effect==="slide"||t.effect==="fade")){const R=`${t.containerModifierClass}backface-hidden`,P=n.el.classList.contains(R);d<=t.maxBackfaceHiddenSlides?P||n.el.classList.add(R):P&&n.el.classList.remove(R)}}function dI(n){const e=this,t=[],s=e.virtual&&e.params.virtual.enabled;let i=0,r;typeof n=="number"?e.setTransition(n):n===!0&&e.setTransition(e.params.speed);const a=o=>s?e.slides[e.getSlideIndexByData(o)]:e.slides[o];if(e.params.slidesPerView!=="auto"&&e.params.slidesPerView>1)if(e.params.centeredSlides)(e.visibleSlides||[]).forEach(o=>{t.push(o)});else for(r=0;r<Math.ceil(e.params.slidesPerView);r+=1){const o=e.activeIndex+r;if(o>e.slides.length&&!s)break;t.push(a(o))}else t.push(a(e.activeIndex));for(r=0;r<t.length;r+=1)if(typeof t[r]<"u"){const o=t[r].offsetHeight;i=o>i?o:i}(i||i===0)&&(e.wrapperEl.style.height=`${i}px`)}function hI(){const n=this,e=n.slides,t=n.isElement?n.isHorizontal()?n.wrapperEl.offsetLeft:n.wrapperEl.offsetTop:0;for(let s=0;s<e.length;s+=1)e[s].swiperSlideOffset=(n.isHorizontal()?e[s].offsetLeft:e[s].offsetTop)-t-n.cssOverflowAdjustment()}function fI(n){n===void 0&&(n=this&&this.translate||0);const e=this,t=e.params,{slides:s,rtlTranslate:i,snapGrid:r}=e;if(s.length===0)return;typeof s[0].swiperSlideOffset>"u"&&e.updateSlidesOffset();let a=-n;i&&(a=n),s.forEach(l=>{l.classList.remove(t.slideVisibleClass,t.slideFullyVisibleClass)}),e.visibleSlidesIndexes=[],e.visibleSlides=[];let o=t.spaceBetween;typeof o=="string"&&o.indexOf("%")>=0?o=parseFloat(o.replace("%",""))/100*e.size:typeof o=="string"&&(o=parseFloat(o));for(let l=0;l<s.length;l+=1){const c=s[l];let u=c.swiperSlideOffset;t.cssMode&&t.centeredSlides&&(u-=s[0].swiperSlideOffset);const d=(a+(t.centeredSlides?e.minTranslate():0)-u)/(c.swiperSlideSize+o),h=(a-r[0]+(t.centeredSlides?e.minTranslate():0)-u)/(c.swiperSlideSize+o),f=-(a-u),p=f+e.slidesSizesGrid[l],m=f>=0&&f<=e.size-e.slidesSizesGrid[l];(f>=0&&f<e.size-1||p>1&&p<=e.size||f<=0&&p>=e.size)&&(e.visibleSlides.push(c),e.visibleSlidesIndexes.push(l),s[l].classList.add(t.slideVisibleClass)),m&&s[l].classList.add(t.slideFullyVisibleClass),c.progress=i?-d:d,c.originalProgress=i?-h:h}}function pI(n){const e=this;if(typeof n>"u"){const u=e.rtlTranslate?-1:1;n=e&&e.translate&&e.translate*u||0}const t=e.params,s=e.maxTranslate()-e.minTranslate();let{progress:i,isBeginning:r,isEnd:a,progressLoop:o}=e;const l=r,c=a;if(s===0)i=0,r=!0,a=!0;else{i=(n-e.minTranslate())/s;const u=Math.abs(n-e.minTranslate())<1,d=Math.abs(n-e.maxTranslate())<1;r=u||i<=0,a=d||i>=1,u&&(i=0),d&&(i=1)}if(t.loop){const u=e.getSlideIndexByData(0),d=e.getSlideIndexByData(e.slides.length-1),h=e.slidesGrid[u],f=e.slidesGrid[d],p=e.slidesGrid[e.slidesGrid.length-1],m=Math.abs(n);m>=h?o=(m-h)/p:o=(m+p-f)/p,o>1&&(o-=1)}Object.assign(e,{progress:i,progressLoop:o,isBeginning:r,isEnd:a}),(t.watchSlidesProgress||t.centeredSlides&&t.autoHeight)&&e.updateSlidesProgress(n),r&&!l&&e.emit("reachBeginning toEdge"),a&&!c&&e.emit("reachEnd toEdge"),(l&&!r||c&&!a)&&e.emit("fromEdge"),e.emit("progress",i)}function mI(){const n=this,{slides:e,params:t,slidesEl:s,activeIndex:i}=n,r=n.virtual&&t.virtual.enabled,a=n.grid&&t.grid&&t.grid.rows>1,o=d=>fn(s,`.${t.slideClass}${d}, swiper-slide${d}`)[0];e.forEach(d=>{d.classList.remove(t.slideActiveClass,t.slideNextClass,t.slidePrevClass)});let l,c,u;if(r)if(t.loop){let d=i-n.virtual.slidesBefore;d<0&&(d=n.virtual.slides.length+d),d>=n.virtual.slides.length&&(d-=n.virtual.slides.length),l=o(`[data-swiper-slide-index="${d}"]`)}else l=o(`[data-swiper-slide-index="${i}"]`);else a?(l=e.filter(d=>d.column===i)[0],u=e.filter(d=>d.column===i+1)[0],c=e.filter(d=>d.column===i-1)[0]):l=e[i];l&&(l.classList.add(t.slideActiveClass),a?(u&&u.classList.add(t.slideNextClass),c&&c.classList.add(t.slidePrevClass)):(u=tI(l,`.${t.slideClass}, swiper-slide`)[0],t.loop&&!u&&(u=e[0]),u&&u.classList.add(t.slideNextClass),c=eI(l,`.${t.slideClass}, swiper-slide`)[0],t.loop&&!c===0&&(c=e[e.length-1]),c&&c.classList.add(t.slidePrevClass))),n.emitSlidesClasses()}const Qo=(n,e)=>{if(!n||n.destroyed||!n.params)return;const t=()=>n.isElement?"swiper-slide":`.${n.params.slideClass}`,s=e.closest(t());if(s){let i=s.querySelector(`.${n.params.lazyPreloaderClass}`);!i&&n.isElement&&(s.shadowRoot?i=s.shadowRoot.querySelector(`.${n.params.lazyPreloaderClass}`):requestAnimationFrame(()=>{s.shadowRoot&&(i=s.shadowRoot.querySelector(`.${n.params.lazyPreloaderClass}`),i&&i.remove())})),i&&i.remove()}},Wc=(n,e)=>{if(!n.slides[e])return;const t=n.slides[e].querySelector('[loading="lazy"]');t&&t.removeAttribute("loading")},Dd=n=>{if(!n||n.destroyed||!n.params)return;let e=n.params.lazyPreloadPrevNext;const t=n.slides.length;if(!t||!e||e<0)return;e=Math.min(e,t);const s=n.params.slidesPerView==="auto"?n.slidesPerViewDynamic():Math.ceil(n.params.slidesPerView),i=n.activeIndex;if(n.params.grid&&n.params.grid.rows>1){const a=i,o=[a-e];o.push(...Array.from({length:e}).map((l,c)=>a+s+c)),n.slides.forEach((l,c)=>{o.includes(l.column)&&Wc(n,c)});return}const r=i+s-1;if(n.params.rewind||n.params.loop)for(let a=i-e;a<=r+e;a+=1){const o=(a%t+t)%t;(o<i||o>r)&&Wc(n,o)}else for(let a=Math.max(i-e,0);a<=Math.min(r+e,t-1);a+=1)a!==i&&(a>r||a<i)&&Wc(n,a)};function gI(n){const{slidesGrid:e,params:t}=n,s=n.rtlTranslate?n.translate:-n.translate;let i;for(let r=0;r<e.length;r+=1)typeof e[r+1]<"u"?s>=e[r]&&s<e[r+1]-(e[r+1]-e[r])/2?i=r:s>=e[r]&&s<e[r+1]&&(i=r+1):s>=e[r]&&(i=r);return t.normalizeSlideIndex&&(i<0||typeof i>"u")&&(i=0),i}function yI(n){const e=this,t=e.rtlTranslate?e.translate:-e.translate,{snapGrid:s,params:i,activeIndex:r,realIndex:a,snapIndex:o}=e;let l=n,c;const u=f=>{let p=f-e.virtual.slidesBefore;return p<0&&(p=e.virtual.slides.length+p),p>=e.virtual.slides.length&&(p-=e.virtual.slides.length),p};if(typeof l>"u"&&(l=gI(e)),s.indexOf(t)>=0)c=s.indexOf(t);else{const f=Math.min(i.slidesPerGroupSkip,l);c=f+Math.floor((l-f)/i.slidesPerGroup)}if(c>=s.length&&(c=s.length-1),l===r&&!e.params.loop){c!==o&&(e.snapIndex=c,e.emit("snapIndexChange"));return}if(l===r&&e.params.loop&&e.virtual&&e.params.virtual.enabled){e.realIndex=u(l);return}const d=e.grid&&i.grid&&i.grid.rows>1;let h;if(e.virtual&&i.virtual.enabled&&i.loop)h=u(l);else if(d){const f=e.slides.filter(m=>m.column===l)[0];let p=parseInt(f.getAttribute("data-swiper-slide-index"),10);Number.isNaN(p)&&(p=Math.max(e.slides.indexOf(f),0)),h=Math.floor(p/i.grid.rows)}else if(e.slides[l]){const f=e.slides[l].getAttribute("data-swiper-slide-index");f?h=parseInt(f,10):h=l}else h=l;Object.assign(e,{previousSnapIndex:o,snapIndex:c,previousRealIndex:a,realIndex:h,previousIndex:r,activeIndex:l}),e.initialized&&Dd(e),e.emit("activeIndexChange"),e.emit("snapIndexChange"),(e.initialized||e.params.runCallbacksOnInit)&&(a!==h&&e.emit("realIndexChange"),e.emit("slideChange"))}function vI(n,e){const t=this,s=t.params;let i=n.closest(`.${s.slideClass}, swiper-slide`);!i&&t.isElement&&e&&e.length>1&&e.includes(n)&&[...e.slice(e.indexOf(n)+1,e.length)].forEach(o=>{!i&&o.matches&&o.matches(`.${s.slideClass}, swiper-slide`)&&(i=o)});let r=!1,a;if(i){for(let o=0;o<t.slides.length;o+=1)if(t.slides[o]===i){r=!0,a=o;break}}if(i&&r)t.clickedSlide=i,t.virtual&&t.params.virtual.enabled?t.clickedIndex=parseInt(i.getAttribute("data-swiper-slide-index"),10):t.clickedIndex=a;else{t.clickedSlide=void 0,t.clickedIndex=void 0;return}s.slideToClickedSlide&&t.clickedIndex!==void 0&&t.clickedIndex!==t.activeIndex&&t.slideToClickedSlide()}var EI={updateSize:cI,updateSlides:uI,updateAutoHeight:dI,updateSlidesOffset:hI,updateSlidesProgress:fI,updateProgress:pI,updateSlidesClasses:mI,updateActiveIndex:yI,updateClickedSlide:vI};function TI(n){n===void 0&&(n=this.isHorizontal()?"x":"y");const e=this,{params:t,rtlTranslate:s,translate:i,wrapperEl:r}=e;if(t.virtualTranslate)return s?-i:i;if(t.cssMode)return i;let a=QR(r,n);return a+=e.cssOverflowAdjustment(),s&&(a=-a),a||0}function bI(n,e){const t=this,{rtlTranslate:s,params:i,wrapperEl:r,progress:a}=t;let o=0,l=0;const c=0;t.isHorizontal()?o=s?-n:n:l=n,i.roundLengths&&(o=Math.floor(o),l=Math.floor(l)),t.previousTranslate=t.translate,t.translate=t.isHorizontal()?o:l,i.cssMode?r[t.isHorizontal()?"scrollLeft":"scrollTop"]=t.isHorizontal()?-o:-l:i.virtualTranslate||(t.isHorizontal()?o-=t.cssOverflowAdjustment():l-=t.cssOverflowAdjustment(),r.style.transform=`translate3d(${o}px, ${l}px, ${c}px)`);let u;const d=t.maxTranslate()-t.minTranslate();d===0?u=0:u=(n-t.minTranslate())/d,u!==a&&t.updateProgress(n),t.emit("setTranslate",t.translate,e)}function xI(){return-this.snapGrid[0]}function SI(){return-this.snapGrid[this.snapGrid.length-1]}function _I(n,e,t,s,i){n===void 0&&(n=0),e===void 0&&(e=this.params.speed),t===void 0&&(t=!0),s===void 0&&(s=!0);const r=this,{params:a,wrapperEl:o}=r;if(r.animating&&a.preventInteractionOnTransition)return!1;const l=r.minTranslate(),c=r.maxTranslate();let u;if(s&&n>l?u=l:s&&n<c?u=c:u=n,r.updateProgress(u),a.cssMode){const d=r.isHorizontal();if(e===0)o[d?"scrollLeft":"scrollTop"]=-u;else{if(!r.support.smoothScroll)return zv({swiper:r,targetPosition:-u,side:d?"left":"top"}),!0;o.scrollTo({[d?"left":"top"]:-u,behavior:"smooth"})}return!0}return e===0?(r.setTransition(0),r.setTranslate(u),t&&(r.emit("beforeTransitionStart",e,i),r.emit("transitionEnd"))):(r.setTransition(e),r.setTranslate(u),t&&(r.emit("beforeTransitionStart",e,i),r.emit("transitionStart")),r.animating||(r.animating=!0,r.onTranslateToWrapperTransitionEnd||(r.onTranslateToWrapperTransitionEnd=function(h){!r||r.destroyed||h.target===this&&(r.wrapperEl.removeEventListener("transitionend",r.onTranslateToWrapperTransitionEnd),r.onTranslateToWrapperTransitionEnd=null,delete r.onTranslateToWrapperTransitionEnd,t&&r.emit("transitionEnd"))}),r.wrapperEl.addEventListener("transitionend",r.onTranslateToWrapperTransitionEnd))),!0}var AI={getTranslate:TI,setTranslate:bI,minTranslate:xI,maxTranslate:SI,translateTo:_I};function LI(n,e){const t=this;t.params.cssMode||(t.wrapperEl.style.transitionDuration=`${n}ms`,t.wrapperEl.style.transitionDelay=n===0?"0ms":""),t.emit("setTransition",n,e)}function Qv(n){let{swiper:e,runCallbacks:t,direction:s,step:i}=n;const{activeIndex:r,previousIndex:a}=e;let o=s;if(o||(r>a?o="next":r<a?o="prev":o="reset"),e.emit(`transition${i}`),t&&r!==a){if(o==="reset"){e.emit(`slideResetTransition${i}`);return}e.emit(`slideChangeTransition${i}`),o==="next"?e.emit(`slideNextTransition${i}`):e.emit(`slidePrevTransition${i}`)}}function wI(n,e){n===void 0&&(n=!0);const t=this,{params:s}=t;s.cssMode||(s.autoHeight&&t.updateAutoHeight(),Qv({swiper:t,runCallbacks:n,direction:e,step:"Start"}))}function RI(n,e){n===void 0&&(n=!0);const t=this,{params:s}=t;t.animating=!1,!s.cssMode&&(t.setTransition(0),Qv({swiper:t,runCallbacks:n,direction:e,step:"End"}))}var II={setTransition:LI,transitionStart:wI,transitionEnd:RI};function CI(n,e,t,s,i){n===void 0&&(n=0),e===void 0&&(e=this.params.speed),t===void 0&&(t=!0),typeof n=="string"&&(n=parseInt(n,10));const r=this;let a=n;a<0&&(a=0);const{params:o,snapGrid:l,slidesGrid:c,previousIndex:u,activeIndex:d,rtlTranslate:h,wrapperEl:f,enabled:p}=r;if(r.animating&&o.preventInteractionOnTransition||!p&&!s&&!i||r.destroyed)return!1;const m=Math.min(r.params.slidesPerGroupSkip,a);let y=m+Math.floor((a-m)/r.params.slidesPerGroup);y>=l.length&&(y=l.length-1);const g=-l[y];if(o.normalizeSlideIndex)for(let E=0;E<c.length;E+=1){const T=-Math.floor(g*100),b=Math.floor(c[E]*100),L=Math.floor(c[E+1]*100);typeof c[E+1]<"u"?T>=b&&T<L-(L-b)/2?a=E:T>=b&&T<L&&(a=E+1):T>=b&&(a=E)}if(r.initialized&&a!==d&&(!r.allowSlideNext&&(h?g>r.translate&&g>r.minTranslate():g<r.translate&&g<r.minTranslate())||!r.allowSlidePrev&&g>r.translate&&g>r.maxTranslate()&&(d||0)!==a))return!1;a!==(u||0)&&t&&r.emit("beforeSlideChangeStart"),r.updateProgress(g);let v;if(a>d?v="next":a<d?v="prev":v="reset",h&&-g===r.translate||!h&&g===r.translate)return r.updateActiveIndex(a),o.autoHeight&&r.updateAutoHeight(),r.updateSlidesClasses(),o.effect!=="slide"&&r.setTranslate(g),v!=="reset"&&(r.transitionStart(t,v),r.transitionEnd(t,v)),!1;if(o.cssMode){const E=r.isHorizontal(),T=h?g:-g;if(e===0){const b=r.virtual&&r.params.virtual.enabled;b&&(r.wrapperEl.style.scrollSnapType="none",r._immediateVirtual=!0),b&&!r._cssModeVirtualInitialSet&&r.params.initialSlide>0?(r._cssModeVirtualInitialSet=!0,requestAnimationFrame(()=>{f[E?"scrollLeft":"scrollTop"]=T})):f[E?"scrollLeft":"scrollTop"]=T,b&&requestAnimationFrame(()=>{r.wrapperEl.style.scrollSnapType="",r._immediateVirtual=!1})}else{if(!r.support.smoothScroll)return zv({swiper:r,targetPosition:T,side:E?"left":"top"}),!0;f.scrollTo({[E?"left":"top"]:T,behavior:"smooth"})}return!0}return r.setTransition(e),r.setTranslate(g),r.updateActiveIndex(a),r.updateSlidesClasses(),r.emit("beforeTransitionStart",e,s),r.transitionStart(t,v),e===0?r.transitionEnd(t,v):r.animating||(r.animating=!0,r.onSlideToWrapperTransitionEnd||(r.onSlideToWrapperTransitionEnd=function(T){!r||r.destroyed||T.target===this&&(r.wrapperEl.removeEventListener("transitionend",r.onSlideToWrapperTransitionEnd),r.onSlideToWrapperTransitionEnd=null,delete r.onSlideToWrapperTransitionEnd,r.transitionEnd(t,v))}),r.wrapperEl.addEventListener("transitionend",r.onSlideToWrapperTransitionEnd)),!0}function DI(n,e,t,s){n===void 0&&(n=0),e===void 0&&(e=this.params.speed),t===void 0&&(t=!0),typeof n=="string"&&(n=parseInt(n,10));const i=this;if(i.destroyed)return;const r=i.grid&&i.params.grid&&i.params.grid.rows>1;let a=n;if(i.params.loop)if(i.virtual&&i.params.virtual.enabled)a=a+i.virtual.slidesBefore;else{let o;if(r){const h=a*i.params.grid.rows;o=i.slides.filter(f=>f.getAttribute("data-swiper-slide-index")*1===h)[0].column}else o=i.getSlideIndexByData(a);const l=r?Math.ceil(i.slides.length/i.params.grid.rows):i.slides.length,{centeredSlides:c}=i.params;let u=i.params.slidesPerView;u==="auto"?u=i.slidesPerViewDynamic():(u=Math.ceil(parseFloat(i.params.slidesPerView,10)),c&&u%2===0&&(u=u+1));let d=l-o<u;if(c&&(d=d||o<Math.ceil(u/2)),d){const h=c?o<i.activeIndex?"prev":"next":o-i.activeIndex-1<i.params.slidesPerView?"next":"prev";i.loopFix({direction:h,slideTo:!0,activeSlideIndex:h==="next"?o+1:o-l+1,slideRealIndex:h==="next"?i.realIndex:void 0})}if(r){const h=a*i.params.grid.rows;a=i.slides.filter(f=>f.getAttribute("data-swiper-slide-index")*1===h)[0].column}else a=i.getSlideIndexByData(a)}return requestAnimationFrame(()=>{i.slideTo(a,e,t,s)}),i}function kI(n,e,t){n===void 0&&(n=this.params.speed),e===void 0&&(e=!0);const s=this,{enabled:i,params:r,animating:a}=s;if(!i||s.destroyed)return s;let o=r.slidesPerGroup;r.slidesPerView==="auto"&&r.slidesPerGroup===1&&r.slidesPerGroupAuto&&(o=Math.max(s.slidesPerViewDynamic("current",!0),1));const l=s.activeIndex<r.slidesPerGroupSkip?1:o,c=s.virtual&&r.virtual.enabled;if(r.loop){if(a&&!c&&r.loopPreventsSliding)return!1;if(s.loopFix({direction:"next"}),s._clientLeft=s.wrapperEl.clientLeft,s.activeIndex===s.slides.length-1&&r.cssMode)return requestAnimationFrame(()=>{s.slideTo(s.activeIndex+l,n,e,t)}),!0}return r.rewind&&s.isEnd?s.slideTo(0,n,e,t):s.slideTo(s.activeIndex+l,n,e,t)}function PI(n,e,t){n===void 0&&(n=this.params.speed),e===void 0&&(e=!0);const s=this,{params:i,snapGrid:r,slidesGrid:a,rtlTranslate:o,enabled:l,animating:c}=s;if(!l||s.destroyed)return s;const u=s.virtual&&i.virtual.enabled;if(i.loop){if(c&&!u&&i.loopPreventsSliding)return!1;s.loopFix({direction:"prev"}),s._clientLeft=s.wrapperEl.clientLeft}const d=o?s.translate:-s.translate;function h(g){return g<0?-Math.floor(Math.abs(g)):Math.floor(g)}const f=h(d),p=r.map(g=>h(g));let m=r[p.indexOf(f)-1];if(typeof m>"u"&&i.cssMode){let g;r.forEach((v,E)=>{f>=v&&(g=E)}),typeof g<"u"&&(m=r[g>0?g-1:g])}let y=0;if(typeof m<"u"&&(y=a.indexOf(m),y<0&&(y=s.activeIndex-1),i.slidesPerView==="auto"&&i.slidesPerGroup===1&&i.slidesPerGroupAuto&&(y=y-s.slidesPerViewDynamic("previous",!0)+1,y=Math.max(y,0))),i.rewind&&s.isBeginning){const g=s.params.virtual&&s.params.virtual.enabled&&s.virtual?s.virtual.slides.length-1:s.slides.length-1;return s.slideTo(g,n,e,t)}else if(i.loop&&s.activeIndex===0&&i.cssMode)return requestAnimationFrame(()=>{s.slideTo(y,n,e,t)}),!0;return s.slideTo(y,n,e,t)}function OI(n,e,t){n===void 0&&(n=this.params.speed),e===void 0&&(e=!0);const s=this;if(!s.destroyed)return s.slideTo(s.activeIndex,n,e,t)}function MI(n,e,t,s){n===void 0&&(n=this.params.speed),e===void 0&&(e=!0),s===void 0&&(s=.5);const i=this;if(i.destroyed)return;let r=i.activeIndex;const a=Math.min(i.params.slidesPerGroupSkip,r),o=a+Math.floor((r-a)/i.params.slidesPerGroup),l=i.rtlTranslate?i.translate:-i.translate;if(l>=i.snapGrid[o]){const c=i.snapGrid[o],u=i.snapGrid[o+1];l-c>(u-c)*s&&(r+=i.params.slidesPerGroup)}else{const c=i.snapGrid[o-1],u=i.snapGrid[o];l-c<=(u-c)*s&&(r-=i.params.slidesPerGroup)}return r=Math.max(r,0),r=Math.min(r,i.slidesGrid.length-1),i.slideTo(r,n,e,t)}function FI(){const n=this;if(n.destroyed)return;const{params:e,slidesEl:t}=n,s=e.slidesPerView==="auto"?n.slidesPerViewDynamic():e.slidesPerView;let i=n.clickedIndex,r;const a=n.isElement?"swiper-slide":`.${e.slideClass}`;if(e.loop){if(n.animating)return;r=parseInt(n.clickedSlide.getAttribute("data-swiper-slide-index"),10),e.centeredSlides?i<n.loopedSlides-s/2||i>n.slides.length-n.loopedSlides+s/2?(n.loopFix(),i=n.getSlideIndex(fn(t,`${a}[data-swiper-slide-index="${r}"]`)[0]),El(()=>{n.slideTo(i)})):n.slideTo(i):i>n.slides.length-s?(n.loopFix(),i=n.getSlideIndex(fn(t,`${a}[data-swiper-slide-index="${r}"]`)[0]),El(()=>{n.slideTo(i)})):n.slideTo(i)}else n.slideTo(i)}var NI={slideTo:CI,slideToLoop:DI,slideNext:kI,slidePrev:PI,slideReset:OI,slideToClosest:MI,slideToClickedSlide:FI};function BI(n){const e=this,{params:t,slidesEl:s}=e;if(!t.loop||e.virtual&&e.params.virtual.enabled)return;const i=()=>{fn(s,`.${t.slideClass}, swiper-slide`).forEach((d,h)=>{d.setAttribute("data-swiper-slide-index",h)})},r=e.grid&&t.grid&&t.grid.rows>1,a=t.slidesPerGroup*(r?t.grid.rows:1),o=e.slides.length%a!==0,l=r&&e.slides.length%t.grid.rows!==0,c=u=>{for(let d=0;d<u;d+=1){const h=e.isElement?Ka("swiper-slide",[t.slideBlankClass]):Ka("div",[t.slideClass,t.slideBlankClass]);e.slidesEl.append(h)}};if(o){if(t.loopAddBlankSlides){const u=a-e.slides.length%a;c(u),e.recalcSlides(),e.updateSlides()}else bl("Swiper Loop Warning: The number of slides is not even to slidesPerGroup, loop mode may not function properly. You need to add more slides (or make duplicates, or empty slides)");i()}else if(l){if(t.loopAddBlankSlides){const u=t.grid.rows-e.slides.length%t.grid.rows;c(u),e.recalcSlides(),e.updateSlides()}else bl("Swiper Loop Warning: The number of slides is not even to grid.rows, loop mode may not function properly. You need to add more slides (or make duplicates, or empty slides)");i()}else i();e.loopFix({slideRealIndex:n,direction:t.centeredSlides?void 0:"next"})}function UI(n){let{slideRealIndex:e,slideTo:t=!0,direction:s,setTranslate:i,activeSlideIndex:r,byController:a,byMousewheel:o}=n===void 0?{}:n;const l=this;if(!l.params.loop)return;l.emit("beforeLoopFix");const{slides:c,allowSlidePrev:u,allowSlideNext:d,slidesEl:h,params:f}=l,{centeredSlides:p}=f;if(l.allowSlidePrev=!0,l.allowSlideNext=!0,l.virtual&&f.virtual.enabled){t&&(!f.centeredSlides&&l.snapIndex===0?l.slideTo(l.virtual.slides.length,0,!1,!0):f.centeredSlides&&l.snapIndex<f.slidesPerView?l.slideTo(l.virtual.slides.length+l.snapIndex,0,!1,!0):l.snapIndex===l.snapGrid.length-1&&l.slideTo(l.virtual.slidesBefore,0,!1,!0)),l.allowSlidePrev=u,l.allowSlideNext=d,l.emit("loopFix");return}let m=f.slidesPerView;m==="auto"?m=l.slidesPerViewDynamic():(m=Math.ceil(parseFloat(f.slidesPerView,10)),p&&m%2===0&&(m=m+1));const y=f.slidesPerGroupAuto?m:f.slidesPerGroup;let g=y;g%y!==0&&(g+=y-g%y),g+=f.loopAdditionalSlides,l.loopedSlides=g;const v=l.grid&&f.grid&&f.grid.rows>1;c.length<m+g?bl("Swiper Loop Warning: The number of slides is not enough for loop mode, it will be disabled and not function properly. You need to add more slides (or make duplicates) or lower the values of slidesPerView and slidesPerGroup parameters"):v&&f.grid.fill==="row"&&bl("Swiper Loop Warning: Loop mode is not compatible with grid.fill = `row`");const E=[],T=[];let b=l.activeIndex;typeof r>"u"?r=l.getSlideIndex(c.filter(O=>O.classList.contains(f.slideActiveClass))[0]):b=r;const L=s==="next"||!s,x=s==="prev"||!s;let w=0,k=0;const R=v?Math.ceil(c.length/f.grid.rows):c.length,D=(v?c[r].column:r)+(p&&typeof i>"u"?-m/2+.5:0);if(D<g){w=Math.max(g-D,y);for(let O=0;O<g-D;O+=1){const N=O-Math.floor(O/R)*R;if(v){const $=R-N-1;for(let K=c.length-1;K>=0;K-=1)c[K].column===$&&E.push(K)}else E.push(R-N-1)}}else if(D+m>R-g){k=Math.max(D-(R-g*2),y);for(let O=0;O<k;O+=1){const N=O-Math.floor(O/R)*R;v?c.forEach(($,K)=>{$.column===N&&T.push(K)}):T.push(N)}}if(l.__preventObserver__=!0,requestAnimationFrame(()=>{l.__preventObserver__=!1}),x&&E.forEach(O=>{c[O].swiperLoopMoveDOM=!0,h.prepend(c[O]),c[O].swiperLoopMoveDOM=!1}),L&&T.forEach(O=>{c[O].swiperLoopMoveDOM=!0,h.append(c[O]),c[O].swiperLoopMoveDOM=!1}),l.recalcSlides(),f.slidesPerView==="auto"?l.updateSlides():v&&(E.length>0&&x||T.length>0&&L)&&l.slides.forEach((O,N)=>{l.grid.updateSlide(N,O,l.slides)}),f.watchSlidesProgress&&l.updateSlidesOffset(),t){if(E.length>0&&x){if(typeof e>"u"){const O=l.slidesGrid[b],$=l.slidesGrid[b+w]-O;o?l.setTranslate(l.translate-$):(l.slideTo(b+Math.ceil(w),0,!1,!0),i&&(l.touchEventsData.startTranslate=l.touchEventsData.startTranslate-$,l.touchEventsData.currentTranslate=l.touchEventsData.currentTranslate-$))}else if(i){const O=v?E.length/f.grid.rows:E.length;l.slideTo(l.activeIndex+O,0,!1,!0),l.touchEventsData.currentTranslate=l.translate}}else if(T.length>0&&L)if(typeof e>"u"){const O=l.slidesGrid[b],$=l.slidesGrid[b-k]-O;o?l.setTranslate(l.translate-$):(l.slideTo(b-k,0,!1,!0),i&&(l.touchEventsData.startTranslate=l.touchEventsData.startTranslate-$,l.touchEventsData.currentTranslate=l.touchEventsData.currentTranslate-$))}else{const O=v?T.length/f.grid.rows:T.length;l.slideTo(l.activeIndex-O,0,!1,!0)}}if(l.allowSlidePrev=u,l.allowSlideNext=d,l.controller&&l.controller.control&&!a){const O={slideRealIndex:e,direction:s,setTranslate:i,activeSlideIndex:r,byController:!0};Array.isArray(l.controller.control)?l.controller.control.forEach(N=>{!N.destroyed&&N.params.loop&&N.loopFix({...O,slideTo:N.params.slidesPerView===f.slidesPerView?t:!1})}):l.controller.control instanceof l.constructor&&l.controller.control.params.loop&&l.controller.control.loopFix({...O,slideTo:l.controller.control.params.slidesPerView===f.slidesPerView?t:!1})}l.emit("loopFix")}function $I(){const n=this,{params:e,slidesEl:t}=n;if(!e.loop||n.virtual&&n.params.virtual.enabled)return;n.recalcSlides();const s=[];n.slides.forEach(i=>{const r=typeof i.swiperSlideIndex>"u"?i.getAttribute("data-swiper-slide-index")*1:i.swiperSlideIndex;s[r]=i}),n.slides.forEach(i=>{i.removeAttribute("data-swiper-slide-index")}),s.forEach(i=>{t.append(i)}),n.recalcSlides(),n.slideTo(n.realIndex,0)}var jI={loopCreate:BI,loopFix:UI,loopDestroy:$I};function GI(n){const e=this;if(!e.params.simulateTouch||e.params.watchOverflow&&e.isLocked||e.params.cssMode)return;const t=e.params.touchEventsTarget==="container"?e.el:e.wrapperEl;e.isElement&&(e.__preventObserver__=!0),t.style.cursor="move",t.style.cursor=n?"grabbing":"grab",e.isElement&&requestAnimationFrame(()=>{e.__preventObserver__=!1})}function VI(){const n=this;n.params.watchOverflow&&n.isLocked||n.params.cssMode||(n.isElement&&(n.__preventObserver__=!0),n[n.params.touchEventsTarget==="container"?"el":"wrapperEl"].style.cursor="",n.isElement&&requestAnimationFrame(()=>{n.__preventObserver__=!1}))}var HI={setGrabCursor:GI,unsetGrabCursor:VI};function KI(n,e){e===void 0&&(e=this);function t(s){if(!s||s===Xs()||s===gs())return null;s.assignedSlot&&(s=s.assignedSlot);const i=s.closest(n);return!i&&!s.getRootNode?null:i||t(s.getRootNode().host)}return t(e)}function Hm(n,e,t){const s=gs(),{params:i}=n,r=i.edgeSwipeDetection,a=i.edgeSwipeThreshold;return r&&(t<=a||t>=s.innerWidth-a)?r==="prevent"?(e.preventDefault(),!0):!1:!0}function WI(n){const e=this,t=Xs();let s=n;s.originalEvent&&(s=s.originalEvent);const i=e.touchEventsData;if(s.type==="pointerdown"){if(i.pointerId!==null&&i.pointerId!==s.pointerId)return;i.pointerId=s.pointerId}else s.type==="touchstart"&&s.targetTouches.length===1&&(i.touchId=s.targetTouches[0].identifier);if(s.type==="touchstart"){Hm(e,s,s.targetTouches[0].pageX);return}const{params:r,touches:a,enabled:o}=e;if(!o||!r.simulateTouch&&s.pointerType==="mouse"||e.animating&&r.preventInteractionOnTransition)return;!e.animating&&r.cssMode&&r.loop&&e.loopFix();let l=s.target;if(r.touchEventsTarget==="wrapper"&&!e.wrapperEl.contains(l)||"which"in s&&s.which===3||"button"in s&&s.button>0||i.isTouched&&i.isMoved)return;const c=!!r.noSwipingClass&&r.noSwipingClass!=="",u=s.composedPath?s.composedPath():s.path;c&&s.target&&s.target.shadowRoot&&u&&(l=u[0]);const d=r.noSwipingSelector?r.noSwipingSelector:`.${r.noSwipingClass}`,h=!!(s.target&&s.target.shadowRoot);if(r.noSwiping&&(h?KI(d,l):l.closest(d))){e.allowClick=!0;return}if(r.swipeHandler&&!l.closest(r.swipeHandler))return;a.currentX=s.pageX,a.currentY=s.pageY;const f=a.currentX,p=a.currentY;if(!Hm(e,s,f))return;Object.assign(i,{isTouched:!0,isMoved:!1,allowTouchCallbacks:!0,isScrolling:void 0,startMoving:void 0}),a.startX=f,a.startY=p,i.touchStartTime=Tl(),e.allowClick=!0,e.updateSize(),e.swipeDirection=void 0,r.threshold>0&&(i.allowThresholdMove=!1);let m=!0;l.matches(i.focusableElements)&&(m=!1,l.nodeName==="SELECT"&&(i.isTouched=!1)),t.activeElement&&t.activeElement.matches(i.focusableElements)&&t.activeElement!==l&&t.activeElement.blur();const y=m&&e.allowTouchMove&&r.touchStartPreventDefault;(r.touchStartForcePreventDefault||y)&&!l.isContentEditable&&s.preventDefault(),r.freeMode&&r.freeMode.enabled&&e.freeMode&&e.animating&&!r.cssMode&&e.freeMode.onTouchStart(),e.emit("touchStart",s)}function zI(n){const e=Xs(),t=this,s=t.touchEventsData,{params:i,touches:r,rtlTranslate:a,enabled:o}=t;if(!o||!i.simulateTouch&&n.pointerType==="mouse")return;let l=n;if(l.originalEvent&&(l=l.originalEvent),l.type==="pointermove"&&(s.touchId!==null||l.pointerId!==s.pointerId))return;let c;if(l.type==="touchmove"){if(c=[...l.changedTouches].filter(L=>L.identifier===s.touchId)[0],!c||c.identifier!==s.touchId)return}else c=l;if(!s.isTouched){s.startMoving&&s.isScrolling&&t.emit("touchMoveOpposite",l);return}const u=c.pageX,d=c.pageY;if(l.preventedByNestedSwiper){r.startX=u,r.startY=d;return}if(!t.allowTouchMove){l.target.matches(s.focusableElements)||(t.allowClick=!1),s.isTouched&&(Object.assign(r,{startX:u,startY:d,currentX:u,currentY:d}),s.touchStartTime=Tl());return}if(i.touchReleaseOnEdges&&!i.loop){if(t.isVertical()){if(d<r.startY&&t.translate<=t.maxTranslate()||d>r.startY&&t.translate>=t.minTranslate()){s.isTouched=!1,s.isMoved=!1;return}}else if(u<r.startX&&t.translate<=t.maxTranslate()||u>r.startX&&t.translate>=t.minTranslate())return}if(e.activeElement&&l.target===e.activeElement&&l.target.matches(s.focusableElements)){s.isMoved=!0,t.allowClick=!1;return}s.allowTouchCallbacks&&t.emit("touchMove",l),r.previousX=r.currentX,r.previousY=r.currentY,r.currentX=u,r.currentY=d;const h=r.currentX-r.startX,f=r.currentY-r.startY;if(t.params.threshold&&Math.sqrt(h**2+f**2)<t.params.threshold)return;if(typeof s.isScrolling>"u"){let L;t.isHorizontal()&&r.currentY===r.startY||t.isVertical()&&r.currentX===r.startX?s.isScrolling=!1:h*h+f*f>=25&&(L=Math.atan2(Math.abs(f),Math.abs(h))*180/Math.PI,s.isScrolling=t.isHorizontal()?L>i.touchAngle:90-L>i.touchAngle)}if(s.isScrolling&&t.emit("touchMoveOpposite",l),typeof s.startMoving>"u"&&(r.currentX!==r.startX||r.currentY!==r.startY)&&(s.startMoving=!0),s.isScrolling){s.isTouched=!1;return}if(!s.startMoving)return;t.allowClick=!1,!i.cssMode&&l.cancelable&&l.preventDefault(),i.touchMoveStopPropagation&&!i.nested&&l.stopPropagation();let p=t.isHorizontal()?h:f,m=t.isHorizontal()?r.currentX-r.previousX:r.currentY-r.previousY;i.oneWayMovement&&(p=Math.abs(p)*(a?1:-1),m=Math.abs(m)*(a?1:-1)),r.diff=p,p*=i.touchRatio,a&&(p=-p,m=-m);const y=t.touchesDirection;t.swipeDirection=p>0?"prev":"next",t.touchesDirection=m>0?"prev":"next";const g=t.params.loop&&!i.cssMode,v=t.touchesDirection==="next"&&t.allowSlideNext||t.touchesDirection==="prev"&&t.allowSlidePrev;if(!s.isMoved){if(g&&v&&t.loopFix({direction:t.swipeDirection}),s.startTranslate=t.getTranslate(),t.setTransition(0),t.animating){const L=new window.CustomEvent("transitionend",{bubbles:!0,cancelable:!0});t.wrapperEl.dispatchEvent(L)}s.allowMomentumBounce=!1,i.grabCursor&&(t.allowSlideNext===!0||t.allowSlidePrev===!0)&&t.setGrabCursor(!0),t.emit("sliderFirstMove",l)}let E;if(new Date().getTime(),s.isMoved&&s.allowThresholdMove&&y!==t.touchesDirection&&g&&v&&Math.abs(p)>=1){Object.assign(r,{startX:u,startY:d,currentX:u,currentY:d,startTranslate:s.currentTranslate}),s.loopSwapReset=!0,s.startTranslate=s.currentTranslate;return}t.emit("sliderMove",l),s.isMoved=!0,s.currentTranslate=p+s.startTranslate;let T=!0,b=i.resistanceRatio;if(i.touchReleaseOnEdges&&(b=0),p>0?(g&&v&&!E&&s.allowThresholdMove&&s.currentTranslate>(i.centeredSlides?t.minTranslate()-t.slidesSizesGrid[t.activeIndex+1]:t.minTranslate())&&t.loopFix({direction:"prev",setTranslate:!0,activeSlideIndex:0}),s.currentTranslate>t.minTranslate()&&(T=!1,i.resistance&&(s.currentTranslate=t.minTranslate()-1+(-t.minTranslate()+s.startTranslate+p)**b))):p<0&&(g&&v&&!E&&s.allowThresholdMove&&s.currentTranslate<(i.centeredSlides?t.maxTranslate()+t.slidesSizesGrid[t.slidesSizesGrid.length-1]:t.maxTranslate())&&t.loopFix({direction:"next",setTranslate:!0,activeSlideIndex:t.slides.length-(i.slidesPerView==="auto"?t.slidesPerViewDynamic():Math.ceil(parseFloat(i.slidesPerView,10)))}),s.currentTranslate<t.maxTranslate()&&(T=!1,i.resistance&&(s.currentTranslate=t.maxTranslate()+1-(t.maxTranslate()-s.startTranslate-p)**b))),T&&(l.preventedByNestedSwiper=!0),!t.allowSlideNext&&t.swipeDirection==="next"&&s.currentTranslate<s.startTranslate&&(s.currentTranslate=s.startTranslate),!t.allowSlidePrev&&t.swipeDirection==="prev"&&s.currentTranslate>s.startTranslate&&(s.currentTranslate=s.startTranslate),!t.allowSlidePrev&&!t.allowSlideNext&&(s.currentTranslate=s.startTranslate),i.threshold>0)if(Math.abs(p)>i.threshold||s.allowThresholdMove){if(!s.allowThresholdMove){s.allowThresholdMove=!0,r.startX=r.currentX,r.startY=r.currentY,s.currentTranslate=s.startTranslate,r.diff=t.isHorizontal()?r.currentX-r.startX:r.currentY-r.startY;return}}else{s.currentTranslate=s.startTranslate;return}!i.followFinger||i.cssMode||((i.freeMode&&i.freeMode.enabled&&t.freeMode||i.watchSlidesProgress)&&(t.updateActiveIndex(),t.updateSlidesClasses()),i.freeMode&&i.freeMode.enabled&&t.freeMode&&t.freeMode.onTouchMove(),t.updateProgress(s.currentTranslate),t.setTranslate(s.currentTranslate))}function YI(n){const e=this,t=e.touchEventsData;let s=n;s.originalEvent&&(s=s.originalEvent);let i;if(s.type==="touchend"||s.type==="touchcancel"){if(i=[...s.changedTouches].filter(b=>b.identifier===t.touchId)[0],!i||i.identifier!==t.touchId)return}else{if(t.touchId!==null||s.pointerId!==t.pointerId)return;i=s}if(["pointercancel","pointerout","pointerleave","contextmenu"].includes(s.type)&&!(["pointercancel","contextmenu"].includes(s.type)&&(e.browser.isSafari||e.browser.isWebView)))return;t.pointerId=null,t.touchId=null;const{params:a,touches:o,rtlTranslate:l,slidesGrid:c,enabled:u}=e;if(!u||!a.simulateTouch&&s.pointerType==="mouse")return;if(t.allowTouchCallbacks&&e.emit("touchEnd",s),t.allowTouchCallbacks=!1,!t.isTouched){t.isMoved&&a.grabCursor&&e.setGrabCursor(!1),t.isMoved=!1,t.startMoving=!1;return}a.grabCursor&&t.isMoved&&t.isTouched&&(e.allowSlideNext===!0||e.allowSlidePrev===!0)&&e.setGrabCursor(!1);const d=Tl(),h=d-t.touchStartTime;if(e.allowClick){const b=s.path||s.composedPath&&s.composedPath();e.updateClickedSlide(b&&b[0]||s.target,b),e.emit("tap click",s),h<300&&d-t.lastClickTime<300&&e.emit("doubleTap doubleClick",s)}if(t.lastClickTime=Tl(),El(()=>{e.destroyed||(e.allowClick=!0)}),!t.isTouched||!t.isMoved||!e.swipeDirection||o.diff===0&&!t.loopSwapReset||t.currentTranslate===t.startTranslate&&!t.loopSwapReset){t.isTouched=!1,t.isMoved=!1,t.startMoving=!1;return}t.isTouched=!1,t.isMoved=!1,t.startMoving=!1;let f;if(a.followFinger?f=l?e.translate:-e.translate:f=-t.currentTranslate,a.cssMode)return;if(a.freeMode&&a.freeMode.enabled){e.freeMode.onTouchEnd({currentPos:f});return}const p=f>=-e.maxTranslate()&&!e.params.loop;let m=0,y=e.slidesSizesGrid[0];for(let b=0;b<c.length;b+=b<a.slidesPerGroupSkip?1:a.slidesPerGroup){const L=b<a.slidesPerGroupSkip-1?1:a.slidesPerGroup;typeof c[b+L]<"u"?(p||f>=c[b]&&f<c[b+L])&&(m=b,y=c[b+L]-c[b]):(p||f>=c[b])&&(m=b,y=c[c.length-1]-c[c.length-2])}let g=null,v=null;a.rewind&&(e.isBeginning?v=a.virtual&&a.virtual.enabled&&e.virtual?e.virtual.slides.length-1:e.slides.length-1:e.isEnd&&(g=0));const E=(f-c[m])/y,T=m<a.slidesPerGroupSkip-1?1:a.slidesPerGroup;if(h>a.longSwipesMs){if(!a.longSwipes){e.slideTo(e.activeIndex);return}e.swipeDirection==="next"&&(E>=a.longSwipesRatio?e.slideTo(a.rewind&&e.isEnd?g:m+T):e.slideTo(m)),e.swipeDirection==="prev"&&(E>1-a.longSwipesRatio?e.slideTo(m+T):v!==null&&E<0&&Math.abs(E)>a.longSwipesRatio?e.slideTo(v):e.slideTo(m))}else{if(!a.shortSwipes){e.slideTo(e.activeIndex);return}e.navigation&&(s.target===e.navigation.nextEl||s.target===e.navigation.prevEl)?s.target===e.navigation.nextEl?e.slideTo(m+T):e.slideTo(m):(e.swipeDirection==="next"&&e.slideTo(g!==null?g:m+T),e.swipeDirection==="prev"&&e.slideTo(v!==null?v:m))}}function Km(){const n=this,{params:e,el:t}=n;if(t&&t.offsetWidth===0)return;e.breakpoints&&n.setBreakpoint();const{allowSlideNext:s,allowSlidePrev:i,snapGrid:r}=n,a=n.virtual&&n.params.virtual.enabled;n.allowSlideNext=!0,n.allowSlidePrev=!0,n.updateSize(),n.updateSlides(),n.updateSlidesClasses();const o=a&&e.loop;(e.slidesPerView==="auto"||e.slidesPerView>1)&&n.isEnd&&!n.isBeginning&&!n.params.centeredSlides&&!o?n.slideTo(n.slides.length-1,0,!1,!0):n.params.loop&&!a?n.slideToLoop(n.realIndex,0,!1,!0):n.slideTo(n.activeIndex,0,!1,!0),n.autoplay&&n.autoplay.running&&n.autoplay.paused&&(clearTimeout(n.autoplay.resizeTimeout),n.autoplay.resizeTimeout=setTimeout(()=>{n.autoplay&&n.autoplay.running&&n.autoplay.paused&&n.autoplay.resume()},500)),n.allowSlidePrev=i,n.allowSlideNext=s,n.params.watchOverflow&&r!==n.snapGrid&&n.checkOverflow()}function qI(n){const e=this;e.enabled&&(e.allowClick||(e.params.preventClicks&&n.preventDefault(),e.params.preventClicksPropagation&&e.animating&&(n.stopPropagation(),n.stopImmediatePropagation())))}function XI(){const n=this,{wrapperEl:e,rtlTranslate:t,enabled:s}=n;if(!s)return;n.previousTranslate=n.translate,n.isHorizontal()?n.translate=-e.scrollLeft:n.translate=-e.scrollTop,n.translate===0&&(n.translate=0),n.updateActiveIndex(),n.updateSlidesClasses();let i;const r=n.maxTranslate()-n.minTranslate();r===0?i=0:i=(n.translate-n.minTranslate())/r,i!==n.progress&&n.updateProgress(t?-n.translate:n.translate),n.emit("setTranslate",n.translate,!1)}function QI(n){const e=this;Qo(e,n.target),!(e.params.cssMode||e.params.slidesPerView!=="auto"&&!e.params.autoHeight)&&e.update()}function JI(){const n=this;n.documentTouchHandlerProceeded||(n.documentTouchHandlerProceeded=!0,n.params.touchReleaseOnEdges&&(n.el.style.touchAction="auto"))}const Jv=(n,e)=>{const t=Xs(),{params:s,el:i,wrapperEl:r,device:a}=n,o=!!s.nested,l=e==="on"?"addEventListener":"removeEventListener",c=e;t[l]("touchstart",n.onDocumentTouchStart,{passive:!1,capture:o}),i[l]("touchstart",n.onTouchStart,{passive:!1}),i[l]("pointerdown",n.onTouchStart,{passive:!1}),t[l]("touchmove",n.onTouchMove,{passive:!1,capture:o}),t[l]("pointermove",n.onTouchMove,{passive:!1,capture:o}),t[l]("touchend",n.onTouchEnd,{passive:!0}),t[l]("pointerup",n.onTouchEnd,{passive:!0}),t[l]("pointercancel",n.onTouchEnd,{passive:!0}),t[l]("touchcancel",n.onTouchEnd,{passive:!0}),t[l]("pointerout",n.onTouchEnd,{passive:!0}),t[l]("pointerleave",n.onTouchEnd,{passive:!0}),t[l]("contextmenu",n.onTouchEnd,{passive:!0}),(s.preventClicks||s.preventClicksPropagation)&&i[l]("click",n.onClick,!0),s.cssMode&&r[l]("scroll",n.onScroll),s.updateOnWindowResize?n[c](a.ios||a.android?"resize orientationchange observerUpdate":"resize observerUpdate",Km,!0):n[c]("observerUpdate",Km,!0),i[l]("load",n.onLoad,{capture:!0})};function ZI(){const n=this,{params:e}=n;n.onTouchStart=WI.bind(n),n.onTouchMove=zI.bind(n),n.onTouchEnd=YI.bind(n),n.onDocumentTouchStart=JI.bind(n),e.cssMode&&(n.onScroll=XI.bind(n)),n.onClick=qI.bind(n),n.onLoad=QI.bind(n),Jv(n,"on")}function eC(){Jv(this,"off")}var tC={attachEvents:ZI,detachEvents:eC};const Wm=(n,e)=>n.grid&&e.grid&&e.grid.rows>1;function sC(){const n=this,{realIndex:e,initialized:t,params:s,el:i}=n,r=s.breakpoints;if(!r||r&&Object.keys(r).length===0)return;const a=n.getBreakpoint(r,n.params.breakpointsBase,n.el);if(!a||n.currentBreakpoint===a)return;const l=(a in r?r[a]:void 0)||n.originalParams,c=Wm(n,s),u=Wm(n,l),d=s.enabled;c&&!u?(i.classList.remove(`${s.containerModifierClass}grid`,`${s.containerModifierClass}grid-column`),n.emitContainerClasses()):!c&&u&&(i.classList.add(`${s.containerModifierClass}grid`),(l.grid.fill&&l.grid.fill==="column"||!l.grid.fill&&s.grid.fill==="column")&&i.classList.add(`${s.containerModifierClass}grid-column`),n.emitContainerClasses()),["navigation","pagination","scrollbar"].forEach(g=>{if(typeof l[g]>"u")return;const v=s[g]&&s[g].enabled,E=l[g]&&l[g].enabled;v&&!E&&n[g].disable(),!v&&E&&n[g].enable()});const h=l.direction&&l.direction!==s.direction,f=s.loop&&(l.slidesPerView!==s.slidesPerView||h),p=s.loop;h&&t&&n.changeDirection(),xs(n.params,l);const m=n.params.enabled,y=n.params.loop;Object.assign(n,{allowTouchMove:n.params.allowTouchMove,allowSlideNext:n.params.allowSlideNext,allowSlidePrev:n.params.allowSlidePrev}),d&&!m?n.disable():!d&&m&&n.enable(),n.currentBreakpoint=a,n.emit("_beforeBreakpoint",l),t&&(f?(n.loopDestroy(),n.loopCreate(e),n.updateSlides()):!p&&y?(n.loopCreate(e),n.updateSlides()):p&&!y&&n.loopDestroy()),n.emit("breakpoint",l)}function nC(n,e,t){if(e===void 0&&(e="window"),!n||e==="container"&&!t)return;let s=!1;const i=gs(),r=e==="window"?i.innerHeight:t.clientHeight,a=Object.keys(n).map(o=>{if(typeof o=="string"&&o.indexOf("@")===0){const l=parseFloat(o.substr(1));return{value:r*l,point:o}}return{value:o,point:o}});a.sort((o,l)=>parseInt(o.value,10)-parseInt(l.value,10));for(let o=0;o<a.length;o+=1){const{point:l,value:c}=a[o];e==="window"?i.matchMedia(`(min-width: ${c}px)`).matches&&(s=l):c<=t.clientWidth&&(s=l)}return s||"max"}var iC={setBreakpoint:sC,getBreakpoint:nC};function rC(n,e){const t=[];return n.forEach(s=>{typeof s=="object"?Object.keys(s).forEach(i=>{s[i]&&t.push(e+i)}):typeof s=="string"&&t.push(e+s)}),t}function aC(){const n=this,{classNames:e,params:t,rtl:s,el:i,device:r}=n,a=rC(["initialized",t.direction,{"free-mode":n.params.freeMode&&t.freeMode.enabled},{autoheight:t.autoHeight},{rtl:s},{grid:t.grid&&t.grid.rows>1},{"grid-column":t.grid&&t.grid.rows>1&&t.grid.fill==="column"},{android:r.android},{ios:r.ios},{"css-mode":t.cssMode},{centered:t.cssMode&&t.centeredSlides},{"watch-progress":t.watchSlidesProgress}],t.containerModifierClass);e.push(...a),i.classList.add(...e),n.emitContainerClasses()}function oC(){const n=this,{el:e,classNames:t}=n;e.classList.remove(...t),n.emitContainerClasses()}var lC={addClasses:aC,removeClasses:oC};function cC(){const n=this,{isLocked:e,params:t}=n,{slidesOffsetBefore:s}=t;if(s){const i=n.slides.length-1,r=n.slidesGrid[i]+n.slidesSizesGrid[i]+s*2;n.isLocked=n.size>r}else n.isLocked=n.snapGrid.length===1;t.allowSlideNext===!0&&(n.allowSlideNext=!n.isLocked),t.allowSlidePrev===!0&&(n.allowSlidePrev=!n.isLocked),e&&e!==n.isLocked&&(n.isEnd=!1),e!==n.isLocked&&n.emit(n.isLocked?"lock":"unlock")}var uC={checkOverflow:cC},kd={init:!0,direction:"horizontal",oneWayMovement:!1,swiperElementNodeName:"SWIPER-CONTAINER",touchEventsTarget:"wrapper",initialSlide:0,speed:300,cssMode:!1,updateOnWindowResize:!0,resizeObserver:!0,nested:!1,createElements:!1,eventsPrefix:"swiper",enabled:!0,focusableElements:"input, select, option, textarea, button, video, label",width:null,height:null,preventInteractionOnTransition:!1,userAgent:null,url:null,edgeSwipeDetection:!1,edgeSwipeThreshold:20,autoHeight:!1,setWrapperSize:!1,virtualTranslate:!1,effect:"slide",breakpoints:void 0,breakpointsBase:"window",spaceBetween:0,slidesPerView:1,slidesPerGroup:1,slidesPerGroupSkip:0,slidesPerGroupAuto:!1,centeredSlides:!1,centeredSlidesBounds:!1,slidesOffsetBefore:0,slidesOffsetAfter:0,normalizeSlideIndex:!0,centerInsufficientSlides:!1,watchOverflow:!0,roundLengths:!1,touchRatio:1,touchAngle:45,simulateTouch:!0,shortSwipes:!0,longSwipes:!0,longSwipesRatio:.5,longSwipesMs:300,followFinger:!0,allowTouchMove:!0,threshold:5,touchMoveStopPropagation:!1,touchStartPreventDefault:!0,touchStartForcePreventDefault:!1,touchReleaseOnEdges:!1,uniqueNavElements:!0,resistance:!0,resistanceRatio:.85,watchSlidesProgress:!1,grabCursor:!1,preventClicks:!0,preventClicksPropagation:!0,slideToClickedSlide:!1,loop:!1,loopAddBlankSlides:!0,loopAdditionalSlides:0,loopPreventsSliding:!0,rewind:!1,allowSlidePrev:!0,allowSlideNext:!0,swipeHandler:null,noSwiping:!0,noSwipingClass:"swiper-no-swiping",noSwipingSelector:null,passiveListeners:!0,maxBackfaceHiddenSlides:10,containerModifierClass:"swiper-",slideClass:"swiper-slide",slideBlankClass:"swiper-slide-blank",slideActiveClass:"swiper-slide-active",slideVisibleClass:"swiper-slide-visible",slideFullyVisibleClass:"swiper-slide-fully-visible",slideNextClass:"swiper-slide-next",slidePrevClass:"swiper-slide-prev",wrapperClass:"swiper-wrapper",lazyPreloaderClass:"swiper-lazy-preloader",lazyPreloadPrevNext:0,runCallbacksOnInit:!0,_emitClasses:!1};function dC(n,e){return function(s){s===void 0&&(s={});const i=Object.keys(s)[0],r=s[i];if(typeof r!="object"||r===null){xs(e,s);return}if(n[i]===!0&&(n[i]={enabled:!0}),i==="navigation"&&n[i]&&n[i].enabled&&!n[i].prevEl&&!n[i].nextEl&&(n[i].auto=!0),["pagination","scrollbar"].indexOf(i)>=0&&n[i]&&n[i].enabled&&!n[i].el&&(n[i].auto=!0),!(i in n&&"enabled"in r)){xs(e,s);return}typeof n[i]=="object"&&!("enabled"in n[i])&&(n[i].enabled=!0),n[i]||(n[i]={enabled:!1}),xs(e,s)}}const zc={eventsEmitter:lI,update:EI,translate:AI,transition:II,slide:NI,loop:jI,grabCursor:HI,events:tC,breakpoints:iC,checkOverflow:uC,classes:lC},Yc={};let of=class In{constructor(){let e,t;for(var s=arguments.length,i=new Array(s),r=0;r<s;r++)i[r]=arguments[r];i.length===1&&i[0].constructor&&Object.prototype.toString.call(i[0]).slice(8,-1)==="Object"?t=i[0]:[e,t]=i,t||(t={}),t=xs({},t),e&&!t.el&&(t.el=e);const a=Xs();if(t.el&&typeof t.el=="string"&&a.querySelectorAll(t.el).length>1){const u=[];return a.querySelectorAll(t.el).forEach(d=>{const h=xs({},t,{el:d});u.push(new In(h))}),u}const o=this;o.__swiper__=!0,o.support=qv(),o.device=Xv({userAgent:t.userAgent}),o.browser=rI(),o.eventsListeners={},o.eventsAnyListeners=[],o.modules=[...o.__modules__],t.modules&&Array.isArray(t.modules)&&o.modules.push(...t.modules);const l={};o.modules.forEach(u=>{u({params:t,swiper:o,extendParams:dC(t,l),on:o.on.bind(o),once:o.once.bind(o),off:o.off.bind(o),emit:o.emit.bind(o)})});const c=xs({},kd,l);return o.params=xs({},c,Yc,t),o.originalParams=xs({},o.params),o.passedParams=xs({},t),o.params&&o.params.on&&Object.keys(o.params.on).forEach(u=>{o.on(u,o.params.on[u])}),o.params&&o.params.onAny&&o.onAny(o.params.onAny),Object.assign(o,{enabled:o.params.enabled,el:e,classNames:[],slides:[],slidesGrid:[],snapGrid:[],slidesSizesGrid:[],isHorizontal(){return o.params.direction==="horizontal"},isVertical(){return o.params.direction==="vertical"},activeIndex:0,realIndex:0,isBeginning:!0,isEnd:!1,translate:0,previousTranslate:0,progress:0,velocity:0,animating:!1,cssOverflowAdjustment(){return Math.trunc(this.translate/2**23)*2**23},allowSlideNext:o.params.allowSlideNext,allowSlidePrev:o.params.allowSlidePrev,touchEventsData:{isTouched:void 0,isMoved:void 0,allowTouchCallbacks:void 0,touchStartTime:void 0,isScrolling:void 0,currentTranslate:void 0,startTranslate:void 0,allowThresholdMove:void 0,focusableElements:o.params.focusableElements,lastClickTime:0,clickTimeout:void 0,velocities:[],allowMomentumBounce:void 0,startMoving:void 0,pointerId:null,touchId:null},allowClick:!0,allowTouchMove:o.params.allowTouchMove,touches:{startX:0,startY:0,currentX:0,currentY:0,diff:0},imagesToLoad:[],imagesLoaded:0}),o.emit("_swiper"),o.params.init&&o.init(),o}getDirectionLabel(e){return this.isHorizontal()?e:{width:"height","margin-top":"margin-left","margin-bottom ":"margin-right","margin-left":"margin-top","margin-right":"margin-bottom","padding-left":"padding-top","padding-right":"padding-bottom",marginRight:"marginBottom"}[e]}getSlideIndex(e){const{slidesEl:t,params:s}=this,i=fn(t,`.${s.slideClass}, swiper-slide`),r=xl(i[0]);return xl(e)-r}getSlideIndexByData(e){return this.getSlideIndex(this.slides.filter(t=>t.getAttribute("data-swiper-slide-index")*1===e)[0])}recalcSlides(){const e=this,{slidesEl:t,params:s}=e;e.slides=fn(t,`.${s.slideClass}, swiper-slide`)}enable(){const e=this;e.enabled||(e.enabled=!0,e.params.grabCursor&&e.setGrabCursor(),e.emit("enable"))}disable(){const e=this;e.enabled&&(e.enabled=!1,e.params.grabCursor&&e.unsetGrabCursor(),e.emit("disable"))}setProgress(e,t){const s=this;e=Math.min(Math.max(e,0),1);const i=s.minTranslate(),a=(s.maxTranslate()-i)*e+i;s.translateTo(a,typeof t>"u"?0:t),s.updateActiveIndex(),s.updateSlidesClasses()}emitContainerClasses(){const e=this;if(!e.params._emitClasses||!e.el)return;const t=e.el.className.split(" ").filter(s=>s.indexOf("swiper")===0||s.indexOf(e.params.containerModifierClass)===0);e.emit("_containerClasses",t.join(" "))}getSlideClasses(e){const t=this;return t.destroyed?"":e.className.split(" ").filter(s=>s.indexOf("swiper-slide")===0||s.indexOf(t.params.slideClass)===0).join(" ")}emitSlidesClasses(){const e=this;if(!e.params._emitClasses||!e.el)return;const t=[];e.slides.forEach(s=>{const i=e.getSlideClasses(s);t.push({slideEl:s,classNames:i}),e.emit("_slideClass",s,i)}),e.emit("_slideClasses",t)}slidesPerViewDynamic(e,t){e===void 0&&(e="current"),t===void 0&&(t=!1);const s=this,{params:i,slides:r,slidesGrid:a,slidesSizesGrid:o,size:l,activeIndex:c}=s;let u=1;if(typeof i.slidesPerView=="number")return i.slidesPerView;if(i.centeredSlides){let d=r[c]?Math.ceil(r[c].swiperSlideSize):0,h;for(let f=c+1;f<r.length;f+=1)r[f]&&!h&&(d+=Math.ceil(r[f].swiperSlideSize),u+=1,d>l&&(h=!0));for(let f=c-1;f>=0;f-=1)r[f]&&!h&&(d+=r[f].swiperSlideSize,u+=1,d>l&&(h=!0))}else if(e==="current")for(let d=c+1;d<r.length;d+=1)(t?a[d]+o[d]-a[c]<l:a[d]-a[c]<l)&&(u+=1);else for(let d=c-1;d>=0;d-=1)a[c]-a[d]<l&&(u+=1);return u}update(){const e=this;if(!e||e.destroyed)return;const{snapGrid:t,params:s}=e;s.breakpoints&&e.setBreakpoint(),[...e.el.querySelectorAll('[loading="lazy"]')].forEach(a=>{a.complete&&Qo(e,a)}),e.updateSize(),e.updateSlides(),e.updateProgress(),e.updateSlidesClasses();function i(){const a=e.rtlTranslate?e.translate*-1:e.translate,o=Math.min(Math.max(a,e.maxTranslate()),e.minTranslate());e.setTranslate(o),e.updateActiveIndex(),e.updateSlidesClasses()}let r;if(s.freeMode&&s.freeMode.enabled&&!s.cssMode)i(),s.autoHeight&&e.updateAutoHeight();else{if((s.slidesPerView==="auto"||s.slidesPerView>1)&&e.isEnd&&!s.centeredSlides){const a=e.virtual&&s.virtual.enabled?e.virtual.slides:e.slides;r=e.slideTo(a.length-1,0,!1,!0)}else r=e.slideTo(e.activeIndex,0,!1,!0);r||i()}s.watchOverflow&&t!==e.snapGrid&&e.checkOverflow(),e.emit("update")}changeDirection(e,t){t===void 0&&(t=!0);const s=this,i=s.params.direction;return e||(e=i==="horizontal"?"vertical":"horizontal"),e===i||e!=="horizontal"&&e!=="vertical"||(s.el.classList.remove(`${s.params.containerModifierClass}${i}`),s.el.classList.add(`${s.params.containerModifierClass}${e}`),s.emitContainerClasses(),s.params.direction=e,s.slides.forEach(r=>{e==="vertical"?r.style.width="":r.style.height=""}),s.emit("changeDirection"),t&&s.update()),s}changeLanguageDirection(e){const t=this;t.rtl&&e==="rtl"||!t.rtl&&e==="ltr"||(t.rtl=e==="rtl",t.rtlTranslate=t.params.direction==="horizontal"&&t.rtl,t.rtl?(t.el.classList.add(`${t.params.containerModifierClass}rtl`),t.el.dir="rtl"):(t.el.classList.remove(`${t.params.containerModifierClass}rtl`),t.el.dir="ltr"),t.update())}mount(e){const t=this;if(t.mounted)return!0;let s=e||t.params.el;if(typeof s=="string"&&(s=document.querySelector(s)),!s)return!1;s.swiper=t,s.parentNode&&s.parentNode.host&&s.parentNode.host.nodeName===t.params.swiperElementNodeName.toUpperCase()&&(t.isElement=!0);const i=()=>`.${(t.params.wrapperClass||"").trim().split(" ").join(".")}`;let a=(()=>s&&s.shadowRoot&&s.shadowRoot.querySelector?s.shadowRoot.querySelector(i()):fn(s,i())[0])();return!a&&t.params.createElements&&(a=Ka("div",t.params.wrapperClass),s.append(a),fn(s,`.${t.params.slideClass}`).forEach(o=>{a.append(o)})),Object.assign(t,{el:s,wrapperEl:a,slidesEl:t.isElement&&!s.parentNode.host.slideSlots?s.parentNode.host:a,hostEl:t.isElement?s.parentNode.host:s,mounted:!0,rtl:s.dir.toLowerCase()==="rtl"||ui(s,"direction")==="rtl",rtlTranslate:t.params.direction==="horizontal"&&(s.dir.toLowerCase()==="rtl"||ui(s,"direction")==="rtl"),wrongRTL:ui(a,"display")==="-webkit-box"}),!0}init(e){const t=this;if(t.initialized||t.mount(e)===!1)return t;t.emit("beforeInit"),t.params.breakpoints&&t.setBreakpoint(),t.addClasses(),t.updateSize(),t.updateSlides(),t.params.watchOverflow&&t.checkOverflow(),t.params.grabCursor&&t.enabled&&t.setGrabCursor(),t.params.loop&&t.virtual&&t.params.virtual.enabled?t.slideTo(t.params.initialSlide+t.virtual.slidesBefore,0,t.params.runCallbacksOnInit,!1,!0):t.slideTo(t.params.initialSlide,0,t.params.runCallbacksOnInit,!1,!0),t.params.loop&&t.loopCreate(),t.attachEvents();const i=[...t.el.querySelectorAll('[loading="lazy"]')];return t.isElement&&i.push(...t.hostEl.querySelectorAll('[loading="lazy"]')),i.forEach(r=>{r.complete?Qo(t,r):r.addEventListener("load",a=>{Qo(t,a.target)})}),Dd(t),t.initialized=!0,Dd(t),t.emit("init"),t.emit("afterInit"),t}destroy(e,t){e===void 0&&(e=!0),t===void 0&&(t=!0);const s=this,{params:i,el:r,wrapperEl:a,slides:o}=s;return typeof s.params>"u"||s.destroyed||(s.emit("beforeDestroy"),s.initialized=!1,s.detachEvents(),i.loop&&s.loopDestroy(),t&&(s.removeClasses(),r.removeAttribute("style"),a.removeAttribute("style"),o&&o.length&&o.forEach(l=>{l.classList.remove(i.slideVisibleClass,i.slideFullyVisibleClass,i.slideActiveClass,i.slideNextClass,i.slidePrevClass),l.removeAttribute("style"),l.removeAttribute("data-swiper-slide-index")})),s.emit("destroy"),Object.keys(s.eventsListeners).forEach(l=>{s.off(l)}),e!==!1&&(s.el.swiper=null,qR(s)),s.destroyed=!0),null}static extendDefaults(e){xs(Yc,e)}static get extendedDefaults(){return Yc}static get defaults(){return kd}static installModule(e){In.prototype.__modules__||(In.prototype.__modules__=[]);const t=In.prototype.__modules__;typeof e=="function"&&t.indexOf(e)<0&&t.push(e)}static use(e){return Array.isArray(e)?(e.forEach(t=>In.installModule(t)),In):(In.installModule(e),In)}};Object.keys(zc).forEach(n=>{Object.keys(zc[n]).forEach(e=>{of.prototype[e]=zc[n][e]})});of.use([aI,oI]);const Zv=["eventsPrefix","injectStyles","injectStylesUrls","modules","init","_direction","oneWayMovement","swiperElementNodeName","touchEventsTarget","initialSlide","_speed","cssMode","updateOnWindowResize","resizeObserver","nested","focusableElements","_enabled","_width","_height","preventInteractionOnTransition","userAgent","url","_edgeSwipeDetection","_edgeSwipeThreshold","_freeMode","_autoHeight","setWrapperSize","virtualTranslate","_effect","breakpoints","breakpointsBase","_spaceBetween","_slidesPerView","maxBackfaceHiddenSlides","_grid","_slidesPerGroup","_slidesPerGroupSkip","_slidesPerGroupAuto","_centeredSlides","_centeredSlidesBounds","_slidesOffsetBefore","_slidesOffsetAfter","normalizeSlideIndex","_centerInsufficientSlides","_watchOverflow","roundLengths","touchRatio","touchAngle","simulateTouch","_shortSwipes","_longSwipes","longSwipesRatio","longSwipesMs","_followFinger","allowTouchMove","_threshold","touchMoveStopPropagation","touchStartPreventDefault","touchStartForcePreventDefault","touchReleaseOnEdges","uniqueNavElements","_resistance","_resistanceRatio","_watchSlidesProgress","_grabCursor","preventClicks","preventClicksPropagation","_slideToClickedSlide","_loop","loopAdditionalSlides","loopAddBlankSlides","loopPreventsSliding","_rewind","_allowSlidePrev","_allowSlideNext","_swipeHandler","_noSwiping","noSwipingClass","noSwipingSelector","passiveListeners","containerModifierClass","slideClass","slideActiveClass","slideVisibleClass","slideFullyVisibleClass","slideNextClass","slidePrevClass","slideBlankClass","wrapperClass","lazyPreloaderClass","lazyPreloadPrevNext","runCallbacksOnInit","observer","observeParents","observeSlideChildren","a11y","_autoplay","_controller","coverflowEffect","cubeEffect","fadeEffect","flipEffect","creativeEffect","cardsEffect","hashNavigation","history","keyboard","mousewheel","_navigation","_pagination","parallax","_scrollbar","_thumbs","virtual","zoom","control"];function qi(n){return typeof n=="object"&&n!==null&&n.constructor&&Object.prototype.toString.call(n).slice(8,-1)==="Object"&&!n.__swiper__}function wr(n,e){const t=["__proto__","constructor","prototype"];Object.keys(e).filter(s=>t.indexOf(s)<0).forEach(s=>{typeof n[s]>"u"?n[s]=e[s]:qi(e[s])&&qi(n[s])&&Object.keys(e[s]).length>0?e[s].__swiper__?n[s]=e[s]:wr(n[s],e[s]):n[s]=e[s]})}function eE(n){return n===void 0&&(n={}),n.navigation&&typeof n.navigation.nextEl>"u"&&typeof n.navigation.prevEl>"u"}function tE(n){return n===void 0&&(n={}),n.pagination&&typeof n.pagination.el>"u"}function sE(n){return n===void 0&&(n={}),n.scrollbar&&typeof n.scrollbar.el>"u"}function nE(n){n===void 0&&(n="");const e=n.split(" ").map(s=>s.trim()).filter(s=>!!s),t=[];return e.forEach(s=>{t.indexOf(s)<0&&t.push(s)}),t.join(" ")}function hC(n){return n===void 0&&(n=""),n?n.includes("swiper-wrapper")?n:`swiper-wrapper ${n}`:"swiper-wrapper"}function fC(n){let{swiper:e,slides:t,passedParams:s,changedParams:i,nextEl:r,prevEl:a,scrollbarEl:o,paginationEl:l}=n;const c=i.filter(k=>k!=="children"&&k!=="direction"&&k!=="wrapperClass"),{params:u,pagination:d,navigation:h,scrollbar:f,virtual:p,thumbs:m}=e;let y,g,v,E,T,b,L,x;i.includes("thumbs")&&s.thumbs&&s.thumbs.swiper&&u.thumbs&&!u.thumbs.swiper&&(y=!0),i.includes("controller")&&s.controller&&s.controller.control&&u.controller&&!u.controller.control&&(g=!0),i.includes("pagination")&&s.pagination&&(s.pagination.el||l)&&(u.pagination||u.pagination===!1)&&d&&!d.el&&(v=!0),i.includes("scrollbar")&&s.scrollbar&&(s.scrollbar.el||o)&&(u.scrollbar||u.scrollbar===!1)&&f&&!f.el&&(E=!0),i.includes("navigation")&&s.navigation&&(s.navigation.prevEl||a)&&(s.navigation.nextEl||r)&&(u.navigation||u.navigation===!1)&&h&&!h.prevEl&&!h.nextEl&&(T=!0);const w=k=>{e[k]&&(e[k].destroy(),k==="navigation"?(e.isElement&&(e[k].prevEl.remove(),e[k].nextEl.remove()),u[k].prevEl=void 0,u[k].nextEl=void 0,e[k].prevEl=void 0,e[k].nextEl=void 0):(e.isElement&&e[k].el.remove(),u[k].el=void 0,e[k].el=void 0))};i.includes("loop")&&e.isElement&&(u.loop&&!s.loop?b=!0:!u.loop&&s.loop?L=!0:x=!0),c.forEach(k=>{if(qi(u[k])&&qi(s[k]))Object.assign(u[k],s[k]),(k==="navigation"||k==="pagination"||k==="scrollbar")&&"enabled"in s[k]&&!s[k].enabled&&w(k);else{const R=s[k];(R===!0||R===!1)&&(k==="navigation"||k==="pagination"||k==="scrollbar")?R===!1&&w(k):u[k]=s[k]}}),c.includes("controller")&&!g&&e.controller&&e.controller.control&&u.controller&&u.controller.control&&(e.controller.control=u.controller.control),i.includes("children")&&t&&p&&u.virtual.enabled?(p.slides=t,p.update(!0)):i.includes("virtual")&&p&&u.virtual.enabled&&(t&&(p.slides=t),p.update(!0)),i.includes("children")&&t&&u.loop&&(x=!0),y&&m.init()&&m.update(!0),g&&(e.controller.control=u.controller.control),v&&(e.isElement&&(!l||typeof l=="string")&&(l=document.createElement("div"),l.classList.add("swiper-pagination"),l.part.add("pagination"),e.el.appendChild(l)),l&&(u.pagination.el=l),d.init(),d.render(),d.update()),E&&(e.isElement&&(!o||typeof o=="string")&&(o=document.createElement("div"),o.classList.add("swiper-scrollbar"),o.part.add("scrollbar"),e.el.appendChild(o)),o&&(u.scrollbar.el=o),f.init(),f.updateSize(),f.setTranslate()),T&&(e.isElement&&((!r||typeof r=="string")&&(r=document.createElement("div"),r.classList.add("swiper-button-next"),r.innerHTML=e.hostEl.constructor.nextButtonSvg,r.part.add("button-next"),e.el.appendChild(r)),(!a||typeof a=="string")&&(a=document.createElement("div"),a.classList.add("swiper-button-prev"),a.innerHTML=e.hostEl.constructor.prevButtonSvg,a.part.add("button-prev"),e.el.appendChild(a))),r&&(u.navigation.nextEl=r),a&&(u.navigation.prevEl=a),h.init(),h.update()),i.includes("allowSlideNext")&&(e.allowSlideNext=s.allowSlideNext),i.includes("allowSlidePrev")&&(e.allowSlidePrev=s.allowSlidePrev),i.includes("direction")&&e.changeDirection(s.direction,!1),(b||x)&&e.loopDestroy(),(L||x)&&e.loopCreate(),e.update()}function zm(n,e){n===void 0&&(n={}),e===void 0&&(e=!0);const t={on:{}},s={},i={};wr(t,kd),t._emitClasses=!0,t.init=!1;const r={},a=Zv.map(l=>l.replace(/_/,"")),o=Object.assign({},n);return Object.keys(o).forEach(l=>{typeof n[l]>"u"||(a.indexOf(l)>=0?qi(n[l])?(t[l]={},i[l]={},wr(t[l],n[l]),wr(i[l],n[l])):(t[l]=n[l],i[l]=n[l]):l.search(/on[A-Z]/)===0&&typeof n[l]=="function"?e?s[`${l[2].toLowerCase()}${l.substr(3)}`]=n[l]:t.on[`${l[2].toLowerCase()}${l.substr(3)}`]=n[l]:r[l]=n[l])}),["navigation","pagination","scrollbar"].forEach(l=>{t[l]===!0&&(t[l]={}),t[l]===!1&&delete t[l]}),{params:t,passedParams:i,rest:r,events:s}}function pC(n,e){let{el:t,nextEl:s,prevEl:i,paginationEl:r,scrollbarEl:a,swiper:o}=n;eE(e)&&s&&i&&(o.params.navigation.nextEl=s,o.originalParams.navigation.nextEl=s,o.params.navigation.prevEl=i,o.originalParams.navigation.prevEl=i),tE(e)&&r&&(o.params.pagination.el=r,o.originalParams.pagination.el=r),sE(e)&&a&&(o.params.scrollbar.el=a,o.originalParams.scrollbar.el=a),o.init(t)}function mC(n,e,t,s,i){const r=[];if(!e)return r;const a=l=>{r.indexOf(l)<0&&r.push(l)};if(t&&s){const l=s.map(i),c=t.map(i);l.join("")!==c.join("")&&a("children"),s.length!==t.length&&a("children")}return Zv.filter(l=>l[0]==="_").map(l=>l.replace(/_/,"")).forEach(l=>{if(l in n&&l in e)if(qi(n[l])&&qi(e[l])){const c=Object.keys(n[l]),u=Object.keys(e[l]);c.length!==u.length?a(l):(c.forEach(d=>{n[l][d]!==e[l][d]&&a(l)}),u.forEach(d=>{n[l][d]!==e[l][d]&&a(l)}))}else n[l]!==e[l]&&a(l)}),r}const gC=n=>{!n||n.destroyed||!n.params.virtual||n.params.virtual&&!n.params.virtual.enabled||(n.updateSlides(),n.updateProgress(),n.updateSlidesClasses(),n.parallax&&n.params.parallax&&n.params.parallax.enabled&&n.parallax.setTranslate())};function qc(n,e,t){n===void 0&&(n={});const s=[],i={"container-start":[],"container-end":[],"wrapper-start":[],"wrapper-end":[]},r=(a,o)=>{Array.isArray(a)&&a.forEach(l=>{const c=typeof l.type=="symbol";o==="default"&&(o="container-end"),c&&l.children?r(l.children,o):l.type&&(l.type.name==="SwiperSlide"||l.type.name==="AsyncComponentWrapper")?s.push(l):i[o]&&i[o].push(l)})};return Object.keys(n).forEach(a=>{if(typeof n[a]!="function")return;const o=n[a]();r(o,a)}),t.value=e.value,e.value=s,{slides:s,slots:i}}function yC(n,e,t){if(!t)return null;const s=u=>{let d=u;return u<0?d=e.length+u:d>=e.length&&(d=d-e.length),d},i=n.value.isHorizontal()?{[n.value.rtlTranslate?"right":"left"]:`${t.offset}px`}:{top:`${t.offset}px`},{from:r,to:a}=t,o=n.value.params.loop?-e.length:0,l=n.value.params.loop?e.length*2:e.length,c=[];for(let u=o;u<l;u+=1)u>=r&&u<=a&&c.push(e[s(u)]);return c.map(u=>(u.props||(u.props={}),u.props.style||(u.props.style={}),u.props.swiperRef=n,u.props.style=i,zt(u.type,{...u.props},u.children)))}const Pd={name:"Swiper",props:{tag:{type:String,default:"div"},wrapperTag:{type:String,default:"div"},modules:{type:Array,default:void 0},init:{type:Boolean,default:void 0},direction:{type:String,default:void 0},oneWayMovement:{type:Boolean,default:void 0},swiperElementNodeName:{type:String,default:"SWIPER-CONTAINER"},touchEventsTarget:{type:String,default:void 0},initialSlide:{type:Number,default:void 0},speed:{type:Number,default:void 0},cssMode:{type:Boolean,default:void 0},updateOnWindowResize:{type:Boolean,default:void 0},resizeObserver:{type:Boolean,default:void 0},nested:{type:Boolean,default:void 0},focusableElements:{type:String,default:void 0},width:{type:Number,default:void 0},height:{type:Number,default:void 0},preventInteractionOnTransition:{type:Boolean,default:void 0},userAgent:{type:String,default:void 0},url:{type:String,default:void 0},edgeSwipeDetection:{type:[Boolean,String],default:void 0},edgeSwipeThreshold:{type:Number,default:void 0},autoHeight:{type:Boolean,default:void 0},setWrapperSize:{type:Boolean,default:void 0},virtualTranslate:{type:Boolean,default:void 0},effect:{type:String,default:void 0},breakpoints:{type:Object,default:void 0},spaceBetween:{type:[Number,String],default:void 0},slidesPerView:{type:[Number,String],default:void 0},maxBackfaceHiddenSlides:{type:Number,default:void 0},slidesPerGroup:{type:Number,default:void 0},slidesPerGroupSkip:{type:Number,default:void 0},slidesPerGroupAuto:{type:Boolean,default:void 0},centeredSlides:{type:Boolean,default:void 0},centeredSlidesBounds:{type:Boolean,default:void 0},slidesOffsetBefore:{type:Number,default:void 0},slidesOffsetAfter:{type:Number,default:void 0},normalizeSlideIndex:{type:Boolean,default:void 0},centerInsufficientSlides:{type:Boolean,default:void 0},watchOverflow:{type:Boolean,default:void 0},roundLengths:{type:Boolean,default:void 0},touchRatio:{type:Number,default:void 0},touchAngle:{type:Number,default:void 0},simulateTouch:{type:Boolean,default:void 0},shortSwipes:{type:Boolean,default:void 0},longSwipes:{type:Boolean,default:void 0},longSwipesRatio:{type:Number,default:void 0},longSwipesMs:{type:Number,default:void 0},followFinger:{type:Boolean,default:void 0},allowTouchMove:{type:Boolean,default:void 0},threshold:{type:Number,default:void 0},touchMoveStopPropagation:{type:Boolean,default:void 0},touchStartPreventDefault:{type:Boolean,default:void 0},touchStartForcePreventDefault:{type:Boolean,default:void 0},touchReleaseOnEdges:{type:Boolean,default:void 0},uniqueNavElements:{type:Boolean,default:void 0},resistance:{type:Boolean,default:void 0},resistanceRatio:{type:Number,default:void 0},watchSlidesProgress:{type:Boolean,default:void 0},grabCursor:{type:Boolean,default:void 0},preventClicks:{type:Boolean,default:void 0},preventClicksPropagation:{type:Boolean,default:void 0},slideToClickedSlide:{type:Boolean,default:void 0},loop:{type:Boolean,default:void 0},loopedSlides:{type:Number,default:void 0},loopPreventsSliding:{type:Boolean,default:void 0},rewind:{type:Boolean,default:void 0},allowSlidePrev:{type:Boolean,default:void 0},allowSlideNext:{type:Boolean,default:void 0},swipeHandler:{type:Boolean,default:void 0},noSwiping:{type:Boolean,default:void 0},noSwipingClass:{type:String,default:void 0},noSwipingSelector:{type:String,default:void 0},passiveListeners:{type:Boolean,default:void 0},containerModifierClass:{type:String,default:void 0},slideClass:{type:String,default:void 0},slideActiveClass:{type:String,default:void 0},slideVisibleClass:{type:String,default:void 0},slideFullyVisibleClass:{type:String,default:void 0},slideBlankClass:{type:String,default:void 0},slideNextClass:{type:String,default:void 0},slidePrevClass:{type:String,default:void 0},wrapperClass:{type:String,default:void 0},lazyPreloaderClass:{type:String,default:void 0},lazyPreloadPrevNext:{type:Number,default:void 0},runCallbacksOnInit:{type:Boolean,default:void 0},observer:{type:Boolean,default:void 0},observeParents:{type:Boolean,default:void 0},observeSlideChildren:{type:Boolean,default:void 0},a11y:{type:[Boolean,Object],default:void 0},autoplay:{type:[Boolean,Object],default:void 0},controller:{type:Object,default:void 0},coverflowEffect:{type:Object,default:void 0},cubeEffect:{type:Object,default:void 0},fadeEffect:{type:Object,default:void 0},flipEffect:{type:Object,default:void 0},creativeEffect:{type:Object,default:void 0},cardsEffect:{type:Object,default:void 0},hashNavigation:{type:[Boolean,Object],default:void 0},history:{type:[Boolean,Object],default:void 0},keyboard:{type:[Boolean,Object],default:void 0},mousewheel:{type:[Boolean,Object],default:void 0},navigation:{type:[Boolean,Object],default:void 0},pagination:{type:[Boolean,Object],default:void 0},parallax:{type:[Boolean,Object],default:void 0},scrollbar:{type:[Boolean,Object],default:void 0},thumbs:{type:Object,default:void 0},virtual:{type:[Boolean,Object],default:void 0},zoom:{type:[Boolean,Object],default:void 0},grid:{type:[Object],default:void 0},freeMode:{type:[Boolean,Object],default:void 0},enabled:{type:Boolean,default:void 0}},emits:["_beforeBreakpoint","_containerClasses","_slideClass","_slideClasses","_swiper","_freeModeNoMomentumRelease","activeIndexChange","afterInit","autoplay","autoplayStart","autoplayStop","autoplayPause","autoplayResume","autoplayTimeLeft","beforeDestroy","beforeInit","beforeLoopFix","beforeResize","beforeSlideChangeStart","beforeTransitionStart","breakpoint","breakpointsBase","changeDirection","click","disable","doubleTap","doubleClick","destroy","enable","fromEdge","hashChange","hashSet","init","keyPress","lock","loopFix","momentumBounce","navigationHide","navigationShow","navigationPrev","navigationNext","observerUpdate","orientationchange","paginationHide","paginationRender","paginationShow","paginationUpdate","progress","reachBeginning","reachEnd","realIndexChange","resize","scroll","scrollbarDragEnd","scrollbarDragMove","scrollbarDragStart","setTransition","setTranslate","slidesUpdated","slideChange","slideChangeTransitionEnd","slideChangeTransitionStart","slideNextTransitionEnd","slideNextTransitionStart","slidePrevTransitionEnd","slidePrevTransitionStart","slideResetTransitionStart","slideResetTransitionEnd","sliderMove","sliderFirstMove","slidesLengthChange","slidesGridLengthChange","snapGridLengthChange","snapIndexChange","swiper","tap","toEdge","touchEnd","touchMove","touchMoveOpposite","touchStart","transitionEnd","transitionStart","unlock","update","virtualUpdate","zoomChange"],setup(n,e){let{slots:t,emit:s}=e;const{tag:i,wrapperTag:r}=n,a=ce("swiper"),o=ce(null),l=ce(!1),c=ce(!1),u=ce(null),d=ce(null),h=ce(null),f={value:[]},p={value:[]},m=ce(null),y=ce(null),g=ce(null),v=ce(null),{params:E,passedParams:T}=zm(n,!1);qc(t,f,p),h.value=T,p.value=f.value;const b=()=>{qc(t,f,p),l.value=!0};E.onAny=function(w){for(var k=arguments.length,R=new Array(k>1?k-1:0),P=1;P<k;P++)R[P-1]=arguments[P];s(w,...R)},Object.assign(E.on,{_beforeBreakpoint:b,_containerClasses(w,k){a.value=k}});const L={...E};if(delete L.wrapperClass,d.value=new of(L),d.value.virtual&&d.value.params.virtual.enabled){d.value.virtual.slides=f.value;const w={cache:!1,slides:f.value,renderExternal:k=>{o.value=k},renderExternalUpdate:!1};wr(d.value.params.virtual,w),wr(d.value.originalParams.virtual,w)}Js(()=>{!c.value&&d.value&&(d.value.emitSlidesClasses(),c.value=!0);const{passedParams:w}=zm(n,!1),k=mC(w,h.value,f.value,p.value,R=>R.props&&R.props.key);h.value=w,(k.length||l.value)&&d.value&&!d.value.destroyed&&fC({swiper:d.value,slides:f.value,passedParams:w,changedParams:k,nextEl:m.value,prevEl:y.value,scrollbarEl:v.value,paginationEl:g.value}),l.value=!1}),qs("swiper",d),_t(o,()=>{Gn(()=>{gC(d.value)})}),vt(()=>{u.value&&(pC({el:u.value,nextEl:m.value,prevEl:y.value,paginationEl:g.value,scrollbarEl:v.value,swiper:d.value},E),s("swiper",d.value))}),Vt(()=>{d.value&&!d.value.destroyed&&d.value.destroy(!0,!1)});function x(w){return E.virtual?yC(d,w,o.value):(w.forEach((k,R)=>{k.props||(k.props={}),k.props.swiperRef=d,k.props.swiperSlideIndex=R}),w)}return()=>{const{slides:w,slots:k}=qc(t,f,p);return zt(i,{ref:u,class:nE(a.value)},[k["container-start"],zt(r,{class:hC(E.wrapperClass)},[k["wrapper-start"],x(w),k["wrapper-end"]]),eE(n)&&[zt("div",{ref:y,class:"swiper-button-prev"}),zt("div",{ref:m,class:"swiper-button-next"})],sE(n)&&zt("div",{ref:v,class:"swiper-scrollbar"}),tE(n)&&zt("div",{ref:g,class:"swiper-pagination"}),k["container-end"]])}}},Sl={name:"SwiperSlide",props:{tag:{type:String,default:"div"},swiperRef:{type:Object,required:!1},swiperSlideIndex:{type:Number,default:void 0,required:!1},zoom:{type:Boolean,default:void 0,required:!1},lazy:{type:Boolean,default:!1,required:!1},virtualIndex:{type:[String,Number],default:void 0}},setup(n,e){let{slots:t}=e,s=!1;const{swiperRef:i}=n,r=ce(null),a=ce("swiper-slide"),o=ce(!1);function l(d,h,f){h===r.value&&(a.value=f)}vt(()=>{!i||!i.value||(i.value.on("_slideClass",l),s=!0)}),Dh(()=>{s||!i||!i.value||(i.value.on("_slideClass",l),s=!0)}),Js(()=>{!r.value||!i||!i.value||(typeof n.swiperSlideIndex<"u"&&(r.value.swiperSlideIndex=n.swiperSlideIndex),i.value.destroyed&&a.value!=="swiper-slide"&&(a.value="swiper-slide"))}),Vt(()=>{!i||!i.value||i.value.off("_slideClass",l)});const c=Ve(()=>({isActive:a.value.indexOf("swiper-slide-active")>=0,isVisible:a.value.indexOf("swiper-slide-visible")>=0,isPrev:a.value.indexOf("swiper-slide-prev")>=0,isNext:a.value.indexOf("swiper-slide-next")>=0}));qs("swiperSlide",c);const u=()=>{o.value=!0};return()=>zt(n.tag,{class:nE(`${a.value}`),ref:r,"data-swiper-slide-index":typeof n.virtualIndex>"u"&&i&&i.value&&i.value.params.loop?n.swiperSlideIndex:n.virtualIndex,onLoadCapture:u},n.zoom?zt("div",{class:"swiper-zoom-container","data-swiper-zoom":typeof n.zoom=="number"?n.zoom:void 0},[t.default&&t.default(c.value),n.lazy&&!o.value&&zt("div",{class:"swiper-lazy-preloader"})]):[t.default&&t.default(c.value),n.lazy&&!o.value&&zt("div",{class:"swiper-lazy-preloader"})])}};function lf(n,e,t,s){return n.params.createElements&&Object.keys(s).forEach(i=>{if(!t[i]&&t.auto===!0){let r=fn(n.el,`.${s[i]}`)[0];r||(r=Ka("div",s[i]),r.className=s[i],n.el.append(r)),t[i]=r,e[i]=r}}),t}function vC(n){let{swiper:e,extendParams:t,on:s,emit:i}=n;t({navigation:{nextEl:null,prevEl:null,hideOnClick:!1,disabledClass:"swiper-button-disabled",hiddenClass:"swiper-button-hidden",lockClass:"swiper-button-lock",navigationDisabledClass:"swiper-navigation-disabled"}}),e.navigation={nextEl:null,prevEl:null};function r(p){let m;return p&&typeof p=="string"&&e.isElement&&(m=e.el.querySelector(p),m)?m:(p&&(typeof p=="string"&&(m=[...document.querySelectorAll(p)]),e.params.uniqueNavElements&&typeof p=="string"&&m.length>1&&e.el.querySelectorAll(p).length===1&&(m=e.el.querySelector(p))),p&&!m?p:m)}function a(p,m){const y=e.params.navigation;p=Dt(p),p.forEach(g=>{g&&(g.classList[m?"add":"remove"](...y.disabledClass.split(" ")),g.tagName==="BUTTON"&&(g.disabled=m),e.params.watchOverflow&&e.enabled&&g.classList[e.isLocked?"add":"remove"](y.lockClass))})}function o(){const{nextEl:p,prevEl:m}=e.navigation;if(e.params.loop){a(m,!1),a(p,!1);return}a(m,e.isBeginning&&!e.params.rewind),a(p,e.isEnd&&!e.params.rewind)}function l(p){p.preventDefault(),!(e.isBeginning&&!e.params.loop&&!e.params.rewind)&&(e.slidePrev(),i("navigationPrev"))}function c(p){p.preventDefault(),!(e.isEnd&&!e.params.loop&&!e.params.rewind)&&(e.slideNext(),i("navigationNext"))}function u(){const p=e.params.navigation;if(e.params.navigation=lf(e,e.originalParams.navigation,e.params.navigation,{nextEl:"swiper-button-next",prevEl:"swiper-button-prev"}),!(p.nextEl||p.prevEl))return;let m=r(p.nextEl),y=r(p.prevEl);Object.assign(e.navigation,{nextEl:m,prevEl:y}),m=Dt(m),y=Dt(y);const g=(v,E)=>{v&&v.addEventListener("click",E==="next"?c:l),!e.enabled&&v&&v.classList.add(...p.lockClass.split(" "))};m.forEach(v=>g(v,"next")),y.forEach(v=>g(v,"prev"))}function d(){let{nextEl:p,prevEl:m}=e.navigation;p=Dt(p),m=Dt(m);const y=(g,v)=>{g.removeEventListener("click",v==="next"?c:l),g.classList.remove(...e.params.navigation.disabledClass.split(" "))};p.forEach(g=>y(g,"next")),m.forEach(g=>y(g,"prev"))}s("init",()=>{e.params.navigation.enabled===!1?f():(u(),o())}),s("toEdge fromEdge lock unlock",()=>{o()}),s("destroy",()=>{d()}),s("enable disable",()=>{let{nextEl:p,prevEl:m}=e.navigation;if(p=Dt(p),m=Dt(m),e.enabled){o();return}[...p,...m].filter(y=>!!y).forEach(y=>y.classList.add(e.params.navigation.lockClass))}),s("click",(p,m)=>{let{nextEl:y,prevEl:g}=e.navigation;y=Dt(y),g=Dt(g);const v=m.target;if(e.params.navigation.hideOnClick&&!g.includes(v)&&!y.includes(v)){if(e.pagination&&e.params.pagination&&e.params.pagination.clickable&&(e.pagination.el===v||e.pagination.el.contains(v)))return;let E;y.length?E=y[0].classList.contains(e.params.navigation.hiddenClass):g.length&&(E=g[0].classList.contains(e.params.navigation.hiddenClass)),i(E===!0?"navigationShow":"navigationHide"),[...y,...g].filter(T=>!!T).forEach(T=>T.classList.toggle(e.params.navigation.hiddenClass))}});const h=()=>{e.el.classList.remove(...e.params.navigation.navigationDisabledClass.split(" ")),u(),o()},f=()=>{e.el.classList.add(...e.params.navigation.navigationDisabledClass.split(" ")),d()};Object.assign(e.navigation,{enable:h,disable:f,update:o,init:u,destroy:d})}function yr(n){return n===void 0&&(n=""),`.${n.trim().replace(/([\.:!+\/])/g,"\\$1").replace(/ /g,".")}`}function EC(n){let{swiper:e,extendParams:t,on:s,emit:i}=n;const r="swiper-pagination";t({pagination:{el:null,bulletElement:"span",clickable:!1,hideOnClick:!1,renderBullet:null,renderProgressbar:null,renderFraction:null,renderCustom:null,progressbarOpposite:!1,type:"bullets",dynamicBullets:!1,dynamicMainBullets:1,formatFractionCurrent:g=>g,formatFractionTotal:g=>g,bulletClass:`${r}-bullet`,bulletActiveClass:`${r}-bullet-active`,modifierClass:`${r}-`,currentClass:`${r}-current`,totalClass:`${r}-total`,hiddenClass:`${r}-hidden`,progressbarFillClass:`${r}-progressbar-fill`,progressbarOppositeClass:`${r}-progressbar-opposite`,clickableClass:`${r}-clickable`,lockClass:`${r}-lock`,horizontalClass:`${r}-horizontal`,verticalClass:`${r}-vertical`,paginationDisabledClass:`${r}-disabled`}}),e.pagination={el:null,bullets:[]};let a,o=0;function l(){return!e.params.pagination.el||!e.pagination.el||Array.isArray(e.pagination.el)&&e.pagination.el.length===0}function c(g,v){const{bulletActiveClass:E}=e.params.pagination;g&&(g=g[`${v==="prev"?"previous":"next"}ElementSibling`],g&&(g.classList.add(`${E}-${v}`),g=g[`${v==="prev"?"previous":"next"}ElementSibling`],g&&g.classList.add(`${E}-${v}-${v}`)))}function u(g){const v=g.target.closest(yr(e.params.pagination.bulletClass));if(!v)return;g.preventDefault();const E=xl(v)*e.params.slidesPerGroup;if(e.params.loop){if(e.realIndex===E)return;e.slideToLoop(E)}else e.slideTo(E)}function d(){const g=e.rtl,v=e.params.pagination;if(l())return;let E=e.pagination.el;E=Dt(E);let T,b;const L=e.virtual&&e.params.virtual.enabled?e.virtual.slides.length:e.slides.length,x=e.params.loop?Math.ceil(L/e.params.slidesPerGroup):e.snapGrid.length;if(e.params.loop?(b=e.previousRealIndex||0,T=e.params.slidesPerGroup>1?Math.floor(e.realIndex/e.params.slidesPerGroup):e.realIndex):typeof e.snapIndex<"u"?(T=e.snapIndex,b=e.previousSnapIndex):(b=e.previousIndex||0,T=e.activeIndex||0),v.type==="bullets"&&e.pagination.bullets&&e.pagination.bullets.length>0){const w=e.pagination.bullets;let k,R,P;if(v.dynamicBullets&&(a=Cd(w[0],e.isHorizontal()?"width":"height",!0),E.forEach(D=>{D.style[e.isHorizontal()?"width":"height"]=`${a*(v.dynamicMainBullets+4)}px`}),v.dynamicMainBullets>1&&b!==void 0&&(o+=T-(b||0),o>v.dynamicMainBullets-1?o=v.dynamicMainBullets-1:o<0&&(o=0)),k=Math.max(T-o,0),R=k+(Math.min(w.length,v.dynamicMainBullets)-1),P=(R+k)/2),w.forEach(D=>{const O=[...["","-next","-next-next","-prev","-prev-prev","-main"].map(N=>`${v.bulletActiveClass}${N}`)].map(N=>typeof N=="string"&&N.includes(" ")?N.split(" "):N).flat();D.classList.remove(...O)}),E.length>1)w.forEach(D=>{const O=xl(D);O===T?D.classList.add(...v.bulletActiveClass.split(" ")):e.isElement&&D.setAttribute("part","bullet"),v.dynamicBullets&&(O>=k&&O<=R&&D.classList.add(...`${v.bulletActiveClass}-main`.split(" ")),O===k&&c(D,"prev"),O===R&&c(D,"next"))});else{const D=w[T];if(D&&D.classList.add(...v.bulletActiveClass.split(" ")),e.isElement&&w.forEach((O,N)=>{O.setAttribute("part",N===T?"bullet-active":"bullet")}),v.dynamicBullets){const O=w[k],N=w[R];for(let $=k;$<=R;$+=1)w[$]&&w[$].classList.add(...`${v.bulletActiveClass}-main`.split(" "));c(O,"prev"),c(N,"next")}}if(v.dynamicBullets){const D=Math.min(w.length,v.dynamicMainBullets+4),O=(a*D-a)/2-P*a,N=g?"right":"left";w.forEach($=>{$.style[e.isHorizontal()?N:"top"]=`${O}px`})}}E.forEach((w,k)=>{if(v.type==="fraction"&&(w.querySelectorAll(yr(v.currentClass)).forEach(R=>{R.textContent=v.formatFractionCurrent(T+1)}),w.querySelectorAll(yr(v.totalClass)).forEach(R=>{R.textContent=v.formatFractionTotal(x)})),v.type==="progressbar"){let R;v.progressbarOpposite?R=e.isHorizontal()?"vertical":"horizontal":R=e.isHorizontal()?"horizontal":"vertical";const P=(T+1)/x;let D=1,O=1;R==="horizontal"?D=P:O=P,w.querySelectorAll(yr(v.progressbarFillClass)).forEach(N=>{N.style.transform=`translate3d(0,0,0) scaleX(${D}) scaleY(${O})`,N.style.transitionDuration=`${e.params.speed}ms`})}v.type==="custom"&&v.renderCustom?(w.innerHTML=v.renderCustom(e,T+1,x),k===0&&i("paginationRender",w)):(k===0&&i("paginationRender",w),i("paginationUpdate",w)),e.params.watchOverflow&&e.enabled&&w.classList[e.isLocked?"add":"remove"](v.lockClass)})}function h(){const g=e.params.pagination;if(l())return;const v=e.virtual&&e.params.virtual.enabled?e.virtual.slides.length:e.grid&&e.params.grid.rows>1?e.slides.length/Math.ceil(e.params.grid.rows):e.slides.length;let E=e.pagination.el;E=Dt(E);let T="";if(g.type==="bullets"){let b=e.params.loop?Math.ceil(v/e.params.slidesPerGroup):e.snapGrid.length;e.params.freeMode&&e.params.freeMode.enabled&&b>v&&(b=v);for(let L=0;L<b;L+=1)g.renderBullet?T+=g.renderBullet.call(e,L,g.bulletClass):T+=`<${g.bulletElement} ${e.isElement?'part="bullet"':""} class="${g.bulletClass}"></${g.bulletElement}>`}g.type==="fraction"&&(g.renderFraction?T=g.renderFraction.call(e,g.currentClass,g.totalClass):T=`<span class="${g.currentClass}"></span> / <span class="${g.totalClass}"></span>`),g.type==="progressbar"&&(g.renderProgressbar?T=g.renderProgressbar.call(e,g.progressbarFillClass):T=`<span class="${g.progressbarFillClass}"></span>`),e.pagination.bullets=[],E.forEach(b=>{g.type!=="custom"&&(b.innerHTML=T||""),g.type==="bullets"&&e.pagination.bullets.push(...b.querySelectorAll(yr(g.bulletClass)))}),g.type!=="custom"&&i("paginationRender",E[0])}function f(){e.params.pagination=lf(e,e.originalParams.pagination,e.params.pagination,{el:"swiper-pagination"});const g=e.params.pagination;if(!g.el)return;let v;typeof g.el=="string"&&e.isElement&&(v=e.el.querySelector(g.el)),!v&&typeof g.el=="string"&&(v=[...document.querySelectorAll(g.el)]),v||(v=g.el),!(!v||v.length===0)&&(e.params.uniqueNavElements&&typeof g.el=="string"&&Array.isArray(v)&&v.length>1&&(v=[...e.el.querySelectorAll(g.el)],v.length>1&&(v=v.filter(E=>Yv(E,".swiper")[0]===e.el)[0])),Array.isArray(v)&&v.length===1&&(v=v[0]),Object.assign(e.pagination,{el:v}),v=Dt(v),v.forEach(E=>{g.type==="bullets"&&g.clickable&&E.classList.add(...(g.clickableClass||"").split(" ")),E.classList.add(g.modifierClass+g.type),E.classList.add(e.isHorizontal()?g.horizontalClass:g.verticalClass),g.type==="bullets"&&g.dynamicBullets&&(E.classList.add(`${g.modifierClass}${g.type}-dynamic`),o=0,g.dynamicMainBullets<1&&(g.dynamicMainBullets=1)),g.type==="progressbar"&&g.progressbarOpposite&&E.classList.add(g.progressbarOppositeClass),g.clickable&&E.addEventListener("click",u),e.enabled||E.classList.add(g.lockClass)}))}function p(){const g=e.params.pagination;if(l())return;let v=e.pagination.el;v&&(v=Dt(v),v.forEach(E=>{E.classList.remove(g.hiddenClass),E.classList.remove(g.modifierClass+g.type),E.classList.remove(e.isHorizontal()?g.horizontalClass:g.verticalClass),g.clickable&&(E.classList.remove(...(g.clickableClass||"").split(" ")),E.removeEventListener("click",u))})),e.pagination.bullets&&e.pagination.bullets.forEach(E=>E.classList.remove(...g.bulletActiveClass.split(" ")))}s("changeDirection",()=>{if(!e.pagination||!e.pagination.el)return;const g=e.params.pagination;let{el:v}=e.pagination;v=Dt(v),v.forEach(E=>{E.classList.remove(g.horizontalClass,g.verticalClass),E.classList.add(e.isHorizontal()?g.horizontalClass:g.verticalClass)})}),s("init",()=>{e.params.pagination.enabled===!1?y():(f(),h(),d())}),s("activeIndexChange",()=>{typeof e.snapIndex>"u"&&d()}),s("snapIndexChange",()=>{d()}),s("snapGridLengthChange",()=>{h(),d()}),s("destroy",()=>{p()}),s("enable disable",()=>{let{el:g}=e.pagination;g&&(g=Dt(g),g.forEach(v=>v.classList[e.enabled?"remove":"add"](e.params.pagination.lockClass)))}),s("lock unlock",()=>{d()}),s("click",(g,v)=>{const E=v.target,T=Dt(e.pagination.el);if(e.params.pagination.el&&e.params.pagination.hideOnClick&&T&&T.length>0&&!E.classList.contains(e.params.pagination.bulletClass)){if(e.navigation&&(e.navigation.nextEl&&E===e.navigation.nextEl||e.navigation.prevEl&&E===e.navigation.prevEl))return;const b=T[0].classList.contains(e.params.pagination.hiddenClass);i(b===!0?"paginationShow":"paginationHide"),T.forEach(L=>L.classList.toggle(e.params.pagination.hiddenClass))}});const m=()=>{e.el.classList.remove(e.params.pagination.paginationDisabledClass);let{el:g}=e.pagination;g&&(g=Dt(g),g.forEach(v=>v.classList.remove(e.params.pagination.paginationDisabledClass))),f(),h(),d()},y=()=>{e.el.classList.add(e.params.pagination.paginationDisabledClass);let{el:g}=e.pagination;g&&(g=Dt(g),g.forEach(v=>v.classList.add(e.params.pagination.paginationDisabledClass))),p()};Object.assign(e.pagination,{enable:m,disable:y,render:h,update:d,init:f,destroy:p})}function TC(n){let{swiper:e,extendParams:t,on:s,emit:i}=n;const r=Xs();let a=!1,o=null,l=null,c,u,d,h;t({scrollbar:{el:null,dragSize:"auto",hide:!1,draggable:!1,snapOnRelease:!0,lockClass:"swiper-scrollbar-lock",dragClass:"swiper-scrollbar-drag",scrollbarDisabledClass:"swiper-scrollbar-disabled",horizontalClass:"swiper-scrollbar-horizontal",verticalClass:"swiper-scrollbar-vertical"}}),e.scrollbar={el:null,dragEl:null};function f(){if(!e.params.scrollbar.el||!e.scrollbar.el)return;const{scrollbar:D,rtlTranslate:O}=e,{dragEl:N,el:$}=D,K=e.params.scrollbar,ee=e.params.loop?e.progressLoop:e.progress;let V=u,U=(d-u)*ee;O?(U=-U,U>0?(V=u-U,U=0):-U+u>d&&(V=d+U)):U<0?(V=u+U,U=0):U+u>d&&(V=d-U),e.isHorizontal()?(N.style.transform=`translate3d(${U}px, 0, 0)`,N.style.width=`${V}px`):(N.style.transform=`translate3d(0px, ${U}px, 0)`,N.style.height=`${V}px`),K.hide&&(clearTimeout(o),$.style.opacity=1,o=setTimeout(()=>{$.style.opacity=0,$.style.transitionDuration="400ms"},1e3))}function p(D){!e.params.scrollbar.el||!e.scrollbar.el||(e.scrollbar.dragEl.style.transitionDuration=`${D}ms`)}function m(){if(!e.params.scrollbar.el||!e.scrollbar.el)return;const{scrollbar:D}=e,{dragEl:O,el:N}=D;O.style.width="",O.style.height="",d=e.isHorizontal()?N.offsetWidth:N.offsetHeight,h=e.size/(e.virtualSize+e.params.slidesOffsetBefore-(e.params.centeredSlides?e.snapGrid[0]:0)),e.params.scrollbar.dragSize==="auto"?u=d*h:u=parseInt(e.params.scrollbar.dragSize,10),e.isHorizontal()?O.style.width=`${u}px`:O.style.height=`${u}px`,h>=1?N.style.display="none":N.style.display="",e.params.scrollbar.hide&&(N.style.opacity=0),e.params.watchOverflow&&e.enabled&&D.el.classList[e.isLocked?"add":"remove"](e.params.scrollbar.lockClass)}function y(D){return e.isHorizontal()?D.clientX:D.clientY}function g(D){const{scrollbar:O,rtlTranslate:N}=e,{el:$}=O;let K;K=(y(D)-ZR($)[e.isHorizontal()?"left":"top"]-(c!==null?c:u/2))/(d-u),K=Math.max(Math.min(K,1),0),N&&(K=1-K);const ee=e.minTranslate()+(e.maxTranslate()-e.minTranslate())*K;e.updateProgress(ee),e.setTranslate(ee),e.updateActiveIndex(),e.updateSlidesClasses()}function v(D){const O=e.params.scrollbar,{scrollbar:N,wrapperEl:$}=e,{el:K,dragEl:ee}=N;a=!0,c=D.target===ee?y(D)-D.target.getBoundingClientRect()[e.isHorizontal()?"left":"top"]:null,D.preventDefault(),D.stopPropagation(),$.style.transitionDuration="100ms",ee.style.transitionDuration="100ms",g(D),clearTimeout(l),K.style.transitionDuration="0ms",O.hide&&(K.style.opacity=1),e.params.cssMode&&(e.wrapperEl.style["scroll-snap-type"]="none"),i("scrollbarDragStart",D)}function E(D){const{scrollbar:O,wrapperEl:N}=e,{el:$,dragEl:K}=O;a&&(D.preventDefault?D.preventDefault():D.returnValue=!1,g(D),N.style.transitionDuration="0ms",$.style.transitionDuration="0ms",K.style.transitionDuration="0ms",i("scrollbarDragMove",D))}function T(D){const O=e.params.scrollbar,{scrollbar:N,wrapperEl:$}=e,{el:K}=N;a&&(a=!1,e.params.cssMode&&(e.wrapperEl.style["scroll-snap-type"]="",$.style.transitionDuration=""),O.hide&&(clearTimeout(l),l=El(()=>{K.style.opacity=0,K.style.transitionDuration="400ms"},1e3)),i("scrollbarDragEnd",D),O.snapOnRelease&&e.slideToClosest())}function b(D){const{scrollbar:O,params:N}=e,$=O.el;if(!$)return;const K=$,ee=N.passiveListeners?{passive:!1,capture:!1}:!1,V=N.passiveListeners?{passive:!0,capture:!1}:!1;if(!K)return;const U=D==="on"?"addEventListener":"removeEventListener";K[U]("pointerdown",v,ee),r[U]("pointermove",E,ee),r[U]("pointerup",T,V)}function L(){!e.params.scrollbar.el||!e.scrollbar.el||b("on")}function x(){!e.params.scrollbar.el||!e.scrollbar.el||b("off")}function w(){const{scrollbar:D,el:O}=e;e.params.scrollbar=lf(e,e.originalParams.scrollbar,e.params.scrollbar,{el:"swiper-scrollbar"});const N=e.params.scrollbar;if(!N.el)return;let $;if(typeof N.el=="string"&&e.isElement&&($=e.el.querySelector(N.el)),!$&&typeof N.el=="string"){if($=r.querySelectorAll(N.el),!$.length)return}else $||($=N.el);e.params.uniqueNavElements&&typeof N.el=="string"&&$.length>1&&O.querySelectorAll(N.el).length===1&&($=O.querySelector(N.el)),$.length>0&&($=$[0]),$.classList.add(e.isHorizontal()?N.horizontalClass:N.verticalClass);let K;$&&(K=$.querySelector(yr(e.params.scrollbar.dragClass)),K||(K=Ka("div",e.params.scrollbar.dragClass),$.append(K))),Object.assign(D,{el:$,dragEl:K}),N.draggable&&L(),$&&$.classList[e.enabled?"remove":"add"](...si(e.params.scrollbar.lockClass))}function k(){const D=e.params.scrollbar,O=e.scrollbar.el;O&&O.classList.remove(...si(e.isHorizontal()?D.horizontalClass:D.verticalClass)),x()}s("changeDirection",()=>{if(!e.scrollbar||!e.scrollbar.el)return;const D=e.params.scrollbar;let{el:O}=e.scrollbar;O=Dt(O),O.forEach(N=>{N.classList.remove(D.horizontalClass,D.verticalClass),N.classList.add(e.isHorizontal()?D.horizontalClass:D.verticalClass)})}),s("init",()=>{e.params.scrollbar.enabled===!1?P():(w(),m(),f())}),s("update resize observerUpdate lock unlock changeDirection",()=>{m()}),s("setTranslate",()=>{f()}),s("setTransition",(D,O)=>{p(O)}),s("enable disable",()=>{const{el:D}=e.scrollbar;D&&D.classList[e.enabled?"remove":"add"](...si(e.params.scrollbar.lockClass))}),s("destroy",()=>{k()});const R=()=>{e.el.classList.remove(...si(e.params.scrollbar.scrollbarDisabledClass)),e.scrollbar.el&&e.scrollbar.el.classList.remove(...si(e.params.scrollbar.scrollbarDisabledClass)),w(),m(),f()},P=()=>{e.el.classList.add(...si(e.params.scrollbar.scrollbarDisabledClass)),e.scrollbar.el&&e.scrollbar.el.classList.add(...si(e.params.scrollbar.scrollbarDisabledClass)),k()};Object.assign(e.scrollbar,{enable:R,disable:P,updateSize:m,setTranslate:f,init:w,destroy:k})}function bC(n){let{swiper:e,extendParams:t,on:s,emit:i,params:r}=n;e.autoplay={running:!1,paused:!1,timeLeft:0},t({autoplay:{enabled:!1,delay:3e3,waitForTransition:!0,disableOnInteraction:!1,stopOnLastSlide:!1,reverseDirection:!1,pauseOnMouseEnter:!1}});let a,o,l=r&&r.autoplay?r.autoplay.delay:3e3,c=r&&r.autoplay?r.autoplay.delay:3e3,u,d=new Date().getTime(),h,f,p,m,y,g,v;function E(V){!e||e.destroyed||!e.wrapperEl||V.target===e.wrapperEl&&(e.wrapperEl.removeEventListener("transitionend",E),!v&&R())}const T=()=>{if(e.destroyed||!e.autoplay.running)return;e.autoplay.paused?h=!0:h&&(c=u,h=!1);const V=e.autoplay.paused?u:d+c-new Date().getTime();e.autoplay.timeLeft=V,i("autoplayTimeLeft",V,V/l),o=requestAnimationFrame(()=>{T()})},b=()=>{let V;return e.virtual&&e.params.virtual.enabled?V=e.slides.filter(B=>B.classList.contains("swiper-slide-active"))[0]:V=e.slides[e.activeIndex],V?parseInt(V.getAttribute("data-swiper-autoplay"),10):void 0},L=V=>{if(e.destroyed||!e.autoplay.running)return;cancelAnimationFrame(o),T();let U=typeof V>"u"?e.params.autoplay.delay:V;l=e.params.autoplay.delay,c=e.params.autoplay.delay;const B=b();!Number.isNaN(B)&&B>0&&typeof V>"u"&&(U=B,l=B,c=B),u=U;const j=e.params.speed,Y=()=>{!e||e.destroyed||(e.params.autoplay.reverseDirection?!e.isBeginning||e.params.loop||e.params.rewind?(e.slidePrev(j,!0,!0),i("autoplay")):e.params.autoplay.stopOnLastSlide||(e.slideTo(e.slides.length-1,j,!0,!0),i("autoplay")):!e.isEnd||e.params.loop||e.params.rewind?(e.slideNext(j,!0,!0),i("autoplay")):e.params.autoplay.stopOnLastSlide||(e.slideTo(0,j,!0,!0),i("autoplay")),e.params.cssMode&&(d=new Date().getTime(),requestAnimationFrame(()=>{L()})))};return U>0?(clearTimeout(a),a=setTimeout(()=>{Y()},U)):requestAnimationFrame(()=>{Y()}),U},x=()=>{d=new Date().getTime(),e.autoplay.running=!0,L(),i("autoplayStart")},w=()=>{e.autoplay.running=!1,clearTimeout(a),cancelAnimationFrame(o),i("autoplayStop")},k=(V,U)=>{if(e.destroyed||!e.autoplay.running)return;clearTimeout(a),V||(g=!0);const B=()=>{i("autoplayPause"),e.params.autoplay.waitForTransition?e.wrapperEl.addEventListener("transitionend",E):R()};if(e.autoplay.paused=!0,U){y&&(u=e.params.autoplay.delay),y=!1,B();return}u=(u||e.params.autoplay.delay)-(new Date().getTime()-d),!(e.isEnd&&u<0&&!e.params.loop)&&(u<0&&(u=0),B())},R=()=>{e.isEnd&&u<0&&!e.params.loop||e.destroyed||!e.autoplay.running||(d=new Date().getTime(),g?(g=!1,L(u)):L(),e.autoplay.paused=!1,i("autoplayResume"))},P=()=>{if(e.destroyed||!e.autoplay.running)return;const V=Xs();V.visibilityState==="hidden"&&(g=!0,k(!0)),V.visibilityState==="visible"&&R()},D=V=>{V.pointerType==="mouse"&&(g=!0,v=!0,!(e.animating||e.autoplay.paused)&&k(!0))},O=V=>{V.pointerType==="mouse"&&(v=!1,e.autoplay.paused&&R())},N=()=>{e.params.autoplay.pauseOnMouseEnter&&(e.el.addEventListener("pointerenter",D),e.el.addEventListener("pointerleave",O))},$=()=>{e.el.removeEventListener("pointerenter",D),e.el.removeEventListener("pointerleave",O)},K=()=>{Xs().addEventListener("visibilitychange",P)},ee=()=>{Xs().removeEventListener("visibilitychange",P)};s("init",()=>{e.params.autoplay.enabled&&(N(),K(),x())}),s("destroy",()=>{$(),ee(),e.autoplay.running&&w()}),s("_freeModeStaticRelease",()=>{(p||g)&&R()}),s("_freeModeNoMomentumRelease",()=>{e.params.autoplay.disableOnInteraction?w():k(!0,!0)}),s("beforeTransitionStart",(V,U,B)=>{e.destroyed||!e.autoplay.running||(B||!e.params.autoplay.disableOnInteraction?k(!0,!0):w())}),s("sliderFirstMove",()=>{if(!(e.destroyed||!e.autoplay.running)){if(e.params.autoplay.disableOnInteraction){w();return}f=!0,p=!1,g=!1,m=setTimeout(()=>{g=!0,p=!0,k(!0)},200)}}),s("touchEnd",()=>{if(!(e.destroyed||!e.autoplay.running||!f)){if(clearTimeout(m),clearTimeout(a),e.params.autoplay.disableOnInteraction){p=!1,f=!1;return}p&&e.params.cssMode&&R(),p=!1,f=!1}}),s("slideChange",()=>{e.destroyed||!e.autoplay.running||(y=!0)}),Object.assign(e.autoplay,{start:x,stop:w,pause:k,resume:R})}const xC={class:"sm:pt-2"},SC=["src"],_C=["src"],AC=["onClick"],LC=["onClick"],wC=Ze({__name:"Banner",setup(n){const e=ce(),t=ce(),s=ce({nextEl:".swiper-button-next",prevEl:".swiper-button-prev"}),i=[bC,EC,vC,TC],r=()=>{},a=()=>{},o=()=>{},l=()=>{window.innerWidth<=768?(e.value=KR,t.value=zR):(e.value=HR,t.value=WR)};return vt(()=>{Tn.replace(),l(),window.addEventListener("resize",l)}),Js(()=>{Tn.replace()}),Vt(()=>{window.removeEventListener("resize",l)}),(c,u)=>(ve(),Te("section",xC,[fe(De(Pd),{modules:i,loop:!0,"slides-per-view":1,"space-between":50,autoplay:{delay:4e3,disableOnInteraction:!1},navigation:s.value,pagination:{clickable:!0},scrollbar:{draggable:!1},class:"swiperBox",onSlideChange:o},{default:Pt(()=>[fe(De(Sl),null,{default:Pt(()=>[_("img",{src:e.value},null,8,SC)]),_:1}),fe(De(Sl),null,{default:Pt(()=>[_("img",{src:t.value},null,8,_C)]),_:1}),_("div",{class:"swiper-button-prev",onClick:Ua(r,["stop"])},null,8,AC),_("div",{class:"swiper-button-next",onClick:Ua(a,["stop"])},null,8,LC)]),_:1},8,["navigation"])]))}}),RC=At(wC,[["__scopeId","data-v-750c36d0"]]),IC="/PersonalWeb/assets/personal_profile-bc73fb0a.jpg",CC="/PersonalWeb/assets/aboutme_logo-80bceded.svg",DC="/PersonalWeb/assets/education_logo-bf6abe7e.svg",iE="/PersonalWeb/assets/ncku_logo-ecc8dc86.svg",kC="/PersonalWeb/assets/ksu_logo-272a0ca1.svg",PC="/PersonalWeb/assets/nknu_logo-0fe56516.svg",OC="/PersonalWeb/assets/experience_logo-6f685c08.svg",MC="/PersonalWeb/assets/auo_logo-043cf9e6.svg",FC="/PersonalWeb/assets/25togo_logo-65d204a3.svg",St=n=>(Ls("data-v-ab330c31"),n=n(),ws(),n),NC={class:"container mx-auto custom-font"},BC={class:"text-left ml-18"},UC={class:"block sm:flex sm:gap-10 mt-10 sm:mt-20"},$C={class:"w-full sm:w-1/4 mb-7 sm:mb-0"},jC=St(()=>_("div",{class:"flex justify-center sm:block mb-10","data-aos":"fade-up"},[_("a",{download:"SeanYXSu Resume English.pdf",href:"../../assets/files/ResumeEnglish.pdf",class:"flex justify-center items-center w-36 sm:w-48 mt-12 mb-6 sm:mb-0 text-lg border border-gray-500 dark:border-ternary-dark py-2.5 sm:py-3 shadow-lg rounded-lg bg-white focus:ring-1 focus:ring-indigo-900 hover:bg-gray-500 text-gray-500 hover:text-white duration-500","aria-label":"Download Resume"},[_("i",{"data-feather":"arrow-down-circle",class:"ml-0 sm:ml-1 mr-2 sm:mr-3 w-5 sm:w-6 duration-100"}),_("span",{class:"text-sm sm:text-lg font-general-medium duration-100"},"Download CV")])],-1)),GC=St(()=>_("div",{class:"flex items-center mb-4","data-aos":"fade-left"},[_("img",{class:"border-none",src:CC}),_("p",{class:"text-2xl font-bold ml-4"},"ABOUT ME")],-1)),VC={class:"text-xl mb-8 ml-12","data-aos":"fade-up"},HC=St(()=>_("div",{class:"flex items-center mb-4","data-aos":"fade-left"},[_("img",{class:"border-none",src:DC}),_("p",{class:"text-2xl font-bold ml-4"},"EDUCATION")],-1)),KC={class:"mb-4","data-aos":"fade-up"},WC={class:"flex items-center mb-2"},zC=St(()=>_("img",{class:"border-none",src:iE},null,-1)),YC={class:"text-2x1 font-semibold ml-3"},qC={class:"flex items-center text-xl ml-12 mb-1"},XC=St(()=>_("p",{class:"ml-1"},"•",-1)),QC={class:"ml-2"},JC={class:"flex items-center text-xl ml-12 mb-1"},ZC=St(()=>_("p",{class:"ml-1"},"•",-1)),eD={class:"ml-2"},tD={class:"mb-4","data-aos":"fade-up"},sD={class:"flex items-center mb-2"},nD=St(()=>_("img",{class:"border-none",src:kC},null,-1)),iD={class:"text-2x1 font-semibold ml-3"},rD={class:"flex items-center text-xl ml-12 mb-1"},aD=St(()=>_("p",{class:"ml-1"},"•",-1)),oD={class:"ml-2"},lD={class:"flex items-center text-xl ml-12 mb-1"},cD=St(()=>_("p",{class:"ml-1"},"•",-1)),uD={class:"ml-2"},dD={class:"mb-8","data-aos":"fade-up"},hD={class:"flex items-center mb-2"},fD=St(()=>_("img",{class:"border-none",src:PC},null,-1)),pD={class:"text-2x1 font-semibold ml-3"},mD={class:"flex items-center text-xl ml-12 mb-1"},gD=St(()=>_("p",{class:"ml-1"},"•",-1)),yD={class:"ml-2"},vD={class:"flex items-center text-xl ml-12 mb-1"},ED=St(()=>_("p",{class:"ml-1"},"•",-1)),TD={class:"ml-2"},bD=St(()=>_("div",{class:"flex items-center mb-4","data-aos":"fade-left"},[_("img",{class:"border-none",src:OC}),_("p",{class:"text-2xl font-bold ml-4"},"EXPERIENCE")],-1)),xD={class:"mb-4","data-aos":"fade-up"},SD={class:"flex items-center mb-2"},_D=St(()=>_("img",{class:"border-none",src:MC},null,-1)),AD={class:"text-2x1 font-semibold ml-3"},LD={class:"flex items-center text-xl ml-12 mb-1"},wD=St(()=>_("p",{class:"ml-1"},"•",-1)),RD={class:"ml-2"},ID={class:"flex items-center text-xl ml-12 mb-1"},CD=St(()=>_("p",{class:"ml-1"},"•",-1)),DD={class:"ml-2"},kD={class:"flex items-center text-xl ml-12 mb-1"},PD=St(()=>_("p",{class:"ml-1"},"•",-1)),OD={class:"ml-2"},MD={class:"mb-4","data-aos":"fade-up"},FD={class:"flex items-center mb-2"},ND=St(()=>_("img",{class:"border-none",src:iE},null,-1)),BD={class:"text-2x1 font-semibold ml-3"},UD={class:"flex items-center text-xl ml-12 mb-1"},$D=St(()=>_("p",{class:"ml-1"},"•",-1)),jD={class:"ml-2"},GD={class:"flex items-center text-xl ml-12 mb-1"},VD=St(()=>_("p",{class:"ml-1"},"•",-1)),HD={class:"ml-2"},KD={class:"mb-4","data-aos":"fade-up"},WD={class:"flex items-center mb-2"},zD=St(()=>_("img",{class:"border-none",src:FC},null,-1)),YD={class:"text-2x1 font-semibold ml-3"},qD={class:"flex items-center text-xl ml-12 mb-1"},XD=St(()=>_("p",{class:"ml-1"},"•",-1)),QD={class:"ml-2"},JD={class:"flex items-center text-xl ml-12 mb-1"},ZD=St(()=>_("p",{class:"ml-1"},"•",-1)),ek={class:"ml-2"},tk=Ze({__name:"About",setup(n){const e=ce({}),t=ce({}),s=()=>{window.innerWidth<=768?(e.value={width:"90%"},t.value={fontSize:"2.25rem"}):(e.value={width:"100%"},t.value={fontSize:"3.75rem"})};return vt(()=>{Tn.replace(),s(),window.addEventListener("resize",s)}),Js(()=>{Tn.replace()}),Vt(()=>{window.removeEventListener("resize",s)}),(i,r)=>(ve(),Te("div",NC,[_("div",BC,[_("h1",{class:"font-bold ml-4","data-aos":"fade-left",style:de(t.value)},he(i.$t("about-title")),5),_("section",UC,[_("div",$C,[_("div",null,[_("img",{class:"border-none rounded-xl content-center",style:de(e.value),src:IC,"data-aos":"fade-up"},null,4)]),jC]),_("div",{class:"w-full sm:w-3/4 text-left max-w-4xl ml-4 content-center",style:de(e.value)},[GC,_("p",VC,he(i.$t("about-content-aboutme")),1),HC,_("div",KC,[_("div",WC,[zC,_("p",YC,he(i.$t("about-content-education-01")),1)]),_("div",qC,[XC,_("p",QC,he(i.$t("about-content-education-01-content-01")),1)]),_("div",JC,[ZC,_("p",eD,he(i.$t("about-content-education-01-content-02")),1)])]),_("div",tD,[_("div",sD,[nD,_("p",iD,he(i.$t("about-content-education-02")),1)]),_("div",rD,[aD,_("p",oD,he(i.$t("about-content-education-02-content-01")),1)]),_("div",lD,[cD,_("p",uD,he(i.$t("about-content-education-02-content-02")),1)])]),_("div",dD,[_("div",hD,[fD,_("p",pD,he(i.$t("about-content-education-03")),1)]),_("div",mD,[gD,_("p",yD,he(i.$t("about-content-education-03-content-01")),1)]),_("div",vD,[ED,_("p",TD,he(i.$t("about-content-education-03-content-02")),1)])]),bD,_("div",xD,[_("div",SD,[_D,_("p",AD,he(i.$t("about-content-experience-01")),1)]),_("div",LD,[wD,_("p",RD,he(i.$t("about-content-experience-01-content-01")),1)]),_("div",ID,[CD,_("p",DD,he(i.$t("about-content-experience-01-content-02")),1)]),_("div",kD,[PD,_("p",OD,he(i.$t("about-content-experience-01-content-03")),1)])]),_("div",MD,[_("div",FD,[ND,_("p",BD,he(i.$t("about-content-experience-02")),1)]),_("div",UD,[$D,_("p",jD,he(i.$t("about-content-experience-02-content-01")),1)]),_("div",GD,[VD,_("p",HD,he(i.$t("about-content-experience-02-content-02")),1)])]),_("div",KD,[_("div",WD,[zD,_("p",YD,he(i.$t("about-content-experience-03")),1)]),_("div",qD,[XD,_("p",QD,he(i.$t("about-content-experience-03-content-01")),1)]),_("div",JD,[ZD,_("p",ek,he(i.$t("about-content-experience-03-content-02")),1)])])],4)])])]))}}),rE=At(tk,[["__scopeId","data-v-ab330c31"]]),sk="/PersonalWeb/assets/projects_fab_ar-be8931e6.svg",nk="/PersonalWeb/assets/projects_kick-ec4aba86.svg",ik="/PersonalWeb/assets/projects_vbike-b411a0b7.svg",rk="/PersonalWeb/assets/projects_kuchipa-162a1901.svg",ak="/PersonalWeb/assets/projects_doddle-2f92fc36.svg",ok="/PersonalWeb/assets/projects_metahuman-2f81e0ed.svg",lk=[{id:1,title:"FabAR",category:["MR"],skill:["Unity","Hololens","MRTK"],url:"/PersonalWeb/projects/fabAR",imgUrl:sk},{id:2,title:"Doddle",category:["HCI","AI"],skill:["Unity","Stable Diffusion","UIUX"],url:"/PersonalWeb/projects/doddle",imgUrl:ak},{id:3,title:"MetaHuman",category:["HCI"],skill:["Unreal","Azure"],url:"/PersonalWeb/projects/metaHuman",imgUrl:ok},{id:4,title:"VBike",category:["VR","HCI"],skill:["Unity","GLSL/HLSL","UIUX","Arduino"],url:"/PersonalWeb/projects/vBike",imgUrl:ik},{id:5,title:"Kuchipa",category:["HCI"],skill:["Unity","Mediapipe","OpenCV"],url:"/PersonalWeb/projects/kuchipa",imgUrl:rk},{id:6,title:"Kick",category:["Product Design"],skill:["3D","Arduino"],url:"/PersonalWeb/projects/kick",imgUrl:nk}],ck=[{skill:"Unity",color:"#3399ff"},{skill:"Hololens",color:"#1D3BA8"},{skill:"MRTK",color:"#7d3fb2"},{skill:"Stable Diffusion",color:"#7d3fb2"},{skill:"Unreal",color:"#8354D2"},{skill:"Azure",color:"#33ccff"},{skill:"UIUX",color:"#F24E1E"},{skill:"Vue3",color:"#3399ff"},{skill:"3D",color:"#ffcc00"},{skill:"Arduino",color:"#00979C"},{skill:"GLSL/HLSL",color:"#7d3fb2"},{skill:"Mediapipe",color:"#8354D2"},{skill:"OpenCV",color:"#7d3fb2"}],uk=[{category:"MR",color:"#1ABCFE"},{category:"HCI",color:"#0ACF83"},{category:"AI",color:"#A259FF"},{category:"VR",color:"#1ABCFE"},{category:"Product Design",color:"#FF7262"},{category:"Web",color:"#3399ff"}],dk=n=>(Ls("data-v-27af7fbe"),n=n(),ws(),n),hk={class:"container mx-auto custom-font"},fk={class:"text-left ml-18"},pk={class:"container mx-auto"},mk={class:"block sm:flex sm:gap-10 mt-10 sm:mt-20"},gk={class:"filter mt-4"},yk=dk(()=>_("div",{class:"flex justify-between"},[_("div",{class:"flex justify-between"},[_("span",{class:""},[_("i",{class:"text-primary"})])])],-1)),vk={class:"container mx-auto","data-aos":"fade-up"},Ek={class:"flex justify-center"},Tk={class:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4"},bk={class:"flex flex-col items-center"},xk=["src"],Sk={class:"text-center px-4 py-6 mr-4"},_k={class:"font-bold text-3xl text-dark mb-4"},Ak=Ze({__name:"Projects",setup(n){const e=ce({}),t=ce({}),s=a=>{const o=ck.find(l=>l.skill===a);return o?o.color:"#666"},i=a=>{const o=uk.find(l=>l.category===a);return o?o.color:"#666"},r=()=>{window.innerWidth<=768?(e.value={width:"90%"},t.value={fontSize:"2.25rem"}):(e.value={width:"60%"},t.value={fontSize:"3.75rem"})};return vt(()=>{r(),window.addEventListener("resize",r)}),Vt(()=>{window.removeEventListener("resize",r)}),(a,o)=>{const l=ec("router-link");return ve(),Te("div",hk,[_("div",fk,[_("h1",{class:"font-bold ml-4","data-aos":"fade-left",style:de(t.value)},he(a.$t("project-title")),5),_("div",pk,[_("section",mk,[_("div",gk,[yk,_("div",vk,[_("div",Ek,[_("div",Tk,[(ve(!0),Te(We,null,As(De(lk),c=>(ve(),Te("div",{class:"projectGallery",key:c.id},[fe(l,{to:c.url,class:"block cursor-pointer mb-4","aria-label":""},{default:Pt(()=>[_("div",bk,[_("div",null,[_("img",{class:"border-none img-center",src:c.imgUrl},null,8,xk)]),_("div",Sk,[_("p",_k,he(c.title),1),(ve(!0),Te(We,null,As(c.category,u=>(ve(),Te("p",{key:u,style:de({backgroundColor:i(u)}),class:"inline-block bg-black text-lg text-white rounded-full py-2 px-4 m-1"},he(u),5))),128)),(ve(!0),Te(We,null,As(c.skill,u=>(ve(),Te("p",{key:u,style:de({backgroundColor:s(u)}),class:"inline-block bg-black text-lg text-white rounded-full py-2 px-4 m-1"},he(u),5))),128))])])]),_:2},1032,["to"])]))),128))])])])])])])])])}}}),aE=At(Ak,[["__scopeId","data-v-27af7fbe"]]);(function(){try{if(typeof document<"u"){var n=document.createElement("style");n.appendChild(document.createTextNode(".mapdiv[data-v-f29e129b]{width:100%;height:100%}.custom-control-wrapper[data-v-d099a3a6]{display:none}.mapdiv .custom-control-wrapper[data-v-d099a3a6]{display:inline-block}.info-window-wrapper[data-v-cbe1707b]{display:none}.mapdiv .info-window-wrapper[data-v-cbe1707b]{display:inline-block}.custom-marker-wrapper[data-v-2d2d343a]{display:none}.mapdiv .custom-marker-wrapper[data-v-2d2d343a]{display:inline-block}")),document.head.appendChild(n)}}catch(e){console.error("vite-plugin-css-injected-by-js",e)}})();var Lk=Object.defineProperty,wk=(n,e,t)=>e in n?Lk(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,Ym=(n,e,t)=>(wk(n,typeof e!="symbol"?e+"":e,t),t);const oE=Symbol("map"),lE=Symbol("api"),Rk=Symbol("marker"),Ik=Symbol("markerCluster"),cf=Symbol("CustomMarker"),Ck=Symbol("mapTilesLoaded"),cE=["click","dblclick","drag","dragend","dragstart","mousedown","mousemove","mouseout","mouseover","mouseup","rightclick"];/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */function Dk(n,e,t,s){function i(r){return r instanceof t?r:new t(function(a){a(r)})}return new(t||(t=Promise))(function(r,a){function o(u){try{c(s.next(u))}catch(d){a(d)}}function l(u){try{c(s.throw(u))}catch(d){a(d)}}function c(u){u.done?r(u.value):i(u.value).then(o,l)}c((s=s.apply(n,e||[])).next())})}var kk=function n(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){if(e.constructor!==t.constructor)return!1;var s,i,r;if(Array.isArray(e)){if(s=e.length,s!=t.length)return!1;for(i=s;i--!==0;)if(!n(e[i],t[i]))return!1;return!0}if(e.constructor===RegExp)return e.source===t.source&&e.flags===t.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===t.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===t.toString();if(r=Object.keys(e),s=r.length,s!==Object.keys(t).length)return!1;for(i=s;i--!==0;)if(!Object.prototype.hasOwnProperty.call(t,r[i]))return!1;for(i=s;i--!==0;){var a=r[i];if(!n(e[a],t[a]))return!1}return!0}return e!==e&&t!==t};const qm="__googleMapsScriptId";var Er;(function(n){n[n.INITIALIZED=0]="INITIALIZED",n[n.LOADING=1]="LOADING",n[n.SUCCESS=2]="SUCCESS",n[n.FAILURE=3]="FAILURE"})(Er||(Er={}));class Oi{constructor({apiKey:e,authReferrerPolicy:t,channel:s,client:i,id:r=qm,language:a,libraries:o=[],mapIds:l,nonce:c,region:u,retries:d=3,url:h="https://maps.googleapis.com/maps/api/js",version:f}){if(this.callbacks=[],this.done=!1,this.loading=!1,this.errors=[],this.apiKey=e,this.authReferrerPolicy=t,this.channel=s,this.client=i,this.id=r||qm,this.language=a,this.libraries=o,this.mapIds=l,this.nonce=c,this.region=u,this.retries=d,this.url=h,this.version=f,Oi.instance){if(!kk(this.options,Oi.instance.options))throw new Error(`Loader must not be called again with different options. ${JSON.stringify(this.options)} !== ${JSON.stringify(Oi.instance.options)}`);return Oi.instance}Oi.instance=this}get options(){return{version:this.version,apiKey:this.apiKey,channel:this.channel,client:this.client,id:this.id,libraries:this.libraries,language:this.language,region:this.region,mapIds:this.mapIds,nonce:this.nonce,url:this.url,authReferrerPolicy:this.authReferrerPolicy}}get status(){return this.errors.length?Er.FAILURE:this.done?Er.SUCCESS:this.loading?Er.LOADING:Er.INITIALIZED}get failed(){return this.done&&!this.loading&&this.errors.length>=this.retries+1}createUrl(){let e=this.url;return e+="?callback=__googleMapsCallback",this.apiKey&&(e+=`&key=${this.apiKey}`),this.channel&&(e+=`&channel=${this.channel}`),this.client&&(e+=`&client=${this.client}`),this.libraries.length>0&&(e+=`&libraries=${this.libraries.join(",")}`),this.language&&(e+=`&language=${this.language}`),this.region&&(e+=`&region=${this.region}`),this.version&&(e+=`&v=${this.version}`),this.mapIds&&(e+=`&map_ids=${this.mapIds.join(",")}`),this.authReferrerPolicy&&(e+=`&auth_referrer_policy=${this.authReferrerPolicy}`),e}deleteScript(){const e=document.getElementById(this.id);e&&e.remove()}load(){return this.loadPromise()}loadPromise(){return new Promise((e,t)=>{this.loadCallback(s=>{s?t(s.error):e(window.google)})})}importLibrary(e){return this.execute(),google.maps.importLibrary(e)}loadCallback(e){this.callbacks.push(e),this.execute()}setScript(){var e,t;if(document.getElementById(this.id)){this.callback();return}const s={key:this.apiKey,channel:this.channel,client:this.client,libraries:this.libraries.length&&this.libraries,v:this.version,mapIds:this.mapIds,language:this.language,region:this.region,authReferrerPolicy:this.authReferrerPolicy};Object.keys(s).forEach(r=>!s[r]&&delete s[r]),!((t=(e=window==null?void 0:window.google)===null||e===void 0?void 0:e.maps)===null||t===void 0)&&t.importLibrary||(r=>{let a,o,l,c="The Google Maps JavaScript API",u="google",d="importLibrary",h="__ib__",f=document,p=window;p=p[u]||(p[u]={});const m=p.maps||(p.maps={}),y=new Set,g=new URLSearchParams,v=()=>a||(a=new Promise((E,T)=>Dk(this,void 0,void 0,function*(){var b;yield o=f.createElement("script"),o.id=this.id,g.set("libraries",[...y]+"");for(l in r)g.set(l.replace(/[A-Z]/g,L=>"_"+L[0].toLowerCase()),r[l]);g.set("callback",u+".maps."+h),o.src=this.url+"?"+g,m[h]=E,o.onerror=()=>a=T(Error(c+" could not load.")),o.nonce=this.nonce||((b=f.querySelector("script[nonce]"))===null||b===void 0?void 0:b.nonce)||"",f.head.append(o)})));m[d]?console.warn(c+" only loads once. Ignoring:",r):m[d]=(E,...T)=>y.add(E)&&v().then(()=>m[d](E,...T))})(s);const i=this.libraries.map(r=>this.importLibrary(r));i.length||i.push(this.importLibrary("core")),Promise.all(i).then(()=>this.callback(),r=>{const a=new ErrorEvent("error",{error:r});this.loadErrorCallback(a)})}reset(){this.deleteScript(),this.done=!1,this.loading=!1,this.errors=[],this.onerrorEvent=null}resetIfRetryingFailed(){this.failed&&this.reset()}loadErrorCallback(e){if(this.errors.push(e),this.errors.length<=this.retries){const t=this.errors.length*Math.pow(2,this.errors.length);console.error(`Failed to load Google Maps script, retrying in ${t} ms.`),setTimeout(()=>{this.deleteScript(),this.setScript()},t)}else this.onerrorEvent=e,this.callback()}callback(){this.done=!0,this.loading=!1,this.callbacks.forEach(e=>{e(this.onerrorEvent)}),this.callbacks=[]}execute(){if(this.resetIfRetryingFailed(),this.done)this.callback();else{if(window.google&&window.google.maps&&window.google.maps.version){console.warn("Google Maps already loaded outside @googlemaps/js-api-loader.This may result in undesirable behavior as options and script parameters may not match."),this.callback();return}this.loading||(this.loading=!0,this.setScript())}}}function Pk(n){return class extends n.OverlayView{constructor(e){super(),Ym(this,"element"),Ym(this,"opts");const{element:t,...s}=e;this.element=t,this.opts=s,this.opts.map&&this.setMap(this.opts.map)}getPosition(){return this.opts.position?this.opts.position instanceof n.LatLng?this.opts.position:new n.LatLng(this.opts.position):null}getVisible(){if(!this.element)return!1;const e=this.element;return e.style.display!=="none"&&e.style.visibility!=="hidden"&&(e.style.opacity===""||Number(e.style.opacity)>.01)}onAdd(){if(!this.element)return;const e=this.getPanes();e&&e.overlayMouseTarget.appendChild(this.element)}draw(){if(!this.element)return;const e=this.getProjection(),t=e==null?void 0:e.fromLatLngToDivPixel(this.getPosition());if(t){this.element.style.position="absolute";const s=this.element.offsetHeight,i=this.element.offsetWidth;let r,a;switch(this.opts.anchorPoint){case"TOP_CENTER":r=t.x-i/2,a=t.y;break;case"BOTTOM_CENTER":r=t.x-i/2,a=t.y-s;break;case"LEFT_CENTER":r=t.x,a=t.y-s/2;break;case"RIGHT_CENTER":r=t.x-i,a=t.y-s/2;break;case"TOP_LEFT":r=t.x,a=t.y;break;case"TOP_RIGHT":r=t.x-i,a=t.y;break;case"BOTTOM_LEFT":r=t.x,a=t.y-s;break;case"BOTTOM_RIGHT":r=t.x-i,a=t.y-s;break;default:r=t.x-i/2,a=t.y-s/2}this.element.style.left=r+"px",this.element.style.top=a+"px",this.element.style.transform=`translateX(${this.opts.offsetX||0}px) translateY(${this.opts.offsetY||0}px)`,this.opts.zIndex&&(this.element.style.zIndex=this.opts.zIndex.toString())}}onRemove(){this.element&&this.element.remove()}setOptions(e){const{element:t,...s}=e;this.element=t,this.opts=s,this.draw()}}}let Xm;const Qm=["bounds_changed","center_changed","click","contextmenu","dblclick","drag","dragend","dragstart","heading_changed","idle","isfractionalzoomenabled_changed","mapcapabilities_changed","maptypeid_changed","mousemove","mouseout","mouseover","projection_changed","renderingtype_changed","rightclick","tilesloaded","tilt_changed","zoom_changed"],Ok=Ze({props:{apiPromise:{type:Promise},apiKey:{type:String,default:""},version:{type:String,default:"weekly"},libraries:{type:Array,default:()=>["places"]},region:{type:String,required:!1},language:{type:String,required:!1},backgroundColor:{type:String,required:!1},center:{type:Object,default:()=>({lat:0,lng:0})},clickableIcons:{type:Boolean,required:!1,default:void 0},controlSize:{type:Number,required:!1},disableDefaultUi:{type:Boolean,required:!1,default:void 0},disableDoubleClickZoom:{type:Boolean,required:!1,default:void 0},draggable:{type:Boolean,required:!1,default:void 0},draggableCursor:{type:String,required:!1},draggingCursor:{type:String,required:!1},fullscreenControl:{type:Boolean,required:!1,default:void 0},fullscreenControlPosition:{type:String,required:!1},gestureHandling:{type:String,required:!1},heading:{type:Number,required:!1},isFractionalZoomEnabled:{type:Boolean,required:!1,default:void 0},keyboardShortcuts:{type:Boolean,required:!1,default:void 0},mapTypeControl:{type:Boolean,required:!1,default:void 0},mapTypeControlOptions:{type:Object,required:!1},mapTypeId:{type:[Number,String],required:!1},mapId:{type:String,required:!1},maxZoom:{type:Number,required:!1},minZoom:{type:Number,required:!1},noClear:{type:Boolean,required:!1,default:void 0},panControl:{type:Boolean,required:!1,default:void 0},panControlPosition:{type:String,required:!1},restriction:{type:Object,required:!1},rotateControl:{type:Boolean,required:!1,default:void 0},rotateControlPosition:{type:String,required:!1},scaleControl:{type:Boolean,required:!1,default:void 0},scaleControlStyle:{type:Number,required:!1},scrollwheel:{type:Boolean,required:!1,default:void 0},streetView:{type:Object,required:!1},streetViewControl:{type:Boolean,required:!1,default:void 0},streetViewControlPosition:{type:String,required:!1},styles:{type:Array,required:!1},tilt:{type:Number,required:!1},zoom:{type:Number,required:!1},zoomControl:{type:Boolean,required:!1,default:void 0},zoomControlPosition:{type:String,required:!1}},emits:Qm,setup(n,{emit:e}){const t=ce(),s=ce(!1),i=ce(),r=ce(),a=ce(!1);qs(oE,i),qs(lE,r),qs(Ck,a);const o=()=>{const d={...n};Object.keys(d).forEach(p=>{d[p]===void 0&&delete d[p]});const h=p=>{var m;return p?{position:(m=r.value)==null?void 0:m.ControlPosition[p]}:{}},f={scaleControlOptions:n.scaleControlStyle?{style:n.scaleControlStyle}:{},panControlOptions:h(n.panControlPosition),zoomControlOptions:h(n.zoomControlPosition),rotateControlOptions:h(n.rotateControlPosition),streetViewControlOptions:h(n.streetViewControlPosition),fullscreenControlOptions:h(n.fullscreenControlPosition),disableDefaultUI:n.disableDefaultUi};return{...d,...f}},l=_t([r,i],([d,h])=>{const f=d,p=h;f&&p&&(f.event.addListenerOnce(p,"tilesloaded",()=>{a.value=!0}),setTimeout(l,0))},{immediate:!0}),c=()=>{try{const{apiKey:d,region:h,version:f,language:p,libraries:m}=n;Xm=new Oi({apiKey:d,region:h,version:f,language:p,libraries:m})}catch(d){console.error(d)}},u=d=>{r.value=hi(d.maps),i.value=hi(new d.maps.Map(t.value,o()));const h=Pk(r.value);r.value[cf]=h,Qm.forEach(p=>{var m;(m=i.value)==null||m.addListener(p,y=>e(p,y))}),s.value=!0;const f=Object.keys(n).filter(p=>!["apiPromise","apiKey","version","libraries","region","language","center","zoom"].includes(p)).map(p=>Sh(n,p));_t([()=>n.center,()=>n.zoom,...f],([p,m],[y,g])=>{var v,E,T;const{center:b,zoom:L,...x}=o();(v=i.value)==null||v.setOptions(x),m!==void 0&&m!==g&&((E=i.value)==null||E.setZoom(m));const w=!y||p.lng!==y.lng||p.lat!==y.lat;p&&w&&((T=i.value)==null||T.panTo(p))})};return vt(()=>{n.apiPromise&&n.apiPromise instanceof Promise?n.apiPromise.then(u):(c(),Xm.load().then(u))}),Vt(()=>{var d;a.value=!1,i.value&&((d=r.value)==null||d.event.clearInstanceListeners(i.value))}),{mapRef:t,ready:s,map:i,api:r,mapTilesLoaded:a}}}),Mk=(n,e)=>{const t=n.__vccOpts||n;for(const[s,i]of e)t[s]=i;return t},Fk={ref:"mapRef",class:"mapdiv"};function Nk(n,e,t,s,i,r){return ve(),Te("div",null,[_("div",Fk,null,512),Yy(n.$slots,"default",cy(Bh({ready:n.ready,map:n.map,api:n.api,mapTilesLoaded:n.mapTilesLoaded})),void 0,!0)])}const Bk=Mk(Ok,[["render",Nk],["__scopeId","data-v-f29e129b"]]);function Uk(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var $k=function n(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){if(e.constructor!==t.constructor)return!1;var s,i,r;if(Array.isArray(e)){if(s=e.length,s!=t.length)return!1;for(i=s;i--!==0;)if(!n(e[i],t[i]))return!1;return!0}if(e.constructor===RegExp)return e.source===t.source&&e.flags===t.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===t.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===t.toString();if(r=Object.keys(e),s=r.length,s!==Object.keys(t).length)return!1;for(i=s;i--!==0;)if(!Object.prototype.hasOwnProperty.call(t,r[i]))return!1;for(i=s;i--!==0;){var a=r[i];if(!n(e[a],t[a]))return!1}return!0}return e!==e&&t!==t};const jk=Uk($k),Gk=n=>n==="Marker",Vk=n=>n===cf,Hk=(n,e,t,s)=>{const i=ce(),r=fs(oE,ce()),a=fs(lE,ce()),o=fs(Ik,ce()),l=Ve(()=>!!(o.value&&a.value&&(i.value instanceof a.value.Marker||i.value instanceof a.value[cf])));return _t([r,t],(c,[u,d])=>{var h,f,p;const m=!jk(t.value,d)||r.value!==u;!r.value||!a.value||!m||(i.value?(i.value.setOptions(t.value),l.value&&((h=o.value)==null||h.removeMarker(i.value),(f=o.value)==null||f.addMarker(i.value))):(Gk(n)?i.value=hi(new a.value[n](t.value)):Vk(n)?i.value=hi(new a.value[n](t.value)):i.value=hi(new a.value[n]({...t.value,map:r.value})),l.value?(p=o.value)==null||p.addMarker(i.value):i.value.setMap(r.value),e.forEach(y=>{var g;(g=i.value)==null||g.addListener(y,v=>s(y,v))})))},{immediate:!0}),Vt(()=>{var c,u;i.value&&((c=a.value)==null||c.event.clearInstanceListeners(i.value),l.value?(u=o.value)==null||u.removeMarker(i.value):i.value.setMap(null))}),i},Jm=["animation_changed","click","dblclick","rightclick","dragstart","dragend","drag","mouseover","mousedown","mouseout","mouseup","draggable_changed","clickable_changed","contextmenu","cursor_changed","flat_changed","rightclick","zindex_changed","icon_changed","position_changed","shape_changed","title_changed","visible_changed"],Kk=Ze({name:"Marker",props:{options:{type:Object,required:!0}},emits:Jm,setup(n,{emit:e,expose:t,slots:s}){const i=Sh(n,"options"),r=Hk("Marker",Jm,i,e);return qs(Rk,r),t({marker:r}),()=>{var a;return(a=s.default)==null?void 0:a.call(s)}}});cE.concat(["bounds_changed"]);cE.concat(["center_changed","radius_changed"]);var Od;(function(n){n.CLUSTERING_BEGIN="clusteringbegin",n.CLUSTERING_END="clusteringend",n.CLUSTER_CLICK="click"})(Od||(Od={}));Object.values(Od);const Wk={class:"container mx-auto custom-font"},zk={class:"text-left ml-18"},Yk={class:"block sm:flex sm:gap-10 mt-10 sm:mt-10"},qk=d1('<div class="input-section" data-v-5de7cc24><div class="hover-text" data-v-5de7cc24><input type="text" placeholder="Name" data-v-5de7cc24></div><div class="hover-text" data-v-5de7cc24><input type="text" placeholder="Email" data-v-5de7cc24></div><div class="hover-text" data-v-5de7cc24><textarea placeholder="Message" data-v-5de7cc24></textarea></div></div><div class="button-section" data-v-5de7cc24><button type="submit" class="btn-default" data-v-5de7cc24>Submit</button></div>',2),Xk=[qk],Qk=Ze({__name:"Contact",setup(n){const e={lat:40.689247,lng:-74.044502},t={position:e,label:"L",title:"LADY LIBERTY"},s=ce({}),i=ce({}),r=()=>{window.innerWidth<=768?(s.value={width:"90%"},i.value={fontSize:"2.25rem"}):(s.value={width:"100%"},i.value={fontSize:"3.75rem"})};return vt(()=>{r(),window.addEventListener("resize",r)}),Vt(()=>{window.removeEventListener("resize",r)}),(a,o)=>(ve(),Te("div",Wk,[_("div",zk,[_("h1",{class:"font-bold mb-8 ml-4","data-aos":"fade-left",style:de(i.value)},he(a.$t("contact-title")),5),_("p",{class:"content-center",style:de(s.value)},"If you need any further information, please feel free to contact me.",4),_("section",Yk,[_("div",{class:"w-full sm:w-2/4 mb-7 sm:mb-0 content-center",style:de(s.value),"data-aos":"fade-up"},Xk,4),_("div",{class:"w-full sm:w-2/4 text-left max-w-4xl ml-4 content-center",style:de(s.value),"data-aos":"fade-up"},[fe(De(Bk),{"api-key":"YOUR_GOOGLE_MAPS_API_KEY",style:{width:"100%",height:"500px"},center:e,zoom:15},{default:Pt(()=>[fe(De(Kk),{options:t})]),_:1})],4)])])]))}}),uE=At(Qk,[["__scopeId","data-v-5de7cc24"]]),Jk={class:"container mx-auto custom-font"},Zk=Ze({__name:"Home",setup(n){return(e,t)=>(ve(),Te(We,null,[_("div",null,[fe(RC,{class:"mb-8 mb-sm-8"})]),_("div",Jk,[fe(rE,{class:"mb-5 mb-sm-8"}),fe(aE,{class:"mb-5 mb-sm-8"}),fe(uE,{class:"mb-5 mb-sm-8"})])],64))}}),Zm=At(Zk,[["__scopeId","data-v-a74d0c9b"]]),eP="/PersonalWeb/assets/background_fabar-3f5a3ad9.svg",tP="/PersonalWeb/assets/picture_fabar01-1afd9206.svg",sP="/PersonalWeb/assets/picture_fabar02-1eef15c4.svg",nP="/PersonalWeb/assets/picture_fabar03-63736fce.svg",iP={class:"text-overlay custom-font"},rP={class:"container mx-auto custom-font"},aP={class:"text-left ml-18 mt-10"},oP={class:"container mx-auto block sm:flex sm:gap-10 mt-10 sm:mt-20 justify-center"},lP={class:"container mx-auto block sm:flex sm:gap-10 mt-10 sm:mt-10 justify-center"},cP=["src"],uP={class:"container mx-auto custom-font"},dP={class:"text-left ml-18 mt-10"},hP={class:"container mx-auto custom-font"},fP={class:"text-left ml-18 mt-10"},pP={class:"text-2xl font-bold ml-4","data-aos":"fade-up"},mP={class:"container mx-auto block sm:flex sm:gap-10 mt-6 sm:mt-10 justify-center"},gP={class:"container mx-auto block sm:flex sm:gap-10 mt-10 sm:mt-10 justify-center"},yP=["src"],vP={class:"container mx-auto custom-font"},EP={class:"text-left ml-18 mt-10"},TP={class:"text-2xl font-bold ml-4","data-aos":"fade-up"},bP={class:"container mx-auto block sm:flex sm:gap-10 mt-6 sm:mt-10 justify-center"},xP={class:"container mx-auto block sm:flex sm:gap-10 mt-10 sm:mt-10 justify-center"},SP=["src"],_P={class:"container mx-auto custom-font block sm:flex sm:gap-10 mt-10 sm:mt-20 justify-center"},AP={class:"button-section"},LP=Ze({__name:"FabAR",setup(n){const e=ce(eP),t=ce({}),s=ce({}),i=ce({}),r=ce({}),a=ce({}),o=ce({}),l=()=>{window.innerWidth<=768?(t.value={fontSize:"50px"},s.value={fontSize:"16px"},i.value={fontSize:"14px"},r.value={width:"90%"},a.value={width:"90%"},o.value={fontSize:"2.25rem"}):(t.value={fontSize:"120px"},s.value={fontSize:"40px"},i.value={fontSize:"18px",maxWidth:"60%",margin:"0px auto"},r.value={width:"60%"},a.value={width:"98%"},o.value={fontSize:"3.75rem"})},c=()=>{ao.push({path:"/PersonalWeb/Projects"})};return vt(()=>{l(),window.addEventListener("resize",l)}),Vt(()=>{window.removeEventListener("resize",l)}),(u,d)=>(ve(),Te(We,null,[_("div",{style:de({"background-image":"url("+e.value+")"}),class:"background-container"},[_("div",iP,[_("p",{style:de(t.value),class:"text-overlay-content mb-2 font-bold"},"Fab AR",4),_("p",{style:de(s.value),class:"text-overlay-content mb-6"},he(u.$t("project1-subtitle")),5),_("p",{style:de(i.value),class:"text-overlay-content"},he(u.$t("project1-brief")),5)])],4),_("div",rP,[_("div",aP,[_("h1",{class:"font-bold ml-4","data-aos":"fade-left",style:de(o.value)}," Review ",4)])]),_("div",oP,[_("p",{class:"ml-4 content-center",style:de(a.value),"data-aos":"fade-up"},he(u.$t("project1-review-content1")),5)]),_("div",lP,[_("img",{src:De(tP),class:"content-center",style:de(r.value),"data-aos":"fade-up"},null,12,cP)]),_("div",uP,[_("div",dP,[_("h1",{class:"font-bold ml-4","data-aos":"fade-left",style:de(o.value)}," Features ",4)])]),_("div",hP,[_("div",fP,[_("h1",pP,he(u.$t("project1-feature-subtitle1")),1)])]),_("div",mP,[_("p",{class:"ml-4 content-center",style:de(a.value),"data-aos":"fade-up"},he(u.$t("project1-feature-content1")),5)]),_("div",gP,[_("img",{src:De(sP),class:"content-center",style:de(r.value),"data-aos":"fade-up"},null,12,yP)]),_("div",vP,[_("div",EP,[_("h1",TP,he(u.$t("project1-feature-subtitle2")),1)])]),_("div",bP,[_("p",{class:"ml-4 content-center",style:de(a.value),"data-aos":"fade-up"},he(u.$t("project1-feature-content2")),5)]),_("div",xP,[_("img",{src:De(nP),class:"content-center",style:de(r.value),"data-aos":"fade-up"},null,12,SP)]),_("div",_P,[_("div",AP,[_("button",{type:"button",class:"btn-default",onClick:d[0]||(d[0]=h=>c())},"Go Back")])])],64))}}),wP=At(LP,[["__scopeId","data-v-5d23d27f"]]),RP={};function IP(n,e){return null}const CP=At(RP,[["render",IP]]),DP={};function kP(n,e){return null}const PP=At(DP,[["render",kP]]);function eg(n,e,t,s){var i,r=!1,a=0;function o(){i&&clearTimeout(i)}function l(){o(),r=!0}typeof e!="boolean"&&(s=t,t=e,e=void 0);function c(){for(var u=arguments.length,d=new Array(u),h=0;h<u;h++)d[h]=arguments[h];var f=this,p=Date.now()-a;if(r)return;function m(){a=Date.now(),t.apply(f,d)}function y(){i=void 0}s&&!i&&m(),o(),s===void 0&&p>n?m():e!==!0&&(i=setTimeout(s?y:m,s===void 0?n-p:n))}return c.cancel=l,c}function tg(n,e,t){return t===void 0?eg(n,e,!1):eg(n,t,e!==!1)}function OP(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var dE={exports:{}};(function(n,e){(function(t){var s=/^(?=((?:[a-zA-Z0-9+\-.]+:)?))\1(?=((?:\/\/[^\/?#]*)?))\2(?=((?:(?:[^?#\/]*\/)*[^;?#\/]*)?))\3((?:;[^?#]*)?)(\?[^#]*)?(#[^]*)?$/,i=/^(?=([^\/?#]*))\1([^]*)$/,r=/(?:\/|^)\.(?=\/)/g,a=/(?:\/|^)\.\.\/(?!\.\.\/)[^\/]*(?=\/)/g,o={buildAbsoluteURL:function(l,c,u){if(u=u||{},l=l.trim(),c=c.trim(),!c){if(!u.alwaysNormalize)return l;var d=o.parseURL(l);if(!d)throw new Error("Error trying to parse base URL.");return d.path=o.normalizePath(d.path),o.buildURLFromParts(d)}var h=o.parseURL(c);if(!h)throw new Error("Error trying to parse relative URL.");if(h.scheme)return u.alwaysNormalize?(h.path=o.normalizePath(h.path),o.buildURLFromParts(h)):c;var f=o.parseURL(l);if(!f)throw new Error("Error trying to parse base URL.");if(!f.netLoc&&f.path&&f.path[0]!=="/"){var p=i.exec(f.path);f.netLoc=p[1],f.path=p[2]}f.netLoc&&!f.path&&(f.path="/");var m={scheme:f.scheme,netLoc:h.netLoc,path:null,params:h.params,query:h.query,fragment:h.fragment};if(!h.netLoc&&(m.netLoc=f.netLoc,h.path[0]!=="/"))if(!h.path)m.path=f.path,h.params||(m.params=f.params,h.query||(m.query=f.query));else{var y=f.path,g=y.substring(0,y.lastIndexOf("/")+1)+h.path;m.path=o.normalizePath(g)}return m.path===null&&(m.path=u.alwaysNormalize?o.normalizePath(h.path):h.path),o.buildURLFromParts(m)},parseURL:function(l){var c=s.exec(l);return c?{scheme:c[1]||"",netLoc:c[2]||"",path:c[3]||"",params:c[4]||"",query:c[5]||"",fragment:c[6]||""}:null},normalizePath:function(l){for(l=l.split("").reverse().join("").replace(r,"");l.length!==(l=l.replace(a,"")).length;);return l.split("").reverse().join("")},buildURLFromParts:function(l){return l.scheme+l.netLoc+l.path+l.params+l.query+l.fragment}};n.exports=o})()})(dE);var uf=dE.exports;function sg(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);e&&(s=s.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,s)}return t}function Gt(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?sg(Object(t),!0).forEach(function(s){NP(n,s,t[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):sg(Object(t)).forEach(function(s){Object.defineProperty(n,s,Object.getOwnPropertyDescriptor(t,s))})}return n}function MP(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var s=t.call(n,e||"default");if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function FP(n){var e=MP(n,"string");return typeof e=="symbol"?e:String(e)}function NP(n,e,t){return e=FP(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function It(){return It=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(n[s]=t[s])}return n},It.apply(this,arguments)}const Se=Number.isFinite||function(n){return typeof n=="number"&&isFinite(n)},BP=Number.isSafeInteger||function(n){return typeof n=="number"&&Math.abs(n)<=UP},UP=Number.MAX_SAFE_INTEGER||9007199254740991;let I=function(n){return n.MEDIA_ATTACHING="hlsMediaAttaching",n.MEDIA_ATTACHED="hlsMediaAttached",n.MEDIA_DETACHING="hlsMediaDetaching",n.MEDIA_DETACHED="hlsMediaDetached",n.BUFFER_RESET="hlsBufferReset",n.BUFFER_CODECS="hlsBufferCodecs",n.BUFFER_CREATED="hlsBufferCreated",n.BUFFER_APPENDING="hlsBufferAppending",n.BUFFER_APPENDED="hlsBufferAppended",n.BUFFER_EOS="hlsBufferEos",n.BUFFER_FLUSHING="hlsBufferFlushing",n.BUFFER_FLUSHED="hlsBufferFlushed",n.MANIFEST_LOADING="hlsManifestLoading",n.MANIFEST_LOADED="hlsManifestLoaded",n.MANIFEST_PARSED="hlsManifestParsed",n.LEVEL_SWITCHING="hlsLevelSwitching",n.LEVEL_SWITCHED="hlsLevelSwitched",n.LEVEL_LOADING="hlsLevelLoading",n.LEVEL_LOADED="hlsLevelLoaded",n.LEVEL_UPDATED="hlsLevelUpdated",n.LEVEL_PTS_UPDATED="hlsLevelPtsUpdated",n.LEVELS_UPDATED="hlsLevelsUpdated",n.AUDIO_TRACKS_UPDATED="hlsAudioTracksUpdated",n.AUDIO_TRACK_SWITCHING="hlsAudioTrackSwitching",n.AUDIO_TRACK_SWITCHED="hlsAudioTrackSwitched",n.AUDIO_TRACK_LOADING="hlsAudioTrackLoading",n.AUDIO_TRACK_LOADED="hlsAudioTrackLoaded",n.SUBTITLE_TRACKS_UPDATED="hlsSubtitleTracksUpdated",n.SUBTITLE_TRACKS_CLEARED="hlsSubtitleTracksCleared",n.SUBTITLE_TRACK_SWITCH="hlsSubtitleTrackSwitch",n.SUBTITLE_TRACK_LOADING="hlsSubtitleTrackLoading",n.SUBTITLE_TRACK_LOADED="hlsSubtitleTrackLoaded",n.SUBTITLE_FRAG_PROCESSED="hlsSubtitleFragProcessed",n.CUES_PARSED="hlsCuesParsed",n.NON_NATIVE_TEXT_TRACKS_FOUND="hlsNonNativeTextTracksFound",n.INIT_PTS_FOUND="hlsInitPtsFound",n.FRAG_LOADING="hlsFragLoading",n.FRAG_LOAD_EMERGENCY_ABORTED="hlsFragLoadEmergencyAborted",n.FRAG_LOADED="hlsFragLoaded",n.FRAG_DECRYPTED="hlsFragDecrypted",n.FRAG_PARSING_INIT_SEGMENT="hlsFragParsingInitSegment",n.FRAG_PARSING_USERDATA="hlsFragParsingUserdata",n.FRAG_PARSING_METADATA="hlsFragParsingMetadata",n.FRAG_PARSED="hlsFragParsed",n.FRAG_BUFFERED="hlsFragBuffered",n.FRAG_CHANGED="hlsFragChanged",n.FPS_DROP="hlsFpsDrop",n.FPS_DROP_LEVEL_CAPPING="hlsFpsDropLevelCapping",n.MAX_AUTO_LEVEL_UPDATED="hlsMaxAutoLevelUpdated",n.ERROR="hlsError",n.DESTROYING="hlsDestroying",n.KEY_LOADING="hlsKeyLoading",n.KEY_LOADED="hlsKeyLoaded",n.LIVE_BACK_BUFFER_REACHED="hlsLiveBackBufferReached",n.BACK_BUFFER_REACHED="hlsBackBufferReached",n.STEERING_MANIFEST_LOADED="hlsSteeringManifestLoaded",n}({}),Oe=function(n){return n.NETWORK_ERROR="networkError",n.MEDIA_ERROR="mediaError",n.KEY_SYSTEM_ERROR="keySystemError",n.MUX_ERROR="muxError",n.OTHER_ERROR="otherError",n}({}),te=function(n){return n.KEY_SYSTEM_NO_KEYS="keySystemNoKeys",n.KEY_SYSTEM_NO_ACCESS="keySystemNoAccess",n.KEY_SYSTEM_NO_SESSION="keySystemNoSession",n.KEY_SYSTEM_NO_CONFIGURED_LICENSE="keySystemNoConfiguredLicense",n.KEY_SYSTEM_LICENSE_REQUEST_FAILED="keySystemLicenseRequestFailed",n.KEY_SYSTEM_SERVER_CERTIFICATE_REQUEST_FAILED="keySystemServerCertificateRequestFailed",n.KEY_SYSTEM_SERVER_CERTIFICATE_UPDATE_FAILED="keySystemServerCertificateUpdateFailed",n.KEY_SYSTEM_SESSION_UPDATE_FAILED="keySystemSessionUpdateFailed",n.KEY_SYSTEM_STATUS_OUTPUT_RESTRICTED="keySystemStatusOutputRestricted",n.KEY_SYSTEM_STATUS_INTERNAL_ERROR="keySystemStatusInternalError",n.MANIFEST_LOAD_ERROR="manifestLoadError",n.MANIFEST_LOAD_TIMEOUT="manifestLoadTimeOut",n.MANIFEST_PARSING_ERROR="manifestParsingError",n.MANIFEST_INCOMPATIBLE_CODECS_ERROR="manifestIncompatibleCodecsError",n.LEVEL_EMPTY_ERROR="levelEmptyError",n.LEVEL_LOAD_ERROR="levelLoadError",n.LEVEL_LOAD_TIMEOUT="levelLoadTimeOut",n.LEVEL_PARSING_ERROR="levelParsingError",n.LEVEL_SWITCH_ERROR="levelSwitchError",n.AUDIO_TRACK_LOAD_ERROR="audioTrackLoadError",n.AUDIO_TRACK_LOAD_TIMEOUT="audioTrackLoadTimeOut",n.SUBTITLE_LOAD_ERROR="subtitleTrackLoadError",n.SUBTITLE_TRACK_LOAD_TIMEOUT="subtitleTrackLoadTimeOut",n.FRAG_LOAD_ERROR="fragLoadError",n.FRAG_LOAD_TIMEOUT="fragLoadTimeOut",n.FRAG_DECRYPT_ERROR="fragDecryptError",n.FRAG_PARSING_ERROR="fragParsingError",n.FRAG_GAP="fragGap",n.REMUX_ALLOC_ERROR="remuxAllocError",n.KEY_LOAD_ERROR="keyLoadError",n.KEY_LOAD_TIMEOUT="keyLoadTimeOut",n.BUFFER_ADD_CODEC_ERROR="bufferAddCodecError",n.BUFFER_INCOMPATIBLE_CODECS_ERROR="bufferIncompatibleCodecsError",n.BUFFER_APPEND_ERROR="bufferAppendError",n.BUFFER_APPENDING_ERROR="bufferAppendingError",n.BUFFER_STALLED_ERROR="bufferStalledError",n.BUFFER_FULL_ERROR="bufferFullError",n.BUFFER_SEEK_OVER_HOLE="bufferSeekOverHole",n.BUFFER_NUDGE_ON_STALL="bufferNudgeOnStall",n.INTERNAL_EXCEPTION="internalException",n.INTERNAL_ABORTED="aborted",n.UNKNOWN="unknown",n}({});const Ci=function(){},Md={trace:Ci,debug:Ci,log:Ci,warn:Ci,info:Ci,error:Ci};let _a=Md;function $P(n){const e=self.console[n];return e?e.bind(self.console,`[${n}] >`):Ci}function jP(n,...e){e.forEach(function(t){_a[t]=n[t]?n[t].bind(n):$P(t)})}function GP(n,e){if(typeof console=="object"&&n===!0||typeof n=="object"){jP(n,"debug","log","info","warn","error");try{_a.log(`Debug logs enabled for "${e}" in hls.js version 1.5.7`)}catch{_a=Md}}else _a=Md}const z=_a,VP=/^(\d+)x(\d+)$/,ng=/(.+?)=(".*?"|.*?)(?:,|$)/g;class Et{constructor(e){typeof e=="string"&&(e=Et.parseAttrList(e)),It(this,e)}get clientAttrs(){return Object.keys(this).filter(e=>e.substring(0,2)==="X-")}decimalInteger(e){const t=parseInt(this[e],10);return t>Number.MAX_SAFE_INTEGER?1/0:t}hexadecimalInteger(e){if(this[e]){let t=(this[e]||"0x").slice(2);t=(t.length&1?"0":"")+t;const s=new Uint8Array(t.length/2);for(let i=0;i<t.length/2;i++)s[i]=parseInt(t.slice(i*2,i*2+2),16);return s}else return null}hexadecimalIntegerAsNumber(e){const t=parseInt(this[e],16);return t>Number.MAX_SAFE_INTEGER?1/0:t}decimalFloatingPoint(e){return parseFloat(this[e])}optionalFloat(e,t){const s=this[e];return s?parseFloat(s):t}enumeratedString(e){return this[e]}bool(e){return this[e]==="YES"}decimalResolution(e){const t=VP.exec(this[e]);if(t!==null)return{width:parseInt(t[1],10),height:parseInt(t[2],10)}}static parseAttrList(e){let t;const s={},i='"';for(ng.lastIndex=0;(t=ng.exec(e))!==null;){let r=t[2];r.indexOf(i)===0&&r.lastIndexOf(i)===r.length-1&&(r=r.slice(1,-1));const a=t[1].trim();s[a]=r}return s}}function HP(n){return n!=="ID"&&n!=="CLASS"&&n!=="START-DATE"&&n!=="DURATION"&&n!=="END-DATE"&&n!=="END-ON-NEXT"}function KP(n){return n==="SCTE35-OUT"||n==="SCTE35-IN"}class hE{constructor(e,t){if(this.attr=void 0,this._startDate=void 0,this._endDate=void 0,this._badValueForSameId=void 0,t){const s=t.attr;for(const i in s)if(Object.prototype.hasOwnProperty.call(e,i)&&e[i]!==s[i]){z.warn(`DATERANGE tag attribute: "${i}" does not match for tags with ID: "${e.ID}"`),this._badValueForSameId=i;break}e=It(new Et({}),s,e)}if(this.attr=e,this._startDate=new Date(e["START-DATE"]),"END-DATE"in this.attr){const s=new Date(this.attr["END-DATE"]);Se(s.getTime())&&(this._endDate=s)}}get id(){return this.attr.ID}get class(){return this.attr.CLASS}get startDate(){return this._startDate}get endDate(){if(this._endDate)return this._endDate;const e=this.duration;return e!==null?new Date(this._startDate.getTime()+e*1e3):null}get duration(){if("DURATION"in this.attr){const e=this.attr.decimalFloatingPoint("DURATION");if(Se(e))return e}else if(this._endDate)return(this._endDate.getTime()-this._startDate.getTime())/1e3;return null}get plannedDuration(){return"PLANNED-DURATION"in this.attr?this.attr.decimalFloatingPoint("PLANNED-DURATION"):null}get endOnNext(){return this.attr.bool("END-ON-NEXT")}get isValid(){return!!this.id&&!this._badValueForSameId&&Se(this.startDate.getTime())&&(this.duration===null||this.duration>=0)&&(!this.endOnNext||!!this.class)}}class pc{constructor(){this.aborted=!1,this.loaded=0,this.retry=0,this.total=0,this.chunkCount=0,this.bwEstimate=0,this.loading={start:0,first:0,end:0},this.parsing={start:0,end:0},this.buffering={start:0,first:0,end:0}}}var st={AUDIO:"audio",VIDEO:"video",AUDIOVIDEO:"audiovideo"};class fE{constructor(e){this._byteRange=null,this._url=null,this.baseurl=void 0,this.relurl=void 0,this.elementaryStreams={[st.AUDIO]:null,[st.VIDEO]:null,[st.AUDIOVIDEO]:null},this.baseurl=e}setByteRange(e,t){const s=e.split("@",2);let i;s.length===1?i=(t==null?void 0:t.byteRangeEndOffset)||0:i=parseInt(s[1]),this._byteRange=[i,parseInt(s[0])+i]}get byteRange(){return this._byteRange?this._byteRange:[]}get byteRangeStartOffset(){return this.byteRange[0]}get byteRangeEndOffset(){return this.byteRange[1]}get url(){return!this._url&&this.baseurl&&this.relurl&&(this._url=uf.buildAbsoluteURL(this.baseurl,this.relurl,{alwaysNormalize:!0})),this._url||""}set url(e){this._url=e}}class Xc extends fE{constructor(e,t){super(t),this._decryptdata=null,this.rawProgramDateTime=null,this.programDateTime=null,this.tagList=[],this.duration=0,this.sn=0,this.levelkeys=void 0,this.type=void 0,this.loader=null,this.keyLoader=null,this.level=-1,this.cc=0,this.startPTS=void 0,this.endPTS=void 0,this.startDTS=void 0,this.endDTS=void 0,this.start=0,this.deltaPTS=void 0,this.maxStartPTS=void 0,this.minEndPTS=void 0,this.stats=new pc,this.data=void 0,this.bitrateTest=!1,this.title=null,this.initSegment=null,this.endList=void 0,this.gap=void 0,this.urlId=0,this.type=e}get decryptdata(){const{levelkeys:e}=this;if(!e&&!this._decryptdata)return null;if(!this._decryptdata&&this.levelkeys&&!this.levelkeys.NONE){const t=this.levelkeys.identity;if(t)this._decryptdata=t.getDecryptData(this.sn);else{const s=Object.keys(this.levelkeys);if(s.length===1)return this._decryptdata=this.levelkeys[s[0]].getDecryptData(this.sn)}}return this._decryptdata}get end(){return this.start+this.duration}get endProgramDateTime(){if(this.programDateTime===null||!Se(this.programDateTime))return null;const e=Se(this.duration)?this.duration:0;return this.programDateTime+e*1e3}get encrypted(){var e;if((e=this._decryptdata)!=null&&e.encrypted)return!0;if(this.levelkeys){const t=Object.keys(this.levelkeys),s=t.length;if(s>1||s===1&&this.levelkeys[t[0]].encrypted)return!0}return!1}setKeyFormat(e){if(this.levelkeys){const t=this.levelkeys[e];t&&!this._decryptdata&&(this._decryptdata=t.getDecryptData(this.sn))}}abortRequests(){var e,t;(e=this.loader)==null||e.abort(),(t=this.keyLoader)==null||t.abort()}setElementaryStreamInfo(e,t,s,i,r,a=!1){const{elementaryStreams:o}=this,l=o[e];if(!l){o[e]={startPTS:t,endPTS:s,startDTS:i,endDTS:r,partial:a};return}l.startPTS=Math.min(l.startPTS,t),l.endPTS=Math.max(l.endPTS,s),l.startDTS=Math.min(l.startDTS,i),l.endDTS=Math.max(l.endDTS,r)}clearElementaryStreamInfo(){const{elementaryStreams:e}=this;e[st.AUDIO]=null,e[st.VIDEO]=null,e[st.AUDIOVIDEO]=null}}class WP extends fE{constructor(e,t,s,i,r){super(s),this.fragOffset=0,this.duration=0,this.gap=!1,this.independent=!1,this.relurl=void 0,this.fragment=void 0,this.index=void 0,this.stats=new pc,this.duration=e.decimalFloatingPoint("DURATION"),this.gap=e.bool("GAP"),this.independent=e.bool("INDEPENDENT"),this.relurl=e.enumeratedString("URI"),this.fragment=t,this.index=i;const a=e.enumeratedString("BYTERANGE");a&&this.setByteRange(a,r),r&&(this.fragOffset=r.fragOffset+r.duration)}get start(){return this.fragment.start+this.fragOffset}get end(){return this.start+this.duration}get loaded(){const{elementaryStreams:e}=this;return!!(e.audio||e.video||e.audiovideo)}}const zP=10;class YP{constructor(e){this.PTSKnown=!1,this.alignedSliding=!1,this.averagetargetduration=void 0,this.endCC=0,this.endSN=0,this.fragments=void 0,this.fragmentHint=void 0,this.partList=null,this.dateRanges=void 0,this.live=!0,this.ageHeader=0,this.advancedDateTime=void 0,this.updated=!0,this.advanced=!0,this.availabilityDelay=void 0,this.misses=0,this.startCC=0,this.startSN=0,this.startTimeOffset=null,this.targetduration=0,this.totalduration=0,this.type=null,this.url=void 0,this.m3u8="",this.version=null,this.canBlockReload=!1,this.canSkipUntil=0,this.canSkipDateRanges=!1,this.skippedSegments=0,this.recentlyRemovedDateranges=void 0,this.partHoldBack=0,this.holdBack=0,this.partTarget=0,this.preloadHint=void 0,this.renditionReports=void 0,this.tuneInGoal=0,this.deltaUpdateFailed=void 0,this.driftStartTime=0,this.driftEndTime=0,this.driftStart=0,this.driftEnd=0,this.encryptedFragments=void 0,this.playlistParsingError=null,this.variableList=null,this.hasVariableRefs=!1,this.fragments=[],this.encryptedFragments=[],this.dateRanges={},this.url=e}reloaded(e){if(!e){this.advanced=!0,this.updated=!0;return}const t=this.lastPartSn-e.lastPartSn,s=this.lastPartIndex-e.lastPartIndex;this.updated=this.endSN!==e.endSN||!!s||!!t||!this.live,this.advanced=this.endSN>e.endSN||t>0||t===0&&s>0,this.updated||this.advanced?this.misses=Math.floor(e.misses*.6):this.misses=e.misses+1,this.availabilityDelay=e.availabilityDelay}get hasProgramDateTime(){return this.fragments.length?Se(this.fragments[this.fragments.length-1].programDateTime):!1}get levelTargetDuration(){return this.averagetargetduration||this.targetduration||zP}get drift(){const e=this.driftEndTime-this.driftStartTime;return e>0?(this.driftEnd-this.driftStart)*1e3/e:1}get edge(){return this.partEnd||this.fragmentEnd}get partEnd(){var e;return(e=this.partList)!=null&&e.length?this.partList[this.partList.length-1].end:this.fragmentEnd}get fragmentEnd(){var e;return(e=this.fragments)!=null&&e.length?this.fragments[this.fragments.length-1].end:0}get age(){return this.advancedDateTime?Math.max(Date.now()-this.advancedDateTime,0)/1e3:0}get lastPartIndex(){var e;return(e=this.partList)!=null&&e.length?this.partList[this.partList.length-1].index:-1}get lastPartSn(){var e;return(e=this.partList)!=null&&e.length?this.partList[this.partList.length-1].fragment.sn:this.endSN}}function df(n){return Uint8Array.from(atob(n),e=>e.charCodeAt(0))}function qP(n){const e=Fd(n).subarray(0,16),t=new Uint8Array(16);return t.set(e,16-e.length),t}function XP(n){const e=function(s,i,r){const a=s[i];s[i]=s[r],s[r]=a};e(n,0,3),e(n,1,2),e(n,4,5),e(n,6,7)}function QP(n){const e=n.split(":");let t=null;if(e[0]==="data"&&e.length===2){const s=e[1].split(";"),i=s[s.length-1].split(",");if(i.length===2){const r=i[0]==="base64",a=i[1];r?(s.splice(-1,1),t=df(a)):t=qP(a)}}return t}function Fd(n){return Uint8Array.from(unescape(encodeURIComponent(n)),e=>e.charCodeAt(0))}const Gr=typeof self<"u"?self:void 0;var mt={CLEARKEY:"org.w3.clearkey",FAIRPLAY:"com.apple.fps",PLAYREADY:"com.microsoft.playready",WIDEVINE:"com.widevine.alpha"},cs={CLEARKEY:"org.w3.clearkey",FAIRPLAY:"com.apple.streamingkeydelivery",PLAYREADY:"com.microsoft.playready",WIDEVINE:"urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed"};function ig(n){switch(n){case cs.FAIRPLAY:return mt.FAIRPLAY;case cs.PLAYREADY:return mt.PLAYREADY;case cs.WIDEVINE:return mt.WIDEVINE;case cs.CLEARKEY:return mt.CLEARKEY}}var pE={WIDEVINE:"edef8ba979d64acea3c827dcd51d21ed"};function JP(n){if(n===pE.WIDEVINE)return mt.WIDEVINE}function rg(n){switch(n){case mt.FAIRPLAY:return cs.FAIRPLAY;case mt.PLAYREADY:return cs.PLAYREADY;case mt.WIDEVINE:return cs.WIDEVINE;case mt.CLEARKEY:return cs.CLEARKEY}}function Qc(n){const{drmSystems:e,widevineLicenseUrl:t}=n,s=e?[mt.FAIRPLAY,mt.WIDEVINE,mt.PLAYREADY,mt.CLEARKEY].filter(i=>!!e[i]):[];return!s[mt.WIDEVINE]&&t&&s.push(mt.WIDEVINE),s}const mE=function(n){return Gr!=null&&(n=Gr.navigator)!=null&&n.requestMediaKeySystemAccess?self.navigator.requestMediaKeySystemAccess.bind(self.navigator):null}();function ZP(n,e,t,s){let i;switch(n){case mt.FAIRPLAY:i=["cenc","sinf"];break;case mt.WIDEVINE:case mt.PLAYREADY:i=["cenc"];break;case mt.CLEARKEY:i=["cenc","keyids"];break;default:throw new Error(`Unknown key-system: ${n}`)}return eO(i,e,t,s)}function eO(n,e,t,s){return[{initDataTypes:n,persistentState:s.persistentState||"optional",distinctiveIdentifier:s.distinctiveIdentifier||"optional",sessionTypes:s.sessionTypes||[s.sessionType||"temporary"],audioCapabilities:e.map(r=>({contentType:`audio/mp4; codecs="${r}"`,robustness:s.audioRobustness||"",encryptionScheme:s.audioEncryptionScheme||null})),videoCapabilities:t.map(r=>({contentType:`video/mp4; codecs="${r}"`,robustness:s.videoRobustness||"",encryptionScheme:s.videoEncryptionScheme||null}))}]}function Hi(n,e,t){return Uint8Array.prototype.slice?n.slice(e,t):new Uint8Array(Array.prototype.slice.call(n,e,t))}const hf=(n,e)=>e+10<=n.length&&n[e]===73&&n[e+1]===68&&n[e+2]===51&&n[e+3]<255&&n[e+4]<255&&n[e+6]<128&&n[e+7]<128&&n[e+8]<128&&n[e+9]<128,gE=(n,e)=>e+10<=n.length&&n[e]===51&&n[e+1]===68&&n[e+2]===73&&n[e+3]<255&&n[e+4]<255&&n[e+6]<128&&n[e+7]<128&&n[e+8]<128&&n[e+9]<128,Wa=(n,e)=>{const t=e;let s=0;for(;hf(n,e);){s+=10;const i=mc(n,e+6);s+=i,gE(n,e+10)&&(s+=10),e+=s}if(s>0)return n.subarray(t,t+s)},mc=(n,e)=>{let t=0;return t=(n[e]&127)<<21,t|=(n[e+1]&127)<<14,t|=(n[e+2]&127)<<7,t|=n[e+3]&127,t},tO=(n,e)=>hf(n,e)&&mc(n,e+6)+10<=n.length-e,ff=n=>{const e=vE(n);for(let t=0;t<e.length;t++){const s=e[t];if(yE(s))return oO(s)}},yE=n=>n&&n.key==="PRIV"&&n.info==="com.apple.streaming.transportStreamTimestamp",sO=n=>{const e=String.fromCharCode(n[0],n[1],n[2],n[3]),t=mc(n,4),s=10;return{type:e,size:t,data:n.subarray(s,s+t)}},vE=n=>{let e=0;const t=[];for(;hf(n,e);){const s=mc(n,e+6);e+=10;const i=e+s;for(;e+8<i;){const r=sO(n.subarray(e)),a=nO(r);a&&t.push(a),e+=r.size+10}gE(n,e)&&(e+=10)}return t},nO=n=>n.type==="PRIV"?iO(n):n.type[0]==="W"?aO(n):rO(n),iO=n=>{if(n.size<2)return;const e=gn(n.data,!0),t=new Uint8Array(n.data.subarray(e.length+1));return{key:n.type,info:e,data:t.buffer}},rO=n=>{if(n.size<2)return;if(n.type==="TXXX"){let t=1;const s=gn(n.data.subarray(t),!0);t+=s.length+1;const i=gn(n.data.subarray(t));return{key:n.type,info:s,data:i}}const e=gn(n.data.subarray(1));return{key:n.type,data:e}},aO=n=>{if(n.type==="WXXX"){if(n.size<2)return;let t=1;const s=gn(n.data.subarray(t),!0);t+=s.length+1;const i=gn(n.data.subarray(t));return{key:n.type,info:s,data:i}}const e=gn(n.data);return{key:n.type,data:e}},oO=n=>{if(n.data.byteLength===8){const e=new Uint8Array(n.data),t=e[3]&1;let s=(e[4]<<23)+(e[5]<<15)+(e[6]<<7)+e[7];return s/=45,t&&(s+=4772185884e-2),Math.round(s)}},gn=(n,e=!1)=>{const t=lO();if(t){const c=t.decode(n);if(e){const u=c.indexOf("\0");return u!==-1?c.substring(0,u):c}return c.replace(/\0/g,"")}const s=n.length;let i,r,a,o="",l=0;for(;l<s;){if(i=n[l++],i===0&&e)return o;if(i===0||i===3)continue;switch(i>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:o+=String.fromCharCode(i);break;case 12:case 13:r=n[l++],o+=String.fromCharCode((i&31)<<6|r&63);break;case 14:r=n[l++],a=n[l++],o+=String.fromCharCode((i&15)<<12|(r&63)<<6|(a&63)<<0);break}}return o};let Jc;function lO(){if(!navigator.userAgent.includes("PlayStation 4"))return!Jc&&typeof self.TextDecoder<"u"&&(Jc=new self.TextDecoder("utf-8")),Jc}const rn={hexDump:function(n){let e="";for(let t=0;t<n.length;t++){let s=n[t].toString(16);s.length<2&&(s="0"+s),e+=s}return e}},_l=Math.pow(2,32)-1,cO=[].push,EE={video:1,audio:2,id3:3,text:4};function Ct(n){return String.fromCharCode.apply(null,n)}function TE(n,e){const t=n[e]<<8|n[e+1];return t<0?65536+t:t}function ke(n,e){const t=bE(n,e);return t<0?4294967296+t:t}function ag(n,e){let t=ke(n,e);return t*=Math.pow(2,32),t+=ke(n,e+4),t}function bE(n,e){return n[e]<<24|n[e+1]<<16|n[e+2]<<8|n[e+3]}function Zc(n,e,t){n[e]=t>>24,n[e+1]=t>>16&255,n[e+2]=t>>8&255,n[e+3]=t&255}function uO(n){const e=n.byteLength;for(let t=0;t<e;){const s=ke(n,t);if(s>8&&n[t+4]===109&&n[t+5]===111&&n[t+6]===111&&n[t+7]===102)return!0;t=s>1?t+s:e}return!1}function Ge(n,e){const t=[];if(!e.length)return t;const s=n.byteLength;for(let i=0;i<s;){const r=ke(n,i),a=Ct(n.subarray(i+4,i+8)),o=r>1?i+r:s;if(a===e[0])if(e.length===1)t.push(n.subarray(i+8,o));else{const l=Ge(n.subarray(i+8,o),e.slice(1));l.length&&cO.apply(t,l)}i=o}return t}function dO(n){const e=[],t=n[0];let s=8;const i=ke(n,s);s+=4;let r=0,a=0;t===0?(r=ke(n,s),a=ke(n,s+4),s+=8):(r=ag(n,s),a=ag(n,s+8),s+=16),s+=2;let o=n.length+a;const l=TE(n,s);s+=2;for(let c=0;c<l;c++){let u=s;const d=ke(n,u);u+=4;const h=d&2147483647;if((d&2147483648)>>>31===1)return z.warn("SIDX has hierarchical references (not supported)"),null;const p=ke(n,u);u+=4,e.push({referenceSize:h,subsegmentDuration:p,info:{duration:p/i,start:o,end:o+h-1}}),o+=h,u+=4,s=u}return{earliestPresentationTime:r,timescale:i,version:t,referencesCount:l,references:e}}function xE(n){const e=[],t=Ge(n,["moov","trak"]);for(let i=0;i<t.length;i++){const r=t[i],a=Ge(r,["tkhd"])[0];if(a){let o=a[0];const l=ke(a,o===0?12:20),c=Ge(r,["mdia","mdhd"])[0];if(c){o=c[0];const u=ke(c,o===0?12:20),d=Ge(r,["mdia","hdlr"])[0];if(d){const h=Ct(d.subarray(8,12)),f={soun:st.AUDIO,vide:st.VIDEO}[h];if(f){const p=Ge(r,["mdia","minf","stbl","stsd"])[0],m=hO(p);e[l]={timescale:u,type:f},e[f]=Gt({timescale:u,id:l},m)}}}}}return Ge(n,["moov","mvex","trex"]).forEach(i=>{const r=ke(i,4),a=e[r];a&&(a.default={duration:ke(i,12),flags:ke(i,20)})}),e}function hO(n){const e=n.subarray(8),t=e.subarray(8+78),s=Ct(e.subarray(4,8));let i=s;const r=s==="enca"||s==="encv";if(r){const o=Ge(e,[s])[0].subarray(s==="enca"?28:78);Ge(o,["sinf"]).forEach(c=>{const u=Ge(c,["schm"])[0];if(u){const d=Ct(u.subarray(4,8));if(d==="cbcs"||d==="cenc"){const h=Ge(c,["frma"])[0];h&&(i=Ct(h))}}})}switch(i){case"avc1":case"avc2":case"avc3":case"avc4":{const a=Ge(t,["avcC"])[0];i+="."+Ao(a[1])+Ao(a[2])+Ao(a[3]);break}case"mp4a":{const a=Ge(e,[s])[0],o=Ge(a.subarray(28),["esds"])[0];if(o&&o.length>12){let l=4;if(o[l++]!==3)break;l=eu(o,l),l+=2;const c=o[l++];if(c&128&&(l+=2),c&64&&(l+=o[l++]),o[l++]!==4)break;l=eu(o,l);const u=o[l++];if(u===64)i+="."+Ao(u);else break;if(l+=12,o[l++]!==5)break;l=eu(o,l);const d=o[l++];let h=(d&248)>>3;h===31&&(h+=1+((d&7)<<3)+((o[l]&224)>>5)),i+="."+h}break}case"hvc1":case"hev1":{const a=Ge(t,["hvcC"])[0],o=a[1],l=["","A","B","C"][o>>6],c=o&31,u=ke(a,2),d=(o&32)>>5?"H":"L",h=a[12],f=a.subarray(6,12);i+="."+l+c,i+="."+u.toString(16).toUpperCase(),i+="."+d+h;let p="";for(let m=f.length;m--;){const y=f[m];(y||p)&&(p="."+y.toString(16).toUpperCase()+p)}i+=p;break}case"dvh1":case"dvhe":{const a=Ge(t,["dvcC"])[0],o=a[2]>>1&127,l=a[2]<<5&32|a[3]>>3&31;i+="."+sn(o)+"."+sn(l);break}case"vp09":{const a=Ge(t,["vpcC"])[0],o=a[4],l=a[5],c=a[6]>>4&15;i+="."+sn(o)+"."+sn(l)+"."+sn(c);break}case"av01":{const a=Ge(t,["av1C"])[0],o=a[1]>>>5,l=a[1]&31,c=a[2]>>>7?"H":"M",u=(a[2]&64)>>6,d=(a[2]&32)>>5,h=o===2&&u?d?12:10:u?10:8,f=(a[2]&16)>>4,p=(a[2]&8)>>3,m=(a[2]&4)>>2,y=a[2]&3,g=1,v=1,E=1,T=0;i+="."+o+"."+sn(l)+c+"."+sn(h)+"."+f+"."+p+m+y+"."+sn(g)+"."+sn(v)+"."+sn(E)+"."+T;break}}return{codec:i,encrypted:r}}function eu(n,e){const t=e+5;for(;n[e++]&128&&e<t;);return e}function Ao(n){return("0"+n.toString(16).toUpperCase()).slice(-2)}function sn(n){return(n<10?"0":"")+n}function fO(n,e){if(!n||!e)return n;const t=e.keyId;return t&&e.isCommonEncryption&&Ge(n,["moov","trak"]).forEach(i=>{const a=Ge(i,["mdia","minf","stbl","stsd"])[0].subarray(8);let o=Ge(a,["enca"]);const l=o.length>0;l||(o=Ge(a,["encv"])),o.forEach(c=>{const u=l?c.subarray(28):c.subarray(78);Ge(u,["sinf"]).forEach(h=>{const f=SE(h);if(f){const p=f.subarray(8,24);p.some(m=>m!==0)||(z.log(`[eme] Patching keyId in 'enc${l?"a":"v"}>sinf>>tenc' box: ${rn.hexDump(p)} -> ${rn.hexDump(t)}`),f.set(t,8))}})})}),n}function SE(n){const e=Ge(n,["schm"])[0];if(e){const t=Ct(e.subarray(4,8));if(t==="cbcs"||t==="cenc")return Ge(n,["schi","tenc"])[0]}return z.error("[eme] missing 'schm' box"),null}function pO(n,e){return Ge(e,["moof","traf"]).reduce((t,s)=>{const i=Ge(s,["tfdt"])[0],r=i[0],a=Ge(s,["tfhd"]).reduce((o,l)=>{const c=ke(l,4),u=n[c];if(u){let d=ke(i,4);if(r===1){if(d===_l)return z.warn("[mp4-demuxer]: Ignoring assumed invalid signed 64-bit track fragment decode time"),o;d*=_l+1,d+=ke(i,8)}const h=u.timescale||9e4,f=d/h;if(Se(f)&&(o===null||f<o))return f}return o},null);return a!==null&&Se(a)&&(t===null||a<t)?a:t},null)}function mO(n,e){let t=0,s=0,i=0;const r=Ge(n,["moof","traf"]);for(let a=0;a<r.length;a++){const o=r[a],l=Ge(o,["tfhd"])[0],c=ke(l,4),u=e[c];if(!u)continue;const d=u.default,h=ke(l,0)|(d==null?void 0:d.flags);let f=d==null?void 0:d.duration;h&8&&(h&2?f=ke(l,12):f=ke(l,8));const p=u.timescale||9e4,m=Ge(o,["trun"]);for(let y=0;y<m.length;y++){if(t=gO(m[y]),!t&&f){const g=ke(m[y],4);t=f*g}u.type===st.VIDEO?s+=t/p:u.type===st.AUDIO&&(i+=t/p)}}if(s===0&&i===0){let a=1/0,o=0,l=0;const c=Ge(n,["sidx"]);for(let u=0;u<c.length;u++){const d=dO(c[u]);if(d!=null&&d.references){a=Math.min(a,d.earliestPresentationTime/d.timescale);const h=d.references.reduce((f,p)=>f+p.info.duration||0,0);o=Math.max(o,h+d.earliestPresentationTime/d.timescale),l=o-a}}if(l&&Se(l))return l}return s||i}function gO(n){const e=ke(n,0);let t=8;e&1&&(t+=4),e&4&&(t+=4);let s=0;const i=ke(n,4);for(let r=0;r<i;r++){if(e&256){const a=ke(n,t);s+=a,t+=4}e&512&&(t+=4),e&1024&&(t+=4),e&2048&&(t+=4)}return s}function yO(n,e,t){Ge(e,["moof","traf"]).forEach(s=>{Ge(s,["tfhd"]).forEach(i=>{const r=ke(i,4),a=n[r];if(!a)return;const o=a.timescale||9e4;Ge(s,["tfdt"]).forEach(l=>{const c=l[0],u=t*o;if(u){let d=ke(l,4);if(c===0)d-=u,d=Math.max(d,0),Zc(l,4,d);else{d*=Math.pow(2,32),d+=ke(l,8),d-=u,d=Math.max(d,0);const h=Math.floor(d/(_l+1)),f=Math.floor(d%(_l+1));Zc(l,4,h),Zc(l,8,f)}}})})})}function vO(n){const e={valid:null,remainder:null},t=Ge(n,["moof"]);if(t.length<2)return e.remainder=n,e;const s=t[t.length-1];return e.valid=Hi(n,0,s.byteOffset-8),e.remainder=Hi(n,s.byteOffset-8),e}function Bs(n,e){const t=new Uint8Array(n.length+e.length);return t.set(n),t.set(e,n.length),t}function og(n,e){const t=[],s=e.samples,i=e.timescale,r=e.id;let a=!1;return Ge(s,["moof"]).map(l=>{const c=l.byteOffset-8;Ge(l,["traf"]).map(d=>{const h=Ge(d,["tfdt"]).map(f=>{const p=f[0];let m=ke(f,4);return p===1&&(m*=Math.pow(2,32),m+=ke(f,8)),m/i})[0];return h!==void 0&&(n=h),Ge(d,["tfhd"]).map(f=>{const p=ke(f,4),m=ke(f,0)&16777215,y=(m&1)!==0,g=(m&2)!==0,v=(m&8)!==0;let E=0;const T=(m&16)!==0;let b=0;const L=(m&32)!==0;let x=8;p===r&&(y&&(x+=8),g&&(x+=4),v&&(E=ke(f,x),x+=4),T&&(b=ke(f,x),x+=4),L&&(x+=4),e.type==="video"&&(a=EO(e.codec)),Ge(d,["trun"]).map(w=>{const k=w[0],R=ke(w,0)&16777215,P=(R&1)!==0;let D=0;const O=(R&4)!==0,N=(R&256)!==0;let $=0;const K=(R&512)!==0;let ee=0;const V=(R&1024)!==0,U=(R&2048)!==0;let B=0;const j=ke(w,4);let Y=8;P&&(D=ke(w,Y),Y+=4),O&&(Y+=4);let me=D+c;for(let xe=0;xe<j;xe++){if(N?($=ke(w,Y),Y+=4):$=E,K?(ee=ke(w,Y),Y+=4):ee=b,V&&(Y+=4),U&&(k===0?B=ke(w,Y):B=bE(w,Y),Y+=4),e.type===st.VIDEO){let Le=0;for(;Le<ee;){const we=ke(s,me);if(me+=4,TO(a,s[me])){const Q=s.subarray(me,me+we);_E(Q,a?2:1,n+B/i,t)}me+=we,Le+=we+4}}n+=$/i}}))})})}),t}function EO(n){if(!n)return!1;const e=n.indexOf("."),t=e<0?n:n.substring(0,e);return t==="hvc1"||t==="hev1"||t==="dvh1"||t==="dvhe"}function TO(n,e){if(n){const t=e>>1&63;return t===39||t===40}else return(e&31)===6}function _E(n,e,t,s){const i=AE(n);let r=0;r+=e;let a=0,o=0,l=0;for(;r<i.length;){a=0;do{if(r>=i.length)break;l=i[r++],a+=l}while(l===255);o=0;do{if(r>=i.length)break;l=i[r++],o+=l}while(l===255);const c=i.length-r;let u=r;if(o<c)r+=o;else if(o>c){z.error(`Malformed SEI payload. ${o} is too small, only ${c} bytes left to parse.`);break}if(a===4){if(i[u++]===181){const h=TE(i,u);if(u+=2,h===49){const f=ke(i,u);if(u+=4,f===1195456820){const p=i[u++];if(p===3){const m=i[u++],y=31&m,g=64&m,v=g?2+y*3:0,E=new Uint8Array(v);if(g){E[0]=m;for(let T=1;T<v;T++)E[T]=i[u++]}s.push({type:p,payloadType:a,pts:t,bytes:E})}}}}}else if(a===5&&o>16){const d=[];for(let p=0;p<16;p++){const m=i[u++].toString(16);d.push(m.length==1?"0"+m:m),(p===3||p===5||p===7||p===9)&&d.push("-")}const h=o-16,f=new Uint8Array(h);for(let p=0;p<h;p++)f[p]=i[u++];s.push({payloadType:a,pts:t,uuid:d.join(""),userData:gn(f),userDataBytes:f})}}}function AE(n){const e=n.byteLength,t=[];let s=1;for(;s<e-2;)n[s]===0&&n[s+1]===0&&n[s+2]===3?(t.push(s+2),s+=2):s++;if(t.length===0)return n;const i=e-t.length,r=new Uint8Array(i);let a=0;for(s=0;s<i;a++,s++)a===t[0]&&(a++,t.shift()),r[s]=n[a];return r}function bO(n){const e=n[0];let t="",s="",i=0,r=0,a=0,o=0,l=0,c=0;if(e===0){for(;Ct(n.subarray(c,c+1))!=="\0";)t+=Ct(n.subarray(c,c+1)),c+=1;for(t+=Ct(n.subarray(c,c+1)),c+=1;Ct(n.subarray(c,c+1))!=="\0";)s+=Ct(n.subarray(c,c+1)),c+=1;s+=Ct(n.subarray(c,c+1)),c+=1,i=ke(n,12),r=ke(n,16),o=ke(n,20),l=ke(n,24),c=28}else if(e===1){c+=4,i=ke(n,c),c+=4;const d=ke(n,c);c+=4;const h=ke(n,c);for(c+=4,a=2**32*d+h,BP(a)||(a=Number.MAX_SAFE_INTEGER,z.warn("Presentation time exceeds safe integer limit and wrapped to max safe integer in parsing emsg box")),o=ke(n,c),c+=4,l=ke(n,c),c+=4;Ct(n.subarray(c,c+1))!=="\0";)t+=Ct(n.subarray(c,c+1)),c+=1;for(t+=Ct(n.subarray(c,c+1)),c+=1;Ct(n.subarray(c,c+1))!=="\0";)s+=Ct(n.subarray(c,c+1)),c+=1;s+=Ct(n.subarray(c,c+1)),c+=1}const u=n.subarray(c,n.byteLength);return{schemeIdUri:t,value:s,timeScale:i,presentationTime:a,presentationTimeDelta:r,eventDuration:o,id:l,payload:u}}function xO(n,...e){const t=e.length;let s=8,i=t;for(;i--;)s+=e[i].byteLength;const r=new Uint8Array(s);for(r[0]=s>>24&255,r[1]=s>>16&255,r[2]=s>>8&255,r[3]=s&255,r.set(n,4),i=0,s=8;i<t;i++)r.set(e[i],s),s+=e[i].byteLength;return r}function SO(n,e,t){if(n.byteLength!==16)throw new RangeError("Invalid system id");let s,i;if(e){s=1,i=new Uint8Array(e.length*16);for(let o=0;o<e.length;o++){const l=e[o];if(l.byteLength!==16)throw new RangeError("Invalid key");i.set(l,o*16)}}else s=0,i=new Uint8Array;let r;s>0?(r=new Uint8Array(4),e.length>0&&new DataView(r.buffer).setUint32(0,e.length,!1)):r=new Uint8Array;const a=new Uint8Array(4);return t&&t.byteLength>0&&new DataView(a.buffer).setUint32(0,t.byteLength,!1),xO([112,115,115,104],new Uint8Array([s,0,0,0]),n,r,i,a,t||new Uint8Array)}function _O(n){if(!(n instanceof ArrayBuffer)||n.byteLength<32)return null;const e={version:0,systemId:"",kids:null,data:null},t=new DataView(n),s=t.getUint32(0);if(n.byteLength!==s&&s>44||t.getUint32(4)!==1886614376||(e.version=t.getUint32(8)>>>24,e.version>1))return null;e.systemId=rn.hexDump(new Uint8Array(n,12,16));const r=t.getUint32(28);if(e.version===0){if(s-32<r)return null;e.data=new Uint8Array(n,32,r)}else if(e.version===1){e.kids=[];for(let a=0;a<r;a++)e.kids.push(new Uint8Array(n,32+a*16,16))}return e}let Lo={};class za{static clearKeyUriToKeyIdMap(){Lo={}}constructor(e,t,s,i=[1],r=null){this.uri=void 0,this.method=void 0,this.keyFormat=void 0,this.keyFormatVersions=void 0,this.encrypted=void 0,this.isCommonEncryption=void 0,this.iv=null,this.key=null,this.keyId=null,this.pssh=null,this.method=e,this.uri=t,this.keyFormat=s,this.keyFormatVersions=i,this.iv=r,this.encrypted=e?e!=="NONE":!1,this.isCommonEncryption=this.encrypted&&e!=="AES-128"}isSupported(){if(this.method){if(this.method==="AES-128"||this.method==="NONE")return!0;if(this.keyFormat==="identity")return this.method==="SAMPLE-AES";switch(this.keyFormat){case cs.FAIRPLAY:case cs.WIDEVINE:case cs.PLAYREADY:case cs.CLEARKEY:return["ISO-23001-7","SAMPLE-AES","SAMPLE-AES-CENC","SAMPLE-AES-CTR"].indexOf(this.method)!==-1}}return!1}getDecryptData(e){if(!this.encrypted||!this.uri)return null;if(this.method==="AES-128"&&this.uri&&!this.iv){typeof e!="number"&&(this.method==="AES-128"&&!this.iv&&z.warn(`missing IV for initialization segment with method="${this.method}" - compliance issue`),e=0);const s=AO(e);return new za(this.method,this.uri,"identity",this.keyFormatVersions,s)}const t=QP(this.uri);if(t)switch(this.keyFormat){case cs.WIDEVINE:this.pssh=t,t.length>=22&&(this.keyId=t.subarray(t.length-22,t.length-6));break;case cs.PLAYREADY:{const s=new Uint8Array([154,4,240,121,152,64,66,134,171,146,230,91,224,136,95,149]);this.pssh=SO(s,null,t);const i=new Uint16Array(t.buffer,t.byteOffset,t.byteLength/2),r=String.fromCharCode.apply(null,Array.from(i)),a=r.substring(r.indexOf("<"),r.length),c=new DOMParser().parseFromString(a,"text/xml").getElementsByTagName("KID")[0];if(c){const u=c.childNodes[0]?c.childNodes[0].nodeValue:c.getAttribute("VALUE");if(u){const d=df(u).subarray(0,16);XP(d),this.keyId=d}}break}default:{let s=t.subarray(0,16);if(s.length!==16){const i=new Uint8Array(16);i.set(s,16-s.length),s=i}this.keyId=s;break}}if(!this.keyId||this.keyId.byteLength!==16){let s=Lo[this.uri];if(!s){const i=Object.keys(Lo).length%Number.MAX_SAFE_INTEGER;s=new Uint8Array(16),new DataView(s.buffer,12,4).setUint32(0,i),Lo[this.uri]=s}this.keyId=s}return this}}function AO(n){const e=new Uint8Array(16);for(let t=12;t<16;t++)e[t]=n>>8*(15-t)&255;return e}const LE=/\{\$([a-zA-Z0-9-_]+)\}/g;function lg(n){return LE.test(n)}function as(n,e,t){if(n.variableList!==null||n.hasVariableRefs)for(let s=t.length;s--;){const i=t[s],r=e[i];r&&(e[i]=Nd(n,r))}}function Nd(n,e){if(n.variableList!==null||n.hasVariableRefs){const t=n.variableList;return e.replace(LE,s=>{const i=s.substring(2,s.length-1),r=t==null?void 0:t[i];return r===void 0?(n.playlistParsingError||(n.playlistParsingError=new Error(`Missing preceding EXT-X-DEFINE tag for Variable Reference: "${i}"`)),s):r})}return e}function cg(n,e,t){let s=n.variableList;s||(n.variableList=s={});let i,r;if("QUERYPARAM"in e){i=e.QUERYPARAM;try{const a=new self.URL(t).searchParams;if(a.has(i))r=a.get(i);else throw new Error(`"${i}" does not match any query parameter in URI: "${t}"`)}catch(a){n.playlistParsingError||(n.playlistParsingError=new Error(`EXT-X-DEFINE QUERYPARAM: ${a.message}`))}}else i=e.NAME,r=e.VALUE;i in s?n.playlistParsingError||(n.playlistParsingError=new Error(`EXT-X-DEFINE duplicate Variable Name declarations: "${i}"`)):s[i]=r||""}function LO(n,e,t){const s=e.IMPORT;if(t&&s in t){let i=n.variableList;i||(n.variableList=i={}),i[s]=t[s]}else n.playlistParsingError||(n.playlistParsingError=new Error(`EXT-X-DEFINE IMPORT attribute not found in Multivariant Playlist: "${s}"`))}function Zr(n=!0){return typeof self>"u"?void 0:(n||!self.MediaSource)&&self.ManagedMediaSource||self.MediaSource||self.WebKitMediaSource}const Al={audio:{a3ds:1,"ac-3":.95,"ac-4":1,alac:.9,alaw:1,dra1:1,"dts+":1,"dts-":1,dtsc:1,dtse:1,dtsh:1,"ec-3":.9,enca:1,fLaC:.9,flac:.9,FLAC:.9,g719:1,g726:1,m4ae:1,mha1:1,mha2:1,mhm1:1,mhm2:1,mlpa:1,mp4a:1,"raw ":1,Opus:1,opus:1,samr:1,sawb:1,sawp:1,sevc:1,sqcp:1,ssmv:1,twos:1,ulaw:1},video:{avc1:1,avc2:1,avc3:1,avc4:1,avcp:1,av01:.8,drac:1,dva1:1,dvav:1,dvh1:.7,dvhe:.7,encv:1,hev1:.75,hvc1:.75,mjp2:1,mp4v:1,mvc1:1,mvc2:1,mvc3:1,mvc4:1,resv:1,rv60:1,s263:1,svc1:1,svc2:1,"vc-1":1,vp08:1,vp09:.9},text:{stpp:1,wvtt:1}};function wO(n,e){const t=Al[e];return!!t&&!!t[n.slice(0,4)]}function tu(n,e,t=!0){return!n.split(",").some(s=>!wE(s,e,t))}function wE(n,e,t=!0){var s;const i=Zr(t);return(s=i==null?void 0:i.isTypeSupported(Ya(n,e)))!=null?s:!1}function Ya(n,e){return`${e}/mp4;codecs="${n}"`}function ug(n){if(n){const e=n.substring(0,4);return Al.video[e]}return 2}function Ll(n){return n.split(",").reduce((e,t)=>{const s=Al.video[t];return s?(s*2+e)/(e?3:2):(Al.audio[t]+e)/(e?2:1)},0)}const su={};function RO(n,e=!0){if(su[n])return su[n];const t={flac:["flac","fLaC","FLAC"],opus:["opus","Opus"]}[n];for(let s=0;s<t.length;s++)if(wE(t[s],"audio",e))return su[n]=t[s],t[s];return n}const IO=/flac|opus/i;function wl(n,e=!0){return n.replace(IO,t=>RO(t.toLowerCase(),e))}function dg(n,e){return n&&n!=="mp4a"?n:e}function CO(n){const e=n.split(".");if(e.length>2){let t=e.shift()+".";return t+=parseInt(e.shift()).toString(16),t+=("000"+parseInt(e.shift()).toString(16)).slice(-4),t}return n}const hg=/#EXT-X-STREAM-INF:([^\r\n]*)(?:[\r\n](?:#[^\r\n]*)?)*([^\r\n]+)|#EXT-X-(SESSION-DATA|SESSION-KEY|DEFINE|CONTENT-STEERING|START):([^\r\n]*)[\r\n]+/g,fg=/#EXT-X-MEDIA:(.*)/g,DO=/^#EXT(?:INF|-X-TARGETDURATION):/m,pg=new RegExp([/#EXTINF:\s*(\d*(?:\.\d+)?)(?:,(.*)\s+)?/.source,/(?!#) *(\S[\S ]*)/.source,/#EXT-X-BYTERANGE:*(.+)/.source,/#EXT-X-PROGRAM-DATE-TIME:(.+)/.source,/#.*/.source].join("|"),"g"),kO=new RegExp([/#(EXTM3U)/.source,/#EXT-X-(DATERANGE|DEFINE|KEY|MAP|PART|PART-INF|PLAYLIST-TYPE|PRELOAD-HINT|RENDITION-REPORT|SERVER-CONTROL|SKIP|START):(.+)/.source,/#EXT-X-(BITRATE|DISCONTINUITY-SEQUENCE|MEDIA-SEQUENCE|TARGETDURATION|VERSION): *(\d+)/.source,/#EXT-X-(DISCONTINUITY|ENDLIST|GAP|INDEPENDENT-SEGMENTS)/.source,/(#)([^:]*):(.*)/.source,/(#)(.*)(?:.*)\r?\n?/.source].join("|"));class pn{static findGroup(e,t){for(let s=0;s<e.length;s++){const i=e[s];if(i.id===t)return i}}static resolve(e,t){return uf.buildAbsoluteURL(t,e,{alwaysNormalize:!0})}static isMediaPlaylist(e){return DO.test(e)}static parseMasterPlaylist(e,t){const s=lg(e),i={contentSteering:null,levels:[],playlistParsingError:null,sessionData:null,sessionKeys:null,startTimeOffset:null,variableList:null,hasVariableRefs:s},r=[];hg.lastIndex=0;let a;for(;(a=hg.exec(e))!=null;)if(a[1]){var o;const c=new Et(a[1]);as(i,c,["CODECS","SUPPLEMENTAL-CODECS","ALLOWED-CPC","PATHWAY-ID","STABLE-VARIANT-ID","AUDIO","VIDEO","SUBTITLES","CLOSED-CAPTIONS","NAME"]);const u=Nd(i,a[2]),d={attrs:c,bitrate:c.decimalInteger("BANDWIDTH")||c.decimalInteger("AVERAGE-BANDWIDTH"),name:c.NAME,url:pn.resolve(u,t)},h=c.decimalResolution("RESOLUTION");h&&(d.width=h.width,d.height=h.height),PO(c.CODECS,d),(o=d.unknownCodecs)!=null&&o.length||r.push(d),i.levels.push(d)}else if(a[3]){const c=a[3],u=a[4];switch(c){case"SESSION-DATA":{const d=new Et(u);as(i,d,["DATA-ID","LANGUAGE","VALUE","URI"]);const h=d["DATA-ID"];h&&(i.sessionData===null&&(i.sessionData={}),i.sessionData[h]=d);break}case"SESSION-KEY":{const d=mg(u,t,i);d.encrypted&&d.isSupported()?(i.sessionKeys===null&&(i.sessionKeys=[]),i.sessionKeys.push(d)):z.warn(`[Keys] Ignoring invalid EXT-X-SESSION-KEY tag: "${u}"`);break}case"DEFINE":{{const d=new Et(u);as(i,d,["NAME","VALUE","QUERYPARAM"]),cg(i,d,t)}break}case"CONTENT-STEERING":{const d=new Et(u);as(i,d,["SERVER-URI","PATHWAY-ID"]),i.contentSteering={uri:pn.resolve(d["SERVER-URI"],t),pathwayId:d["PATHWAY-ID"]||"."};break}case"START":{i.startTimeOffset=gg(u);break}}}const l=r.length>0&&r.length<i.levels.length;return i.levels=l?r:i.levels,i.levels.length===0&&(i.playlistParsingError=new Error("no levels found in manifest")),i}static parseMasterPlaylistMedia(e,t,s){let i;const r={},a=s.levels,o={AUDIO:a.map(c=>({id:c.attrs.AUDIO,audioCodec:c.audioCodec})),SUBTITLES:a.map(c=>({id:c.attrs.SUBTITLES,textCodec:c.textCodec})),"CLOSED-CAPTIONS":[]};let l=0;for(fg.lastIndex=0;(i=fg.exec(e))!==null;){const c=new Et(i[1]),u=c.TYPE;if(u){const d=o[u],h=r[u]||[];r[u]=h,as(s,c,["URI","GROUP-ID","LANGUAGE","ASSOC-LANGUAGE","STABLE-RENDITION-ID","NAME","INSTREAM-ID","CHARACTERISTICS","CHANNELS"]);const f=c.LANGUAGE,p=c["ASSOC-LANGUAGE"],m=c.CHANNELS,y=c.CHARACTERISTICS,g=c["INSTREAM-ID"],v={attrs:c,bitrate:0,id:l++,groupId:c["GROUP-ID"]||"",name:c.NAME||f||"",type:u,default:c.bool("DEFAULT"),autoselect:c.bool("AUTOSELECT"),forced:c.bool("FORCED"),lang:f,url:c.URI?pn.resolve(c.URI,t):""};if(p&&(v.assocLang=p),m&&(v.channels=m),y&&(v.characteristics=y),g&&(v.instreamId=g),d!=null&&d.length){const E=pn.findGroup(d,v.groupId)||d[0];yg(v,E,"audioCodec"),yg(v,E,"textCodec")}h.push(v)}}return r}static parseLevelPlaylist(e,t,s,i,r,a){const o=new YP(t),l=o.fragments;let c=null,u=0,d=0,h=0,f=0,p=null,m=new Xc(i,t),y,g,v,E=-1,T=!1,b=null;for(pg.lastIndex=0,o.m3u8=e,o.hasVariableRefs=lg(e);(y=pg.exec(e))!==null;){T&&(T=!1,m=new Xc(i,t),m.start=h,m.sn=u,m.cc=f,m.level=s,c&&(m.initSegment=c,m.rawProgramDateTime=c.rawProgramDateTime,c.rawProgramDateTime=null,b&&(m.setByteRange(b),b=null)));const k=y[1];if(k){m.duration=parseFloat(k);const R=(" "+y[2]).slice(1);m.title=R||null,m.tagList.push(R?["INF",k,R]:["INF",k])}else if(y[3]){if(Se(m.duration)){m.start=h,v&&Tg(m,v,o),m.sn=u,m.level=s,m.cc=f,l.push(m);const R=(" "+y[3]).slice(1);m.relurl=Nd(o,R),vg(m,p),p=m,h+=m.duration,u++,d=0,T=!0}}else if(y[4]){const R=(" "+y[4]).slice(1);p?m.setByteRange(R,p):m.setByteRange(R)}else if(y[5])m.rawProgramDateTime=(" "+y[5]).slice(1),m.tagList.push(["PROGRAM-DATE-TIME",m.rawProgramDateTime]),E===-1&&(E=l.length);else{if(y=y[0].match(kO),!y){z.warn("No matches on slow regex match for level playlist!");continue}for(g=1;g<y.length&&!(typeof y[g]<"u");g++);const R=(" "+y[g]).slice(1),P=(" "+y[g+1]).slice(1),D=y[g+2]?(" "+y[g+2]).slice(1):"";switch(R){case"PLAYLIST-TYPE":o.type=P.toUpperCase();break;case"MEDIA-SEQUENCE":u=o.startSN=parseInt(P);break;case"SKIP":{const O=new Et(P);as(o,O,["RECENTLY-REMOVED-DATERANGES"]);const N=O.decimalInteger("SKIPPED-SEGMENTS");if(Se(N)){o.skippedSegments=N;for(let K=N;K--;)l.unshift(null);u+=N}const $=O.enumeratedString("RECENTLY-REMOVED-DATERANGES");$&&(o.recentlyRemovedDateranges=$.split("	"));break}case"TARGETDURATION":o.targetduration=Math.max(parseInt(P),1);break;case"VERSION":o.version=parseInt(P);break;case"INDEPENDENT-SEGMENTS":case"EXTM3U":break;case"ENDLIST":o.live=!1;break;case"#":(P||D)&&m.tagList.push(D?[P,D]:[P]);break;case"DISCONTINUITY":f++,m.tagList.push(["DIS"]);break;case"GAP":m.gap=!0,m.tagList.push([R]);break;case"BITRATE":m.tagList.push([R,P]);break;case"DATERANGE":{const O=new Et(P);as(o,O,["ID","CLASS","START-DATE","END-DATE","SCTE35-CMD","SCTE35-OUT","SCTE35-IN"]),as(o,O,O.clientAttrs);const N=new hE(O,o.dateRanges[O.ID]);N.isValid||o.skippedSegments?o.dateRanges[N.id]=N:z.warn(`Ignoring invalid DATERANGE tag: "${P}"`),m.tagList.push(["EXT-X-DATERANGE",P]);break}case"DEFINE":{{const O=new Et(P);as(o,O,["NAME","VALUE","IMPORT","QUERYPARAM"]),"IMPORT"in O?LO(o,O,a):cg(o,O,t)}break}case"DISCONTINUITY-SEQUENCE":f=parseInt(P);break;case"KEY":{const O=mg(P,t,o);if(O.isSupported()){if(O.method==="NONE"){v=void 0;break}v||(v={}),v[O.keyFormat]&&(v=It({},v)),v[O.keyFormat]=O}else z.warn(`[Keys] Ignoring invalid EXT-X-KEY tag: "${P}"`);break}case"START":o.startTimeOffset=gg(P);break;case"MAP":{const O=new Et(P);if(as(o,O,["BYTERANGE","URI"]),m.duration){const N=new Xc(i,t);Eg(N,O,s,v),c=N,m.initSegment=c,c.rawProgramDateTime&&!m.rawProgramDateTime&&(m.rawProgramDateTime=c.rawProgramDateTime)}else{const N=m.byteRangeEndOffset;if(N){const $=m.byteRangeStartOffset;b=`${N-$}@${$}`}else b=null;Eg(m,O,s,v),c=m,T=!0}break}case"SERVER-CONTROL":{const O=new Et(P);o.canBlockReload=O.bool("CAN-BLOCK-RELOAD"),o.canSkipUntil=O.optionalFloat("CAN-SKIP-UNTIL",0),o.canSkipDateRanges=o.canSkipUntil>0&&O.bool("CAN-SKIP-DATERANGES"),o.partHoldBack=O.optionalFloat("PART-HOLD-BACK",0),o.holdBack=O.optionalFloat("HOLD-BACK",0);break}case"PART-INF":{const O=new Et(P);o.partTarget=O.decimalFloatingPoint("PART-TARGET");break}case"PART":{let O=o.partList;O||(O=o.partList=[]);const N=d>0?O[O.length-1]:void 0,$=d++,K=new Et(P);as(o,K,["BYTERANGE","URI"]);const ee=new WP(K,m,t,$,N);O.push(ee),m.duration+=ee.duration;break}case"PRELOAD-HINT":{const O=new Et(P);as(o,O,["URI"]),o.preloadHint=O;break}case"RENDITION-REPORT":{const O=new Et(P);as(o,O,["URI"]),o.renditionReports=o.renditionReports||[],o.renditionReports.push(O);break}default:z.warn(`line parsed but not handled: ${y}`);break}}}p&&!p.relurl?(l.pop(),h-=p.duration,o.partList&&(o.fragmentHint=p)):o.partList&&(vg(m,p),m.cc=f,o.fragmentHint=m,v&&Tg(m,v,o));const L=l.length,x=l[0],w=l[L-1];if(h+=o.skippedSegments*o.targetduration,h>0&&L&&w){o.averagetargetduration=h/L;const k=w.sn;o.endSN=k!=="initSegment"?k:0,o.live||(w.endList=!0),x&&(o.startCC=x.cc)}else o.endSN=0,o.startCC=0;return o.fragmentHint&&(h+=o.fragmentHint.duration),o.totalduration=h,o.endCC=f,E>0&&OO(l,E),o}}function mg(n,e,t){var s,i;const r=new Et(n);as(t,r,["KEYFORMAT","KEYFORMATVERSIONS","URI","IV","URI"]);const a=(s=r.METHOD)!=null?s:"",o=r.URI,l=r.hexadecimalInteger("IV"),c=r.KEYFORMATVERSIONS,u=(i=r.KEYFORMAT)!=null?i:"identity";o&&r.IV&&!l&&z.error(`Invalid IV: ${r.IV}`);const d=o?pn.resolve(o,e):"",h=(c||"1").split("/").map(Number).filter(Number.isFinite);return new za(a,d,u,h,l)}function gg(n){const t=new Et(n).decimalFloatingPoint("TIME-OFFSET");return Se(t)?t:null}function PO(n,e){let t=(n||"").split(/[ ,]+/).filter(s=>s);["video","audio","text"].forEach(s=>{const i=t.filter(r=>wO(r,s));i.length&&(e[`${s}Codec`]=i.join(","),t=t.filter(r=>i.indexOf(r)===-1))}),e.unknownCodecs=t}function yg(n,e,t){const s=e[t];s&&(n[t]=s)}function OO(n,e){let t=n[e];for(let s=e;s--;){const i=n[s];if(!i)return;i.programDateTime=t.programDateTime-i.duration*1e3,t=i}}function vg(n,e){n.rawProgramDateTime?n.programDateTime=Date.parse(n.rawProgramDateTime):e!=null&&e.programDateTime&&(n.programDateTime=e.endProgramDateTime),Se(n.programDateTime)||(n.programDateTime=null,n.rawProgramDateTime=null)}function Eg(n,e,t,s){n.relurl=e.URI,e.BYTERANGE&&n.setByteRange(e.BYTERANGE),n.level=t,n.sn="initSegment",s&&(n.levelkeys=s),n.initSegment=null}function Tg(n,e,t){n.levelkeys=e;const{encryptedFragments:s}=t;(!s.length||s[s.length-1].levelkeys!==e)&&Object.keys(e).some(i=>e[i].isCommonEncryption)&&s.push(n)}var Ye={MANIFEST:"manifest",LEVEL:"level",AUDIO_TRACK:"audioTrack",SUBTITLE_TRACK:"subtitleTrack"},Pe={MAIN:"main",AUDIO:"audio",SUBTITLE:"subtitle"};function bg(n){const{type:e}=n;switch(e){case Ye.AUDIO_TRACK:return Pe.AUDIO;case Ye.SUBTITLE_TRACK:return Pe.SUBTITLE;default:return Pe.MAIN}}function nu(n,e){let t=n.url;return(t===void 0||t.indexOf("data:")===0)&&(t=e.url),t}class MO{constructor(e){this.hls=void 0,this.loaders=Object.create(null),this.variableList=null,this.hls=e,this.registerListeners()}startLoad(e){}stopLoad(){this.destroyInternalLoaders()}registerListeners(){const{hls:e}=this;e.on(I.MANIFEST_LOADING,this.onManifestLoading,this),e.on(I.LEVEL_LOADING,this.onLevelLoading,this),e.on(I.AUDIO_TRACK_LOADING,this.onAudioTrackLoading,this),e.on(I.SUBTITLE_TRACK_LOADING,this.onSubtitleTrackLoading,this)}unregisterListeners(){const{hls:e}=this;e.off(I.MANIFEST_LOADING,this.onManifestLoading,this),e.off(I.LEVEL_LOADING,this.onLevelLoading,this),e.off(I.AUDIO_TRACK_LOADING,this.onAudioTrackLoading,this),e.off(I.SUBTITLE_TRACK_LOADING,this.onSubtitleTrackLoading,this)}createInternalLoader(e){const t=this.hls.config,s=t.pLoader,i=t.loader,r=s||i,a=new r(t);return this.loaders[e.type]=a,a}getInternalLoader(e){return this.loaders[e.type]}resetInternalLoader(e){this.loaders[e]&&delete this.loaders[e]}destroyInternalLoaders(){for(const e in this.loaders){const t=this.loaders[e];t&&t.destroy(),this.resetInternalLoader(e)}}destroy(){this.variableList=null,this.unregisterListeners(),this.destroyInternalLoaders()}onManifestLoading(e,t){const{url:s}=t;this.variableList=null,this.load({id:null,level:0,responseType:"text",type:Ye.MANIFEST,url:s,deliveryDirectives:null})}onLevelLoading(e,t){const{id:s,level:i,pathwayId:r,url:a,deliveryDirectives:o}=t;this.load({id:s,level:i,pathwayId:r,responseType:"text",type:Ye.LEVEL,url:a,deliveryDirectives:o})}onAudioTrackLoading(e,t){const{id:s,groupId:i,url:r,deliveryDirectives:a}=t;this.load({id:s,groupId:i,level:null,responseType:"text",type:Ye.AUDIO_TRACK,url:r,deliveryDirectives:a})}onSubtitleTrackLoading(e,t){const{id:s,groupId:i,url:r,deliveryDirectives:a}=t;this.load({id:s,groupId:i,level:null,responseType:"text",type:Ye.SUBTITLE_TRACK,url:r,deliveryDirectives:a})}load(e){var t;const s=this.hls.config;let i=this.getInternalLoader(e);if(i){const c=i.context;if(c&&c.url===e.url&&c.level===e.level){z.trace("[playlist-loader]: playlist request ongoing");return}z.log(`[playlist-loader]: aborting previous loader for type: ${e.type}`),i.abort()}let r;if(e.type===Ye.MANIFEST?r=s.manifestLoadPolicy.default:r=It({},s.playlistLoadPolicy.default,{timeoutRetry:null,errorRetry:null}),i=this.createInternalLoader(e),Se((t=e.deliveryDirectives)==null?void 0:t.part)){let c;if(e.type===Ye.LEVEL&&e.level!==null?c=this.hls.levels[e.level].details:e.type===Ye.AUDIO_TRACK&&e.id!==null?c=this.hls.audioTracks[e.id].details:e.type===Ye.SUBTITLE_TRACK&&e.id!==null&&(c=this.hls.subtitleTracks[e.id].details),c){const u=c.partTarget,d=c.targetduration;if(u&&d){const h=Math.max(u*3,d*.8)*1e3;r=It({},r,{maxTimeToFirstByteMs:Math.min(h,r.maxTimeToFirstByteMs),maxLoadTimeMs:Math.min(h,r.maxTimeToFirstByteMs)})}}}const a=r.errorRetry||r.timeoutRetry||{},o={loadPolicy:r,timeout:r.maxLoadTimeMs,maxRetry:a.maxNumRetry||0,retryDelay:a.retryDelayMs||0,maxRetryDelay:a.maxRetryDelayMs||0},l={onSuccess:(c,u,d,h)=>{const f=this.getInternalLoader(d);this.resetInternalLoader(d.type);const p=c.data;if(p.indexOf("#EXTM3U")!==0){this.handleManifestParsingError(c,d,new Error("no EXTM3U delimiter"),h||null,u);return}u.parsing.start=performance.now(),pn.isMediaPlaylist(p)?this.handleTrackOrLevelPlaylist(c,u,d,h||null,f):this.handleMasterPlaylist(c,u,d,h)},onError:(c,u,d,h)=>{this.handleNetworkError(u,d,!1,c,h)},onTimeout:(c,u,d)=>{this.handleNetworkError(u,d,!0,void 0,c)}};i.load(e,o,l)}handleMasterPlaylist(e,t,s,i){const r=this.hls,a=e.data,o=nu(e,s),l=pn.parseMasterPlaylist(a,o);if(l.playlistParsingError){this.handleManifestParsingError(e,s,l.playlistParsingError,i,t);return}const{contentSteering:c,levels:u,sessionData:d,sessionKeys:h,startTimeOffset:f,variableList:p}=l;this.variableList=p;const{AUDIO:m=[],SUBTITLES:y,"CLOSED-CAPTIONS":g}=pn.parseMasterPlaylistMedia(a,o,l);m.length&&!m.some(E=>!E.url)&&u[0].audioCodec&&!u[0].attrs.AUDIO&&(z.log("[playlist-loader]: audio codec signaled in quality level, but no embedded audio track signaled, create one"),m.unshift({type:"main",name:"main",groupId:"main",default:!1,autoselect:!1,forced:!1,id:-1,attrs:new Et({}),bitrate:0,url:""})),r.trigger(I.MANIFEST_LOADED,{levels:u,audioTracks:m,subtitles:y,captions:g,contentSteering:c,url:o,stats:t,networkDetails:i,sessionData:d,sessionKeys:h,startTimeOffset:f,variableList:p})}handleTrackOrLevelPlaylist(e,t,s,i,r){const a=this.hls,{id:o,level:l,type:c}=s,u=nu(e,s),d=0,h=Se(l)?l:Se(o)?o:0,f=bg(s),p=pn.parseLevelPlaylist(e.data,u,h,f,d,this.variableList);if(c===Ye.MANIFEST){const m={attrs:new Et({}),bitrate:0,details:p,name:"",url:u};a.trigger(I.MANIFEST_LOADED,{levels:[m],audioTracks:[],url:u,stats:t,networkDetails:i,sessionData:null,sessionKeys:null,contentSteering:null,startTimeOffset:null,variableList:null})}t.parsing.end=performance.now(),s.levelDetails=p,this.handlePlaylistLoaded(p,e,t,s,i,r)}handleManifestParsingError(e,t,s,i,r){this.hls.trigger(I.ERROR,{type:Oe.NETWORK_ERROR,details:te.MANIFEST_PARSING_ERROR,fatal:t.type===Ye.MANIFEST,url:e.url,err:s,error:s,reason:s.message,response:e,context:t,networkDetails:i,stats:r})}handleNetworkError(e,t,s=!1,i,r){let a=`A network ${s?"timeout":"error"+(i?" (status "+i.code+")":"")} occurred while loading ${e.type}`;e.type===Ye.LEVEL?a+=`: ${e.level} id: ${e.id}`:(e.type===Ye.AUDIO_TRACK||e.type===Ye.SUBTITLE_TRACK)&&(a+=` id: ${e.id} group-id: "${e.groupId}"`);const o=new Error(a);z.warn(`[playlist-loader]: ${a}`);let l=te.UNKNOWN,c=!1;const u=this.getInternalLoader(e);switch(e.type){case Ye.MANIFEST:l=s?te.MANIFEST_LOAD_TIMEOUT:te.MANIFEST_LOAD_ERROR,c=!0;break;case Ye.LEVEL:l=s?te.LEVEL_LOAD_TIMEOUT:te.LEVEL_LOAD_ERROR,c=!1;break;case Ye.AUDIO_TRACK:l=s?te.AUDIO_TRACK_LOAD_TIMEOUT:te.AUDIO_TRACK_LOAD_ERROR,c=!1;break;case Ye.SUBTITLE_TRACK:l=s?te.SUBTITLE_TRACK_LOAD_TIMEOUT:te.SUBTITLE_LOAD_ERROR,c=!1;break}u&&this.resetInternalLoader(e.type);const d={type:Oe.NETWORK_ERROR,details:l,fatal:c,url:e.url,loader:u,context:e,error:o,networkDetails:t,stats:r};if(i){const h=(t==null?void 0:t.url)||e.url;d.response=Gt({url:h,data:void 0},i)}this.hls.trigger(I.ERROR,d)}handlePlaylistLoaded(e,t,s,i,r,a){const o=this.hls,{type:l,level:c,id:u,groupId:d,deliveryDirectives:h}=i,f=nu(t,i),p=bg(i),m=typeof i.level=="number"&&p===Pe.MAIN?c:void 0;if(!e.fragments.length){const g=new Error("No Segments found in Playlist");o.trigger(I.ERROR,{type:Oe.NETWORK_ERROR,details:te.LEVEL_EMPTY_ERROR,fatal:!1,url:f,error:g,reason:g.message,response:t,context:i,level:m,parent:p,networkDetails:r,stats:s});return}e.targetduration||(e.playlistParsingError=new Error("Missing Target Duration"));const y=e.playlistParsingError;if(y){o.trigger(I.ERROR,{type:Oe.NETWORK_ERROR,details:te.LEVEL_PARSING_ERROR,fatal:!1,url:f,error:y,reason:y.message,response:t,context:i,level:m,parent:p,networkDetails:r,stats:s});return}switch(e.live&&a&&(a.getCacheAge&&(e.ageHeader=a.getCacheAge()||0),(!a.getCacheAge||isNaN(e.ageHeader))&&(e.ageHeader=0)),l){case Ye.MANIFEST:case Ye.LEVEL:o.trigger(I.LEVEL_LOADED,{details:e,level:m||0,id:u||0,stats:s,networkDetails:r,deliveryDirectives:h});break;case Ye.AUDIO_TRACK:o.trigger(I.AUDIO_TRACK_LOADED,{details:e,id:u||0,groupId:d||"",stats:s,networkDetails:r,deliveryDirectives:h});break;case Ye.SUBTITLE_TRACK:o.trigger(I.SUBTITLE_TRACK_LOADED,{details:e,id:u||0,groupId:d||"",stats:s,networkDetails:r,deliveryDirectives:h});break}}}function RE(n,e){let t;try{t=new Event("addtrack")}catch{t=document.createEvent("Event"),t.initEvent("addtrack",!1,!1)}t.track=n,e.dispatchEvent(t)}function IE(n,e){const t=n.mode;if(t==="disabled"&&(n.mode="hidden"),n.cues&&!n.cues.getCueById(e.id))try{if(n.addCue(e),!n.cues.getCueById(e.id))throw new Error(`addCue is failed for: ${e}`)}catch(s){z.debug(`[texttrack-utils]: ${s}`);try{const i=new self.TextTrackCue(e.startTime,e.endTime,e.text);i.id=e.id,n.addCue(i)}catch(i){z.debug(`[texttrack-utils]: Legacy TextTrackCue fallback failed: ${i}`)}}t==="disabled"&&(n.mode=t)}function Tr(n){const e=n.mode;if(e==="disabled"&&(n.mode="hidden"),n.cues)for(let t=n.cues.length;t--;)n.removeCue(n.cues[t]);e==="disabled"&&(n.mode=e)}function Bd(n,e,t,s){const i=n.mode;if(i==="disabled"&&(n.mode="hidden"),n.cues&&n.cues.length>0){const r=NO(n.cues,e,t);for(let a=0;a<r.length;a++)(!s||s(r[a]))&&n.removeCue(r[a])}i==="disabled"&&(n.mode=i)}function FO(n,e){if(e<n[0].startTime)return 0;const t=n.length-1;if(e>n[t].endTime)return-1;let s=0,i=t;for(;s<=i;){const r=Math.floor((i+s)/2);if(e<n[r].startTime)i=r-1;else if(e>n[r].startTime&&s<t)s=r+1;else return r}return n[s].startTime-e<e-n[i].startTime?s:i}function NO(n,e,t){const s=[],i=FO(n,e);if(i>-1)for(let r=i,a=n.length;r<a;r++){const o=n[r];if(o.startTime>=e&&o.endTime<=t)s.push(o);else if(o.startTime>t)return s}return s}function Jo(n){const e=[];for(let t=0;t<n.length;t++){const s=n[t];(s.kind==="subtitles"||s.kind==="captions")&&s.label&&e.push(n[t])}return e}var Gs={audioId3:"org.id3",dateRange:"com.apple.quicktime.HLS",emsg:"https://aomedia.org/emsg/ID3"};const BO=.25;function Ud(){if(!(typeof self>"u"))return self.VTTCue||self.TextTrackCue}function xg(n,e,t,s,i){let r=new n(e,t,"");try{r.value=s,i&&(r.type=i)}catch{r=new n(e,t,JSON.stringify(i?Gt({type:i},s):s))}return r}const wo=(()=>{const n=Ud();try{n&&new n(0,Number.POSITIVE_INFINITY,"")}catch{return Number.MAX_VALUE}return Number.POSITIVE_INFINITY})();function iu(n,e){return n.getTime()/1e3-e}function UO(n){return Uint8Array.from(n.replace(/^0x/,"").replace(/([\da-fA-F]{2}) ?/g,"0x$1 ").replace(/ +$/,"").split(" ")).buffer}class $O{constructor(e){this.hls=void 0,this.id3Track=null,this.media=null,this.dateRangeCuesAppended={},this.hls=e,this._registerListeners()}destroy(){this._unregisterListeners(),this.id3Track=null,this.media=null,this.dateRangeCuesAppended={},this.hls=null}_registerListeners(){const{hls:e}=this;e.on(I.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(I.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(I.MANIFEST_LOADING,this.onManifestLoading,this),e.on(I.FRAG_PARSING_METADATA,this.onFragParsingMetadata,this),e.on(I.BUFFER_FLUSHING,this.onBufferFlushing,this),e.on(I.LEVEL_UPDATED,this.onLevelUpdated,this)}_unregisterListeners(){const{hls:e}=this;e.off(I.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(I.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(I.MANIFEST_LOADING,this.onManifestLoading,this),e.off(I.FRAG_PARSING_METADATA,this.onFragParsingMetadata,this),e.off(I.BUFFER_FLUSHING,this.onBufferFlushing,this),e.off(I.LEVEL_UPDATED,this.onLevelUpdated,this)}onMediaAttached(e,t){this.media=t.media}onMediaDetaching(){this.id3Track&&(Tr(this.id3Track),this.id3Track=null,this.media=null,this.dateRangeCuesAppended={})}onManifestLoading(){this.dateRangeCuesAppended={}}createTrack(e){const t=this.getID3Track(e.textTracks);return t.mode="hidden",t}getID3Track(e){if(this.media){for(let t=0;t<e.length;t++){const s=e[t];if(s.kind==="metadata"&&s.label==="id3")return RE(s,this.media),s}return this.media.addTextTrack("metadata","id3")}}onFragParsingMetadata(e,t){if(!this.media)return;const{hls:{config:{enableEmsgMetadataCues:s,enableID3MetadataCues:i}}}=this;if(!s&&!i)return;const{samples:r}=t;this.id3Track||(this.id3Track=this.createTrack(this.media));const a=Ud();if(a)for(let o=0;o<r.length;o++){const l=r[o].type;if(l===Gs.emsg&&!s||!i)continue;const c=vE(r[o].data);if(c){const u=r[o].pts;let d=u+r[o].duration;d>wo&&(d=wo),d-u<=0&&(d=u+BO);for(let f=0;f<c.length;f++){const p=c[f];if(!yE(p)){this.updateId3CueEnds(u,l);const m=xg(a,u,d,p,l);m&&this.id3Track.addCue(m)}}}}}updateId3CueEnds(e,t){var s;const i=(s=this.id3Track)==null?void 0:s.cues;if(i)for(let r=i.length;r--;){const a=i[r];a.type===t&&a.startTime<e&&a.endTime===wo&&(a.endTime=e)}}onBufferFlushing(e,{startOffset:t,endOffset:s,type:i}){const{id3Track:r,hls:a}=this;if(!a)return;const{config:{enableEmsgMetadataCues:o,enableID3MetadataCues:l}}=a;if(r&&(o||l)){let c;i==="audio"?c=u=>u.type===Gs.audioId3&&l:i==="video"?c=u=>u.type===Gs.emsg&&o:c=u=>u.type===Gs.audioId3&&l||u.type===Gs.emsg&&o,Bd(r,t,s,c)}}onLevelUpdated(e,{details:t}){if(!this.media||!t.hasProgramDateTime||!this.hls.config.enableDateRangeMetadataCues)return;const{dateRangeCuesAppended:s,id3Track:i}=this,{dateRanges:r}=t,a=Object.keys(r);if(i){const u=Object.keys(s).filter(d=>!a.includes(d));for(let d=u.length;d--;){const h=u[d];Object.keys(s[h].cues).forEach(f=>{i.removeCue(s[h].cues[f])}),delete s[h]}}const o=t.fragments[t.fragments.length-1];if(a.length===0||!Se(o==null?void 0:o.programDateTime))return;this.id3Track||(this.id3Track=this.createTrack(this.media));const l=o.programDateTime/1e3-o.start,c=Ud();for(let u=0;u<a.length;u++){const d=a[u],h=r[d],f=iu(h.startDate,l),p=s[d],m=(p==null?void 0:p.cues)||{};let y=(p==null?void 0:p.durationKnown)||!1,g=wo;const v=h.endDate;if(v)g=iu(v,l),y=!0;else if(h.endOnNext&&!y){const T=a.reduce((b,L)=>{if(L!==h.id){const x=r[L];if(x.class===h.class&&x.startDate>h.startDate&&(!b||h.startDate<b.startDate))return x}return b},null);T&&(g=iu(T.startDate,l),y=!0)}const E=Object.keys(h.attr);for(let T=0;T<E.length;T++){const b=E[T];if(!HP(b))continue;const L=m[b];if(L)y&&!p.durationKnown&&(L.endTime=g);else if(c){let x=h.attr[b];KP(b)&&(x=UO(x));const w=xg(c,f,g,{key:b,data:x},Gs.dateRange);w&&(w.id=d,this.id3Track.addCue(w),m[b]=w)}}s[d]={cues:m,dateRange:h,durationKnown:y}}}}class jO{constructor(e){this.hls=void 0,this.config=void 0,this.media=null,this.levelDetails=null,this.currentTime=0,this.stallCount=0,this._latency=null,this.timeupdateHandler=()=>this.timeupdate(),this.hls=e,this.config=e.config,this.registerListeners()}get latency(){return this._latency||0}get maxLatency(){const{config:e,levelDetails:t}=this;return e.liveMaxLatencyDuration!==void 0?e.liveMaxLatencyDuration:t?e.liveMaxLatencyDurationCount*t.targetduration:0}get targetLatency(){const{levelDetails:e}=this;if(e===null)return null;const{holdBack:t,partHoldBack:s,targetduration:i}=e,{liveSyncDuration:r,liveSyncDurationCount:a,lowLatencyMode:o}=this.config,l=this.hls.userConfig;let c=o&&s||t;(l.liveSyncDuration||l.liveSyncDurationCount||c===0)&&(c=r!==void 0?r:a*i);const u=i,d=1;return c+Math.min(this.stallCount*d,u)}get liveSyncPosition(){const e=this.estimateLiveEdge(),t=this.targetLatency,s=this.levelDetails;if(e===null||t===null||s===null)return null;const i=s.edge,r=e-t-this.edgeStalled,a=i-s.totalduration,o=i-(this.config.lowLatencyMode&&s.partTarget||s.targetduration);return Math.min(Math.max(a,r),o)}get drift(){const{levelDetails:e}=this;return e===null?1:e.drift}get edgeStalled(){const{levelDetails:e}=this;if(e===null)return 0;const t=(this.config.lowLatencyMode&&e.partTarget||e.targetduration)*3;return Math.max(e.age-t,0)}get forwardBufferLength(){const{media:e,levelDetails:t}=this;if(!e||!t)return 0;const s=e.buffered.length;return(s?e.buffered.end(s-1):t.edge)-this.currentTime}destroy(){this.unregisterListeners(),this.onMediaDetaching(),this.levelDetails=null,this.hls=this.timeupdateHandler=null}registerListeners(){this.hls.on(I.MEDIA_ATTACHED,this.onMediaAttached,this),this.hls.on(I.MEDIA_DETACHING,this.onMediaDetaching,this),this.hls.on(I.MANIFEST_LOADING,this.onManifestLoading,this),this.hls.on(I.LEVEL_UPDATED,this.onLevelUpdated,this),this.hls.on(I.ERROR,this.onError,this)}unregisterListeners(){this.hls.off(I.MEDIA_ATTACHED,this.onMediaAttached,this),this.hls.off(I.MEDIA_DETACHING,this.onMediaDetaching,this),this.hls.off(I.MANIFEST_LOADING,this.onManifestLoading,this),this.hls.off(I.LEVEL_UPDATED,this.onLevelUpdated,this),this.hls.off(I.ERROR,this.onError,this)}onMediaAttached(e,t){this.media=t.media,this.media.addEventListener("timeupdate",this.timeupdateHandler)}onMediaDetaching(){this.media&&(this.media.removeEventListener("timeupdate",this.timeupdateHandler),this.media=null)}onManifestLoading(){this.levelDetails=null,this._latency=null,this.stallCount=0}onLevelUpdated(e,{details:t}){this.levelDetails=t,t.advanced&&this.timeupdate(),!t.live&&this.media&&this.media.removeEventListener("timeupdate",this.timeupdateHandler)}onError(e,t){var s;t.details===te.BUFFER_STALLED_ERROR&&(this.stallCount++,(s=this.levelDetails)!=null&&s.live&&z.warn("[playback-rate-controller]: Stall detected, adjusting target latency"))}timeupdate(){const{media:e,levelDetails:t}=this;if(!e||!t)return;this.currentTime=e.currentTime;const s=this.computeLatency();if(s===null)return;this._latency=s;const{lowLatencyMode:i,maxLiveSyncPlaybackRate:r}=this.config;if(!i||r===1||!t.live)return;const a=this.targetLatency;if(a===null)return;const o=s-a,l=Math.min(this.maxLatency,a+t.targetduration);if(o<l&&o>.05&&this.forwardBufferLength>1){const u=Math.min(2,Math.max(1,r)),d=Math.round(2/(1+Math.exp(-.75*o-this.edgeStalled))*20)/20;e.playbackRate=Math.min(u,Math.max(1,d))}else e.playbackRate!==1&&e.playbackRate!==0&&(e.playbackRate=1)}estimateLiveEdge(){const{levelDetails:e}=this;return e===null?null:e.edge+e.age}computeLatency(){const e=this.estimateLiveEdge();return e===null?null:e-this.currentTime}}const $d=["NONE","TYPE-0","TYPE-1",null];function GO(n){return $d.indexOf(n)>-1}const Rl=["SDR","PQ","HLG"];function VO(n){return!!n&&Rl.indexOf(n)>-1}var Aa={No:"",Yes:"YES",v2:"v2"};function HO(n,e){const{canSkipUntil:t,canSkipDateRanges:s,endSN:i}=n,r=e!==void 0?e-i:0;return t&&r<t?s?Aa.v2:Aa.Yes:Aa.No}class Sg{constructor(e,t,s){this.msn=void 0,this.part=void 0,this.skip=void 0,this.msn=e,this.part=t,this.skip=s}addDirectives(e){const t=new self.URL(e);return this.msn!==void 0&&t.searchParams.set("_HLS_msn",this.msn.toString()),this.part!==void 0&&t.searchParams.set("_HLS_part",this.part.toString()),this.skip&&t.searchParams.set("_HLS_skip",this.skip),t.href}}class Vr{constructor(e){this._attrs=void 0,this.audioCodec=void 0,this.bitrate=void 0,this.codecSet=void 0,this.url=void 0,this.frameRate=void 0,this.height=void 0,this.id=void 0,this.name=void 0,this.videoCodec=void 0,this.width=void 0,this.details=void 0,this.fragmentError=0,this.loadError=0,this.loaded=void 0,this.realBitrate=0,this.supportedPromise=void 0,this.supportedResult=void 0,this._avgBitrate=0,this._audioGroups=void 0,this._subtitleGroups=void 0,this._urlId=0,this.url=[e.url],this._attrs=[e.attrs],this.bitrate=e.bitrate,e.details&&(this.details=e.details),this.id=e.id||0,this.name=e.name,this.width=e.width||0,this.height=e.height||0,this.frameRate=e.attrs.optionalFloat("FRAME-RATE",0),this._avgBitrate=e.attrs.decimalInteger("AVERAGE-BANDWIDTH"),this.audioCodec=e.audioCodec,this.videoCodec=e.videoCodec,this.codecSet=[e.videoCodec,e.audioCodec].filter(t=>!!t).map(t=>t.substring(0,4)).join(","),this.addGroupId("audio",e.attrs.AUDIO),this.addGroupId("text",e.attrs.SUBTITLES)}get maxBitrate(){return Math.max(this.realBitrate,this.bitrate)}get averageBitrate(){return this._avgBitrate||this.realBitrate||this.bitrate}get attrs(){return this._attrs[0]}get codecs(){return this.attrs.CODECS||""}get pathwayId(){return this.attrs["PATHWAY-ID"]||"."}get videoRange(){return this.attrs["VIDEO-RANGE"]||"SDR"}get score(){return this.attrs.optionalFloat("SCORE",0)}get uri(){return this.url[0]||""}hasAudioGroup(e){return _g(this._audioGroups,e)}hasSubtitleGroup(e){return _g(this._subtitleGroups,e)}get audioGroups(){return this._audioGroups}get subtitleGroups(){return this._subtitleGroups}addGroupId(e,t){if(t){if(e==="audio"){let s=this._audioGroups;s||(s=this._audioGroups=[]),s.indexOf(t)===-1&&s.push(t)}else if(e==="text"){let s=this._subtitleGroups;s||(s=this._subtitleGroups=[]),s.indexOf(t)===-1&&s.push(t)}}}get urlId(){return 0}set urlId(e){}get audioGroupIds(){return this.audioGroups?[this.audioGroupId]:void 0}get textGroupIds(){return this.subtitleGroups?[this.textGroupId]:void 0}get audioGroupId(){var e;return(e=this.audioGroups)==null?void 0:e[0]}get textGroupId(){var e;return(e=this.subtitleGroups)==null?void 0:e[0]}addFallback(){}}function _g(n,e){return!e||!n?!1:n.indexOf(e)!==-1}function ru(n,e){const t=e.startPTS;if(Se(t)){let s=0,i;e.sn>n.sn?(s=t-n.start,i=n):(s=n.start-t,i=e),i.duration!==s&&(i.duration=s)}else e.sn>n.sn?n.cc===e.cc&&n.minEndPTS?e.start=n.start+(n.minEndPTS-n.start):e.start=n.start+n.duration:e.start=Math.max(n.start-e.duration,0)}function CE(n,e,t,s,i,r){s-t<=0&&(z.warn("Fragment should have a positive duration",e),s=t+e.duration,r=i+e.duration);let o=t,l=s;const c=e.startPTS,u=e.endPTS;if(Se(c)){const y=Math.abs(c-t);Se(e.deltaPTS)?e.deltaPTS=Math.max(y,e.deltaPTS):e.deltaPTS=y,o=Math.max(t,c),t=Math.min(t,c),i=Math.min(i,e.startDTS),l=Math.min(s,u),s=Math.max(s,u),r=Math.max(r,e.endDTS)}const d=t-e.start;e.start!==0&&(e.start=t),e.duration=s-e.start,e.startPTS=t,e.maxStartPTS=o,e.startDTS=i,e.endPTS=s,e.minEndPTS=l,e.endDTS=r;const h=e.sn;if(!n||h<n.startSN||h>n.endSN)return 0;let f;const p=h-n.startSN,m=n.fragments;for(m[p]=e,f=p;f>0;f--)ru(m[f],m[f-1]);for(f=p;f<m.length-1;f++)ru(m[f],m[f+1]);return n.fragmentHint&&ru(m[m.length-1],n.fragmentHint),n.PTSKnown=n.alignedSliding=!0,d}function KO(n,e){let t=null;const s=n.fragments;for(let l=s.length-1;l>=0;l--){const c=s[l].initSegment;if(c){t=c;break}}n.fragmentHint&&delete n.fragmentHint.endPTS;let i=0,r;if(YO(n,e,(l,c)=>{l.relurl&&(i=l.cc-c.cc),Se(l.startPTS)&&Se(l.endPTS)&&(c.start=c.startPTS=l.startPTS,c.startDTS=l.startDTS,c.maxStartPTS=l.maxStartPTS,c.endPTS=l.endPTS,c.endDTS=l.endDTS,c.minEndPTS=l.minEndPTS,c.duration=l.endPTS-l.startPTS,c.duration&&(r=c),e.PTSKnown=e.alignedSliding=!0),c.elementaryStreams=l.elementaryStreams,c.loader=l.loader,c.stats=l.stats,l.initSegment&&(c.initSegment=l.initSegment,t=l.initSegment)}),t&&(e.fragmentHint?e.fragments.concat(e.fragmentHint):e.fragments).forEach(c=>{var u;c&&(!c.initSegment||c.initSegment.relurl===((u=t)==null?void 0:u.relurl))&&(c.initSegment=t)}),e.skippedSegments)if(e.deltaUpdateFailed=e.fragments.some(l=>!l),e.deltaUpdateFailed){z.warn("[level-helper] Previous playlist missing segments skipped in delta playlist");for(let l=e.skippedSegments;l--;)e.fragments.shift();e.startSN=e.fragments[0].sn,e.startCC=e.fragments[0].cc}else e.canSkipDateRanges&&(e.dateRanges=WO(n.dateRanges,e.dateRanges,e.recentlyRemovedDateranges));const a=e.fragments;if(i){z.warn("discontinuity sliding from playlist, take drift into account");for(let l=0;l<a.length;l++)a[l].cc+=i}e.skippedSegments&&(e.startCC=e.fragments[0].cc),zO(n.partList,e.partList,(l,c)=>{c.elementaryStreams=l.elementaryStreams,c.stats=l.stats}),r?CE(e,r,r.startPTS,r.endPTS,r.startDTS,r.endDTS):DE(n,e),a.length&&(e.totalduration=e.edge-a[0].start),e.driftStartTime=n.driftStartTime,e.driftStart=n.driftStart;const o=e.advancedDateTime;if(e.advanced&&o){const l=e.edge;e.driftStart||(e.driftStartTime=o,e.driftStart=l),e.driftEndTime=o,e.driftEnd=l}else e.driftEndTime=n.driftEndTime,e.driftEnd=n.driftEnd,e.advancedDateTime=n.advancedDateTime}function WO(n,e,t){const s=It({},n);return t&&t.forEach(i=>{delete s[i]}),Object.keys(e).forEach(i=>{const r=new hE(e[i].attr,s[i]);r.isValid?s[i]=r:z.warn(`Ignoring invalid Playlist Delta Update DATERANGE tag: "${JSON.stringify(e[i].attr)}"`)}),s}function zO(n,e,t){if(n&&e){let s=0;for(let i=0,r=n.length;i<=r;i++){const a=n[i],o=e[i+s];a&&o&&a.index===o.index&&a.fragment.sn===o.fragment.sn?t(a,o):s--}}}function YO(n,e,t){const s=e.skippedSegments,i=Math.max(n.startSN,e.startSN)-e.startSN,r=(n.fragmentHint?1:0)+(s?e.endSN:Math.min(n.endSN,e.endSN))-e.startSN,a=e.startSN-n.startSN,o=e.fragmentHint?e.fragments.concat(e.fragmentHint):e.fragments,l=n.fragmentHint?n.fragments.concat(n.fragmentHint):n.fragments;for(let c=i;c<=r;c++){const u=l[a+c];let d=o[c];s&&!d&&c<s&&(d=e.fragments[c]=u),u&&d&&t(u,d)}}function DE(n,e){const t=e.startSN+e.skippedSegments-n.startSN,s=n.fragments;t<0||t>=s.length||jd(e,s[t].start)}function jd(n,e){if(e){const t=n.fragments;for(let s=n.skippedSegments;s<t.length;s++)t[s].start+=e;n.fragmentHint&&(n.fragmentHint.start+=e)}}function qO(n,e=1/0){let t=1e3*n.targetduration;if(n.updated){const s=n.fragments,i=4;if(s.length&&t*i>e){const r=s[s.length-1].duration*1e3;r<t&&(t=r)}}else t/=2;return Math.round(t)}function XO(n,e,t){if(!(n!=null&&n.details))return null;const s=n.details;let i=s.fragments[e-s.startSN];return i||(i=s.fragmentHint,i&&i.sn===e)?i:e<s.startSN&&t&&t.sn===e?t:null}function Ag(n,e,t){var s;return n!=null&&n.details?kE((s=n.details)==null?void 0:s.partList,e,t):null}function kE(n,e,t){if(n)for(let s=n.length;s--;){const i=n[s];if(i.index===t&&i.fragment.sn===e)return i}return null}function PE(n){n.forEach((e,t)=>{const{details:s}=e;s!=null&&s.fragments&&s.fragments.forEach(i=>{i.level=t})})}function Il(n){switch(n.details){case te.FRAG_LOAD_TIMEOUT:case te.KEY_LOAD_TIMEOUT:case te.LEVEL_LOAD_TIMEOUT:case te.MANIFEST_LOAD_TIMEOUT:return!0}return!1}function Lg(n,e){const t=Il(e);return n.default[`${t?"timeout":"error"}Retry`]}function pf(n,e){const t=n.backoff==="linear"?1:Math.pow(2,e);return Math.min(t*n.retryDelayMs,n.maxRetryDelayMs)}function wg(n){return Gt(Gt({},n),{errorRetry:null,timeoutRetry:null})}function Cl(n,e,t,s){if(!n)return!1;const i=s==null?void 0:s.code,r=e<n.maxNumRetry&&(QO(i)||!!t);return n.shouldRetry?n.shouldRetry(n,e,t,s,r):r}function QO(n){return n===0&&navigator.onLine===!1||!!n&&(n<400||n>499)}const OE={search:function(n,e){let t=0,s=n.length-1,i=null,r=null;for(;t<=s;){i=(t+s)/2|0,r=n[i];const a=e(r);if(a>0)t=i+1;else if(a<0)s=i-1;else return r}return null}};function JO(n,e,t){if(e===null||!Array.isArray(n)||!n.length||!Se(e))return null;const s=n[0].programDateTime;if(e<(s||0))return null;const i=n[n.length-1].endProgramDateTime;if(e>=(i||0))return null;t=t||0;for(let r=0;r<n.length;++r){const a=n[r];if(ZO(e,t,a))return a}return null}function Dl(n,e,t=0,s=0){let i=null;if(n){i=e[n.sn-e[0].sn+1]||null;const a=n.endDTS-t;a>0&&a<15e-7&&(t+=15e-7)}else t===0&&e[0].start===0&&(i=e[0]);if(i&&(!n||n.level===i.level)&&Gd(t,s,i)===0)return i;const r=OE.search(e,Gd.bind(null,t,s));return r&&(r!==n||!i)?r:i}function Gd(n=0,e=0,t){if(t.start<=n&&t.start+t.duration>n)return 0;const s=Math.min(e,t.duration+(t.deltaPTS?t.deltaPTS:0));return t.start+t.duration-s<=n?1:t.start-s>n&&t.start?-1:0}function ZO(n,e,t){const s=Math.min(e,t.duration+(t.deltaPTS?t.deltaPTS:0))*1e3;return(t.endProgramDateTime||0)-s>n}function eM(n,e){return OE.search(n,t=>t.cc<e?1:t.cc>e?-1:0)}var Wt={DoNothing:0,SendEndCallback:1,SendAlternateToPenaltyBox:2,RemoveAlternatePermanently:3,InsertDiscontinuity:4,RetryRequest:5},Us={None:0,MoveAllAlternatesMatchingHost:1,MoveAllAlternatesMatchingHDCP:2,SwitchToSDR:4};class tM{constructor(e){this.hls=void 0,this.playlistError=0,this.penalizedRenditions={},this.log=void 0,this.warn=void 0,this.error=void 0,this.hls=e,this.log=z.log.bind(z,"[info]:"),this.warn=z.warn.bind(z,"[warning]:"),this.error=z.error.bind(z,"[error]:"),this.registerListeners()}registerListeners(){const e=this.hls;e.on(I.ERROR,this.onError,this),e.on(I.MANIFEST_LOADING,this.onManifestLoading,this),e.on(I.LEVEL_UPDATED,this.onLevelUpdated,this)}unregisterListeners(){const e=this.hls;e&&(e.off(I.ERROR,this.onError,this),e.off(I.ERROR,this.onErrorOut,this),e.off(I.MANIFEST_LOADING,this.onManifestLoading,this),e.off(I.LEVEL_UPDATED,this.onLevelUpdated,this))}destroy(){this.unregisterListeners(),this.hls=null,this.penalizedRenditions={}}startLoad(e){}stopLoad(){this.playlistError=0}getVariantLevelIndex(e){return(e==null?void 0:e.type)===Pe.MAIN?e.level:this.hls.loadLevel}onManifestLoading(){this.playlistError=0,this.penalizedRenditions={}}onLevelUpdated(){this.playlistError=0}onError(e,t){var s,i;if(t.fatal)return;const r=this.hls,a=t.context;switch(t.details){case te.FRAG_LOAD_ERROR:case te.FRAG_LOAD_TIMEOUT:case te.KEY_LOAD_ERROR:case te.KEY_LOAD_TIMEOUT:t.errorAction=this.getFragRetryOrSwitchAction(t);return;case te.FRAG_PARSING_ERROR:if((s=t.frag)!=null&&s.gap){t.errorAction={action:Wt.DoNothing,flags:Us.None};return}case te.FRAG_GAP:case te.FRAG_DECRYPT_ERROR:{t.errorAction=this.getFragRetryOrSwitchAction(t),t.errorAction.action=Wt.SendAlternateToPenaltyBox;return}case te.LEVEL_EMPTY_ERROR:case te.LEVEL_PARSING_ERROR:{var o,l;const c=t.parent===Pe.MAIN?t.level:r.loadLevel;t.details===te.LEVEL_EMPTY_ERROR&&((o=t.context)!=null&&(l=o.levelDetails)!=null&&l.live)?t.errorAction=this.getPlaylistRetryOrSwitchAction(t,c):(t.levelRetry=!1,t.errorAction=this.getLevelSwitchAction(t,c))}return;case te.LEVEL_LOAD_ERROR:case te.LEVEL_LOAD_TIMEOUT:typeof(a==null?void 0:a.level)=="number"&&(t.errorAction=this.getPlaylistRetryOrSwitchAction(t,a.level));return;case te.AUDIO_TRACK_LOAD_ERROR:case te.AUDIO_TRACK_LOAD_TIMEOUT:case te.SUBTITLE_LOAD_ERROR:case te.SUBTITLE_TRACK_LOAD_TIMEOUT:if(a){const c=r.levels[r.loadLevel];if(c&&(a.type===Ye.AUDIO_TRACK&&c.hasAudioGroup(a.groupId)||a.type===Ye.SUBTITLE_TRACK&&c.hasSubtitleGroup(a.groupId))){t.errorAction=this.getPlaylistRetryOrSwitchAction(t,r.loadLevel),t.errorAction.action=Wt.SendAlternateToPenaltyBox,t.errorAction.flags=Us.MoveAllAlternatesMatchingHost;return}}return;case te.KEY_SYSTEM_STATUS_OUTPUT_RESTRICTED:{const c=r.levels[r.loadLevel],u=c==null?void 0:c.attrs["HDCP-LEVEL"];u?t.errorAction={action:Wt.SendAlternateToPenaltyBox,flags:Us.MoveAllAlternatesMatchingHDCP,hdcpLevel:u}:this.keySystemError(t)}return;case te.BUFFER_ADD_CODEC_ERROR:case te.REMUX_ALLOC_ERROR:case te.BUFFER_APPEND_ERROR:t.errorAction=this.getLevelSwitchAction(t,(i=t.level)!=null?i:r.loadLevel);return;case te.INTERNAL_EXCEPTION:case te.BUFFER_APPENDING_ERROR:case te.BUFFER_FULL_ERROR:case te.LEVEL_SWITCH_ERROR:case te.BUFFER_STALLED_ERROR:case te.BUFFER_SEEK_OVER_HOLE:case te.BUFFER_NUDGE_ON_STALL:t.errorAction={action:Wt.DoNothing,flags:Us.None};return}t.type===Oe.KEY_SYSTEM_ERROR&&this.keySystemError(t)}keySystemError(e){const t=this.getVariantLevelIndex(e.frag);e.levelRetry=!1,e.errorAction=this.getLevelSwitchAction(e,t)}getPlaylistRetryOrSwitchAction(e,t){const s=this.hls,i=Lg(s.config.playlistLoadPolicy,e),r=this.playlistError++;if(Cl(i,r,Il(e),e.response))return{action:Wt.RetryRequest,flags:Us.None,retryConfig:i,retryCount:r};const o=this.getLevelSwitchAction(e,t);return i&&(o.retryConfig=i,o.retryCount=r),o}getFragRetryOrSwitchAction(e){const t=this.hls,s=this.getVariantLevelIndex(e.frag),i=t.levels[s],{fragLoadPolicy:r,keyLoadPolicy:a}=t.config,o=Lg(e.details.startsWith("key")?a:r,e),l=t.levels.reduce((u,d)=>u+d.fragmentError,0);if(i&&(e.details!==te.FRAG_GAP&&i.fragmentError++,Cl(o,l,Il(e),e.response)))return{action:Wt.RetryRequest,flags:Us.None,retryConfig:o,retryCount:l};const c=this.getLevelSwitchAction(e,s);return o&&(c.retryConfig=o,c.retryCount=l),c}getLevelSwitchAction(e,t){const s=this.hls;t==null&&(t=s.loadLevel);const i=this.hls.levels[t];if(i){var r,a;const c=e.details;i.loadError++,c===te.BUFFER_APPEND_ERROR&&i.fragmentError++;let u=-1;const{levels:d,loadLevel:h,minAutoLevel:f,maxAutoLevel:p}=s;s.autoLevelEnabled||(s.loadLevel=-1);const m=(r=e.frag)==null?void 0:r.type,g=(m===Pe.AUDIO&&c===te.FRAG_PARSING_ERROR||e.sourceBufferName==="audio"&&(c===te.BUFFER_ADD_CODEC_ERROR||c===te.BUFFER_APPEND_ERROR))&&d.some(({audioCodec:L})=>i.audioCodec!==L),E=e.sourceBufferName==="video"&&(c===te.BUFFER_ADD_CODEC_ERROR||c===te.BUFFER_APPEND_ERROR)&&d.some(({codecSet:L,audioCodec:x})=>i.codecSet!==L&&i.audioCodec===x),{type:T,groupId:b}=(a=e.context)!=null?a:{};for(let L=d.length;L--;){const x=(L+h)%d.length;if(x!==h&&x>=f&&x<=p&&d[x].loadError===0){var o,l;const w=d[x];if(c===te.FRAG_GAP&&e.frag){const k=d[x].details;if(k){const R=Dl(e.frag,k.fragments,e.frag.start);if(R!=null&&R.gap)continue}}else{if(T===Ye.AUDIO_TRACK&&w.hasAudioGroup(b)||T===Ye.SUBTITLE_TRACK&&w.hasSubtitleGroup(b))continue;if(m===Pe.AUDIO&&(o=i.audioGroups)!=null&&o.some(k=>w.hasAudioGroup(k))||m===Pe.SUBTITLE&&(l=i.subtitleGroups)!=null&&l.some(k=>w.hasSubtitleGroup(k))||g&&i.audioCodec===w.audioCodec||!g&&i.audioCodec!==w.audioCodec||E&&i.codecSet===w.codecSet)continue}u=x;break}}if(u>-1&&s.loadLevel!==u)return e.levelRetry=!0,this.playlistError=0,{action:Wt.SendAlternateToPenaltyBox,flags:Us.None,nextAutoLevel:u}}return{action:Wt.SendAlternateToPenaltyBox,flags:Us.MoveAllAlternatesMatchingHost}}onErrorOut(e,t){var s;switch((s=t.errorAction)==null?void 0:s.action){case Wt.DoNothing:break;case Wt.SendAlternateToPenaltyBox:this.sendAlternateToPenaltyBox(t),!t.errorAction.resolved&&t.details!==te.FRAG_GAP?t.fatal=!0:/MediaSource readyState: ended/.test(t.error.message)&&(this.warn(`MediaSource ended after "${t.sourceBufferName}" sourceBuffer append error. Attempting to recover from media error.`),this.hls.recoverMediaError());break}if(t.fatal){this.hls.stopLoad();return}}sendAlternateToPenaltyBox(e){const t=this.hls,s=e.errorAction;if(!s)return;const{flags:i,hdcpLevel:r,nextAutoLevel:a}=s;switch(i){case Us.None:this.switchLevel(e,a);break;case Us.MoveAllAlternatesMatchingHDCP:r&&(t.maxHdcpLevel=$d[$d.indexOf(r)-1],s.resolved=!0),this.warn(`Restricting playback to HDCP-LEVEL of "${t.maxHdcpLevel}" or lower`);break}s.resolved||this.switchLevel(e,a)}switchLevel(e,t){t!==void 0&&e.errorAction&&(this.warn(`switching to level ${t} after ${e.details}`),this.hls.nextAutoLevel=t,e.errorAction.resolved=!0,this.hls.nextLoadLevel=this.hls.nextAutoLevel)}}class mf{constructor(e,t){this.hls=void 0,this.timer=-1,this.requestScheduled=-1,this.canLoad=!1,this.log=void 0,this.warn=void 0,this.log=z.log.bind(z,`${t}:`),this.warn=z.warn.bind(z,`${t}:`),this.hls=e}destroy(){this.clearTimer(),this.hls=this.log=this.warn=null}clearTimer(){this.timer!==-1&&(self.clearTimeout(this.timer),this.timer=-1)}startLoad(){this.canLoad=!0,this.requestScheduled=-1,this.loadPlaylist()}stopLoad(){this.canLoad=!1,this.clearTimer()}switchParams(e,t){const s=t==null?void 0:t.renditionReports;if(s){let i=-1;for(let r=0;r<s.length;r++){const a=s[r];let o;try{o=new self.URL(a.URI,t.url).href}catch(l){z.warn(`Could not construct new URL for Rendition Report: ${l}`),o=a.URI||""}if(o===e){i=r;break}else o===e.substring(0,o.length)&&(i=r)}if(i!==-1){const r=s[i],a=parseInt(r["LAST-MSN"])||(t==null?void 0:t.lastPartSn);let o=parseInt(r["LAST-PART"])||(t==null?void 0:t.lastPartIndex);if(this.hls.config.lowLatencyMode){const l=Math.min(t.age-t.partTarget,t.targetduration);o>=0&&l>t.partTarget&&(o+=1)}return new Sg(a,o>=0?o:void 0,Aa.No)}}}loadPlaylist(e){this.requestScheduled===-1&&(this.requestScheduled=self.performance.now())}shouldLoadPlaylist(e){return this.canLoad&&!!e&&!!e.url&&(!e.details||e.details.live)}shouldReloadPlaylist(e){return this.timer===-1&&this.requestScheduled===-1&&this.shouldLoadPlaylist(e)}playlistLoaded(e,t,s){const{details:i,stats:r}=t,a=self.performance.now(),o=r.loading.first?Math.max(0,a-r.loading.first):0;if(i.advancedDateTime=Date.now()-o,i.live||s!=null&&s.live){if(i.reloaded(s),s&&this.log(`live playlist ${e} ${i.advanced?"REFRESHED "+i.lastPartSn+"-"+i.lastPartIndex:i.updated?"UPDATED":"MISSED"}`),s&&i.fragments.length>0&&KO(s,i),!this.canLoad||!i.live)return;let l,c,u;if(i.canBlockReload&&i.endSN&&i.advanced){const y=this.hls.config.lowLatencyMode,g=i.lastPartSn,v=i.endSN,E=i.lastPartIndex,T=E!==-1,b=g===v,L=y?0:E;T?(c=b?v+1:g,u=b?L:E+1):c=v+1;const x=i.age,w=x+i.ageHeader;let k=Math.min(w-i.partTarget,i.targetduration*1.5);if(k>0){if(s&&k>s.tuneInGoal)this.warn(`CDN Tune-in goal increased from: ${s.tuneInGoal} to: ${k} with playlist age: ${i.age}`),k=0;else{const R=Math.floor(k/i.targetduration);if(c+=R,u!==void 0){const P=Math.round(k%i.targetduration/i.partTarget);u+=P}this.log(`CDN Tune-in age: ${i.ageHeader}s last advanced ${x.toFixed(2)}s goal: ${k} skip sn ${R} to part ${u}`)}i.tuneInGoal=k}if(l=this.getDeliveryDirectives(i,t.deliveryDirectives,c,u),y||!b){this.loadPlaylist(l);return}}else(i.canBlockReload||i.canSkipUntil)&&(l=this.getDeliveryDirectives(i,t.deliveryDirectives,c,u));const d=this.hls.mainForwardBufferInfo,h=d?d.end-d.len:0,f=(i.edge-h)*1e3,p=qO(i,f);i.updated&&a>this.requestScheduled+p&&(this.requestScheduled=r.loading.start),c!==void 0&&i.canBlockReload?this.requestScheduled=r.loading.first+p-(i.partTarget*1e3||1e3):this.requestScheduled===-1||this.requestScheduled+p<a?this.requestScheduled=a:this.requestScheduled-a<=0&&(this.requestScheduled+=p);let m=this.requestScheduled-a;m=Math.max(0,m),this.log(`reload live playlist ${e} in ${Math.round(m)} ms`),this.timer=self.setTimeout(()=>this.loadPlaylist(l),m)}else this.clearTimer()}getDeliveryDirectives(e,t,s,i){let r=HO(e,s);return t!=null&&t.skip&&e.deltaUpdateFailed&&(s=t.msn,i=t.part,r=Aa.No),new Sg(s,i,r)}checkRetry(e){const t=e.details,s=Il(e),i=e.errorAction,{action:r,retryCount:a=0,retryConfig:o}=i||{},l=!!i&&!!o&&(r===Wt.RetryRequest||!i.resolved&&r===Wt.SendAlternateToPenaltyBox);if(l){var c;if(this.requestScheduled=-1,a>=o.maxNumRetry)return!1;if(s&&(c=e.context)!=null&&c.deliveryDirectives)this.warn(`Retrying playlist loading ${a+1}/${o.maxNumRetry} after "${t}" without delivery-directives`),this.loadPlaylist();else{const u=pf(o,a);this.timer=self.setTimeout(()=>this.loadPlaylist(),u),this.warn(`Retrying playlist loading ${a+1}/${o.maxNumRetry} after "${t}" in ${u}ms`)}e.levelRetry=!0,i.resolved=!0}return l}}class nr{constructor(e,t=0,s=0){this.halfLife=void 0,this.alpha_=void 0,this.estimate_=void 0,this.totalWeight_=void 0,this.halfLife=e,this.alpha_=e?Math.exp(Math.log(.5)/e):0,this.estimate_=t,this.totalWeight_=s}sample(e,t){const s=Math.pow(this.alpha_,e);this.estimate_=t*(1-s)+s*this.estimate_,this.totalWeight_+=e}getTotalWeight(){return this.totalWeight_}getEstimate(){if(this.alpha_){const e=1-Math.pow(this.alpha_,this.totalWeight_);if(e)return this.estimate_/e}return this.estimate_}}class sM{constructor(e,t,s,i=100){this.defaultEstimate_=void 0,this.minWeight_=void 0,this.minDelayMs_=void 0,this.slow_=void 0,this.fast_=void 0,this.defaultTTFB_=void 0,this.ttfb_=void 0,this.defaultEstimate_=s,this.minWeight_=.001,this.minDelayMs_=50,this.slow_=new nr(e),this.fast_=new nr(t),this.defaultTTFB_=i,this.ttfb_=new nr(e)}update(e,t){const{slow_:s,fast_:i,ttfb_:r}=this;s.halfLife!==e&&(this.slow_=new nr(e,s.getEstimate(),s.getTotalWeight())),i.halfLife!==t&&(this.fast_=new nr(t,i.getEstimate(),i.getTotalWeight())),r.halfLife!==e&&(this.ttfb_=new nr(e,r.getEstimate(),r.getTotalWeight()))}sample(e,t){e=Math.max(e,this.minDelayMs_);const s=8*t,i=e/1e3,r=s/i;this.fast_.sample(i,r),this.slow_.sample(i,r)}sampleTTFB(e){const t=e/1e3,s=Math.sqrt(2)*Math.exp(-Math.pow(t,2)/2);this.ttfb_.sample(s,Math.max(e,5))}canEstimate(){return this.fast_.getTotalWeight()>=this.minWeight_}getEstimate(){return this.canEstimate()?Math.min(this.fast_.getEstimate(),this.slow_.getEstimate()):this.defaultEstimate_}getEstimateTTFB(){return this.ttfb_.getTotalWeight()>=this.minWeight_?this.ttfb_.getEstimate():this.defaultTTFB_}destroy(){}}const ME={supported:!0,configurations:[],decodingInfoResults:[{supported:!0,powerEfficient:!0,smooth:!0}]},Rg={};function nM(n,e,t,s,i,r){const a=n.audioCodec?n.audioGroups:null,o=r==null?void 0:r.audioCodec,l=r==null?void 0:r.channels,c=l?parseInt(l):o?1/0:2;let u=null;if(a!=null&&a.length)try{a.length===1&&a[0]?u=e.groups[a[0]].channels:u=a.reduce((d,h)=>{if(h){const f=e.groups[h];if(!f)throw new Error(`Audio track group ${h} not found`);Object.keys(f.channels).forEach(p=>{d[p]=(d[p]||0)+f.channels[p]})}return d},{2:0})}catch{return!0}return n.videoCodec!==void 0&&(n.width>1920&&n.height>1088||n.height>1920&&n.width>1088||n.frameRate>Math.max(s,30)||n.videoRange!=="SDR"&&n.videoRange!==t||n.bitrate>Math.max(i,8e6))||!!u&&Se(c)&&Object.keys(u).some(d=>parseInt(d)>c)}function iM(n,e,t){const s=n.videoCodec,i=n.audioCodec;if(!s||!i||!t)return Promise.resolve(ME);const r={width:n.width,height:n.height,bitrate:Math.ceil(Math.max(n.bitrate*.9,n.averageBitrate)),framerate:n.frameRate||30},a=n.videoRange;a!=="SDR"&&(r.transferFunction=a.toLowerCase());const o=s.split(",").map(l=>({type:"media-source",video:Gt(Gt({},r),{},{contentType:Ya(l,"video")})}));return i&&n.audioGroups&&n.audioGroups.forEach(l=>{var c;l&&((c=e.groups[l])==null||c.tracks.forEach(u=>{if(u.groupId===l){const d=u.channels||"",h=parseFloat(d);Se(h)&&h>2&&o.push.apply(o,i.split(",").map(f=>({type:"media-source",audio:{contentType:Ya(f,"audio"),channels:""+h}})))}}))}),Promise.all(o.map(l=>{const c=rM(l);return Rg[c]||(Rg[c]=t.decodingInfo(l))})).then(l=>({supported:!l.some(c=>!c.supported),configurations:o,decodingInfoResults:l})).catch(l=>({supported:!1,configurations:o,decodingInfoResults:[],error:l}))}function rM(n){const{audio:e,video:t}=n,s=t||e;if(s){const i=s.contentType.split('"')[1];if(t)return`r${t.height}x${t.width}f${Math.ceil(t.framerate)}${t.transferFunction||"sd"}_${i}_${Math.ceil(t.bitrate/1e5)}`;if(e)return`c${e.channels}${e.spatialRendering?"s":"n"}_${i}`}return""}function aM(){if(typeof matchMedia=="function"){const n=matchMedia("(dynamic-range: high)"),e=matchMedia("bad query");if(n.media!==e.media)return n.matches===!0}return!1}function oM(n,e){let t=!1,s=[];return n&&(t=n!=="SDR",s=[n]),e&&(s=e.allowedVideoRanges||Rl.slice(0),t=e.preferHDR!==void 0?e.preferHDR:aM(),t?s=s.filter(i=>i!=="SDR"):s=["SDR"]),{preferHDR:t,allowedVideoRanges:s}}function lM(n,e,t,s,i){const r=Object.keys(n),a=s==null?void 0:s.channels,o=s==null?void 0:s.audioCodec,l=a&&parseInt(a)===2;let c=!0,u=!1,d=1/0,h=1/0,f=1/0,p=0,m=[];const{preferHDR:y,allowedVideoRanges:g}=oM(e,i);for(let b=r.length;b--;){const L=n[r[b]];c=L.channels[2]>0,d=Math.min(d,L.minHeight),h=Math.min(h,L.minFramerate),f=Math.min(f,L.minBitrate);const x=g.filter(w=>L.videoRanges[w]>0);x.length>0&&(u=!0,m=x)}d=Se(d)?d:0,h=Se(h)?h:0;const v=Math.max(1080,d),E=Math.max(30,h);return f=Se(f)?f:t,t=Math.max(f,t),u||(e=void 0,m=[]),{codecSet:r.reduce((b,L)=>{const x=n[L];if(L===b)return b;if(x.minBitrate>t)return An(L,`min bitrate of ${x.minBitrate} > current estimate of ${t}`),b;if(!x.hasDefaultAudio)return An(L,"no renditions with default or auto-select sound found"),b;if(o&&L.indexOf(o.substring(0,4))%5!==0)return An(L,`audio codec preference "${o}" not found`),b;if(a&&!l){if(!x.channels[a])return An(L,`no renditions with ${a} channel sound found (channels options: ${Object.keys(x.channels)})`),b}else if((!o||l)&&c&&x.channels[2]===0)return An(L,"no renditions with stereo sound found"),b;return x.minHeight>v?(An(L,`min resolution of ${x.minHeight} > maximum of ${v}`),b):x.minFramerate>E?(An(L,`min framerate of ${x.minFramerate} > maximum of ${E}`),b):m.some(w=>x.videoRanges[w]>0)?x.maxScore<p?(An(L,`max score of ${x.maxScore} < selected max of ${p}`),b):b&&(Ll(L)>=Ll(b)||x.fragmentError>n[b].fragmentError)?b:(p=x.maxScore,L):(An(L,`no variants with VIDEO-RANGE of ${JSON.stringify(m)} found`),b)},void 0),videoRanges:m,preferHDR:y,minFramerate:h,minBitrate:f}}function An(n,e){z.log(`[abr] start candidates with "${n}" ignored because ${e}`)}function cM(n){return n.reduce((e,t)=>{let s=e.groups[t.groupId];s||(s=e.groups[t.groupId]={tracks:[],channels:{2:0},hasDefault:!1,hasAutoSelect:!1}),s.tracks.push(t);const i=t.channels||"2";return s.channels[i]=(s.channels[i]||0)+1,s.hasDefault=s.hasDefault||t.default,s.hasAutoSelect=s.hasAutoSelect||t.autoselect,s.hasDefault&&(e.hasDefaultAudio=!0),s.hasAutoSelect&&(e.hasAutoSelectAudio=!0),e},{hasDefaultAudio:!1,hasAutoSelectAudio:!1,groups:{}})}function uM(n,e,t,s){return n.slice(t,s+1).reduce((i,r)=>{if(!r.codecSet)return i;const a=r.audioGroups;let o=i[r.codecSet];o||(i[r.codecSet]=o={minBitrate:1/0,minHeight:1/0,minFramerate:1/0,maxScore:0,videoRanges:{SDR:0},channels:{2:0},hasDefaultAudio:!a,fragmentError:0}),o.minBitrate=Math.min(o.minBitrate,r.bitrate);const l=Math.min(r.height,r.width);return o.minHeight=Math.min(o.minHeight,l),o.minFramerate=Math.min(o.minFramerate,r.frameRate),o.maxScore=Math.max(o.maxScore,r.score),o.fragmentError+=r.fragmentError,o.videoRanges[r.videoRange]=(o.videoRanges[r.videoRange]||0)+1,a&&a.forEach(c=>{if(!c)return;const u=e.groups[c];o.hasDefaultAudio=o.hasDefaultAudio||e.hasDefaultAudio?u.hasDefault:u.hasAutoSelect||!e.hasDefaultAudio&&!e.hasAutoSelectAudio,Object.keys(u.channels).forEach(d=>{o.channels[d]=(o.channels[d]||0)+u.channels[d]})}),i},{})}function mn(n,e,t){if("attrs"in n){const s=e.indexOf(n);if(s!==-1)return s}for(let s=0;s<e.length;s++){const i=e[s];if(Rr(n,i,t))return s}return-1}function Rr(n,e,t){const{groupId:s,name:i,lang:r,assocLang:a,characteristics:o,default:l}=n,c=n.forced;return(s===void 0||e.groupId===s)&&(i===void 0||e.name===i)&&(r===void 0||e.lang===r)&&(r===void 0||e.assocLang===a)&&(l===void 0||e.default===l)&&(c===void 0||e.forced===c)&&(o===void 0||dM(o,e.characteristics))&&(t===void 0||t(n,e))}function dM(n,e=""){const t=n.split(","),s=e.split(",");return t.length===s.length&&!t.some(i=>s.indexOf(i)===-1)}function ir(n,e){const{audioCodec:t,channels:s}=n;return(t===void 0||(e.audioCodec||"").substring(0,4)===t.substring(0,4))&&(s===void 0||s===(e.channels||"2"))}function hM(n,e,t,s,i){const r=e[s],o=e.reduce((h,f,p)=>{const m=f.uri;return(h[m]||(h[m]=[])).push(p),h},{})[r.uri];o.length>1&&(s=Math.max.apply(Math,o));const l=r.videoRange,c=r.frameRate,u=r.codecSet.substring(0,4),d=Ig(e,s,h=>{if(h.videoRange!==l||h.frameRate!==c||h.codecSet.substring(0,4)!==u)return!1;const f=h.audioGroups,p=t.filter(m=>!f||f.indexOf(m.groupId)!==-1);return mn(n,p,i)>-1});return d>-1?d:Ig(e,s,h=>{const f=h.audioGroups,p=t.filter(m=>!f||f.indexOf(m.groupId)!==-1);return mn(n,p,i)>-1})}function Ig(n,e,t){for(let s=e;s;s--)if(t(n[s]))return s;for(let s=e+1;s<n.length;s++)if(t(n[s]))return s;return-1}class fM{constructor(e){this.hls=void 0,this.lastLevelLoadSec=0,this.lastLoadedFragLevel=-1,this.firstSelection=-1,this._nextAutoLevel=-1,this.nextAutoLevelKey="",this.audioTracksByGroup=null,this.codecTiers=null,this.timer=-1,this.fragCurrent=null,this.partCurrent=null,this.bitrateTestDelay=0,this.bwEstimator=void 0,this._abandonRulesCheck=()=>{const{fragCurrent:t,partCurrent:s,hls:i}=this,{autoLevelEnabled:r,media:a}=i;if(!t||!a)return;const o=performance.now(),l=s?s.stats:t.stats,c=s?s.duration:t.duration,u=o-l.loading.start,d=i.minAutoLevel;if(l.aborted||l.loaded&&l.loaded===l.total||t.level<=d){this.clearTimer(),this._nextAutoLevel=-1;return}if(!r||a.paused||!a.playbackRate||!a.readyState)return;const h=i.mainForwardBufferInfo;if(h===null)return;const f=this.bwEstimator.getEstimateTTFB(),p=Math.abs(a.playbackRate);if(u<=Math.max(f,1e3*(c/(p*2))))return;const m=h.len/p,y=l.loading.first?l.loading.first-l.loading.start:-1,g=l.loaded&&y>-1,v=this.getBwEstimate(),E=i.levels,T=E[t.level],b=l.total||Math.max(l.loaded,Math.round(c*T.averageBitrate/8));let L=g?u-y:u;L<1&&g&&(L=Math.min(u,l.loaded*8/v));const x=g?l.loaded*1e3/L:0,w=x?(b-l.loaded)/x:b*8/v+f/1e3;if(w<=m)return;const k=x?x*8:v;let R=Number.POSITIVE_INFINITY,P;for(P=t.level-1;P>d;P--){const O=E[P].maxBitrate;if(R=this.getTimeToLoadFrag(f/1e3,k,c*O,!E[P].details),R<m)break}if(R>=w||R>c*10)return;i.nextLoadLevel=i.nextAutoLevel=P,g?this.bwEstimator.sample(u-Math.min(f,y),l.loaded):this.bwEstimator.sampleTTFB(u);const D=E[P].maxBitrate;this.getBwEstimate()*this.hls.config.abrBandWidthUpFactor>D&&this.resetEstimator(D),this.clearTimer(),z.warn(`[abr] Fragment ${t.sn}${s?" part "+s.index:""} of level ${t.level} is loading too slowly;
      Time to underbuffer: ${m.toFixed(3)} s
      Estimated load time for current fragment: ${w.toFixed(3)} s
      Estimated load time for down switch fragment: ${R.toFixed(3)} s
      TTFB estimate: ${y|0} ms
      Current BW estimate: ${Se(v)?v|0:"Unknown"} bps
      New BW estimate: ${this.getBwEstimate()|0} bps
      Switching to level ${P} @ ${D|0} bps`),i.trigger(I.FRAG_LOAD_EMERGENCY_ABORTED,{frag:t,part:s,stats:l})},this.hls=e,this.bwEstimator=this.initEstimator(),this.registerListeners()}resetEstimator(e){e&&(z.log(`setting initial bwe to ${e}`),this.hls.config.abrEwmaDefaultEstimate=e),this.firstSelection=-1,this.bwEstimator=this.initEstimator()}initEstimator(){const e=this.hls.config;return new sM(e.abrEwmaSlowVoD,e.abrEwmaFastVoD,e.abrEwmaDefaultEstimate)}registerListeners(){const{hls:e}=this;e.on(I.MANIFEST_LOADING,this.onManifestLoading,this),e.on(I.FRAG_LOADING,this.onFragLoading,this),e.on(I.FRAG_LOADED,this.onFragLoaded,this),e.on(I.FRAG_BUFFERED,this.onFragBuffered,this),e.on(I.LEVEL_SWITCHING,this.onLevelSwitching,this),e.on(I.LEVEL_LOADED,this.onLevelLoaded,this),e.on(I.LEVELS_UPDATED,this.onLevelsUpdated,this),e.on(I.MAX_AUTO_LEVEL_UPDATED,this.onMaxAutoLevelUpdated,this),e.on(I.ERROR,this.onError,this)}unregisterListeners(){const{hls:e}=this;e&&(e.off(I.MANIFEST_LOADING,this.onManifestLoading,this),e.off(I.FRAG_LOADING,this.onFragLoading,this),e.off(I.FRAG_LOADED,this.onFragLoaded,this),e.off(I.FRAG_BUFFERED,this.onFragBuffered,this),e.off(I.LEVEL_SWITCHING,this.onLevelSwitching,this),e.off(I.LEVEL_LOADED,this.onLevelLoaded,this),e.off(I.LEVELS_UPDATED,this.onLevelsUpdated,this),e.off(I.MAX_AUTO_LEVEL_UPDATED,this.onMaxAutoLevelUpdated,this),e.off(I.ERROR,this.onError,this))}destroy(){this.unregisterListeners(),this.clearTimer(),this.hls=this._abandonRulesCheck=null,this.fragCurrent=this.partCurrent=null}onManifestLoading(e,t){this.lastLoadedFragLevel=-1,this.firstSelection=-1,this.lastLevelLoadSec=0,this.fragCurrent=this.partCurrent=null,this.onLevelsUpdated(),this.clearTimer()}onLevelsUpdated(){this.lastLoadedFragLevel>-1&&this.fragCurrent&&(this.lastLoadedFragLevel=this.fragCurrent.level),this._nextAutoLevel=-1,this.onMaxAutoLevelUpdated(),this.codecTiers=null,this.audioTracksByGroup=null}onMaxAutoLevelUpdated(){this.firstSelection=-1,this.nextAutoLevelKey=""}onFragLoading(e,t){const s=t.frag;if(!this.ignoreFragment(s)){if(!s.bitrateTest){var i;this.fragCurrent=s,this.partCurrent=(i=t.part)!=null?i:null}this.clearTimer(),this.timer=self.setInterval(this._abandonRulesCheck,100)}}onLevelSwitching(e,t){this.clearTimer()}onError(e,t){if(!t.fatal)switch(t.details){case te.BUFFER_ADD_CODEC_ERROR:case te.BUFFER_APPEND_ERROR:this.lastLoadedFragLevel=-1,this.firstSelection=-1;break;case te.FRAG_LOAD_TIMEOUT:{const s=t.frag,{fragCurrent:i,partCurrent:r}=this;if(s&&i&&s.sn===i.sn&&s.level===i.level){const a=performance.now(),o=r?r.stats:s.stats,l=a-o.loading.start,c=o.loading.first?o.loading.first-o.loading.start:-1;if(o.loaded&&c>-1){const d=this.bwEstimator.getEstimateTTFB();this.bwEstimator.sample(l-Math.min(d,c),o.loaded)}else this.bwEstimator.sampleTTFB(l)}break}}}getTimeToLoadFrag(e,t,s,i){const r=e+s/t,a=i?this.lastLevelLoadSec:0;return r+a}onLevelLoaded(e,t){const s=this.hls.config,{loading:i}=t.stats,r=i.end-i.start;Se(r)&&(this.lastLevelLoadSec=r/1e3),t.details.live?this.bwEstimator.update(s.abrEwmaSlowLive,s.abrEwmaFastLive):this.bwEstimator.update(s.abrEwmaSlowVoD,s.abrEwmaFastVoD)}onFragLoaded(e,{frag:t,part:s}){const i=s?s.stats:t.stats;if(t.type===Pe.MAIN&&this.bwEstimator.sampleTTFB(i.loading.first-i.loading.start),!this.ignoreFragment(t)){if(this.clearTimer(),t.level===this._nextAutoLevel&&(this._nextAutoLevel=-1),this.firstSelection=-1,this.hls.config.abrMaxWithRealBitrate){const r=s?s.duration:t.duration,a=this.hls.levels[t.level],o=(a.loaded?a.loaded.bytes:0)+i.loaded,l=(a.loaded?a.loaded.duration:0)+r;a.loaded={bytes:o,duration:l},a.realBitrate=Math.round(8*o/l)}if(t.bitrateTest){const r={stats:i,frag:t,part:s,id:t.type};this.onFragBuffered(I.FRAG_BUFFERED,r),t.bitrateTest=!1}else this.lastLoadedFragLevel=t.level}}onFragBuffered(e,t){const{frag:s,part:i}=t,r=i!=null&&i.stats.loaded?i.stats:s.stats;if(r.aborted||this.ignoreFragment(s))return;const a=r.parsing.end-r.loading.start-Math.min(r.loading.first-r.loading.start,this.bwEstimator.getEstimateTTFB());this.bwEstimator.sample(a,r.loaded),r.bwEstimate=this.getBwEstimate(),s.bitrateTest?this.bitrateTestDelay=a/1e3:this.bitrateTestDelay=0}ignoreFragment(e){return e.type!==Pe.MAIN||e.sn==="initSegment"}clearTimer(){this.timer>-1&&(self.clearInterval(this.timer),this.timer=-1)}get firstAutoLevel(){const{maxAutoLevel:e,minAutoLevel:t}=this.hls,s=this.getBwEstimate(),i=this.hls.config.maxStarvationDelay,r=this.findBestLevel(s,t,e,0,i,1,1);if(r>-1)return r;const a=this.hls.firstLevel,o=Math.min(Math.max(a,t),e);return z.warn(`[abr] Could not find best starting auto level. Defaulting to first in playlist ${a} clamped to ${o}`),o}get forcedAutoLevel(){return this.nextAutoLevelKey?-1:this._nextAutoLevel}get nextAutoLevel(){const e=this.forcedAutoLevel,s=this.bwEstimator.canEstimate(),i=this.lastLoadedFragLevel>-1;if(e!==-1&&(!s||!i||this.nextAutoLevelKey===this.getAutoLevelKey()))return e;const r=s&&i?this.getNextABRAutoLevel():this.firstAutoLevel;if(e!==-1){const a=this.hls.levels;if(a.length>Math.max(e,r)&&a[e].loadError<=a[r].loadError)return e}return this._nextAutoLevel=r,this.nextAutoLevelKey=this.getAutoLevelKey(),r}getAutoLevelKey(){return`${this.getBwEstimate()}_${this.getStarvationDelay().toFixed(2)}`}getNextABRAutoLevel(){const{fragCurrent:e,partCurrent:t,hls:s}=this,{maxAutoLevel:i,config:r,minAutoLevel:a}=s,o=t?t.duration:e?e.duration:0,l=this.getBwEstimate(),c=this.getStarvationDelay();let u=r.abrBandWidthFactor,d=r.abrBandWidthUpFactor;if(c){const y=this.findBestLevel(l,a,i,c,0,u,d);if(y>=0)return y}let h=o?Math.min(o,r.maxStarvationDelay):r.maxStarvationDelay;if(!c){const y=this.bitrateTestDelay;y&&(h=(o?Math.min(o,r.maxLoadingDelay):r.maxLoadingDelay)-y,z.info(`[abr] bitrate test took ${Math.round(1e3*y)}ms, set first fragment max fetchDuration to ${Math.round(1e3*h)} ms`),u=d=1)}const f=this.findBestLevel(l,a,i,c,h,u,d);if(z.info(`[abr] ${c?"rebuffering expected":"buffer is empty"}, optimal quality level ${f}`),f>-1)return f;const p=s.levels[a],m=s.levels[s.loadLevel];return(p==null?void 0:p.bitrate)<(m==null?void 0:m.bitrate)?a:s.loadLevel}getStarvationDelay(){const e=this.hls,t=e.media;if(!t)return 1/0;const s=t&&t.playbackRate!==0?Math.abs(t.playbackRate):1,i=e.mainForwardBufferInfo;return(i?i.len:0)/s}getBwEstimate(){return this.bwEstimator.canEstimate()?this.bwEstimator.getEstimate():this.hls.config.abrEwmaDefaultEstimate}findBestLevel(e,t,s,i,r,a,o){var l;const c=i+r,u=this.lastLoadedFragLevel,d=u===-1?this.hls.firstLevel:u,{fragCurrent:h,partCurrent:f}=this,{levels:p,allAudioTracks:m,loadLevel:y,config:g}=this.hls;if(p.length===1)return 0;const v=p[d],E=!!(v!=null&&(l=v.details)!=null&&l.live),T=y===-1||u===-1;let b,L="SDR",x=(v==null?void 0:v.frameRate)||0;const{audioPreference:w,videoPreference:k}=g,R=this.audioTracksByGroup||(this.audioTracksByGroup=cM(m));if(T){if(this.firstSelection!==-1)return this.firstSelection;const $=this.codecTiers||(this.codecTiers=uM(p,R,t,s)),K=lM($,L,e,w,k),{codecSet:ee,videoRanges:V,minFramerate:U,minBitrate:B,preferHDR:j}=K;b=ee,L=j?V[V.length-1]:V[0],x=U,e=Math.max(e,B),z.log(`[abr] picked start tier ${JSON.stringify(K)}`)}else b=v==null?void 0:v.codecSet,L=v==null?void 0:v.videoRange;const P=f?f.duration:h?h.duration:0,D=this.bwEstimator.getEstimateTTFB()/1e3,O=[];for(let $=s;$>=t;$--){var N;const K=p[$],ee=$>d;if(!K)continue;if(g.useMediaCapabilities&&!K.supportedResult&&!K.supportedPromise){const xe=navigator.mediaCapabilities;typeof(xe==null?void 0:xe.decodingInfo)=="function"&&nM(K,R,L,x,e,w)?(K.supportedPromise=iM(K,R,xe),K.supportedPromise.then(Le=>{if(!this.hls)return;K.supportedResult=Le;const we=this.hls.levels,Q=we.indexOf(K);Le.error?z.warn(`[abr] MediaCapabilities decodingInfo error: "${Le.error}" for level ${Q} ${JSON.stringify(Le)}`):Le.supported||(z.warn(`[abr] Unsupported MediaCapabilities decodingInfo result for level ${Q} ${JSON.stringify(Le)}`),Q>-1&&we.length>1&&(z.log(`[abr] Removing unsupported level ${Q}`),this.hls.removeLevel(Q)))})):K.supportedResult=ME}if(b&&K.codecSet!==b||L&&K.videoRange!==L||ee&&x>K.frameRate||!ee&&x>0&&x<K.frameRate||K.supportedResult&&!((N=K.supportedResult.decodingInfoResults)!=null&&N[0].smooth)){O.push($);continue}const V=K.details,U=(f?V==null?void 0:V.partTarget:V==null?void 0:V.averagetargetduration)||P;let B;ee?B=o*e:B=a*e;const j=P&&i>=P*2&&r===0?p[$].averageBitrate:p[$].maxBitrate,Y=this.getTimeToLoadFrag(D,B,j*U,V===void 0);if(B>=j&&($===u||K.loadError===0&&K.fragmentError===0)&&(Y<=D||!Se(Y)||E&&!this.bitrateTestDelay||Y<c)){const xe=this.forcedAutoLevel;return $!==y&&(xe===-1||xe!==y)&&(O.length&&z.trace(`[abr] Skipped level(s) ${O.join(",")} of ${s} max with CODECS and VIDEO-RANGE:"${p[O[0]].codecs}" ${p[O[0]].videoRange}; not compatible with "${v.codecs}" ${L}`),z.info(`[abr] switch candidate:${d}->${$} adjustedbw(${Math.round(B)})-bitrate=${Math.round(B-j)} ttfb:${D.toFixed(1)} avgDuration:${U.toFixed(1)} maxFetchDuration:${c.toFixed(1)} fetchDuration:${Y.toFixed(1)} firstSelection:${T} codecSet:${b} videoRange:${L} hls.loadLevel:${y}`)),T&&(this.firstSelection=$),$}}return-1}set nextAutoLevel(e){const{maxAutoLevel:t,minAutoLevel:s}=this.hls,i=Math.min(Math.max(e,s),t);this._nextAutoLevel!==i&&(this.nextAutoLevelKey="",this._nextAutoLevel=i)}}class pM{constructor(){this._boundTick=void 0,this._tickTimer=null,this._tickInterval=null,this._tickCallCount=0,this._boundTick=this.tick.bind(this)}destroy(){this.onHandlerDestroying(),this.onHandlerDestroyed()}onHandlerDestroying(){this.clearNextTick(),this.clearInterval()}onHandlerDestroyed(){}hasInterval(){return!!this._tickInterval}hasNextTick(){return!!this._tickTimer}setInterval(e){return this._tickInterval?!1:(this._tickCallCount=0,this._tickInterval=self.setInterval(this._boundTick,e),!0)}clearInterval(){return this._tickInterval?(self.clearInterval(this._tickInterval),this._tickInterval=null,!0):!1}clearNextTick(){return this._tickTimer?(self.clearTimeout(this._tickTimer),this._tickTimer=null,!0):!1}tick(){this._tickCallCount++,this._tickCallCount===1&&(this.doTick(),this._tickCallCount>1&&this.tickImmediate(),this._tickCallCount=0)}tickImmediate(){this.clearNextTick(),this._tickTimer=self.setTimeout(this._boundTick,0)}doTick(){}}var Bt={NOT_LOADED:"NOT_LOADED",APPENDING:"APPENDING",PARTIAL:"PARTIAL",OK:"OK"};class mM{constructor(e){this.activePartLists=Object.create(null),this.endListFragments=Object.create(null),this.fragments=Object.create(null),this.timeRanges=Object.create(null),this.bufferPadding=.2,this.hls=void 0,this.hasGaps=!1,this.hls=e,this._registerListeners()}_registerListeners(){const{hls:e}=this;e.on(I.BUFFER_APPENDED,this.onBufferAppended,this),e.on(I.FRAG_BUFFERED,this.onFragBuffered,this),e.on(I.FRAG_LOADED,this.onFragLoaded,this)}_unregisterListeners(){const{hls:e}=this;e.off(I.BUFFER_APPENDED,this.onBufferAppended,this),e.off(I.FRAG_BUFFERED,this.onFragBuffered,this),e.off(I.FRAG_LOADED,this.onFragLoaded,this)}destroy(){this._unregisterListeners(),this.fragments=this.activePartLists=this.endListFragments=this.timeRanges=null}getAppendedFrag(e,t){const s=this.activePartLists[t];if(s)for(let i=s.length;i--;){const r=s[i];if(!r)break;const a=r.end;if(r.start<=e&&a!==null&&e<=a)return r}return this.getBufferedFrag(e,t)}getBufferedFrag(e,t){const{fragments:s}=this,i=Object.keys(s);for(let r=i.length;r--;){const a=s[i[r]];if((a==null?void 0:a.body.type)===t&&a.buffered){const o=a.body;if(o.start<=e&&e<=o.end)return o}}return null}detectEvictedFragments(e,t,s,i){this.timeRanges&&(this.timeRanges[e]=t);const r=(i==null?void 0:i.fragment.sn)||-1;Object.keys(this.fragments).forEach(a=>{const o=this.fragments[a];if(!o||r>=o.body.sn)return;if(!o.buffered&&!o.loaded){o.body.type===s&&this.removeFragment(o.body);return}const l=o.range[e];l&&l.time.some(c=>{const u=!this.isTimeBuffered(c.startPTS,c.endPTS,t);return u&&this.removeFragment(o.body),u})})}detectPartialFragments(e){const t=this.timeRanges,{frag:s,part:i}=e;if(!t||s.sn==="initSegment")return;const r=rr(s),a=this.fragments[r];if(!a||a.buffered&&s.gap)return;const o=!s.relurl;Object.keys(t).forEach(l=>{const c=s.elementaryStreams[l];if(!c)return;const u=t[l],d=o||c.partial===!0;a.range[l]=this.getBufferedTimes(s,i,d,u)}),a.loaded=null,Object.keys(a.range).length?(a.buffered=!0,(a.body.endList=s.endList||a.body.endList)&&(this.endListFragments[a.body.type]=a),Ro(a)||this.removeParts(s.sn-1,s.type)):this.removeFragment(a.body)}removeParts(e,t){const s=this.activePartLists[t];s&&(this.activePartLists[t]=s.filter(i=>i.fragment.sn>=e))}fragBuffered(e,t){const s=rr(e);let i=this.fragments[s];!i&&t&&(i=this.fragments[s]={body:e,appendedPTS:null,loaded:null,buffered:!1,range:Object.create(null)},e.gap&&(this.hasGaps=!0)),i&&(i.loaded=null,i.buffered=!0)}getBufferedTimes(e,t,s,i){const r={time:[],partial:s},a=e.start,o=e.end,l=e.minEndPTS||o,c=e.maxStartPTS||a;for(let u=0;u<i.length;u++){const d=i.start(u)-this.bufferPadding,h=i.end(u)+this.bufferPadding;if(c>=d&&l<=h){r.time.push({startPTS:Math.max(a,i.start(u)),endPTS:Math.min(o,i.end(u))});break}else if(a<h&&o>d){const f=Math.max(a,i.start(u)),p=Math.min(o,i.end(u));p>f&&(r.partial=!0,r.time.push({startPTS:f,endPTS:p}))}else if(o<=d)break}return r}getPartialFragment(e){let t=null,s,i,r,a=0;const{bufferPadding:o,fragments:l}=this;return Object.keys(l).forEach(c=>{const u=l[c];u&&Ro(u)&&(i=u.body.start-o,r=u.body.end+o,e>=i&&e<=r&&(s=Math.min(e-i,r-e),a<=s&&(t=u.body,a=s)))}),t}isEndListAppended(e){const t=this.endListFragments[e];return t!==void 0&&(t.buffered||Ro(t))}getState(e){const t=rr(e),s=this.fragments[t];return s?s.buffered?Ro(s)?Bt.PARTIAL:Bt.OK:Bt.APPENDING:Bt.NOT_LOADED}isTimeBuffered(e,t,s){let i,r;for(let a=0;a<s.length;a++){if(i=s.start(a)-this.bufferPadding,r=s.end(a)+this.bufferPadding,e>=i&&t<=r)return!0;if(t<=i)return!1}return!1}onFragLoaded(e,t){const{frag:s,part:i}=t;if(s.sn==="initSegment"||s.bitrateTest)return;const r=i?null:t,a=rr(s);this.fragments[a]={body:s,appendedPTS:null,loaded:r,buffered:!1,range:Object.create(null)}}onBufferAppended(e,t){const{frag:s,part:i,timeRanges:r}=t;if(s.sn==="initSegment")return;const a=s.type;if(i){let o=this.activePartLists[a];o||(this.activePartLists[a]=o=[]),o.push(i)}this.timeRanges=r,Object.keys(r).forEach(o=>{const l=r[o];this.detectEvictedFragments(o,l,a,i)})}onFragBuffered(e,t){this.detectPartialFragments(t)}hasFragment(e){const t=rr(e);return!!this.fragments[t]}hasParts(e){var t;return!!((t=this.activePartLists[e])!=null&&t.length)}removeFragmentsInRange(e,t,s,i,r){i&&!this.hasGaps||Object.keys(this.fragments).forEach(a=>{const o=this.fragments[a];if(!o)return;const l=o.body;l.type!==s||i&&!l.gap||l.start<t&&l.end>e&&(o.buffered||r)&&this.removeFragment(l)})}removeFragment(e){const t=rr(e);e.stats.loaded=0,e.clearElementaryStreamInfo();const s=this.activePartLists[e.type];if(s){const i=e.sn;this.activePartLists[e.type]=s.filter(r=>r.fragment.sn!==i)}delete this.fragments[t],e.endList&&delete this.endListFragments[e.type]}removeAllFragments(){this.fragments=Object.create(null),this.endListFragments=Object.create(null),this.activePartLists=Object.create(null),this.hasGaps=!1}}function Ro(n){var e,t,s;return n.buffered&&(n.body.gap||((e=n.range.video)==null?void 0:e.partial)||((t=n.range.audio)==null?void 0:t.partial)||((s=n.range.audiovideo)==null?void 0:s.partial))}function rr(n){return`${n.type}_${n.level}_${n.sn}`}const gM={length:0,start:()=>0,end:()=>0};class ut{static isBuffered(e,t){try{if(e){const s=ut.getBuffered(e);for(let i=0;i<s.length;i++)if(t>=s.start(i)&&t<=s.end(i))return!0}}catch{}return!1}static bufferInfo(e,t,s){try{if(e){const i=ut.getBuffered(e),r=[];let a;for(a=0;a<i.length;a++)r.push({start:i.start(a),end:i.end(a)});return this.bufferedInfo(r,t,s)}}catch{}return{len:0,start:t,end:t,nextStart:void 0}}static bufferedInfo(e,t,s){t=Math.max(0,t),e.sort(function(c,u){const d=c.start-u.start;return d||u.end-c.end});let i=[];if(s)for(let c=0;c<e.length;c++){const u=i.length;if(u){const d=i[u-1].end;e[c].start-d<s?e[c].end>d&&(i[u-1].end=e[c].end):i.push(e[c])}else i.push(e[c])}else i=e;let r=0,a,o=t,l=t;for(let c=0;c<i.length;c++){const u=i[c].start,d=i[c].end;if(t+s>=u&&t<d)o=u,l=d,r=l-t;else if(t+s<u){a=u;break}}return{len:r,start:o||0,end:l||0,nextStart:a}}static getBuffered(e){try{return e.buffered}catch(t){return z.log("failed to get media.buffered",t),gM}}}class gf{constructor(e,t,s,i=0,r=-1,a=!1){this.level=void 0,this.sn=void 0,this.part=void 0,this.id=void 0,this.size=void 0,this.partial=void 0,this.transmuxing=Io(),this.buffering={audio:Io(),video:Io(),audiovideo:Io()},this.level=e,this.sn=t,this.id=s,this.size=i,this.part=r,this.partial=a}}function Io(){return{start:0,executeStart:0,executeEnd:0,end:0}}function Zo(n,e){for(let s=0,i=n.length;s<i;s++){var t;if(((t=n[s])==null?void 0:t.cc)===e)return n[s]}return null}function yM(n,e,t){return!!(e&&(t.endCC>t.startCC||n&&n.cc<t.startCC))}function vM(n,e){const t=n.fragments,s=e.fragments;if(!s.length||!t.length){z.log("No fragments to align");return}const i=Zo(t,s[0].cc);if(!i||i&&!i.startPTS){z.log("No frag in previous level to align on");return}return i}function Cg(n,e){if(n){const t=n.start+e;n.start=n.startPTS=t,n.endPTS=t+n.duration}}function FE(n,e){const t=e.fragments;for(let s=0,i=t.length;s<i;s++)Cg(t[s],n);e.fragmentHint&&Cg(e.fragmentHint,n),e.alignedSliding=!0}function EM(n,e,t){e&&(TM(n,t,e),!t.alignedSliding&&e&&kl(t,e),!t.alignedSliding&&e&&!t.skippedSegments&&DE(e,t))}function TM(n,e,t){if(yM(n,t,e)){const s=vM(t,e);s&&Se(s.start)&&(z.log(`Adjusting PTS using last level due to CC increase within current level ${e.url}`),FE(s.start,e))}}function kl(n,e){if(!n.hasProgramDateTime||!e.hasProgramDateTime)return;const t=n.fragments,s=e.fragments;if(!t.length||!s.length)return;let i,r;const a=Math.min(e.endCC,n.endCC);e.startCC<a&&n.startCC<a&&(i=Zo(s,a),r=Zo(t,a)),(!i||!r)&&(i=s[Math.floor(s.length/2)],r=Zo(t,i.cc)||t[Math.floor(t.length/2)]);const o=i.programDateTime,l=r.programDateTime;if(!o||!l)return;const c=(l-o)/1e3-(r.start-i.start);FE(c,n)}const Dg=Math.pow(2,17);class bM{constructor(e){this.config=void 0,this.loader=null,this.partLoadTimeout=-1,this.config=e}destroy(){this.loader&&(this.loader.destroy(),this.loader=null)}abort(){this.loader&&this.loader.abort()}load(e,t){const s=e.url;if(!s)return Promise.reject(new Dn({type:Oe.NETWORK_ERROR,details:te.FRAG_LOAD_ERROR,fatal:!1,frag:e,error:new Error(`Fragment does not have a ${s?"part list":"url"}`),networkDetails:null}));this.abort();const i=this.config,r=i.fLoader,a=i.loader;return new Promise((o,l)=>{if(this.loader&&this.loader.destroy(),e.gap)if(e.tagList.some(f=>f[0]==="GAP")){l(Pg(e));return}else e.gap=!1;const c=this.loader=e.loader=r?new r(i):new a(i),u=kg(e),d=wg(i.fragLoadPolicy.default),h={loadPolicy:d,timeout:d.maxLoadTimeMs,maxRetry:0,retryDelay:0,maxRetryDelay:0,highWaterMark:e.sn==="initSegment"?1/0:Dg};e.stats=c.stats,c.load(u,h,{onSuccess:(f,p,m,y)=>{this.resetLoader(e,c);let g=f.data;m.resetIV&&e.decryptdata&&(e.decryptdata.iv=new Uint8Array(g.slice(0,16)),g=g.slice(16)),o({frag:e,part:null,payload:g,networkDetails:y})},onError:(f,p,m,y)=>{this.resetLoader(e,c),l(new Dn({type:Oe.NETWORK_ERROR,details:te.FRAG_LOAD_ERROR,fatal:!1,frag:e,response:Gt({url:s,data:void 0},f),error:new Error(`HTTP Error ${f.code} ${f.text}`),networkDetails:m,stats:y}))},onAbort:(f,p,m)=>{this.resetLoader(e,c),l(new Dn({type:Oe.NETWORK_ERROR,details:te.INTERNAL_ABORTED,fatal:!1,frag:e,error:new Error("Aborted"),networkDetails:m,stats:f}))},onTimeout:(f,p,m)=>{this.resetLoader(e,c),l(new Dn({type:Oe.NETWORK_ERROR,details:te.FRAG_LOAD_TIMEOUT,fatal:!1,frag:e,error:new Error(`Timeout after ${h.timeout}ms`),networkDetails:m,stats:f}))},onProgress:(f,p,m,y)=>{t&&t({frag:e,part:null,payload:m,networkDetails:y})}})})}loadPart(e,t,s){this.abort();const i=this.config,r=i.fLoader,a=i.loader;return new Promise((o,l)=>{if(this.loader&&this.loader.destroy(),e.gap||t.gap){l(Pg(e,t));return}const c=this.loader=e.loader=r?new r(i):new a(i),u=kg(e,t),d=wg(i.fragLoadPolicy.default),h={loadPolicy:d,timeout:d.maxLoadTimeMs,maxRetry:0,retryDelay:0,maxRetryDelay:0,highWaterMark:Dg};t.stats=c.stats,c.load(u,h,{onSuccess:(f,p,m,y)=>{this.resetLoader(e,c),this.updateStatsFromPart(e,t);const g={frag:e,part:t,payload:f.data,networkDetails:y};s(g),o(g)},onError:(f,p,m,y)=>{this.resetLoader(e,c),l(new Dn({type:Oe.NETWORK_ERROR,details:te.FRAG_LOAD_ERROR,fatal:!1,frag:e,part:t,response:Gt({url:u.url,data:void 0},f),error:new Error(`HTTP Error ${f.code} ${f.text}`),networkDetails:m,stats:y}))},onAbort:(f,p,m)=>{e.stats.aborted=t.stats.aborted,this.resetLoader(e,c),l(new Dn({type:Oe.NETWORK_ERROR,details:te.INTERNAL_ABORTED,fatal:!1,frag:e,part:t,error:new Error("Aborted"),networkDetails:m,stats:f}))},onTimeout:(f,p,m)=>{this.resetLoader(e,c),l(new Dn({type:Oe.NETWORK_ERROR,details:te.FRAG_LOAD_TIMEOUT,fatal:!1,frag:e,part:t,error:new Error(`Timeout after ${h.timeout}ms`),networkDetails:m,stats:f}))}})})}updateStatsFromPart(e,t){const s=e.stats,i=t.stats,r=i.total;if(s.loaded+=i.loaded,r){const l=Math.round(e.duration/t.duration),c=Math.min(Math.round(s.loaded/r),l),d=(l-c)*Math.round(s.loaded/c);s.total=s.loaded+d}else s.total=Math.max(s.loaded,s.total);const a=s.loading,o=i.loading;a.start?a.first+=o.first-o.start:(a.start=o.start,a.first=o.first),a.end=o.end}resetLoader(e,t){e.loader=null,this.loader===t&&(self.clearTimeout(this.partLoadTimeout),this.loader=null),t.destroy()}}function kg(n,e=null){const t=e||n,s={frag:n,part:e,responseType:"arraybuffer",url:t.url,headers:{},rangeStart:0,rangeEnd:0},i=t.byteRangeStartOffset,r=t.byteRangeEndOffset;if(Se(i)&&Se(r)){var a;let o=i,l=r;if(n.sn==="initSegment"&&((a=n.decryptdata)==null?void 0:a.method)==="AES-128"){const c=r-i;c%16&&(l=r+(16-c%16)),i!==0&&(s.resetIV=!0,o=i-16)}s.rangeStart=o,s.rangeEnd=l}return s}function Pg(n,e){const t=new Error(`GAP ${n.gap?"tag":"attribute"} found`),s={type:Oe.MEDIA_ERROR,details:te.FRAG_GAP,fatal:!1,frag:n,error:t,networkDetails:null};return e&&(s.part=e),(e||n).stats.aborted=!0,new Dn(s)}class Dn extends Error{constructor(e){super(e.error.message),this.data=void 0,this.data=e}}class xM{constructor(e,t){this.subtle=void 0,this.aesIV=void 0,this.subtle=e,this.aesIV=t}decrypt(e,t){return this.subtle.decrypt({name:"AES-CBC",iv:this.aesIV},t,e)}}class SM{constructor(e,t){this.subtle=void 0,this.key=void 0,this.subtle=e,this.key=t}expandKey(){return this.subtle.importKey("raw",this.key,{name:"AES-CBC"},!1,["encrypt","decrypt"])}}function _M(n){const e=n.byteLength,t=e&&new DataView(n.buffer).getUint8(e-1);return t?Hi(n,0,e-t):n}class AM{constructor(){this.rcon=[0,1,2,4,8,16,32,64,128,27,54],this.subMix=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],this.invSubMix=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],this.sBox=new Uint32Array(256),this.invSBox=new Uint32Array(256),this.key=new Uint32Array(0),this.ksRows=0,this.keySize=0,this.keySchedule=void 0,this.invKeySchedule=void 0,this.initTable()}uint8ArrayToUint32Array_(e){const t=new DataView(e),s=new Uint32Array(4);for(let i=0;i<4;i++)s[i]=t.getUint32(i*4);return s}initTable(){const e=this.sBox,t=this.invSBox,s=this.subMix,i=s[0],r=s[1],a=s[2],o=s[3],l=this.invSubMix,c=l[0],u=l[1],d=l[2],h=l[3],f=new Uint32Array(256);let p=0,m=0,y=0;for(y=0;y<256;y++)y<128?f[y]=y<<1:f[y]=y<<1^283;for(y=0;y<256;y++){let g=m^m<<1^m<<2^m<<3^m<<4;g=g>>>8^g&255^99,e[p]=g,t[g]=p;const v=f[p],E=f[v],T=f[E];let b=f[g]*257^g*16843008;i[p]=b<<24|b>>>8,r[p]=b<<16|b>>>16,a[p]=b<<8|b>>>24,o[p]=b,b=T*16843009^E*65537^v*257^p*16843008,c[g]=b<<24|b>>>8,u[g]=b<<16|b>>>16,d[g]=b<<8|b>>>24,h[g]=b,p?(p=v^f[f[f[T^v]]],m^=f[f[m]]):p=m=1}}expandKey(e){const t=this.uint8ArrayToUint32Array_(e);let s=!0,i=0;for(;i<t.length&&s;)s=t[i]===this.key[i],i++;if(s)return;this.key=t;const r=this.keySize=t.length;if(r!==4&&r!==6&&r!==8)throw new Error("Invalid aes key size="+r);const a=this.ksRows=(r+6+1)*4;let o,l;const c=this.keySchedule=new Uint32Array(a),u=this.invKeySchedule=new Uint32Array(a),d=this.sBox,h=this.rcon,f=this.invSubMix,p=f[0],m=f[1],y=f[2],g=f[3];let v,E;for(o=0;o<a;o++){if(o<r){v=c[o]=t[o];continue}E=v,o%r===0?(E=E<<8|E>>>24,E=d[E>>>24]<<24|d[E>>>16&255]<<16|d[E>>>8&255]<<8|d[E&255],E^=h[o/r|0]<<24):r>6&&o%r===4&&(E=d[E>>>24]<<24|d[E>>>16&255]<<16|d[E>>>8&255]<<8|d[E&255]),c[o]=v=(c[o-r]^E)>>>0}for(l=0;l<a;l++)o=a-l,l&3?E=c[o]:E=c[o-4],l<4||o<=4?u[l]=E:u[l]=p[d[E>>>24]]^m[d[E>>>16&255]]^y[d[E>>>8&255]]^g[d[E&255]],u[l]=u[l]>>>0}networkToHostOrderSwap(e){return e<<24|(e&65280)<<8|(e&16711680)>>8|e>>>24}decrypt(e,t,s){const i=this.keySize+6,r=this.invKeySchedule,a=this.invSBox,o=this.invSubMix,l=o[0],c=o[1],u=o[2],d=o[3],h=this.uint8ArrayToUint32Array_(s);let f=h[0],p=h[1],m=h[2],y=h[3];const g=new Int32Array(e),v=new Int32Array(g.length);let E,T,b,L,x,w,k,R,P,D,O,N,$,K;const ee=this.networkToHostOrderSwap;for(;t<g.length;){for(P=ee(g[t]),D=ee(g[t+1]),O=ee(g[t+2]),N=ee(g[t+3]),x=P^r[0],w=N^r[1],k=O^r[2],R=D^r[3],$=4,K=1;K<i;K++)E=l[x>>>24]^c[w>>16&255]^u[k>>8&255]^d[R&255]^r[$],T=l[w>>>24]^c[k>>16&255]^u[R>>8&255]^d[x&255]^r[$+1],b=l[k>>>24]^c[R>>16&255]^u[x>>8&255]^d[w&255]^r[$+2],L=l[R>>>24]^c[x>>16&255]^u[w>>8&255]^d[k&255]^r[$+3],x=E,w=T,k=b,R=L,$=$+4;E=a[x>>>24]<<24^a[w>>16&255]<<16^a[k>>8&255]<<8^a[R&255]^r[$],T=a[w>>>24]<<24^a[k>>16&255]<<16^a[R>>8&255]<<8^a[x&255]^r[$+1],b=a[k>>>24]<<24^a[R>>16&255]<<16^a[x>>8&255]<<8^a[w&255]^r[$+2],L=a[R>>>24]<<24^a[x>>16&255]<<16^a[w>>8&255]<<8^a[k&255]^r[$+3],v[t]=ee(E^f),v[t+1]=ee(L^p),v[t+2]=ee(b^m),v[t+3]=ee(T^y),f=P,p=D,m=O,y=N,t=t+4}return v.buffer}}const LM=16;class yf{constructor(e,{removePKCS7Padding:t=!0}={}){if(this.logEnabled=!0,this.removePKCS7Padding=void 0,this.subtle=null,this.softwareDecrypter=null,this.key=null,this.fastAesKey=null,this.remainderData=null,this.currentIV=null,this.currentResult=null,this.useSoftware=void 0,this.useSoftware=e.enableSoftwareAES,this.removePKCS7Padding=t,t)try{const s=self.crypto;s&&(this.subtle=s.subtle||s.webkitSubtle)}catch{}this.subtle===null&&(this.useSoftware=!0)}destroy(){this.subtle=null,this.softwareDecrypter=null,this.key=null,this.fastAesKey=null,this.remainderData=null,this.currentIV=null,this.currentResult=null}isSync(){return this.useSoftware}flush(){const{currentResult:e,remainderData:t}=this;if(!e||t)return this.reset(),null;const s=new Uint8Array(e);return this.reset(),this.removePKCS7Padding?_M(s):s}reset(){this.currentResult=null,this.currentIV=null,this.remainderData=null,this.softwareDecrypter&&(this.softwareDecrypter=null)}decrypt(e,t,s){return this.useSoftware?new Promise((i,r)=>{this.softwareDecrypt(new Uint8Array(e),t,s);const a=this.flush();a?i(a.buffer):r(new Error("[softwareDecrypt] Failed to decrypt data"))}):this.webCryptoDecrypt(new Uint8Array(e),t,s)}softwareDecrypt(e,t,s){const{currentIV:i,currentResult:r,remainderData:a}=this;this.logOnce("JS AES decrypt"),a&&(e=Bs(a,e),this.remainderData=null);const o=this.getValidChunk(e);if(!o.length)return null;i&&(s=i);let l=this.softwareDecrypter;l||(l=this.softwareDecrypter=new AM),l.expandKey(t);const c=r;return this.currentResult=l.decrypt(o.buffer,0,s),this.currentIV=Hi(o,-16).buffer,c||null}webCryptoDecrypt(e,t,s){const i=this.subtle;return(this.key!==t||!this.fastAesKey)&&(this.key=t,this.fastAesKey=new SM(i,t)),this.fastAesKey.expandKey().then(r=>i?(this.logOnce("WebCrypto AES decrypt"),new xM(i,new Uint8Array(s)).decrypt(e.buffer,r)):Promise.reject(new Error("web crypto not initialized"))).catch(r=>(z.warn(`[decrypter]: WebCrypto Error, disable WebCrypto API, ${r.name}: ${r.message}`),this.onWebCryptoError(e,t,s)))}onWebCryptoError(e,t,s){this.useSoftware=!0,this.logEnabled=!0,this.softwareDecrypt(e,t,s);const i=this.flush();if(i)return i.buffer;throw new Error("WebCrypto and softwareDecrypt: failed to decrypt data")}getValidChunk(e){let t=e;const s=e.length-e.length%LM;return s!==e.length&&(t=Hi(e,0,s),this.remainderData=Hi(e,s)),t}logOnce(e){this.logEnabled&&(z.log(`[decrypter]: ${e}`),this.logEnabled=!1)}}const wM={toString:function(n){let e="";const t=n.length;for(let s=0;s<t;s++)e+=`[${n.start(s).toFixed(3)}-${n.end(s).toFixed(3)}]`;return e}},re={STOPPED:"STOPPED",IDLE:"IDLE",KEY_LOADING:"KEY_LOADING",FRAG_LOADING:"FRAG_LOADING",FRAG_LOADING_WAITING_RETRY:"FRAG_LOADING_WAITING_RETRY",WAITING_TRACK:"WAITING_TRACK",PARSING:"PARSING",PARSED:"PARSED",ENDED:"ENDED",ERROR:"ERROR",WAITING_INIT_PTS:"WAITING_INIT_PTS",WAITING_LEVEL:"WAITING_LEVEL"};class vf extends pM{constructor(e,t,s,i,r){super(),this.hls=void 0,this.fragPrevious=null,this.fragCurrent=null,this.fragmentTracker=void 0,this.transmuxer=null,this._state=re.STOPPED,this.playlistType=void 0,this.media=null,this.mediaBuffer=null,this.config=void 0,this.bitrateTest=!1,this.lastCurrentTime=0,this.nextLoadPosition=0,this.startPosition=0,this.startTimeOffset=null,this.loadedmetadata=!1,this.retryDate=0,this.levels=null,this.fragmentLoader=void 0,this.keyLoader=void 0,this.levelLastLoaded=null,this.startFragRequested=!1,this.decrypter=void 0,this.initPTS=[],this.onvseeking=null,this.onvended=null,this.logPrefix="",this.log=void 0,this.warn=void 0,this.playlistType=r,this.logPrefix=i,this.log=z.log.bind(z,`${i}:`),this.warn=z.warn.bind(z,`${i}:`),this.hls=e,this.fragmentLoader=new bM(e.config),this.keyLoader=s,this.fragmentTracker=t,this.config=e.config,this.decrypter=new yf(e.config),e.on(I.MANIFEST_LOADED,this.onManifestLoaded,this)}doTick(){this.onTickEnd()}onTickEnd(){}startLoad(e){}stopLoad(){this.fragmentLoader.abort(),this.keyLoader.abort(this.playlistType);const e=this.fragCurrent;e!=null&&e.loader&&(e.abortRequests(),this.fragmentTracker.removeFragment(e)),this.resetTransmuxer(),this.fragCurrent=null,this.fragPrevious=null,this.clearInterval(),this.clearNextTick(),this.state=re.STOPPED}_streamEnded(e,t){if(t.live||e.nextStart||!e.end||!this.media)return!1;const s=t.partList;if(s!=null&&s.length){const r=s[s.length-1];return ut.isBuffered(this.media,r.start+r.duration/2)}const i=t.fragments[t.fragments.length-1].type;return this.fragmentTracker.isEndListAppended(i)}getLevelDetails(){if(this.levels&&this.levelLastLoaded!==null){var e;return(e=this.levelLastLoaded)==null?void 0:e.details}}onMediaAttached(e,t){const s=this.media=this.mediaBuffer=t.media;this.onvseeking=this.onMediaSeeking.bind(this),this.onvended=this.onMediaEnded.bind(this),s.addEventListener("seeking",this.onvseeking),s.addEventListener("ended",this.onvended);const i=this.config;this.levels&&i.autoStartLoad&&this.state===re.STOPPED&&this.startLoad(i.startPosition)}onMediaDetaching(){const e=this.media;e!=null&&e.ended&&(this.log("MSE detaching and video ended, reset startPosition"),this.startPosition=this.lastCurrentTime=0),e&&this.onvseeking&&this.onvended&&(e.removeEventListener("seeking",this.onvseeking),e.removeEventListener("ended",this.onvended),this.onvseeking=this.onvended=null),this.keyLoader&&this.keyLoader.detach(),this.media=this.mediaBuffer=null,this.loadedmetadata=!1,this.fragmentTracker.removeAllFragments(),this.stopLoad()}onMediaSeeking(){const{config:e,fragCurrent:t,media:s,mediaBuffer:i,state:r}=this,a=s?s.currentTime:0,o=ut.bufferInfo(i||s,a,e.maxBufferHole);if(this.log(`media seeking to ${Se(a)?a.toFixed(3):a}, state: ${r}`),this.state===re.ENDED)this.resetLoadingState();else if(t){const l=e.maxFragLookUpTolerance,c=t.start-l,u=t.start+t.duration+l;if(!o.len||u<o.start||c>o.end){const d=a>u;(a<c||d)&&(d&&t.loader&&(this.log("seeking outside of buffer while fragment load in progress, cancel fragment load"),t.abortRequests(),this.resetLoadingState()),this.fragPrevious=null)}}s&&(this.fragmentTracker.removeFragmentsInRange(a,1/0,this.playlistType,!0),this.lastCurrentTime=a),!this.loadedmetadata&&!o.len&&(this.nextLoadPosition=this.startPosition=a),this.tickImmediate()}onMediaEnded(){this.startPosition=this.lastCurrentTime=0}onManifestLoaded(e,t){this.startTimeOffset=t.startTimeOffset,this.initPTS=[]}onHandlerDestroying(){this.hls.off(I.MANIFEST_LOADED,this.onManifestLoaded,this),this.stopLoad(),super.onHandlerDestroying(),this.hls=null}onHandlerDestroyed(){this.state=re.STOPPED,this.fragmentLoader&&this.fragmentLoader.destroy(),this.keyLoader&&this.keyLoader.destroy(),this.decrypter&&this.decrypter.destroy(),this.hls=this.log=this.warn=this.decrypter=this.keyLoader=this.fragmentLoader=this.fragmentTracker=null,super.onHandlerDestroyed()}loadFragment(e,t,s){this._loadFragForPlayback(e,t,s)}_loadFragForPlayback(e,t,s){const i=r=>{if(this.fragContextChanged(e)){this.warn(`Fragment ${e.sn}${r.part?" p: "+r.part.index:""} of level ${e.level} was dropped during download.`),this.fragmentTracker.removeFragment(e);return}e.stats.chunkCount++,this._handleFragmentLoadProgress(r)};this._doFragLoad(e,t,s,i).then(r=>{if(!r)return;const a=this.state;if(this.fragContextChanged(e)){(a===re.FRAG_LOADING||!this.fragCurrent&&a===re.PARSING)&&(this.fragmentTracker.removeFragment(e),this.state=re.IDLE);return}"payload"in r&&(this.log(`Loaded fragment ${e.sn} of level ${e.level}`),this.hls.trigger(I.FRAG_LOADED,r)),this._handleFragmentLoadComplete(r)}).catch(r=>{this.state===re.STOPPED||this.state===re.ERROR||(this.warn(r),this.resetFragmentLoading(e))})}clearTrackerIfNeeded(e){var t;const{fragmentTracker:s}=this;if(s.getState(e)===Bt.APPENDING){const r=e.type,a=this.getFwdBufferInfo(this.mediaBuffer,r),o=Math.max(e.duration,a?a.len:this.config.maxBufferLength);this.reduceMaxBufferLength(o)&&s.removeFragment(e)}else((t=this.mediaBuffer)==null?void 0:t.buffered.length)===0?s.removeAllFragments():s.hasParts(e.type)&&(s.detectPartialFragments({frag:e,part:null,stats:e.stats,id:e.type}),s.getState(e)===Bt.PARTIAL&&s.removeFragment(e))}checkLiveUpdate(e){if(e.updated&&!e.live){const t=e.fragments[e.fragments.length-1];this.fragmentTracker.detectPartialFragments({frag:t,part:null,stats:t.stats,id:t.type})}e.fragments[0]||(e.deltaUpdateFailed=!0)}flushMainBuffer(e,t,s=null){if(!(e-t))return;const i={startOffset:e,endOffset:t,type:s};this.hls.trigger(I.BUFFER_FLUSHING,i)}_loadInitSegment(e,t){this._doFragLoad(e,t).then(s=>{if(!s||this.fragContextChanged(e)||!this.levels)throw new Error("init load aborted");return s}).then(s=>{const{hls:i}=this,{payload:r}=s,a=e.decryptdata;if(r&&r.byteLength>0&&a!=null&&a.key&&a.iv&&a.method==="AES-128"){const o=self.performance.now();return this.decrypter.decrypt(new Uint8Array(r),a.key.buffer,a.iv.buffer).catch(l=>{throw i.trigger(I.ERROR,{type:Oe.MEDIA_ERROR,details:te.FRAG_DECRYPT_ERROR,fatal:!1,error:l,reason:l.message,frag:e}),l}).then(l=>{const c=self.performance.now();return i.trigger(I.FRAG_DECRYPTED,{frag:e,payload:l,stats:{tstart:o,tdecrypt:c}}),s.payload=l,this.completeInitSegmentLoad(s)})}return this.completeInitSegmentLoad(s)}).catch(s=>{this.state===re.STOPPED||this.state===re.ERROR||(this.warn(s),this.resetFragmentLoading(e))})}completeInitSegmentLoad(e){const{levels:t}=this;if(!t)throw new Error("init load aborted, missing levels");const s=e.frag.stats;this.state=re.IDLE,e.frag.data=new Uint8Array(e.payload),s.parsing.start=s.buffering.start=self.performance.now(),s.parsing.end=s.buffering.end=self.performance.now(),this.tick()}fragContextChanged(e){const{fragCurrent:t}=this;return!e||!t||e.sn!==t.sn||e.level!==t.level}fragBufferedComplete(e,t){var s,i,r,a;const o=this.mediaBuffer?this.mediaBuffer:this.media;if(this.log(`Buffered ${e.type} sn: ${e.sn}${t?" part: "+t.index:""} of ${this.playlistType===Pe.MAIN?"level":"track"} ${e.level} (frag:[${((s=e.startPTS)!=null?s:NaN).toFixed(3)}-${((i=e.endPTS)!=null?i:NaN).toFixed(3)}] > buffer:${o?wM.toString(ut.getBuffered(o)):"(detached)"})`),e.sn!=="initSegment"){var l;if(e.type!==Pe.SUBTITLE){const u=e.elementaryStreams;if(!Object.keys(u).some(d=>!!u[d])){this.state=re.IDLE;return}}const c=(l=this.levels)==null?void 0:l[e.level];c!=null&&c.fragmentError&&(this.log(`Resetting level fragment error count of ${c.fragmentError} on frag buffered`),c.fragmentError=0)}this.state=re.IDLE,o&&(!this.loadedmetadata&&e.type==Pe.MAIN&&o.buffered.length&&((r=this.fragCurrent)==null?void 0:r.sn)===((a=this.fragPrevious)==null?void 0:a.sn)&&(this.loadedmetadata=!0,this.seekToStartPos()),this.tick())}seekToStartPos(){}_handleFragmentLoadComplete(e){const{transmuxer:t}=this;if(!t)return;const{frag:s,part:i,partsLoaded:r}=e,a=!r||r.length===0||r.some(l=>!l),o=new gf(s.level,s.sn,s.stats.chunkCount+1,0,i?i.index:-1,!a);t.flush(o)}_handleFragmentLoadProgress(e){}_doFragLoad(e,t,s=null,i){var r;const a=t==null?void 0:t.details;if(!this.levels||!a)throw new Error(`frag load aborted, missing level${a?"":" detail"}s`);let o=null;if(e.encrypted&&!((r=e.decryptdata)!=null&&r.key)?(this.log(`Loading key for ${e.sn} of [${a.startSN}-${a.endSN}], ${this.logPrefix==="[stream-controller]"?"level":"track"} ${e.level}`),this.state=re.KEY_LOADING,this.fragCurrent=e,o=this.keyLoader.load(e).then(u=>{if(!this.fragContextChanged(u.frag))return this.hls.trigger(I.KEY_LOADED,u),this.state===re.KEY_LOADING&&(this.state=re.IDLE),u}),this.hls.trigger(I.KEY_LOADING,{frag:e}),this.fragCurrent===null&&(o=Promise.reject(new Error("frag load aborted, context changed in KEY_LOADING")))):!e.encrypted&&a.encryptedFragments.length&&this.keyLoader.loadClear(e,a.encryptedFragments),s=Math.max(e.start,s||0),this.config.lowLatencyMode&&e.sn!=="initSegment"){const u=a.partList;if(u&&i){s>e.end&&a.fragmentHint&&(e=a.fragmentHint);const d=this.getNextPart(u,e,s);if(d>-1){const h=u[d];this.log(`Loading part sn: ${e.sn} p: ${h.index} cc: ${e.cc} of playlist [${a.startSN}-${a.endSN}] parts [0-${d}-${u.length-1}] ${this.logPrefix==="[stream-controller]"?"level":"track"}: ${e.level}, target: ${parseFloat(s.toFixed(3))}`),this.nextLoadPosition=h.start+h.duration,this.state=re.FRAG_LOADING;let f;return o?f=o.then(p=>!p||this.fragContextChanged(p.frag)?null:this.doFragPartsLoad(e,h,t,i)).catch(p=>this.handleFragLoadError(p)):f=this.doFragPartsLoad(e,h,t,i).catch(p=>this.handleFragLoadError(p)),this.hls.trigger(I.FRAG_LOADING,{frag:e,part:h,targetBufferTime:s}),this.fragCurrent===null?Promise.reject(new Error("frag load aborted, context changed in FRAG_LOADING parts")):f}else if(!e.url||this.loadedEndOfParts(u,s))return Promise.resolve(null)}}this.log(`Loading fragment ${e.sn} cc: ${e.cc} ${a?"of ["+a.startSN+"-"+a.endSN+"] ":""}${this.logPrefix==="[stream-controller]"?"level":"track"}: ${e.level}, target: ${parseFloat(s.toFixed(3))}`),Se(e.sn)&&!this.bitrateTest&&(this.nextLoadPosition=e.start+e.duration),this.state=re.FRAG_LOADING;const l=this.config.progressive;let c;return l&&o?c=o.then(u=>!u||this.fragContextChanged(u==null?void 0:u.frag)?null:this.fragmentLoader.load(e,i)).catch(u=>this.handleFragLoadError(u)):c=Promise.all([this.fragmentLoader.load(e,l?i:void 0),o]).then(([u])=>(!l&&u&&i&&i(u),u)).catch(u=>this.handleFragLoadError(u)),this.hls.trigger(I.FRAG_LOADING,{frag:e,targetBufferTime:s}),this.fragCurrent===null?Promise.reject(new Error("frag load aborted, context changed in FRAG_LOADING")):c}doFragPartsLoad(e,t,s,i){return new Promise((r,a)=>{var o;const l=[],c=(o=s.details)==null?void 0:o.partList,u=d=>{this.fragmentLoader.loadPart(e,d,i).then(h=>{l[d.index]=h;const f=h.part;this.hls.trigger(I.FRAG_LOADED,h);const p=Ag(s,e.sn,d.index+1)||kE(c,e.sn,d.index+1);if(p)u(p);else return r({frag:e,part:f,partsLoaded:l})}).catch(a)};u(t)})}handleFragLoadError(e){if("data"in e){const t=e.data;e.data&&t.details===te.INTERNAL_ABORTED?this.handleFragLoadAborted(t.frag,t.part):this.hls.trigger(I.ERROR,t)}else this.hls.trigger(I.ERROR,{type:Oe.OTHER_ERROR,details:te.INTERNAL_EXCEPTION,err:e,error:e,fatal:!0});return null}_handleTransmuxerFlush(e){const t=this.getCurrentContext(e);if(!t||this.state!==re.PARSING){!this.fragCurrent&&this.state!==re.STOPPED&&this.state!==re.ERROR&&(this.state=re.IDLE);return}const{frag:s,part:i,level:r}=t,a=self.performance.now();s.stats.parsing.end=a,i&&(i.stats.parsing.end=a),this.updateLevelTiming(s,i,r,e.partial)}getCurrentContext(e){const{levels:t,fragCurrent:s}=this,{level:i,sn:r,part:a}=e;if(!(t!=null&&t[i]))return this.warn(`Levels object was unset while buffering fragment ${r} of level ${i}. The current chunk will not be buffered.`),null;const o=t[i],l=a>-1?Ag(o,r,a):null,c=l?l.fragment:XO(o,r,s);return c?(s&&s!==c&&(c.stats=s.stats),{frag:c,part:l,level:o}):null}bufferFragmentData(e,t,s,i,r){var a;if(!e||this.state!==re.PARSING)return;const{data1:o,data2:l}=e;let c=o;if(o&&l&&(c=Bs(o,l)),!((a=c)!=null&&a.length))return;const u={type:e.type,frag:t,part:s,chunkMeta:i,parent:t.type,data:c};if(this.hls.trigger(I.BUFFER_APPENDING,u),e.dropped&&e.independent&&!s){if(r)return;this.flushBufferGap(t)}}flushBufferGap(e){const t=this.media;if(!t)return;if(!ut.isBuffered(t,t.currentTime)){this.flushMainBuffer(0,e.start);return}const s=t.currentTime,i=ut.bufferInfo(t,s,0),r=e.duration,a=Math.min(this.config.maxFragLookUpTolerance*2,r*.25),o=Math.max(Math.min(e.start-a,i.end-a),s+a);e.start-o>a&&this.flushMainBuffer(o,e.start)}getFwdBufferInfo(e,t){const s=this.getLoadPosition();return Se(s)?this.getFwdBufferInfoAtPos(e,s,t):null}getFwdBufferInfoAtPos(e,t,s){const{config:{maxBufferHole:i}}=this,r=ut.bufferInfo(e,t,i);if(r.len===0&&r.nextStart!==void 0){const a=this.fragmentTracker.getBufferedFrag(t,s);if(a&&r.nextStart<a.end)return ut.bufferInfo(e,t,Math.max(r.nextStart,i))}return r}getMaxBufferLength(e){const{config:t}=this;let s;return e?s=Math.max(8*t.maxBufferSize/e,t.maxBufferLength):s=t.maxBufferLength,Math.min(s,t.maxMaxBufferLength)}reduceMaxBufferLength(e){const t=this.config,s=e||t.maxBufferLength;return t.maxMaxBufferLength>=s?(t.maxMaxBufferLength/=2,this.warn(`Reduce max buffer length to ${t.maxMaxBufferLength}s`),!0):!1}getAppendedFrag(e,t=Pe.MAIN){const s=this.fragmentTracker.getAppendedFrag(e,Pe.MAIN);return s&&"fragment"in s?s.fragment:s}getNextFragment(e,t){const s=t.fragments,i=s.length;if(!i)return null;const{config:r}=this,a=s[0].start;let o;if(t.live){const l=r.initialLiveManifestSize;if(i<l)return this.warn(`Not enough fragments to start playback (have: ${i}, need: ${l})`),null;(!t.PTSKnown&&!this.startFragRequested&&this.startPosition===-1||e<a)&&(o=this.getInitialLiveFragment(t,s),this.startPosition=this.nextLoadPosition=o?this.hls.liveSyncPosition||o.start:e)}else e<=a&&(o=s[0]);if(!o){const l=r.lowLatencyMode?t.partEnd:t.fragmentEnd;o=this.getFragmentAtPosition(e,l,t)}return this.mapToInitFragWhenRequired(o)}isLoopLoading(e,t){const s=this.fragmentTracker.getState(e);return(s===Bt.OK||s===Bt.PARTIAL&&!!e.gap)&&this.nextLoadPosition>t}getNextFragmentLoopLoading(e,t,s,i,r){const a=e.gap,o=this.getNextFragment(this.nextLoadPosition,t);if(o===null)return o;if(e=o,a&&e&&!e.gap&&s.nextStart){const l=this.getFwdBufferInfoAtPos(this.mediaBuffer?this.mediaBuffer:this.media,s.nextStart,i);if(l!==null&&s.len+l.len>=r)return this.log(`buffer full after gaps in "${i}" playlist starting at sn: ${e.sn}`),null}return e}mapToInitFragWhenRequired(e){return e!=null&&e.initSegment&&!(e!=null&&e.initSegment.data)&&!this.bitrateTest?e.initSegment:e}getNextPart(e,t,s){let i=-1,r=!1,a=!0;for(let o=0,l=e.length;o<l;o++){const c=e[o];if(a=a&&!c.independent,i>-1&&s<c.start)break;const u=c.loaded;u?i=-1:(r||c.independent||a)&&c.fragment===t&&(i=o),r=u}return i}loadedEndOfParts(e,t){const s=e[e.length-1];return s&&t>s.start&&s.loaded}getInitialLiveFragment(e,t){const s=this.fragPrevious;let i=null;if(s){if(e.hasProgramDateTime&&(this.log(`Live playlist, switching playlist, load frag with same PDT: ${s.programDateTime}`),i=JO(t,s.endProgramDateTime,this.config.maxFragLookUpTolerance)),!i){const r=s.sn+1;if(r>=e.startSN&&r<=e.endSN){const a=t[r-e.startSN];s.cc===a.cc&&(i=a,this.log(`Live playlist, switching playlist, load frag with next SN: ${i.sn}`))}i||(i=eM(t,s.cc),i&&this.log(`Live playlist, switching playlist, load frag with same CC: ${i.sn}`))}}else{const r=this.hls.liveSyncPosition;r!==null&&(i=this.getFragmentAtPosition(r,this.bitrateTest?e.fragmentEnd:e.edge,e))}return i}getFragmentAtPosition(e,t,s){const{config:i}=this;let{fragPrevious:r}=this,{fragments:a,endSN:o}=s;const{fragmentHint:l}=s,c=i.maxFragLookUpTolerance,u=s.partList,d=!!(i.lowLatencyMode&&u!=null&&u.length&&l);d&&l&&!this.bitrateTest&&(a=a.concat(l),o=l.sn);let h;if(e<t){const f=e>t-c?0:c;h=Dl(r,a,e,f)}else h=a[a.length-1];if(h){const f=h.sn-s.startSN,p=this.fragmentTracker.getState(h);if((p===Bt.OK||p===Bt.PARTIAL&&h.gap)&&(r=h),r&&h.sn===r.sn&&(!d||u[0].fragment.sn>h.sn)&&r&&h.level===r.level){const y=a[f+1];h.sn<o&&this.fragmentTracker.getState(y)!==Bt.OK?h=y:h=null}}return h}synchronizeToLiveEdge(e){const{config:t,media:s}=this;if(!s)return;const i=this.hls.liveSyncPosition,r=s.currentTime,a=e.fragments[0].start,o=e.edge,l=r>=a-t.maxFragLookUpTolerance&&r<=o;if(i!==null&&s.duration>i&&(r<i||!l)){const c=t.liveMaxLatencyDuration!==void 0?t.liveMaxLatencyDuration:t.liveMaxLatencyDurationCount*e.targetduration;(!l&&s.readyState<4||r<o-c)&&(this.loadedmetadata||(this.nextLoadPosition=i),s.readyState&&(this.warn(`Playback: ${r.toFixed(3)} is located too far from the end of live sliding playlist: ${o}, reset currentTime to : ${i.toFixed(3)}`),s.currentTime=i))}}alignPlaylists(e,t,s){const i=e.fragments.length;if(!i)return this.warn("No fragments in live playlist"),0;const r=e.fragments[0].start,a=!t,o=e.alignedSliding&&Se(r);if(a||!o&&!r){const{fragPrevious:l}=this;EM(l,s,e);const c=e.fragments[0].start;return this.log(`Live playlist sliding: ${c.toFixed(2)} start-sn: ${t?t.startSN:"na"}->${e.startSN} prev-sn: ${l?l.sn:"na"} fragments: ${i}`),c}return r}waitForCdnTuneIn(e){return e.live&&e.canBlockReload&&e.partTarget&&e.tuneInGoal>Math.max(e.partHoldBack,e.partTarget*3)}setStartPosition(e,t){let s=this.startPosition;if(s<t&&(s=-1),s===-1||this.lastCurrentTime===-1){const i=this.startTimeOffset!==null,r=i?this.startTimeOffset:e.startTimeOffset;r!==null&&Se(r)?(s=t+r,r<0&&(s+=e.totalduration),s=Math.min(Math.max(t,s),t+e.totalduration),this.log(`Start time offset ${r} found in ${i?"multivariant":"media"} playlist, adjust startPosition to ${s}`),this.startPosition=s):e.live?s=this.hls.liveSyncPosition||t:this.startPosition=s=0,this.lastCurrentTime=s}this.nextLoadPosition=s}getLoadPosition(){const{media:e}=this;let t=0;return this.loadedmetadata&&e?t=e.currentTime:this.nextLoadPosition&&(t=this.nextLoadPosition),t}handleFragLoadAborted(e,t){this.transmuxer&&e.sn!=="initSegment"&&e.stats.aborted&&(this.warn(`Fragment ${e.sn}${t?" part "+t.index:""} of level ${e.level} was aborted`),this.resetFragmentLoading(e))}resetFragmentLoading(e){(!this.fragCurrent||!this.fragContextChanged(e)&&this.state!==re.FRAG_LOADING_WAITING_RETRY)&&(this.state=re.IDLE)}onFragmentOrKeyLoadError(e,t){if(t.chunkMeta&&!t.frag){const u=this.getCurrentContext(t.chunkMeta);u&&(t.frag=u.frag)}const s=t.frag;if(!s||s.type!==e||!this.levels)return;if(this.fragContextChanged(s)){var i;this.warn(`Frag load error must match current frag to retry ${s.url} > ${(i=this.fragCurrent)==null?void 0:i.url}`);return}const r=t.details===te.FRAG_GAP;r&&this.fragmentTracker.fragBuffered(s,!0);const a=t.errorAction,{action:o,retryCount:l=0,retryConfig:c}=a||{};if(a&&o===Wt.RetryRequest&&c){this.resetStartWhenNotLoaded(this.levelLastLoaded);const u=pf(c,l);this.warn(`Fragment ${s.sn} of ${e} ${s.level} errored with ${t.details}, retrying loading ${l+1}/${c.maxNumRetry} in ${u}ms`),a.resolved=!0,this.retryDate=self.performance.now()+u,this.state=re.FRAG_LOADING_WAITING_RETRY}else if(c&&a)if(this.resetFragmentErrors(e),l<c.maxNumRetry)!r&&o!==Wt.RemoveAlternatePermanently&&(a.resolved=!0);else{z.warn(`${t.details} reached or exceeded max retry (${l})`);return}else(a==null?void 0:a.action)===Wt.SendAlternateToPenaltyBox?this.state=re.WAITING_LEVEL:this.state=re.ERROR;this.tickImmediate()}reduceLengthAndFlushBuffer(e){if(this.state===re.PARSING||this.state===re.PARSED){const t=e.parent,s=this.getFwdBufferInfo(this.mediaBuffer,t),i=s&&s.len>.5;i&&this.reduceMaxBufferLength(s.len);const r=!i;return r&&this.warn(`Buffer full error while media.currentTime is not buffered, flush ${t} buffer`),e.frag&&(this.fragmentTracker.removeFragment(e.frag),this.nextLoadPosition=e.frag.start),this.resetLoadingState(),r}return!1}resetFragmentErrors(e){e===Pe.AUDIO&&(this.fragCurrent=null),this.loadedmetadata||(this.startFragRequested=!1),this.state!==re.STOPPED&&(this.state=re.IDLE)}afterBufferFlushed(e,t,s){if(!e)return;const i=ut.getBuffered(e);this.fragmentTracker.detectEvictedFragments(t,i,s),this.state===re.ENDED&&this.resetLoadingState()}resetLoadingState(){this.log("Reset loading state"),this.fragCurrent=null,this.fragPrevious=null,this.state=re.IDLE}resetStartWhenNotLoaded(e){if(!this.loadedmetadata){this.startFragRequested=!1;const t=e?e.details:null;t!=null&&t.live?(this.startPosition=-1,this.setStartPosition(t,0),this.resetLoadingState()):this.nextLoadPosition=this.startPosition}}resetWhenMissingContext(e){this.warn(`The loading context changed while buffering fragment ${e.sn} of level ${e.level}. This chunk will not be buffered.`),this.removeUnbufferedFrags(),this.resetStartWhenNotLoaded(this.levelLastLoaded),this.resetLoadingState()}removeUnbufferedFrags(e=0){this.fragmentTracker.removeFragmentsInRange(e,1/0,this.playlistType,!1,!0)}updateLevelTiming(e,t,s,i){var r;const a=s.details;if(!a){this.warn("level.details undefined");return}if(!Object.keys(e.elementaryStreams).reduce((l,c)=>{const u=e.elementaryStreams[c];if(u){const d=u.endPTS-u.startPTS;if(d<=0)return this.warn(`Could not parse fragment ${e.sn} ${c} duration reliably (${d})`),l||!1;const h=i?0:CE(a,e,u.startPTS,u.endPTS,u.startDTS,u.endDTS);return this.hls.trigger(I.LEVEL_PTS_UPDATED,{details:a,level:s,drift:h,type:c,frag:e,start:u.startPTS,end:u.endPTS}),!0}return l},!1)&&((r=this.transmuxer)==null?void 0:r.error)===null){const l=new Error(`Found no media in fragment ${e.sn} of level ${e.level} resetting transmuxer to fallback to playlist timing`);if(s.fragmentError===0&&(s.fragmentError++,e.gap=!0,this.fragmentTracker.removeFragment(e),this.fragmentTracker.fragBuffered(e,!0)),this.warn(l.message),this.hls.trigger(I.ERROR,{type:Oe.MEDIA_ERROR,details:te.FRAG_PARSING_ERROR,fatal:!1,error:l,frag:e,reason:`Found no media in msn ${e.sn} of level "${s.url}"`}),!this.hls)return;this.resetTransmuxer()}this.state=re.PARSED,this.hls.trigger(I.FRAG_PARSED,{frag:e,part:t})}resetTransmuxer(){this.transmuxer&&(this.transmuxer.destroy(),this.transmuxer=null)}recoverWorkerError(e){e.event==="demuxerWorker"&&(this.fragmentTracker.removeAllFragments(),this.resetTransmuxer(),this.resetStartWhenNotLoaded(this.levelLastLoaded),this.resetLoadingState())}set state(e){const t=this._state;t!==e&&(this._state=e,this.log(`${t}->${e}`))}get state(){return this._state}}class NE{constructor(){this.chunks=[],this.dataLength=0}push(e){this.chunks.push(e),this.dataLength+=e.length}flush(){const{chunks:e,dataLength:t}=this;let s;if(e.length)e.length===1?s=e[0]:s=RM(e,t);else return new Uint8Array(0);return this.reset(),s}reset(){this.chunks.length=0,this.dataLength=0}}function RM(n,e){const t=new Uint8Array(e);let s=0;for(let i=0;i<n.length;i++){const r=n[i];t.set(r,s),s+=r.length}return t}function IM(){return typeof __HLS_WORKER_BUNDLE__=="function"}function CM(){const n=new self.Blob([`var exports={};var module={exports:exports};function define(f){f()};define.amd=true;(${__HLS_WORKER_BUNDLE__.toString()})(true);`],{type:"text/javascript"}),e=self.URL.createObjectURL(n);return{worker:new self.Worker(e),objectURL:e}}function DM(n){const e=new self.URL(n,self.location.href).href;return{worker:new self.Worker(e),scriptURL:e}}function cn(n="",e=9e4){return{type:n,id:-1,pid:-1,inputTimeScale:e,sequenceNumber:-1,samples:[],dropped:0}}class Ef{constructor(){this._audioTrack=void 0,this._id3Track=void 0,this.frameIndex=0,this.cachedData=null,this.basePTS=null,this.initPTS=null,this.lastPTS=null}resetInitSegment(e,t,s,i){this._id3Track={type:"id3",id:3,pid:-1,inputTimeScale:9e4,sequenceNumber:0,samples:[],dropped:0}}resetTimeStamp(e){this.initPTS=e,this.resetContiguity()}resetContiguity(){this.basePTS=null,this.lastPTS=null,this.frameIndex=0}canParse(e,t){return!1}appendFrame(e,t,s){}demux(e,t){this.cachedData&&(e=Bs(this.cachedData,e),this.cachedData=null);let s=Wa(e,0),i=s?s.length:0,r;const a=this._audioTrack,o=this._id3Track,l=s?ff(s):void 0,c=e.length;for((this.basePTS===null||this.frameIndex===0&&Se(l))&&(this.basePTS=kM(l,t,this.initPTS),this.lastPTS=this.basePTS),this.lastPTS===null&&(this.lastPTS=this.basePTS),s&&s.length>0&&o.samples.push({pts:this.lastPTS,dts:this.lastPTS,data:s,type:Gs.audioId3,duration:Number.POSITIVE_INFINITY});i<c;){if(this.canParse(e,i)){const u=this.appendFrame(a,e,i);u?(this.frameIndex++,this.lastPTS=u.sample.pts,i+=u.length,r=i):i=c}else tO(e,i)?(s=Wa(e,i),o.samples.push({pts:this.lastPTS,dts:this.lastPTS,data:s,type:Gs.audioId3,duration:Number.POSITIVE_INFINITY}),i+=s.length,r=i):i++;if(i===c&&r!==c){const u=Hi(e,r);this.cachedData?this.cachedData=Bs(this.cachedData,u):this.cachedData=u}}return{audioTrack:a,videoTrack:cn(),id3Track:o,textTrack:cn()}}demuxSampleAes(e,t,s){return Promise.reject(new Error(`[${this}] This demuxer does not support Sample-AES decryption`))}flush(e){const t=this.cachedData;return t&&(this.cachedData=null,this.demux(t,0)),{audioTrack:this._audioTrack,videoTrack:cn(),id3Track:this._id3Track,textTrack:cn()}}destroy(){}}const kM=(n,e,t)=>{if(Se(n))return n*90;const s=t?t.baseTime*9e4/t.timescale:0;return e*9e4+s};function PM(n,e,t,s){let i,r,a,o;const l=navigator.userAgent.toLowerCase(),c=s,u=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350];i=((e[t+2]&192)>>>6)+1;const d=(e[t+2]&60)>>>2;if(d>u.length-1){const h=new Error(`invalid ADTS sampling index:${d}`);n.emit(I.ERROR,I.ERROR,{type:Oe.MEDIA_ERROR,details:te.FRAG_PARSING_ERROR,fatal:!0,error:h,reason:h.message});return}return a=(e[t+2]&1)<<2,a|=(e[t+3]&192)>>>6,z.log(`manifest codec:${s}, ADTS type:${i}, samplingIndex:${d}`),/firefox/i.test(l)?d>=6?(i=5,o=new Array(4),r=d-3):(i=2,o=new Array(2),r=d):l.indexOf("android")!==-1?(i=2,o=new Array(2),r=d):(i=5,o=new Array(4),s&&(s.indexOf("mp4a.40.29")!==-1||s.indexOf("mp4a.40.5")!==-1)||!s&&d>=6?r=d-3:((s&&s.indexOf("mp4a.40.2")!==-1&&(d>=6&&a===1||/vivaldi/i.test(l))||!s&&a===1)&&(i=2,o=new Array(2)),r=d)),o[0]=i<<3,o[0]|=(d&14)>>1,o[1]|=(d&1)<<7,o[1]|=a<<3,i===5&&(o[1]|=(r&14)>>1,o[2]=(r&1)<<7,o[2]|=8,o[3]=0),{config:o,samplerate:u[d],channelCount:a,codec:"mp4a.40."+i,manifestCodec:c}}function BE(n,e){return n[e]===255&&(n[e+1]&246)===240}function UE(n,e){return n[e+1]&1?7:9}function Tf(n,e){return(n[e+3]&3)<<11|n[e+4]<<3|(n[e+5]&224)>>>5}function OM(n,e){return e+5<n.length}function Pl(n,e){return e+1<n.length&&BE(n,e)}function MM(n,e){return OM(n,e)&&BE(n,e)&&Tf(n,e)<=n.length-e}function FM(n,e){if(Pl(n,e)){const t=UE(n,e);if(e+t>=n.length)return!1;const s=Tf(n,e);if(s<=t)return!1;const i=e+s;return i===n.length||Pl(n,i)}return!1}function $E(n,e,t,s,i){if(!n.samplerate){const r=PM(e,t,s,i);if(!r)return;n.config=r.config,n.samplerate=r.samplerate,n.channelCount=r.channelCount,n.codec=r.codec,n.manifestCodec=r.manifestCodec,z.log(`parsed codec:${n.codec}, rate:${r.samplerate}, channels:${r.channelCount}`)}}function jE(n){return 1024*9e4/n}function NM(n,e){const t=UE(n,e);if(e+t<=n.length){const s=Tf(n,e)-t;if(s>0)return{headerLength:t,frameLength:s}}}function GE(n,e,t,s,i){const r=jE(n.samplerate),a=s+i*r,o=NM(e,t);let l;if(o){const{frameLength:d,headerLength:h}=o,f=h+d,p=Math.max(0,t+f-e.length);p?(l=new Uint8Array(f-h),l.set(e.subarray(t+h,e.length),0)):l=e.subarray(t+h,t+f);const m={unit:l,pts:a};return p||n.samples.push(m),{sample:m,length:f,missing:p}}const c=e.length-t;return l=new Uint8Array(c),l.set(e.subarray(t,e.length),0),{sample:{unit:l,pts:a},length:c,missing:-1}}let Co=null;const BM=[32,64,96,128,160,192,224,256,288,320,352,384,416,448,32,48,56,64,80,96,112,128,160,192,224,256,320,384,32,40,48,56,64,80,96,112,128,160,192,224,256,320,32,48,56,64,80,96,112,128,144,160,176,192,224,256,8,16,24,32,40,48,56,64,80,96,112,128,144,160],UM=[44100,48e3,32e3,22050,24e3,16e3,11025,12e3,8e3],$M=[[0,72,144,12],[0,0,0,0],[0,72,144,12],[0,144,144,12]],jM=[0,1,1,4];function VE(n,e,t,s,i){if(t+24>e.length)return;const r=HE(e,t);if(r&&t+r.frameLength<=e.length){const a=r.samplesPerFrame*9e4/r.sampleRate,o=s+i*a,l={unit:e.subarray(t,t+r.frameLength),pts:o,dts:o};return n.config=[],n.channelCount=r.channelCount,n.samplerate=r.sampleRate,n.samples.push(l),{sample:l,length:r.frameLength,missing:0}}}function HE(n,e){const t=n[e+1]>>3&3,s=n[e+1]>>1&3,i=n[e+2]>>4&15,r=n[e+2]>>2&3;if(t!==1&&i!==0&&i!==15&&r!==3){const a=n[e+2]>>1&1,o=n[e+3]>>6,l=t===3?3-s:s===3?3:4,c=BM[l*14+i-1]*1e3,d=UM[(t===3?0:t===2?1:2)*3+r],h=o===3?1:2,f=$M[t][s],p=jM[s],m=f*8*p,y=Math.floor(f*c/d+a)*p;if(Co===null){const E=(navigator.userAgent||"").match(/Chrome\/(\d+)/i);Co=E?parseInt(E[1]):0}return!!Co&&Co<=87&&s===2&&c>=224e3&&o===0&&(n[e+3]=n[e+3]|128),{sampleRate:d,channelCount:h,frameLength:y,samplesPerFrame:m}}}function bf(n,e){return n[e]===255&&(n[e+1]&224)===224&&(n[e+1]&6)!==0}function KE(n,e){return e+1<n.length&&bf(n,e)}function GM(n,e){return bf(n,e)&&4<=n.length-e}function WE(n,e){if(e+1<n.length&&bf(n,e)){const s=HE(n,e);let i=4;s!=null&&s.frameLength&&(i=s.frameLength);const r=e+i;return r===n.length||KE(n,r)}return!1}class VM extends Ef{constructor(e,t){super(),this.observer=void 0,this.config=void 0,this.observer=e,this.config=t}resetInitSegment(e,t,s,i){super.resetInitSegment(e,t,s,i),this._audioTrack={container:"audio/adts",type:"audio",id:2,pid:-1,sequenceNumber:0,segmentCodec:"aac",samples:[],manifestCodec:t,duration:i,inputTimeScale:9e4,dropped:0}}static probe(e){if(!e)return!1;const t=Wa(e,0);let s=(t==null?void 0:t.length)||0;if(WE(e,s))return!1;for(let i=e.length;s<i;s++)if(FM(e,s))return z.log("ADTS sync word found !"),!0;return!1}canParse(e,t){return MM(e,t)}appendFrame(e,t,s){$E(e,this.observer,t,s,e.manifestCodec);const i=GE(e,t,s,this.basePTS,this.frameIndex);if(i&&i.missing===0)return i}}const HM=/\/emsg[-/]ID3/i;class KM{constructor(e,t){this.remainderData=null,this.timeOffset=0,this.config=void 0,this.videoTrack=void 0,this.audioTrack=void 0,this.id3Track=void 0,this.txtTrack=void 0,this.config=t}resetTimeStamp(){}resetInitSegment(e,t,s,i){const r=this.videoTrack=cn("video",1),a=this.audioTrack=cn("audio",1),o=this.txtTrack=cn("text",1);if(this.id3Track=cn("id3",1),this.timeOffset=0,!(e!=null&&e.byteLength))return;const l=xE(e);if(l.video){const{id:c,timescale:u,codec:d}=l.video;r.id=c,r.timescale=o.timescale=u,r.codec=d}if(l.audio){const{id:c,timescale:u,codec:d}=l.audio;a.id=c,a.timescale=u,a.codec=d}o.id=EE.text,r.sampleDuration=0,r.duration=a.duration=i}resetContiguity(){this.remainderData=null}static probe(e){return uO(e)}demux(e,t){this.timeOffset=t;let s=e;const i=this.videoTrack,r=this.txtTrack;if(this.config.progressive){this.remainderData&&(s=Bs(this.remainderData,e));const o=vO(s);this.remainderData=o.remainder,i.samples=o.valid||new Uint8Array}else i.samples=s;const a=this.extractID3Track(i,t);return r.samples=og(t,i),{videoTrack:i,audioTrack:this.audioTrack,id3Track:a,textTrack:this.txtTrack}}flush(){const e=this.timeOffset,t=this.videoTrack,s=this.txtTrack;t.samples=this.remainderData||new Uint8Array,this.remainderData=null;const i=this.extractID3Track(t,this.timeOffset);return s.samples=og(e,t),{videoTrack:t,audioTrack:cn(),id3Track:i,textTrack:cn()}}extractID3Track(e,t){const s=this.id3Track;if(e.samples.length){const i=Ge(e.samples,["emsg"]);i&&i.forEach(r=>{const a=bO(r);if(HM.test(a.schemeIdUri)){const o=Se(a.presentationTime)?a.presentationTime/a.timeScale:t+a.presentationTimeDelta/a.timeScale;let l=a.eventDuration===4294967295?Number.POSITIVE_INFINITY:a.eventDuration/a.timeScale;l<=.001&&(l=Number.POSITIVE_INFINITY);const c=a.payload;s.samples.push({data:c,len:c.byteLength,dts:o,pts:o,type:Gs.emsg,duration:l})}})}return s}demuxSampleAes(e,t,s){return Promise.reject(new Error("The MP4 demuxer does not support SAMPLE-AES decryption"))}destroy(){}}const zE=(n,e)=>{let t=0,s=5;e+=s;const i=new Uint32Array(1),r=new Uint32Array(1),a=new Uint8Array(1);for(;s>0;){a[0]=n[e];const o=Math.min(s,8),l=8-o;r[0]=4278190080>>>24+l<<l,i[0]=(a[0]&r[0])>>l,t=t?t<<o|i[0]:i[0],e+=1,s-=o}return t};class WM extends Ef{constructor(e){super(),this.observer=void 0,this.observer=e}resetInitSegment(e,t,s,i){super.resetInitSegment(e,t,s,i),this._audioTrack={container:"audio/ac-3",type:"audio",id:2,pid:-1,sequenceNumber:0,segmentCodec:"ac3",samples:[],manifestCodec:t,duration:i,inputTimeScale:9e4,dropped:0}}canParse(e,t){return t+64<e.length}appendFrame(e,t,s){const i=YE(e,t,s,this.basePTS,this.frameIndex);if(i!==-1)return{sample:e.samples[e.samples.length-1],length:i,missing:0}}static probe(e){if(!e)return!1;const t=Wa(e,0);if(!t)return!1;const s=t.length;return e[s]===11&&e[s+1]===119&&ff(t)!==void 0&&zE(e,s)<16}}function YE(n,e,t,s,i){if(t+8>e.length||e[t]!==11||e[t+1]!==119)return-1;const r=e[t+4]>>6;if(r>=3)return-1;const o=[48e3,44100,32e3][r],l=e[t+4]&63,u=[64,69,96,64,70,96,80,87,120,80,88,120,96,104,144,96,105,144,112,121,168,112,122,168,128,139,192,128,140,192,160,174,240,160,175,240,192,208,288,192,209,288,224,243,336,224,244,336,256,278,384,256,279,384,320,348,480,320,349,480,384,417,576,384,418,576,448,487,672,448,488,672,512,557,768,512,558,768,640,696,960,640,697,960,768,835,1152,768,836,1152,896,975,1344,896,976,1344,1024,1114,1536,1024,1115,1536,1152,1253,1728,1152,1254,1728,1280,1393,1920,1280,1394,1920][l*3+r]*2;if(t+u>e.length)return-1;const d=e[t+6]>>5;let h=0;d===2?h+=2:(d&1&&d!==1&&(h+=2),d&4&&(h+=2));const f=(e[t+6]<<8|e[t+7])>>12-h&1,m=[2,1,2,3,3,4,4,5][d]+f,y=e[t+5]>>3,g=e[t+5]&7,v=new Uint8Array([r<<6|y<<1|g>>2,(g&3)<<6|d<<3|f<<2|l>>4,l<<4&224]),E=1536/o*9e4,T=s+i*E,b=e.subarray(t,t+u);return n.config=v,n.channelCount=m,n.samplerate=o,n.samples.push({unit:b,pts:T}),u}class zM{constructor(){this.VideoSample=null}createVideoSample(e,t,s,i){return{key:e,frame:!1,pts:t,dts:s,units:[],debug:i,length:0}}getLastNalUnit(e){var t;let s=this.VideoSample,i;if((!s||s.units.length===0)&&(s=e[e.length-1]),(t=s)!=null&&t.units){const r=s.units;i=r[r.length-1]}return i}pushAccessUnit(e,t){if(e.units.length&&e.frame){if(e.pts===void 0){const s=t.samples,i=s.length;if(i){const r=s[i-1];e.pts=r.pts,e.dts=r.dts}else{t.dropped++;return}}t.samples.push(e)}e.debug.length&&z.log(e.pts+"/"+e.dts+":"+e.debug)}}class Og{constructor(e){this.data=void 0,this.bytesAvailable=void 0,this.word=void 0,this.bitsAvailable=void 0,this.data=e,this.bytesAvailable=e.byteLength,this.word=0,this.bitsAvailable=0}loadWord(){const e=this.data,t=this.bytesAvailable,s=e.byteLength-t,i=new Uint8Array(4),r=Math.min(4,t);if(r===0)throw new Error("no bytes available");i.set(e.subarray(s,s+r)),this.word=new DataView(i.buffer).getUint32(0),this.bitsAvailable=r*8,this.bytesAvailable-=r}skipBits(e){let t;e=Math.min(e,this.bytesAvailable*8+this.bitsAvailable),this.bitsAvailable>e?(this.word<<=e,this.bitsAvailable-=e):(e-=this.bitsAvailable,t=e>>3,e-=t<<3,this.bytesAvailable-=t,this.loadWord(),this.word<<=e,this.bitsAvailable-=e)}readBits(e){let t=Math.min(this.bitsAvailable,e);const s=this.word>>>32-t;if(e>32&&z.error("Cannot read more than 32 bits at a time"),this.bitsAvailable-=t,this.bitsAvailable>0)this.word<<=t;else if(this.bytesAvailable>0)this.loadWord();else throw new Error("no bits available");return t=e-t,t>0&&this.bitsAvailable?s<<t|this.readBits(t):s}skipLZ(){let e;for(e=0;e<this.bitsAvailable;++e)if(this.word&2147483648>>>e)return this.word<<=e,this.bitsAvailable-=e,e;return this.loadWord(),e+this.skipLZ()}skipUEG(){this.skipBits(1+this.skipLZ())}skipEG(){this.skipBits(1+this.skipLZ())}readUEG(){const e=this.skipLZ();return this.readBits(e+1)-1}readEG(){const e=this.readUEG();return 1&e?1+e>>>1:-1*(e>>>1)}readBoolean(){return this.readBits(1)===1}readUByte(){return this.readBits(8)}readUShort(){return this.readBits(16)}readUInt(){return this.readBits(32)}skipScalingList(e){let t=8,s=8,i;for(let r=0;r<e;r++)s!==0&&(i=this.readEG(),s=(t+i+256)%256),t=s===0?t:s}readSPS(){let e=0,t=0,s=0,i=0,r,a,o;const l=this.readUByte.bind(this),c=this.readBits.bind(this),u=this.readUEG.bind(this),d=this.readBoolean.bind(this),h=this.skipBits.bind(this),f=this.skipEG.bind(this),p=this.skipUEG.bind(this),m=this.skipScalingList.bind(this);l();const y=l();if(c(5),h(3),l(),p(),y===100||y===110||y===122||y===244||y===44||y===83||y===86||y===118||y===128){const L=u();if(L===3&&h(1),p(),p(),h(1),d())for(a=L!==3?8:12,o=0;o<a;o++)d()&&(o<6?m(16):m(64))}p();const g=u();if(g===0)u();else if(g===1)for(h(1),f(),f(),r=u(),o=0;o<r;o++)f();p(),h(1);const v=u(),E=u(),T=c(1);T===0&&h(1),h(1),d()&&(e=u(),t=u(),s=u(),i=u());let b=[1,1];if(d()&&d())switch(l()){case 1:b=[1,1];break;case 2:b=[12,11];break;case 3:b=[10,11];break;case 4:b=[16,11];break;case 5:b=[40,33];break;case 6:b=[24,11];break;case 7:b=[20,11];break;case 8:b=[32,11];break;case 9:b=[80,33];break;case 10:b=[18,11];break;case 11:b=[15,11];break;case 12:b=[64,33];break;case 13:b=[160,99];break;case 14:b=[4,3];break;case 15:b=[3,2];break;case 16:b=[2,1];break;case 255:{b=[l()<<8|l(),l()<<8|l()];break}}return{width:Math.ceil((v+1)*16-e*2-t*2),height:(2-T)*(E+1)*16-(T?2:4)*(s+i),pixelRatio:b}}readSliceType(){return this.readUByte(),this.readUEG(),this.readUEG()}}class YM extends zM{parseAVCPES(e,t,s,i,r){const a=this.parseAVCNALu(e,s.data);let o=this.VideoSample,l,c=!1;s.data=null,o&&a.length&&!e.audFound&&(this.pushAccessUnit(o,e),o=this.VideoSample=this.createVideoSample(!1,s.pts,s.dts,"")),a.forEach(u=>{var d;switch(u.type){case 1:{let m=!1;l=!0;const y=u.data;if(c&&y.length>4){const g=new Og(y).readSliceType();(g===2||g===4||g===7||g===9)&&(m=!0)}if(m){var h;(h=o)!=null&&h.frame&&!o.key&&(this.pushAccessUnit(o,e),o=this.VideoSample=null)}o||(o=this.VideoSample=this.createVideoSample(!0,s.pts,s.dts,"")),o.frame=!0,o.key=m;break}case 5:l=!0,(d=o)!=null&&d.frame&&!o.key&&(this.pushAccessUnit(o,e),o=this.VideoSample=null),o||(o=this.VideoSample=this.createVideoSample(!0,s.pts,s.dts,"")),o.key=!0,o.frame=!0;break;case 6:{l=!0,_E(u.data,1,s.pts,t.samples);break}case 7:{var f,p;l=!0,c=!0;const m=u.data,g=new Og(m).readSPS();if(!e.sps||e.width!==g.width||e.height!==g.height||((f=e.pixelRatio)==null?void 0:f[0])!==g.pixelRatio[0]||((p=e.pixelRatio)==null?void 0:p[1])!==g.pixelRatio[1]){e.width=g.width,e.height=g.height,e.pixelRatio=g.pixelRatio,e.sps=[m],e.duration=r;const v=m.subarray(1,4);let E="avc1.";for(let T=0;T<3;T++){let b=v[T].toString(16);b.length<2&&(b="0"+b),E+=b}e.codec=E}break}case 8:l=!0,e.pps=[u.data];break;case 9:l=!0,e.audFound=!0,o&&this.pushAccessUnit(o,e),o=this.VideoSample=this.createVideoSample(!1,s.pts,s.dts,"");break;case 12:l=!0;break;default:l=!1,o&&(o.debug+="unknown NAL "+u.type+" ");break}o&&l&&o.units.push(u)}),i&&o&&(this.pushAccessUnit(o,e),this.VideoSample=null)}parseAVCNALu(e,t){const s=t.byteLength;let i=e.naluState||0;const r=i,a=[];let o=0,l,c,u,d=-1,h=0;for(i===-1&&(d=0,h=t[0]&31,i=0,o=1);o<s;){if(l=t[o++],!i){i=l?0:1;continue}if(i===1){i=l?0:2;continue}if(!l)i=3;else if(l===1){if(c=o-i-1,d>=0){const f={data:t.subarray(d,c),type:h};a.push(f)}else{const f=this.getLastNalUnit(e.samples);f&&(r&&o<=4-r&&f.state&&(f.data=f.data.subarray(0,f.data.byteLength-r)),c>0&&(f.data=Bs(f.data,t.subarray(0,c)),f.state=0))}o<s?(u=t[o]&31,d=o,h=u,i=0):i=-1}else i=0}if(d>=0&&i>=0){const f={data:t.subarray(d,s),type:h,state:i};a.push(f)}if(a.length===0){const f=this.getLastNalUnit(e.samples);f&&(f.data=Bs(f.data,t))}return e.naluState=i,a}}class qM{constructor(e,t,s){this.keyData=void 0,this.decrypter=void 0,this.keyData=s,this.decrypter=new yf(t,{removePKCS7Padding:!1})}decryptBuffer(e){return this.decrypter.decrypt(e,this.keyData.key.buffer,this.keyData.iv.buffer)}decryptAacSample(e,t,s){const i=e[t].unit;if(i.length<=16)return;const r=i.subarray(16,i.length-i.length%16),a=r.buffer.slice(r.byteOffset,r.byteOffset+r.length);this.decryptBuffer(a).then(o=>{const l=new Uint8Array(o);i.set(l,16),this.decrypter.isSync()||this.decryptAacSamples(e,t+1,s)})}decryptAacSamples(e,t,s){for(;;t++){if(t>=e.length){s();return}if(!(e[t].unit.length<32)&&(this.decryptAacSample(e,t,s),!this.decrypter.isSync()))return}}getAvcEncryptedData(e){const t=Math.floor((e.length-48)/160)*16+16,s=new Int8Array(t);let i=0;for(let r=32;r<e.length-16;r+=160,i+=16)s.set(e.subarray(r,r+16),i);return s}getAvcDecryptedUnit(e,t){const s=new Uint8Array(t);let i=0;for(let r=32;r<e.length-16;r+=160,i+=16)e.set(s.subarray(i,i+16),r);return e}decryptAvcSample(e,t,s,i,r){const a=AE(r.data),o=this.getAvcEncryptedData(a);this.decryptBuffer(o.buffer).then(l=>{r.data=this.getAvcDecryptedUnit(a,l),this.decrypter.isSync()||this.decryptAvcSamples(e,t,s+1,i)})}decryptAvcSamples(e,t,s,i){if(e instanceof Uint8Array)throw new Error("Cannot decrypt samples of type Uint8Array");for(;;t++,s=0){if(t>=e.length){i();return}const r=e[t].units;for(;!(s>=r.length);s++){const a=r[s];if(!(a.data.length<=48||a.type!==1&&a.type!==5)&&(this.decryptAvcSample(e,t,s,i,a),!this.decrypter.isSync()))return}}}}const Nt=188;class ai{constructor(e,t,s){this.observer=void 0,this.config=void 0,this.typeSupported=void 0,this.sampleAes=null,this.pmtParsed=!1,this.audioCodec=void 0,this.videoCodec=void 0,this._duration=0,this._pmtId=-1,this._videoTrack=void 0,this._audioTrack=void 0,this._id3Track=void 0,this._txtTrack=void 0,this.aacOverFlow=null,this.remainderData=null,this.videoParser=void 0,this.observer=e,this.config=t,this.typeSupported=s,this.videoParser=new YM}static probe(e){const t=ai.syncOffset(e);return t>0&&z.warn(`MPEG2-TS detected but first sync word found @ offset ${t}`),t!==-1}static syncOffset(e){const t=e.length;let s=Math.min(Nt*5,t-Nt)+1,i=0;for(;i<s;){let r=!1,a=-1,o=0;for(let l=i;l<t;l+=Nt)if(e[l]===71&&(t-l===Nt||e[l+Nt]===71)){if(o++,a===-1&&(a=l,a!==0&&(s=Math.min(a+Nt*99,e.length-Nt)+1)),r||(r=Vd(e,l)===0),r&&o>1&&(a===0&&o>2||l+Nt>s))return a}else{if(o)return-1;break}i++}return-1}static createTrack(e,t){return{container:e==="video"||e==="audio"?"video/mp2t":void 0,type:e,id:EE[e],pid:-1,inputTimeScale:9e4,sequenceNumber:0,samples:[],dropped:0,duration:e==="audio"?t:void 0}}resetInitSegment(e,t,s,i){this.pmtParsed=!1,this._pmtId=-1,this._videoTrack=ai.createTrack("video"),this._audioTrack=ai.createTrack("audio",i),this._id3Track=ai.createTrack("id3"),this._txtTrack=ai.createTrack("text"),this._audioTrack.segmentCodec="aac",this.aacOverFlow=null,this.remainderData=null,this.audioCodec=t,this.videoCodec=s,this._duration=i}resetTimeStamp(){}resetContiguity(){const{_audioTrack:e,_videoTrack:t,_id3Track:s}=this;e&&(e.pesData=null),t&&(t.pesData=null),s&&(s.pesData=null),this.aacOverFlow=null,this.remainderData=null}demux(e,t,s=!1,i=!1){s||(this.sampleAes=null);let r;const a=this._videoTrack,o=this._audioTrack,l=this._id3Track,c=this._txtTrack;let u=a.pid,d=a.pesData,h=o.pid,f=l.pid,p=o.pesData,m=l.pesData,y=null,g=this.pmtParsed,v=this._pmtId,E=e.length;if(this.remainderData&&(e=Bs(this.remainderData,e),E=e.length,this.remainderData=null),E<Nt&&!i)return this.remainderData=e,{audioTrack:o,videoTrack:a,id3Track:l,textTrack:c};const T=Math.max(0,ai.syncOffset(e));E-=(E-T)%Nt,E<e.byteLength&&!i&&(this.remainderData=new Uint8Array(e.buffer,E,e.buffer.byteLength-E));let b=0;for(let x=T;x<E;x+=Nt)if(e[x]===71){const w=!!(e[x+1]&64),k=Vd(e,x),R=(e[x+3]&48)>>4;let P;if(R>1){if(P=x+5+e[x+4],P===x+Nt)continue}else P=x+4;switch(k){case u:w&&(d&&(r=ar(d))&&this.videoParser.parseAVCPES(a,c,r,!1,this._duration),d={data:[],size:0}),d&&(d.data.push(e.subarray(P,x+Nt)),d.size+=x+Nt-P);break;case h:if(w){if(p&&(r=ar(p)))switch(o.segmentCodec){case"aac":this.parseAACPES(o,r);break;case"mp3":this.parseMPEGPES(o,r);break;case"ac3":this.parseAC3PES(o,r);break}p={data:[],size:0}}p&&(p.data.push(e.subarray(P,x+Nt)),p.size+=x+Nt-P);break;case f:w&&(m&&(r=ar(m))&&this.parseID3PES(l,r),m={data:[],size:0}),m&&(m.data.push(e.subarray(P,x+Nt)),m.size+=x+Nt-P);break;case 0:w&&(P+=e[P]+1),v=this._pmtId=XM(e,P);break;case v:{w&&(P+=e[P]+1);const D=QM(e,P,this.typeSupported,s);u=D.videoPid,u>0&&(a.pid=u,a.segmentCodec=D.segmentVideoCodec),h=D.audioPid,h>0&&(o.pid=h,o.segmentCodec=D.segmentAudioCodec),f=D.id3Pid,f>0&&(l.pid=f),y!==null&&!g&&(z.warn(`MPEG-TS PMT found at ${x} after unknown PID '${y}'. Backtracking to sync byte @${T} to parse all TS packets.`),y=null,x=T-188),g=this.pmtParsed=!0;break}case 17:case 8191:break;default:y=k;break}}else b++;if(b>0){const x=new Error(`Found ${b} TS packet/s that do not start with 0x47`);this.observer.emit(I.ERROR,I.ERROR,{type:Oe.MEDIA_ERROR,details:te.FRAG_PARSING_ERROR,fatal:!1,error:x,reason:x.message})}a.pesData=d,o.pesData=p,l.pesData=m;const L={audioTrack:o,videoTrack:a,id3Track:l,textTrack:c};return i&&this.extractRemainingSamples(L),L}flush(){const{remainderData:e}=this;this.remainderData=null;let t;return e?t=this.demux(e,-1,!1,!0):t={videoTrack:this._videoTrack,audioTrack:this._audioTrack,id3Track:this._id3Track,textTrack:this._txtTrack},this.extractRemainingSamples(t),this.sampleAes?this.decrypt(t,this.sampleAes):t}extractRemainingSamples(e){const{audioTrack:t,videoTrack:s,id3Track:i,textTrack:r}=e,a=s.pesData,o=t.pesData,l=i.pesData;let c;if(a&&(c=ar(a))?(this.videoParser.parseAVCPES(s,r,c,!0,this._duration),s.pesData=null):s.pesData=a,o&&(c=ar(o))){switch(t.segmentCodec){case"aac":this.parseAACPES(t,c);break;case"mp3":this.parseMPEGPES(t,c);break;case"ac3":this.parseAC3PES(t,c);break}t.pesData=null}else o!=null&&o.size&&z.log("last AAC PES packet truncated,might overlap between fragments"),t.pesData=o;l&&(c=ar(l))?(this.parseID3PES(i,c),i.pesData=null):i.pesData=l}demuxSampleAes(e,t,s){const i=this.demux(e,s,!0,!this.config.progressive),r=this.sampleAes=new qM(this.observer,this.config,t);return this.decrypt(i,r)}decrypt(e,t){return new Promise(s=>{const{audioTrack:i,videoTrack:r}=e;i.samples&&i.segmentCodec==="aac"?t.decryptAacSamples(i.samples,0,()=>{r.samples?t.decryptAvcSamples(r.samples,0,0,()=>{s(e)}):s(e)}):r.samples&&t.decryptAvcSamples(r.samples,0,0,()=>{s(e)})})}destroy(){this._duration=0}parseAACPES(e,t){let s=0;const i=this.aacOverFlow;let r=t.data;if(i){this.aacOverFlow=null;const d=i.missing,h=i.sample.unit.byteLength;if(d===-1)r=Bs(i.sample.unit,r);else{const f=h-d;i.sample.unit.set(r.subarray(0,d),f),e.samples.push(i.sample),s=i.missing}}let a,o;for(a=s,o=r.length;a<o-1&&!Pl(r,a);a++);if(a!==s){let d;const h=a<o-1;h?d=`AAC PES did not start with ADTS header,offset:${a}`:d="No ADTS header found in AAC PES";const f=new Error(d);if(z.warn(`parsing error: ${d}`),this.observer.emit(I.ERROR,I.ERROR,{type:Oe.MEDIA_ERROR,details:te.FRAG_PARSING_ERROR,fatal:!1,levelRetry:h,error:f,reason:d}),!h)return}$E(e,this.observer,r,a,this.audioCodec);let l;if(t.pts!==void 0)l=t.pts;else if(i){const d=jE(e.samplerate);l=i.sample.pts+d}else{z.warn("[tsdemuxer]: AAC PES unknown PTS");return}let c=0,u;for(;a<o;)if(u=GE(e,r,a,l,c),a+=u.length,u.missing){this.aacOverFlow=u;break}else for(c++;a<o-1&&!Pl(r,a);a++);}parseMPEGPES(e,t){const s=t.data,i=s.length;let r=0,a=0;const o=t.pts;if(o===void 0){z.warn("[tsdemuxer]: MPEG PES unknown PTS");return}for(;a<i;)if(KE(s,a)){const l=VE(e,s,a,o,r);if(l)a+=l.length,r++;else break}else a++}parseAC3PES(e,t){{const s=t.data,i=t.pts;if(i===void 0){z.warn("[tsdemuxer]: AC3 PES unknown PTS");return}const r=s.length;let a=0,o=0,l;for(;o<r&&(l=YE(e,s,o,i,a++))>0;)o+=l}}parseID3PES(e,t){if(t.pts===void 0){z.warn("[tsdemuxer]: ID3 PES unknown PTS");return}const s=It({},t,{type:this._videoTrack?Gs.emsg:Gs.audioId3,duration:Number.POSITIVE_INFINITY});e.samples.push(s)}}function Vd(n,e){return((n[e+1]&31)<<8)+n[e+2]}function XM(n,e){return(n[e+10]&31)<<8|n[e+11]}function QM(n,e,t,s){const i={audioPid:-1,videoPid:-1,id3Pid:-1,segmentVideoCodec:"avc",segmentAudioCodec:"aac"},r=(n[e+1]&15)<<8|n[e+2],a=e+3+r-4,o=(n[e+10]&15)<<8|n[e+11];for(e+=12+o;e<a;){const l=Vd(n,e),c=(n[e+3]&15)<<8|n[e+4];switch(n[e]){case 207:if(!s){au("ADTS AAC");break}case 15:i.audioPid===-1&&(i.audioPid=l);break;case 21:i.id3Pid===-1&&(i.id3Pid=l);break;case 219:if(!s){au("H.264");break}case 27:i.videoPid===-1&&(i.videoPid=l,i.segmentVideoCodec="avc");break;case 3:case 4:!t.mpeg&&!t.mp3?z.log("MPEG audio found, not supported in this browser"):i.audioPid===-1&&(i.audioPid=l,i.segmentAudioCodec="mp3");break;case 193:if(!s){au("AC-3");break}case 129:t.ac3?i.audioPid===-1&&(i.audioPid=l,i.segmentAudioCodec="ac3"):z.log("AC-3 audio found, not supported in this browser");break;case 6:if(i.audioPid===-1&&c>0){let u=e+5,d=c;for(;d>2;){switch(n[u]){case 106:t.ac3!==!0?z.log("AC-3 audio found, not supported in this browser for now"):(i.audioPid=l,i.segmentAudioCodec="ac3");break}const f=n[u+1]+2;u+=f,d-=f}}break;case 194:case 135:z.warn("Unsupported EC-3 in M2TS found");break;case 36:z.warn("Unsupported HEVC in M2TS found");break}e+=c+5}return i}function au(n){z.log(`${n} with AES-128-CBC encryption found in unencrypted stream`)}function ar(n){let e=0,t,s,i,r,a;const o=n.data;if(!n||n.size===0)return null;for(;o[0].length<19&&o.length>1;)o[0]=Bs(o[0],o[1]),o.splice(1,1);if(t=o[0],(t[0]<<16)+(t[1]<<8)+t[2]===1){if(s=(t[4]<<8)+t[5],s&&s>n.size-6)return null;const c=t[7];c&192&&(r=(t[9]&14)*536870912+(t[10]&255)*4194304+(t[11]&254)*16384+(t[12]&255)*128+(t[13]&254)/2,c&64?(a=(t[14]&14)*536870912+(t[15]&255)*4194304+(t[16]&254)*16384+(t[17]&255)*128+(t[18]&254)/2,r-a>60*9e4&&(z.warn(`${Math.round((r-a)/9e4)}s delta between PTS and DTS, align them`),r=a)):a=r),i=t[8];let u=i+9;if(n.size<=u)return null;n.size-=u;const d=new Uint8Array(n.size);for(let h=0,f=o.length;h<f;h++){t=o[h];let p=t.byteLength;if(u)if(u>p){u-=p;continue}else t=t.subarray(u),p-=u,u=0;d.set(t,e),e+=p}return s&&(s-=i+3),{data:d,pts:r,dts:a,len:s}}return null}class JM extends Ef{resetInitSegment(e,t,s,i){super.resetInitSegment(e,t,s,i),this._audioTrack={container:"audio/mpeg",type:"audio",id:2,pid:-1,sequenceNumber:0,segmentCodec:"mp3",samples:[],manifestCodec:t,duration:i,inputTimeScale:9e4,dropped:0}}static probe(e){if(!e)return!1;const t=Wa(e,0);let s=(t==null?void 0:t.length)||0;if(t&&e[s]===11&&e[s+1]===119&&ff(t)!==void 0&&zE(e,s)<=16)return!1;for(let i=e.length;s<i;s++)if(WE(e,s))return z.log("MPEG Audio sync word found !"),!0;return!1}canParse(e,t){return GM(e,t)}appendFrame(e,t,s){if(this.basePTS!==null)return VE(e,t,s,this.basePTS,this.frameIndex)}}class Mg{static getSilentFrame(e,t){switch(e){case"mp4a.40.2":if(t===1)return new Uint8Array([0,200,0,128,35,128]);if(t===2)return new Uint8Array([33,0,73,144,2,25,0,35,128]);if(t===3)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,142]);if(t===4)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,128,44,128,8,2,56]);if(t===5)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,56]);if(t===6)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,0,178,0,32,8,224]);break;default:if(t===1)return new Uint8Array([1,64,34,128,163,78,230,128,186,8,0,0,0,28,6,241,193,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(t===2)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(t===3)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);break}}}const Zn=Math.pow(2,32)-1;class X{static init(){X.types={avc1:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],".mp3":[],dac3:[],"ac-3":[],mvex:[],mvhd:[],pasp:[],sdtp:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[],smhd:[]};let e;for(e in X.types)X.types.hasOwnProperty(e)&&(X.types[e]=[e.charCodeAt(0),e.charCodeAt(1),e.charCodeAt(2),e.charCodeAt(3)]);const t=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),s=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]);X.HDLR_TYPES={video:t,audio:s};const i=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),r=new Uint8Array([0,0,0,0,0,0,0,0]);X.STTS=X.STSC=X.STCO=r,X.STSZ=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),X.VMHD=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0]),X.SMHD=new Uint8Array([0,0,0,0,0,0,0,0]),X.STSD=new Uint8Array([0,0,0,0,0,0,0,1]);const a=new Uint8Array([105,115,111,109]),o=new Uint8Array([97,118,99,49]),l=new Uint8Array([0,0,0,1]);X.FTYP=X.box(X.types.ftyp,a,l,a,o),X.DINF=X.box(X.types.dinf,X.box(X.types.dref,i))}static box(e,...t){let s=8,i=t.length;const r=i;for(;i--;)s+=t[i].byteLength;const a=new Uint8Array(s);for(a[0]=s>>24&255,a[1]=s>>16&255,a[2]=s>>8&255,a[3]=s&255,a.set(e,4),i=0,s=8;i<r;i++)a.set(t[i],s),s+=t[i].byteLength;return a}static hdlr(e){return X.box(X.types.hdlr,X.HDLR_TYPES[e])}static mdat(e){return X.box(X.types.mdat,e)}static mdhd(e,t){t*=e;const s=Math.floor(t/(Zn+1)),i=Math.floor(t%(Zn+1));return X.box(X.types.mdhd,new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,e>>24&255,e>>16&255,e>>8&255,e&255,s>>24,s>>16&255,s>>8&255,s&255,i>>24,i>>16&255,i>>8&255,i&255,85,196,0,0]))}static mdia(e){return X.box(X.types.mdia,X.mdhd(e.timescale,e.duration),X.hdlr(e.type),X.minf(e))}static mfhd(e){return X.box(X.types.mfhd,new Uint8Array([0,0,0,0,e>>24,e>>16&255,e>>8&255,e&255]))}static minf(e){return e.type==="audio"?X.box(X.types.minf,X.box(X.types.smhd,X.SMHD),X.DINF,X.stbl(e)):X.box(X.types.minf,X.box(X.types.vmhd,X.VMHD),X.DINF,X.stbl(e))}static moof(e,t,s){return X.box(X.types.moof,X.mfhd(e),X.traf(s,t))}static moov(e){let t=e.length;const s=[];for(;t--;)s[t]=X.trak(e[t]);return X.box.apply(null,[X.types.moov,X.mvhd(e[0].timescale,e[0].duration)].concat(s).concat(X.mvex(e)))}static mvex(e){let t=e.length;const s=[];for(;t--;)s[t]=X.trex(e[t]);return X.box.apply(null,[X.types.mvex,...s])}static mvhd(e,t){t*=e;const s=Math.floor(t/(Zn+1)),i=Math.floor(t%(Zn+1)),r=new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,e>>24&255,e>>16&255,e>>8&255,e&255,s>>24,s>>16&255,s>>8&255,s&255,i>>24,i>>16&255,i>>8&255,i&255,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return X.box(X.types.mvhd,r)}static sdtp(e){const t=e.samples||[],s=new Uint8Array(4+t.length);let i,r;for(i=0;i<t.length;i++)r=t[i].flags,s[i+4]=r.dependsOn<<4|r.isDependedOn<<2|r.hasRedundancy;return X.box(X.types.sdtp,s)}static stbl(e){return X.box(X.types.stbl,X.stsd(e),X.box(X.types.stts,X.STTS),X.box(X.types.stsc,X.STSC),X.box(X.types.stsz,X.STSZ),X.box(X.types.stco,X.STCO))}static avc1(e){let t=[],s=[],i,r,a;for(i=0;i<e.sps.length;i++)r=e.sps[i],a=r.byteLength,t.push(a>>>8&255),t.push(a&255),t=t.concat(Array.prototype.slice.call(r));for(i=0;i<e.pps.length;i++)r=e.pps[i],a=r.byteLength,s.push(a>>>8&255),s.push(a&255),s=s.concat(Array.prototype.slice.call(r));const o=X.box(X.types.avcC,new Uint8Array([1,t[3],t[4],t[5],255,224|e.sps.length].concat(t).concat([e.pps.length]).concat(s))),l=e.width,c=e.height,u=e.pixelRatio[0],d=e.pixelRatio[1];return X.box(X.types.avc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,l>>8&255,l&255,c>>8&255,c&255,0,72,0,0,0,72,0,0,0,0,0,0,0,1,18,100,97,105,108,121,109,111,116,105,111,110,47,104,108,115,46,106,115,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),o,X.box(X.types.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192])),X.box(X.types.pasp,new Uint8Array([u>>24,u>>16&255,u>>8&255,u&255,d>>24,d>>16&255,d>>8&255,d&255])))}static esds(e){const t=e.config.length;return new Uint8Array([0,0,0,0,3,23+t,0,1,0,4,15+t,64,21,0,0,0,0,0,0,0,0,0,0,0,5].concat([t]).concat(e.config).concat([6,1,2]))}static audioStsd(e){const t=e.samplerate;return new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,e.channelCount,0,16,0,0,0,0,t>>8&255,t&255,0,0])}static mp4a(e){return X.box(X.types.mp4a,X.audioStsd(e),X.box(X.types.esds,X.esds(e)))}static mp3(e){return X.box(X.types[".mp3"],X.audioStsd(e))}static ac3(e){return X.box(X.types["ac-3"],X.audioStsd(e),X.box(X.types.dac3,e.config))}static stsd(e){return e.type==="audio"?e.segmentCodec==="mp3"&&e.codec==="mp3"?X.box(X.types.stsd,X.STSD,X.mp3(e)):e.segmentCodec==="ac3"?X.box(X.types.stsd,X.STSD,X.ac3(e)):X.box(X.types.stsd,X.STSD,X.mp4a(e)):X.box(X.types.stsd,X.STSD,X.avc1(e))}static tkhd(e){const t=e.id,s=e.duration*e.timescale,i=e.width,r=e.height,a=Math.floor(s/(Zn+1)),o=Math.floor(s%(Zn+1));return X.box(X.types.tkhd,new Uint8Array([1,0,0,7,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,t>>24&255,t>>16&255,t>>8&255,t&255,0,0,0,0,a>>24,a>>16&255,a>>8&255,a&255,o>>24,o>>16&255,o>>8&255,o&255,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,i>>8&255,i&255,0,0,r>>8&255,r&255,0,0]))}static traf(e,t){const s=X.sdtp(e),i=e.id,r=Math.floor(t/(Zn+1)),a=Math.floor(t%(Zn+1));return X.box(X.types.traf,X.box(X.types.tfhd,new Uint8Array([0,0,0,0,i>>24,i>>16&255,i>>8&255,i&255])),X.box(X.types.tfdt,new Uint8Array([1,0,0,0,r>>24,r>>16&255,r>>8&255,r&255,a>>24,a>>16&255,a>>8&255,a&255])),X.trun(e,s.length+16+20+8+16+8+8),s)}static trak(e){return e.duration=e.duration||4294967295,X.box(X.types.trak,X.tkhd(e),X.mdia(e))}static trex(e){const t=e.id;return X.box(X.types.trex,new Uint8Array([0,0,0,0,t>>24,t>>16&255,t>>8&255,t&255,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]))}static trun(e,t){const s=e.samples||[],i=s.length,r=12+16*i,a=new Uint8Array(r);let o,l,c,u,d,h;for(t+=8+r,a.set([e.type==="video"?1:0,0,15,1,i>>>24&255,i>>>16&255,i>>>8&255,i&255,t>>>24&255,t>>>16&255,t>>>8&255,t&255],0),o=0;o<i;o++)l=s[o],c=l.duration,u=l.size,d=l.flags,h=l.cts,a.set([c>>>24&255,c>>>16&255,c>>>8&255,c&255,u>>>24&255,u>>>16&255,u>>>8&255,u&255,d.isLeading<<2|d.dependsOn,d.isDependedOn<<6|d.hasRedundancy<<4|d.paddingValue<<1|d.isNonSync,d.degradPrio&61440,d.degradPrio&15,h>>>24&255,h>>>16&255,h>>>8&255,h&255],12+16*o);return X.box(X.types.trun,a)}static initSegment(e){X.types||X.init();const t=X.moov(e);return Bs(X.FTYP,t)}}X.types=void 0;X.HDLR_TYPES=void 0;X.STTS=void 0;X.STSC=void 0;X.STCO=void 0;X.STSZ=void 0;X.VMHD=void 0;X.SMHD=void 0;X.STSD=void 0;X.FTYP=void 0;X.DINF=void 0;const qE=9e4;function xf(n,e,t=1,s=!1){const i=n*e*t;return s?Math.round(i):i}function ZM(n,e,t=1,s=!1){return xf(n,e,1/t,s)}function oa(n,e=!1){return xf(n,1e3,1/qE,e)}function eF(n,e=1){return xf(n,qE,1/e)}const tF=10*1e3,Fg=1024,sF=1152,nF=1536;let or=null,ou=null;class el{constructor(e,t,s,i=""){if(this.observer=void 0,this.config=void 0,this.typeSupported=void 0,this.ISGenerated=!1,this._initPTS=null,this._initDTS=null,this.nextAvcDts=null,this.nextAudioPts=null,this.videoSampleDuration=null,this.isAudioContiguous=!1,this.isVideoContiguous=!1,this.videoTrackConfig=void 0,this.observer=e,this.config=t,this.typeSupported=s,this.ISGenerated=!1,or===null){const a=(navigator.userAgent||"").match(/Chrome\/(\d+)/i);or=a?parseInt(a[1]):0}if(ou===null){const r=navigator.userAgent.match(/Safari\/(\d+)/i);ou=r?parseInt(r[1]):0}}destroy(){this.config=this.videoTrackConfig=this._initPTS=this._initDTS=null}resetTimeStamp(e){z.log("[mp4-remuxer]: initPTS & initDTS reset"),this._initPTS=this._initDTS=e}resetNextTimestamp(){z.log("[mp4-remuxer]: reset next timestamp"),this.isVideoContiguous=!1,this.isAudioContiguous=!1}resetInitSegment(){z.log("[mp4-remuxer]: ISGenerated flag reset"),this.ISGenerated=!1,this.videoTrackConfig=void 0}getVideoStartPts(e){let t=!1;const s=e.reduce((i,r)=>{const a=r.pts-i;return a<-4294967296?(t=!0,ks(i,r.pts)):a>0?i:r.pts},e[0].pts);return t&&z.debug("PTS rollover detected"),s}remux(e,t,s,i,r,a,o,l){let c,u,d,h,f,p,m=r,y=r;const g=e.pid>-1,v=t.pid>-1,E=t.samples.length,T=e.samples.length>0,b=o&&E>0||E>1;if((!g||T)&&(!v||b)||this.ISGenerated||o){if(this.ISGenerated){var x,w,k,R;const N=this.videoTrackConfig;N&&(t.width!==N.width||t.height!==N.height||((x=t.pixelRatio)==null?void 0:x[0])!==((w=N.pixelRatio)==null?void 0:w[0])||((k=t.pixelRatio)==null?void 0:k[1])!==((R=N.pixelRatio)==null?void 0:R[1]))&&this.resetInitSegment()}else d=this.generateIS(e,t,r,a);const P=this.isVideoContiguous;let D=-1,O;if(b&&(D=iF(t.samples),!P&&this.config.forceKeyFrameOnDiscontinuity))if(p=!0,D>0){z.warn(`[mp4-remuxer]: Dropped ${D} out of ${E} video samples due to a missing keyframe`);const N=this.getVideoStartPts(t.samples);t.samples=t.samples.slice(D),t.dropped+=D,y+=(t.samples[0].pts-N)/t.inputTimeScale,O=y}else D===-1&&(z.warn(`[mp4-remuxer]: No keyframe found out of ${E} video samples`),p=!1);if(this.ISGenerated){if(T&&b){const N=this.getVideoStartPts(t.samples),K=(ks(e.samples[0].pts,N)-N)/t.inputTimeScale;m+=Math.max(0,K),y+=Math.max(0,-K)}if(T){if(e.samplerate||(z.warn("[mp4-remuxer]: regenerate InitSegment as audio detected"),d=this.generateIS(e,t,r,a)),u=this.remuxAudio(e,m,this.isAudioContiguous,a,v||b||l===Pe.AUDIO?y:void 0),b){const N=u?u.endPTS-u.startPTS:0;t.inputTimeScale||(z.warn("[mp4-remuxer]: regenerate InitSegment as video detected"),d=this.generateIS(e,t,r,a)),c=this.remuxVideo(t,y,P,N)}}else b&&(c=this.remuxVideo(t,y,P,0));c&&(c.firstKeyFrame=D,c.independent=D!==-1,c.firstKeyFramePTS=O)}}return this.ISGenerated&&this._initPTS&&this._initDTS&&(s.samples.length&&(f=XE(s,r,this._initPTS,this._initDTS)),i.samples.length&&(h=QE(i,r,this._initPTS))),{audio:u,video:c,initSegment:d,independent:p,text:h,id3:f}}generateIS(e,t,s,i){const r=e.samples,a=t.samples,o=this.typeSupported,l={},c=this._initPTS;let u=!c||i,d="audio/mp4",h,f,p;if(u&&(h=f=1/0),e.config&&r.length){switch(e.timescale=e.samplerate,e.segmentCodec){case"mp3":o.mpeg?(d="audio/mpeg",e.codec=""):o.mp3&&(e.codec="mp3");break;case"ac3":e.codec="ac-3";break}l.audio={id:"audio",container:d,codec:e.codec,initSegment:e.segmentCodec==="mp3"&&o.mpeg?new Uint8Array(0):X.initSegment([e]),metadata:{channelCount:e.channelCount}},u&&(p=e.inputTimeScale,!c||p!==c.timescale?h=f=r[0].pts-Math.round(p*s):u=!1)}if(t.sps&&t.pps&&a.length){if(t.timescale=t.inputTimeScale,l.video={id:"main",container:"video/mp4",codec:t.codec,initSegment:X.initSegment([t]),metadata:{width:t.width,height:t.height}},u)if(p=t.inputTimeScale,!c||p!==c.timescale){const m=this.getVideoStartPts(a),y=Math.round(p*s);f=Math.min(f,ks(a[0].dts,m)-y),h=Math.min(h,m-y)}else u=!1;this.videoTrackConfig={width:t.width,height:t.height,pixelRatio:t.pixelRatio}}if(Object.keys(l).length)return this.ISGenerated=!0,u?(this._initPTS={baseTime:h,timescale:p},this._initDTS={baseTime:f,timescale:p}):h=p=void 0,{tracks:l,initPTS:h,timescale:p}}remuxVideo(e,t,s,i){const r=e.inputTimeScale,a=e.samples,o=[],l=a.length,c=this._initPTS;let u=this.nextAvcDts,d=8,h=this.videoSampleDuration,f,p,m=Number.POSITIVE_INFINITY,y=Number.NEGATIVE_INFINITY,g=!1;if(!s||u===null){const U=t*r,B=a[0].pts-ks(a[0].dts,a[0].pts);or&&u!==null&&Math.abs(U-B-u)<15e3?s=!0:u=U-B}const v=c.baseTime*r/c.timescale;for(let U=0;U<l;U++){const B=a[U];B.pts=ks(B.pts-v,u),B.dts=ks(B.dts-v,u),B.dts<a[U>0?U-1:U].dts&&(g=!0)}g&&a.sort(function(U,B){const j=U.dts-B.dts,Y=U.pts-B.pts;return j||Y}),f=a[0].dts,p=a[a.length-1].dts;const E=p-f,T=E?Math.round(E/(l-1)):h||e.inputTimeScale/30;if(s){const U=f-u,B=U>T,j=U<-1;if((B||j)&&(B?z.warn(`AVC: ${oa(U,!0)} ms (${U}dts) hole between fragments detected at ${t.toFixed(3)}`):z.warn(`AVC: ${oa(-U,!0)} ms (${U}dts) overlapping between fragments detected at ${t.toFixed(3)}`),!j||u>=a[0].pts||or)){f=u;const Y=a[0].pts-U;if(B)a[0].dts=f,a[0].pts=Y;else for(let me=0;me<a.length&&!(a[me].dts>Y);me++)a[me].dts-=U,a[me].pts-=U;z.log(`Video: Initial PTS/DTS adjusted: ${oa(Y,!0)}/${oa(f,!0)}, delta: ${oa(U,!0)} ms`)}}f=Math.max(0,f);let b=0,L=0,x=f;for(let U=0;U<l;U++){const B=a[U],j=B.units,Y=j.length;let me=0;for(let xe=0;xe<Y;xe++)me+=j[xe].data.length;L+=me,b+=Y,B.length=me,B.dts<x?(B.dts=x,x+=T/4|0||1):x=B.dts,m=Math.min(B.pts,m),y=Math.max(B.pts,y)}p=a[l-1].dts;const w=L+4*b+8;let k;try{k=new Uint8Array(w)}catch(U){this.observer.emit(I.ERROR,I.ERROR,{type:Oe.MUX_ERROR,details:te.REMUX_ALLOC_ERROR,fatal:!1,error:U,bytes:w,reason:`fail allocating video mdat ${w}`});return}const R=new DataView(k.buffer);R.setUint32(0,w),k.set(X.types.mdat,4);let P=!1,D=Number.POSITIVE_INFINITY,O=Number.POSITIVE_INFINITY,N=Number.NEGATIVE_INFINITY,$=Number.NEGATIVE_INFINITY;for(let U=0;U<l;U++){const B=a[U],j=B.units;let Y=0;for(let Le=0,we=j.length;Le<we;Le++){const Q=j[Le],oe=Q.data,q=Q.data.byteLength;R.setUint32(d,q),d+=4,k.set(oe,d),d+=q,Y+=4+q}let me;if(U<l-1)h=a[U+1].dts-B.dts,me=a[U+1].pts-B.pts;else{const Le=this.config,we=U>0?B.dts-a[U-1].dts:T;if(me=U>0?B.pts-a[U-1].pts:T,Le.stretchShortVideoTrack&&this.nextAudioPts!==null){const Q=Math.floor(Le.maxBufferHole*r),oe=(i?m+i*r:this.nextAudioPts)-B.pts;oe>Q?(h=oe-we,h<0?h=we:P=!0,z.log(`[mp4-remuxer]: It is approximately ${oe/90} ms to the next segment; using duration ${h/90} ms for the last video frame.`)):h=we}else h=we}const xe=Math.round(B.pts-B.dts);D=Math.min(D,h),N=Math.max(N,h),O=Math.min(O,me),$=Math.max($,me),o.push(new Ng(B.key,h,Y,xe))}if(o.length){if(or){if(or<70){const U=o[0].flags;U.dependsOn=2,U.isNonSync=0}}else if(ou&&$-O<N-D&&T/N<.025&&o[0].cts===0){z.warn("Found irregular gaps in sample duration. Using PTS instead of DTS to determine MP4 sample duration.");let U=f;for(let B=0,j=o.length;B<j;B++){const Y=U+o[B].duration,me=U+o[B].cts;if(B<j-1){const xe=Y+o[B+1].cts;o[B].duration=xe-me}else o[B].duration=B?o[B-1].duration:T;o[B].cts=0,U=Y}}}h=P||!h?T:h,this.nextAvcDts=u=p+h,this.videoSampleDuration=h,this.isVideoContiguous=!0;const K=X.moof(e.sequenceNumber++,f,It({},e,{samples:o})),ee="video",V={data1:K,data2:k,startPTS:m/r,endPTS:(y+h)/r,startDTS:f/r,endDTS:u/r,type:ee,hasAudio:!1,hasVideo:!0,nb:o.length,dropped:e.dropped};return e.samples=[],e.dropped=0,V}getSamplesPerFrame(e){switch(e.segmentCodec){case"mp3":return sF;case"ac3":return nF;default:return Fg}}remuxAudio(e,t,s,i,r){const a=e.inputTimeScale,o=e.samplerate?e.samplerate:a,l=a/o,c=this.getSamplesPerFrame(e),u=c*l,d=this._initPTS,h=e.segmentCodec==="mp3"&&this.typeSupported.mpeg,f=[],p=r!==void 0;let m=e.samples,y=h?0:8,g=this.nextAudioPts||-1;const v=t*a,E=d.baseTime*a/d.timescale;if(this.isAudioContiguous=s=s||m.length&&g>0&&(i&&Math.abs(v-g)<9e3||Math.abs(ks(m[0].pts-E,v)-g)<20*u),m.forEach(function(K){K.pts=ks(K.pts-E,v)}),!s||g<0){if(m=m.filter(K=>K.pts>=0),!m.length)return;r===0?g=0:i&&!p?g=Math.max(0,v):g=m[0].pts}if(e.segmentCodec==="aac"){const K=this.config.maxAudioFramesDrift;for(let ee=0,V=g;ee<m.length;ee++){const U=m[ee],B=U.pts,j=B-V,Y=Math.abs(1e3*j/a);if(j<=-K*u&&p)ee===0&&(z.warn(`Audio frame @ ${(B/a).toFixed(3)}s overlaps nextAudioPts by ${Math.round(1e3*j/a)} ms.`),this.nextAudioPts=g=V=B);else if(j>=K*u&&Y<tF&&p){let me=Math.round(j/u);V=B-me*u,V<0&&(me--,V+=u),ee===0&&(this.nextAudioPts=g=V),z.warn(`[mp4-remuxer]: Injecting ${me} audio frame @ ${(V/a).toFixed(3)}s due to ${Math.round(1e3*j/a)} ms gap.`);for(let xe=0;xe<me;xe++){const Le=Math.max(V,0);let we=Mg.getSilentFrame(e.manifestCodec||e.codec,e.channelCount);we||(z.log("[mp4-remuxer]: Unable to get silent frame for given audio codec; duplicating last frame instead."),we=U.unit.subarray()),m.splice(ee,0,{unit:we,pts:Le}),V+=u,ee++}}U.pts=V,V+=u}}let T=null,b=null,L,x=0,w=m.length;for(;w--;)x+=m[w].unit.byteLength;for(let K=0,ee=m.length;K<ee;K++){const V=m[K],U=V.unit;let B=V.pts;if(b!==null){const Y=f[K-1];Y.duration=Math.round((B-b)/l)}else if(s&&e.segmentCodec==="aac"&&(B=g),T=B,x>0){x+=y;try{L=new Uint8Array(x)}catch(Y){this.observer.emit(I.ERROR,I.ERROR,{type:Oe.MUX_ERROR,details:te.REMUX_ALLOC_ERROR,fatal:!1,error:Y,bytes:x,reason:`fail allocating audio mdat ${x}`});return}h||(new DataView(L.buffer).setUint32(0,x),L.set(X.types.mdat,4))}else return;L.set(U,y);const j=U.byteLength;y+=j,f.push(new Ng(!0,c,j,0)),b=B}const k=f.length;if(!k)return;const R=f[f.length-1];this.nextAudioPts=g=b+l*R.duration;const P=h?new Uint8Array(0):X.moof(e.sequenceNumber++,T/l,It({},e,{samples:f}));e.samples=[];const D=T/a,O=g/a,$={data1:P,data2:L,startPTS:D,endPTS:O,startDTS:D,endDTS:O,type:"audio",hasAudio:!0,hasVideo:!1,nb:k};return this.isAudioContiguous=!0,$}remuxEmptyAudio(e,t,s,i){const r=e.inputTimeScale,a=e.samplerate?e.samplerate:r,o=r/a,l=this.nextAudioPts,c=this._initDTS,u=c.baseTime*9e4/c.timescale,d=(l!==null?l:i.startDTS*r)+u,h=i.endDTS*r+u,f=o*Fg,p=Math.ceil((h-d)/f),m=Mg.getSilentFrame(e.manifestCodec||e.codec,e.channelCount);if(z.warn("[mp4-remuxer]: remux empty Audio"),!m){z.trace("[mp4-remuxer]: Unable to remuxEmptyAudio since we were unable to get a silent frame for given audio codec");return}const y=[];for(let g=0;g<p;g++){const v=d+g*f;y.push({unit:m,pts:v,dts:v})}return e.samples=y,this.remuxAudio(e,t,s,!1)}}function ks(n,e){let t;if(e===null)return n;for(e<n?t=-8589934592:t=8589934592;Math.abs(n-e)>4294967296;)n+=t;return n}function iF(n){for(let e=0;e<n.length;e++)if(n[e].key)return e;return-1}function XE(n,e,t,s){const i=n.samples.length;if(!i)return;const r=n.inputTimeScale;for(let o=0;o<i;o++){const l=n.samples[o];l.pts=ks(l.pts-t.baseTime*r/t.timescale,e*r)/r,l.dts=ks(l.dts-s.baseTime*r/s.timescale,e*r)/r}const a=n.samples;return n.samples=[],{samples:a}}function QE(n,e,t){const s=n.samples.length;if(!s)return;const i=n.inputTimeScale;for(let a=0;a<s;a++){const o=n.samples[a];o.pts=ks(o.pts-t.baseTime*i/t.timescale,e*i)/i}n.samples.sort((a,o)=>a.pts-o.pts);const r=n.samples;return n.samples=[],{samples:r}}class Ng{constructor(e,t,s,i){this.size=void 0,this.duration=void 0,this.cts=void 0,this.flags=void 0,this.duration=t,this.size=s,this.cts=i,this.flags={isLeading:0,isDependedOn:0,hasRedundancy:0,degradPrio:0,dependsOn:e?2:1,isNonSync:e?0:1}}}class rF{constructor(){this.emitInitSegment=!1,this.audioCodec=void 0,this.videoCodec=void 0,this.initData=void 0,this.initPTS=null,this.initTracks=void 0,this.lastEndTime=null}destroy(){}resetTimeStamp(e){this.initPTS=e,this.lastEndTime=null}resetNextTimestamp(){this.lastEndTime=null}resetInitSegment(e,t,s,i){this.audioCodec=t,this.videoCodec=s,this.generateInitSegment(fO(e,i)),this.emitInitSegment=!0}generateInitSegment(e){let{audioCodec:t,videoCodec:s}=this;if(!(e!=null&&e.byteLength)){this.initTracks=void 0,this.initData=void 0;return}const i=this.initData=xE(e);i.audio&&(t=Bg(i.audio,st.AUDIO)),i.video&&(s=Bg(i.video,st.VIDEO));const r={};i.audio&&i.video?r.audiovideo={container:"video/mp4",codec:t+","+s,initSegment:e,id:"main"}:i.audio?r.audio={container:"audio/mp4",codec:t,initSegment:e,id:"audio"}:i.video?r.video={container:"video/mp4",codec:s,initSegment:e,id:"main"}:z.warn("[passthrough-remuxer.ts]: initSegment does not contain moov or trak boxes."),this.initTracks=r}remux(e,t,s,i,r,a){var o,l;let{initPTS:c,lastEndTime:u}=this;const d={audio:void 0,video:void 0,text:i,id3:s,initSegment:void 0};Se(u)||(u=this.lastEndTime=r||0);const h=t.samples;if(!(h!=null&&h.length))return d;const f={initPTS:void 0,timescale:1};let p=this.initData;if((o=p)!=null&&o.length||(this.generateInitSegment(h),p=this.initData),!((l=p)!=null&&l.length))return z.warn("[passthrough-remuxer.ts]: Failed to generate initSegment."),d;this.emitInitSegment&&(f.tracks=this.initTracks,this.emitInitSegment=!1);const m=mO(h,p),y=pO(p,h),g=y===null?r:y;(aF(c,g,r,m)||f.timescale!==c.timescale&&a)&&(f.initPTS=g-r,c&&c.timescale===1&&z.warn(`Adjusting initPTS by ${f.initPTS-c.baseTime}`),this.initPTS=c={baseTime:f.initPTS,timescale:1});const v=e?g-c.baseTime/c.timescale:u,E=v+m;yO(p,h,c.baseTime/c.timescale),m>0?this.lastEndTime=E:(z.warn("Duration parsed from mp4 should be greater than zero"),this.resetNextTimestamp());const T=!!p.audio,b=!!p.video;let L="";T&&(L+="audio"),b&&(L+="video");const x={data1:h,startPTS:v,startDTS:v,endPTS:E,endDTS:E,type:L,hasAudio:T,hasVideo:b,nb:1,dropped:0};return d.audio=x.type==="audio"?x:void 0,d.video=x.type!=="audio"?x:void 0,d.initSegment=f,d.id3=XE(s,r,c,c),i.samples.length&&(d.text=QE(i,r,c)),d}}function aF(n,e,t,s){if(n===null)return!0;const i=Math.max(s,1),r=e-n.baseTime/n.timescale;return Math.abs(r-t)>i}function Bg(n,e){const t=n==null?void 0:n.codec;if(t&&t.length>4)return t;if(e===st.AUDIO){if(t==="ec-3"||t==="ac-3"||t==="alac")return t;if(t==="fLaC"||t==="Opus")return wl(t,!1);const s="mp4a.40.5";return z.info(`Parsed audio codec "${t}" or audio object type not handled. Using "${s}"`),s}return z.warn(`Unhandled video codec "${t}"`),t==="hvc1"||t==="hev1"?"hvc1.1.6.L120.90":t==="av01"?"av01.0.04M.08":"avc1.42e01e"}let kn;try{kn=self.performance.now.bind(self.performance)}catch{z.debug("Unable to use Performance API on this environment"),kn=Gr==null?void 0:Gr.Date.now}const tl=[{demux:KM,remux:rF},{demux:ai,remux:el},{demux:VM,remux:el},{demux:JM,remux:el}];tl.splice(2,0,{demux:WM,remux:el});class Ug{constructor(e,t,s,i,r){this.async=!1,this.observer=void 0,this.typeSupported=void 0,this.config=void 0,this.vendor=void 0,this.id=void 0,this.demuxer=void 0,this.remuxer=void 0,this.decrypter=void 0,this.probe=void 0,this.decryptionPromise=null,this.transmuxConfig=void 0,this.currentTransmuxState=void 0,this.observer=e,this.typeSupported=t,this.config=s,this.vendor=i,this.id=r}configure(e){this.transmuxConfig=e,this.decrypter&&this.decrypter.reset()}push(e,t,s,i){const r=s.transmuxing;r.executeStart=kn();let a=new Uint8Array(e);const{currentTransmuxState:o,transmuxConfig:l}=this;i&&(this.currentTransmuxState=i);const{contiguous:c,discontinuity:u,trackSwitch:d,accurateTimeOffset:h,timeOffset:f,initSegmentChange:p}=i||o,{audioCodec:m,videoCodec:y,defaultInitPts:g,duration:v,initSegmentData:E}=l,T=oF(a,t);if(T&&T.method==="AES-128"){const w=this.getDecrypter();if(w.isSync()){let k=w.softwareDecrypt(a,T.key.buffer,T.iv.buffer);if(s.part>-1&&(k=w.flush()),!k)return r.executeEnd=kn(),lu(s);a=new Uint8Array(k)}else return this.decryptionPromise=w.webCryptoDecrypt(a,T.key.buffer,T.iv.buffer).then(k=>{const R=this.push(k,null,s);return this.decryptionPromise=null,R}),this.decryptionPromise}const b=this.needsProbing(u,d);if(b){const w=this.configureTransmuxer(a);if(w)return z.warn(`[transmuxer] ${w.message}`),this.observer.emit(I.ERROR,I.ERROR,{type:Oe.MEDIA_ERROR,details:te.FRAG_PARSING_ERROR,fatal:!1,error:w,reason:w.message}),r.executeEnd=kn(),lu(s)}(u||d||p||b)&&this.resetInitSegment(E,m,y,v,t),(u||p||b)&&this.resetInitialTimestamp(g),c||this.resetContiguity();const L=this.transmux(a,T,f,h,s),x=this.currentTransmuxState;return x.contiguous=!0,x.discontinuity=!1,x.trackSwitch=!1,r.executeEnd=kn(),L}flush(e){const t=e.transmuxing;t.executeStart=kn();const{decrypter:s,currentTransmuxState:i,decryptionPromise:r}=this;if(r)return r.then(()=>this.flush(e));const a=[],{timeOffset:o}=i;if(s){const d=s.flush();d&&a.push(this.push(d,null,e))}const{demuxer:l,remuxer:c}=this;if(!l||!c)return t.executeEnd=kn(),[lu(e)];const u=l.flush(o);return sl(u)?u.then(d=>(this.flushRemux(a,d,e),a)):(this.flushRemux(a,u,e),a)}flushRemux(e,t,s){const{audioTrack:i,videoTrack:r,id3Track:a,textTrack:o}=t,{accurateTimeOffset:l,timeOffset:c}=this.currentTransmuxState;z.log(`[transmuxer.ts]: Flushed fragment ${s.sn}${s.part>-1?" p: "+s.part:""} of level ${s.level}`);const u=this.remuxer.remux(i,r,a,o,c,l,!0,this.id);e.push({remuxResult:u,chunkMeta:s}),s.transmuxing.executeEnd=kn()}resetInitialTimestamp(e){const{demuxer:t,remuxer:s}=this;!t||!s||(t.resetTimeStamp(e),s.resetTimeStamp(e))}resetContiguity(){const{demuxer:e,remuxer:t}=this;!e||!t||(e.resetContiguity(),t.resetNextTimestamp())}resetInitSegment(e,t,s,i,r){const{demuxer:a,remuxer:o}=this;!a||!o||(a.resetInitSegment(e,t,s,i),o.resetInitSegment(e,t,s,r))}destroy(){this.demuxer&&(this.demuxer.destroy(),this.demuxer=void 0),this.remuxer&&(this.remuxer.destroy(),this.remuxer=void 0)}transmux(e,t,s,i,r){let a;return t&&t.method==="SAMPLE-AES"?a=this.transmuxSampleAes(e,t,s,i,r):a=this.transmuxUnencrypted(e,s,i,r),a}transmuxUnencrypted(e,t,s,i){const{audioTrack:r,videoTrack:a,id3Track:o,textTrack:l}=this.demuxer.demux(e,t,!1,!this.config.progressive);return{remuxResult:this.remuxer.remux(r,a,o,l,t,s,!1,this.id),chunkMeta:i}}transmuxSampleAes(e,t,s,i,r){return this.demuxer.demuxSampleAes(e,t,s).then(a=>({remuxResult:this.remuxer.remux(a.audioTrack,a.videoTrack,a.id3Track,a.textTrack,s,i,!1,this.id),chunkMeta:r}))}configureTransmuxer(e){const{config:t,observer:s,typeSupported:i,vendor:r}=this;let a;for(let h=0,f=tl.length;h<f;h++){var o;if((o=tl[h].demux)!=null&&o.probe(e)){a=tl[h];break}}if(!a)return new Error("Failed to find demuxer by probing fragment data");const l=this.demuxer,c=this.remuxer,u=a.remux,d=a.demux;(!c||!(c instanceof u))&&(this.remuxer=new u(s,t,i,r)),(!l||!(l instanceof d))&&(this.demuxer=new d(s,t,i),this.probe=d.probe)}needsProbing(e,t){return!this.demuxer||!this.remuxer||e||t}getDecrypter(){let e=this.decrypter;return e||(e=this.decrypter=new yf(this.config)),e}}function oF(n,e){let t=null;return n.byteLength>0&&(e==null?void 0:e.key)!=null&&e.iv!==null&&e.method!=null&&(t=e),t}const lu=n=>({remuxResult:{},chunkMeta:n});function sl(n){return"then"in n&&n.then instanceof Function}class lF{constructor(e,t,s,i,r){this.audioCodec=void 0,this.videoCodec=void 0,this.initSegmentData=void 0,this.duration=void 0,this.defaultInitPts=void 0,this.audioCodec=e,this.videoCodec=t,this.initSegmentData=s,this.duration=i,this.defaultInitPts=r||null}}class cF{constructor(e,t,s,i,r,a){this.discontinuity=void 0,this.contiguous=void 0,this.accurateTimeOffset=void 0,this.trackSwitch=void 0,this.timeOffset=void 0,this.initSegmentChange=void 0,this.discontinuity=e,this.contiguous=t,this.accurateTimeOffset=s,this.trackSwitch=i,this.timeOffset=r,this.initSegmentChange=a}}var JE={exports:{}};(function(n){var e=Object.prototype.hasOwnProperty,t="~";function s(){}Object.create&&(s.prototype=Object.create(null),new s().__proto__||(t=!1));function i(l,c,u){this.fn=l,this.context=c,this.once=u||!1}function r(l,c,u,d,h){if(typeof u!="function")throw new TypeError("The listener must be a function");var f=new i(u,d||l,h),p=t?t+c:c;return l._events[p]?l._events[p].fn?l._events[p]=[l._events[p],f]:l._events[p].push(f):(l._events[p]=f,l._eventsCount++),l}function a(l,c){--l._eventsCount===0?l._events=new s:delete l._events[c]}function o(){this._events=new s,this._eventsCount=0}o.prototype.eventNames=function(){var c=[],u,d;if(this._eventsCount===0)return c;for(d in u=this._events)e.call(u,d)&&c.push(t?d.slice(1):d);return Object.getOwnPropertySymbols?c.concat(Object.getOwnPropertySymbols(u)):c},o.prototype.listeners=function(c){var u=t?t+c:c,d=this._events[u];if(!d)return[];if(d.fn)return[d.fn];for(var h=0,f=d.length,p=new Array(f);h<f;h++)p[h]=d[h].fn;return p},o.prototype.listenerCount=function(c){var u=t?t+c:c,d=this._events[u];return d?d.fn?1:d.length:0},o.prototype.emit=function(c,u,d,h,f,p){var m=t?t+c:c;if(!this._events[m])return!1;var y=this._events[m],g=arguments.length,v,E;if(y.fn){switch(y.once&&this.removeListener(c,y.fn,void 0,!0),g){case 1:return y.fn.call(y.context),!0;case 2:return y.fn.call(y.context,u),!0;case 3:return y.fn.call(y.context,u,d),!0;case 4:return y.fn.call(y.context,u,d,h),!0;case 5:return y.fn.call(y.context,u,d,h,f),!0;case 6:return y.fn.call(y.context,u,d,h,f,p),!0}for(E=1,v=new Array(g-1);E<g;E++)v[E-1]=arguments[E];y.fn.apply(y.context,v)}else{var T=y.length,b;for(E=0;E<T;E++)switch(y[E].once&&this.removeListener(c,y[E].fn,void 0,!0),g){case 1:y[E].fn.call(y[E].context);break;case 2:y[E].fn.call(y[E].context,u);break;case 3:y[E].fn.call(y[E].context,u,d);break;case 4:y[E].fn.call(y[E].context,u,d,h);break;default:if(!v)for(b=1,v=new Array(g-1);b<g;b++)v[b-1]=arguments[b];y[E].fn.apply(y[E].context,v)}}return!0},o.prototype.on=function(c,u,d){return r(this,c,u,d,!1)},o.prototype.once=function(c,u,d){return r(this,c,u,d,!0)},o.prototype.removeListener=function(c,u,d,h){var f=t?t+c:c;if(!this._events[f])return this;if(!u)return a(this,f),this;var p=this._events[f];if(p.fn)p.fn===u&&(!h||p.once)&&(!d||p.context===d)&&a(this,f);else{for(var m=0,y=[],g=p.length;m<g;m++)(p[m].fn!==u||h&&!p[m].once||d&&p[m].context!==d)&&y.push(p[m]);y.length?this._events[f]=y.length===1?y[0]:y:a(this,f)}return this},o.prototype.removeAllListeners=function(c){var u;return c?(u=t?t+c:c,this._events[u]&&a(this,u)):(this._events=new s,this._eventsCount=0),this},o.prototype.off=o.prototype.removeListener,o.prototype.addListener=o.prototype.on,o.prefixed=t,o.EventEmitter=o,n.exports=o})(JE);var uF=JE.exports,Sf=OP(uF);class ZE{constructor(e,t,s,i){this.error=null,this.hls=void 0,this.id=void 0,this.observer=void 0,this.frag=null,this.part=null,this.useWorker=void 0,this.workerContext=null,this.onwmsg=void 0,this.transmuxer=null,this.onTransmuxComplete=void 0,this.onFlush=void 0;const r=e.config;this.hls=e,this.id=t,this.useWorker=!!r.enableWorker,this.onTransmuxComplete=s,this.onFlush=i;const a=(u,d)=>{d=d||{},d.frag=this.frag,d.id=this.id,u===I.ERROR&&(this.error=d.error),this.hls.trigger(u,d)};this.observer=new Sf,this.observer.on(I.FRAG_DECRYPTED,a),this.observer.on(I.ERROR,a);const o=Zr(r.preferManagedMediaSource)||{isTypeSupported:()=>!1},l={mpeg:o.isTypeSupported("audio/mpeg"),mp3:o.isTypeSupported('audio/mp4; codecs="mp3"'),ac3:o.isTypeSupported('audio/mp4; codecs="ac-3"')},c=navigator.vendor;if(this.useWorker&&typeof Worker<"u"&&(r.workerPath||IM())){try{r.workerPath?(z.log(`loading Web Worker ${r.workerPath} for "${t}"`),this.workerContext=DM(r.workerPath)):(z.log(`injecting Web Worker for "${t}"`),this.workerContext=CM()),this.onwmsg=h=>this.onWorkerMessage(h);const{worker:d}=this.workerContext;d.addEventListener("message",this.onwmsg),d.onerror=h=>{const f=new Error(`${h.message}  (${h.filename}:${h.lineno})`);r.enableWorker=!1,z.warn(`Error in "${t}" Web Worker, fallback to inline`),this.hls.trigger(I.ERROR,{type:Oe.OTHER_ERROR,details:te.INTERNAL_EXCEPTION,fatal:!1,event:"demuxerWorker",error:f})},d.postMessage({cmd:"init",typeSupported:l,vendor:c,id:t,config:JSON.stringify(r)})}catch(d){z.warn(`Error setting up "${t}" Web Worker, fallback to inline`,d),this.resetWorker(),this.error=null,this.transmuxer=new Ug(this.observer,l,r,c,t)}return}this.transmuxer=new Ug(this.observer,l,r,c,t)}resetWorker(){if(this.workerContext){const{worker:e,objectURL:t}=this.workerContext;t&&self.URL.revokeObjectURL(t),e.removeEventListener("message",this.onwmsg),e.onerror=null,e.terminate(),this.workerContext=null}}destroy(){if(this.workerContext)this.resetWorker(),this.onwmsg=void 0;else{const t=this.transmuxer;t&&(t.destroy(),this.transmuxer=null)}const e=this.observer;e&&e.removeAllListeners(),this.frag=null,this.observer=null,this.hls=null}push(e,t,s,i,r,a,o,l,c,u){var d,h;c.transmuxing.start=self.performance.now();const{transmuxer:f}=this,p=a?a.start:r.start,m=r.decryptdata,y=this.frag,g=!(y&&r.cc===y.cc),v=!(y&&c.level===y.level),E=y?c.sn-y.sn:-1,T=this.part?c.part-this.part.index:-1,b=E===0&&c.id>1&&c.id===(y==null?void 0:y.stats.chunkCount),L=!v&&(E===1||E===0&&(T===1||b&&T<=0)),x=self.performance.now();(v||E||r.stats.parsing.start===0)&&(r.stats.parsing.start=x),a&&(T||!L)&&(a.stats.parsing.start=x);const w=!(y&&((d=r.initSegment)==null?void 0:d.url)===((h=y.initSegment)==null?void 0:h.url)),k=new cF(g,L,l,v,p,w);if(!L||g||w){z.log(`[transmuxer-interface, ${r.type}]: Starting new transmux session for sn: ${c.sn} p: ${c.part} level: ${c.level} id: ${c.id}
        discontinuity: ${g}
        trackSwitch: ${v}
        contiguous: ${L}
        accurateTimeOffset: ${l}
        timeOffset: ${p}
        initSegmentChange: ${w}`);const R=new lF(s,i,t,o,u);this.configureTransmuxer(R)}if(this.frag=r,this.part=a,this.workerContext)this.workerContext.worker.postMessage({cmd:"demux",data:e,decryptdata:m,chunkMeta:c,state:k},e instanceof ArrayBuffer?[e]:[]);else if(f){const R=f.push(e,m,c,k);sl(R)?(f.async=!0,R.then(P=>{this.handleTransmuxComplete(P)}).catch(P=>{this.transmuxerError(P,c,"transmuxer-interface push error")})):(f.async=!1,this.handleTransmuxComplete(R))}}flush(e){e.transmuxing.start=self.performance.now();const{transmuxer:t}=this;if(this.workerContext)this.workerContext.worker.postMessage({cmd:"flush",chunkMeta:e});else if(t){let s=t.flush(e);sl(s)||t.async?(sl(s)||(s=Promise.resolve(s)),s.then(r=>{this.handleFlushResult(r,e)}).catch(r=>{this.transmuxerError(r,e,"transmuxer-interface flush error")})):this.handleFlushResult(s,e)}}transmuxerError(e,t,s){this.hls&&(this.error=e,this.hls.trigger(I.ERROR,{type:Oe.MEDIA_ERROR,details:te.FRAG_PARSING_ERROR,chunkMeta:t,fatal:!1,error:e,err:e,reason:s}))}handleFlushResult(e,t){e.forEach(s=>{this.handleTransmuxComplete(s)}),this.onFlush(t)}onWorkerMessage(e){const t=e.data,s=this.hls;switch(t.event){case"init":{var i;const r=(i=this.workerContext)==null?void 0:i.objectURL;r&&self.URL.revokeObjectURL(r);break}case"transmuxComplete":{this.handleTransmuxComplete(t.data);break}case"flush":{this.onFlush(t.data);break}case"workerLog":z[t.data.logType]&&z[t.data.logType](t.data.message);break;default:{t.data=t.data||{},t.data.frag=this.frag,t.data.id=this.id,s.trigger(t.event,t.data);break}}}configureTransmuxer(e){const{transmuxer:t}=this;this.workerContext?this.workerContext.worker.postMessage({cmd:"configure",config:e}):t&&t.configure(e)}handleTransmuxComplete(e){e.chunkMeta.transmuxing.end=self.performance.now(),this.onTransmuxComplete(e)}}function eT(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;t++)if(!Hr(n[t].attrs,e[t].attrs))return!1;return!0}function Hr(n,e,t){const s=n["STABLE-RENDITION-ID"];return s&&!t?s===e["STABLE-RENDITION-ID"]:!(t||["LANGUAGE","NAME","CHARACTERISTICS","AUTOSELECT","DEFAULT","FORCED","ASSOC-LANGUAGE"]).some(i=>n[i]!==e[i])}function Hd(n,e){return e.label.toLowerCase()===n.name.toLowerCase()&&(!e.language||e.language.toLowerCase()===(n.lang||"").toLowerCase())}const $g=100;class dF extends vf{constructor(e,t,s){super(e,t,s,"[audio-stream-controller]",Pe.AUDIO),this.videoBuffer=null,this.videoTrackCC=-1,this.waitingVideoCC=-1,this.bufferedTrack=null,this.switchingTrack=null,this.trackId=-1,this.waitingData=null,this.mainDetails=null,this.flushing=!1,this.bufferFlushed=!1,this.cachedTrackLoadedData=null,this._registerListeners()}onHandlerDestroying(){this._unregisterListeners(),super.onHandlerDestroying(),this.mainDetails=null,this.bufferedTrack=null,this.switchingTrack=null}_registerListeners(){const{hls:e}=this;e.on(I.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(I.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(I.MANIFEST_LOADING,this.onManifestLoading,this),e.on(I.LEVEL_LOADED,this.onLevelLoaded,this),e.on(I.AUDIO_TRACKS_UPDATED,this.onAudioTracksUpdated,this),e.on(I.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),e.on(I.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),e.on(I.ERROR,this.onError,this),e.on(I.BUFFER_RESET,this.onBufferReset,this),e.on(I.BUFFER_CREATED,this.onBufferCreated,this),e.on(I.BUFFER_FLUSHING,this.onBufferFlushing,this),e.on(I.BUFFER_FLUSHED,this.onBufferFlushed,this),e.on(I.INIT_PTS_FOUND,this.onInitPtsFound,this),e.on(I.FRAG_BUFFERED,this.onFragBuffered,this)}_unregisterListeners(){const{hls:e}=this;e.off(I.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(I.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(I.MANIFEST_LOADING,this.onManifestLoading,this),e.off(I.LEVEL_LOADED,this.onLevelLoaded,this),e.off(I.AUDIO_TRACKS_UPDATED,this.onAudioTracksUpdated,this),e.off(I.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),e.off(I.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),e.off(I.ERROR,this.onError,this),e.off(I.BUFFER_RESET,this.onBufferReset,this),e.off(I.BUFFER_CREATED,this.onBufferCreated,this),e.off(I.BUFFER_FLUSHING,this.onBufferFlushing,this),e.off(I.BUFFER_FLUSHED,this.onBufferFlushed,this),e.off(I.INIT_PTS_FOUND,this.onInitPtsFound,this),e.off(I.FRAG_BUFFERED,this.onFragBuffered,this)}onInitPtsFound(e,{frag:t,id:s,initPTS:i,timescale:r}){if(s==="main"){const a=t.cc;this.initPTS[t.cc]={baseTime:i,timescale:r},this.log(`InitPTS for cc: ${a} found from main: ${i}`),this.videoTrackCC=a,this.state===re.WAITING_INIT_PTS&&this.tick()}}startLoad(e){if(!this.levels){this.startPosition=e,this.state=re.STOPPED;return}const t=this.lastCurrentTime;this.stopLoad(),this.setInterval($g),t>0&&e===-1?(this.log(`Override startPosition with lastCurrentTime @${t.toFixed(3)}`),e=t,this.state=re.IDLE):(this.loadedmetadata=!1,this.state=re.WAITING_TRACK),this.nextLoadPosition=this.startPosition=this.lastCurrentTime=e,this.tick()}doTick(){switch(this.state){case re.IDLE:this.doTickIdle();break;case re.WAITING_TRACK:{var e;const{levels:s,trackId:i}=this,r=s==null||(e=s[i])==null?void 0:e.details;if(r){if(this.waitForCdnTuneIn(r))break;this.state=re.WAITING_INIT_PTS}break}case re.FRAG_LOADING_WAITING_RETRY:{var t;const s=performance.now(),i=this.retryDate;if(!i||s>=i||(t=this.media)!=null&&t.seeking){const{levels:r,trackId:a}=this;this.log("RetryDate reached, switch back to IDLE state"),this.resetStartWhenNotLoaded((r==null?void 0:r[a])||null),this.state=re.IDLE}break}case re.WAITING_INIT_PTS:{const s=this.waitingData;if(s){const{frag:i,part:r,cache:a,complete:o}=s;if(this.initPTS[i.cc]!==void 0){this.waitingData=null,this.waitingVideoCC=-1,this.state=re.FRAG_LOADING;const l=a.flush(),c={frag:i,part:r,payload:l,networkDetails:null};this._handleFragmentLoadProgress(c),o&&super._handleFragmentLoadComplete(c)}else if(this.videoTrackCC!==this.waitingVideoCC)this.log(`Waiting fragment cc (${i.cc}) cancelled because video is at cc ${this.videoTrackCC}`),this.clearWaitingFragment();else{const l=this.getLoadPosition(),c=ut.bufferInfo(this.mediaBuffer,l,this.config.maxBufferHole);Gd(c.end,this.config.maxFragLookUpTolerance,i)<0&&(this.log(`Waiting fragment cc (${i.cc}) @ ${i.start} cancelled because another fragment at ${c.end} is needed`),this.clearWaitingFragment())}}else this.state=re.IDLE}}this.onTickEnd()}clearWaitingFragment(){const e=this.waitingData;e&&(this.fragmentTracker.removeFragment(e.frag),this.waitingData=null,this.waitingVideoCC=-1,this.state=re.IDLE)}resetLoadingState(){this.clearWaitingFragment(),super.resetLoadingState()}onTickEnd(){const{media:e}=this;e!=null&&e.readyState&&(this.lastCurrentTime=e.currentTime)}doTickIdle(){const{hls:e,levels:t,media:s,trackId:i}=this,r=e.config;if(!s&&(this.startFragRequested||!r.startFragPrefetch)||!(t!=null&&t[i]))return;const a=t[i],o=a.details;if(!o||o.live&&this.levelLastLoaded!==a||this.waitForCdnTuneIn(o)){this.state=re.WAITING_TRACK;return}const l=this.mediaBuffer?this.mediaBuffer:this.media;this.bufferFlushed&&l&&(this.bufferFlushed=!1,this.afterBufferFlushed(l,st.AUDIO,Pe.AUDIO));const c=this.getFwdBufferInfo(l,Pe.AUDIO);if(c===null)return;const{bufferedTrack:u,switchingTrack:d}=this;if(!d&&this._streamEnded(c,o)){e.trigger(I.BUFFER_EOS,{type:"audio"}),this.state=re.ENDED;return}const h=this.getFwdBufferInfo(this.videoBuffer?this.videoBuffer:this.media,Pe.MAIN),f=c.len,p=this.getMaxBufferLength(h==null?void 0:h.len),m=o.fragments,y=m[0].start;let g=this.flushing?this.getLoadPosition():c.end;if(d&&s){const b=this.getLoadPosition();u&&!Hr(d.attrs,u.attrs)&&(g=b),o.PTSKnown&&b<y&&(c.end>y||c.nextStart)&&(this.log("Alt audio track ahead of main track, seek to start of alt audio track"),s.currentTime=y+.05)}if(f>=p&&!d&&g<m[m.length-1].start)return;let v=this.getNextFragment(g,o),E=!1;if(v&&this.isLoopLoading(v,g)&&(E=!!v.gap,v=this.getNextFragmentLoopLoading(v,o,c,Pe.MAIN,p)),!v){this.bufferFlushed=!0;return}const T=h&&v.start>h.end+o.targetduration;if(T||!(h!=null&&h.len)&&c.len){const b=this.getAppendedFrag(v.start,Pe.MAIN);if(b===null||(E||(E=!!b.gap||!!T&&h.len===0),T&&!E||E&&c.nextStart&&c.nextStart<b.end))return}this.loadFragment(v,a,g)}getMaxBufferLength(e){const t=super.getMaxBufferLength();return e?Math.min(Math.max(t,e),this.config.maxMaxBufferLength):t}onMediaDetaching(){this.videoBuffer=null,this.bufferFlushed=this.flushing=!1,super.onMediaDetaching()}onAudioTracksUpdated(e,{audioTracks:t}){this.resetTransmuxer(),this.levels=t.map(s=>new Vr(s))}onAudioTrackSwitching(e,t){const s=!!t.url;this.trackId=t.id;const{fragCurrent:i}=this;i&&(i.abortRequests(),this.removeUnbufferedFrags(i.start)),this.resetLoadingState(),s?this.setInterval($g):this.resetTransmuxer(),s?(this.switchingTrack=t,this.state=re.IDLE,this.flushAudioIfNeeded(t)):(this.switchingTrack=null,this.bufferedTrack=t,this.state=re.STOPPED),this.tick()}onManifestLoading(){this.fragmentTracker.removeAllFragments(),this.startPosition=this.lastCurrentTime=0,this.bufferFlushed=this.flushing=!1,this.levels=this.mainDetails=this.waitingData=this.bufferedTrack=this.cachedTrackLoadedData=this.switchingTrack=null,this.startFragRequested=!1,this.trackId=this.videoTrackCC=this.waitingVideoCC=-1}onLevelLoaded(e,t){this.mainDetails=t.details,this.cachedTrackLoadedData!==null&&(this.hls.trigger(I.AUDIO_TRACK_LOADED,this.cachedTrackLoadedData),this.cachedTrackLoadedData=null)}onAudioTrackLoaded(e,t){var s;if(this.mainDetails==null){this.cachedTrackLoadedData=t;return}const{levels:i}=this,{details:r,id:a}=t;if(!i){this.warn(`Audio tracks were reset while loading level ${a}`);return}this.log(`Audio track ${a} loaded [${r.startSN},${r.endSN}]${r.lastPartSn?`[part-${r.lastPartSn}-${r.lastPartIndex}]`:""},duration:${r.totalduration}`);const o=i[a];let l=0;if(r.live||(s=o.details)!=null&&s.live){this.checkLiveUpdate(r);const u=this.mainDetails;if(r.deltaUpdateFailed||!u)return;if(!o.details&&r.hasProgramDateTime&&u.hasProgramDateTime)kl(r,u),l=r.fragments[0].start;else{var c;l=this.alignPlaylists(r,o.details,(c=this.levelLastLoaded)==null?void 0:c.details)}}o.details=r,this.levelLastLoaded=o,!this.startFragRequested&&(this.mainDetails||!r.live)&&this.setStartPosition(this.mainDetails||r,l),this.state===re.WAITING_TRACK&&!this.waitForCdnTuneIn(r)&&(this.state=re.IDLE),this.tick()}_handleFragmentLoadProgress(e){var t;const{frag:s,part:i,payload:r}=e,{config:a,trackId:o,levels:l}=this;if(!l){this.warn(`Audio tracks were reset while fragment load was in progress. Fragment ${s.sn} of level ${s.level} will not be buffered`);return}const c=l[o];if(!c){this.warn("Audio track is undefined on fragment load progress");return}const u=c.details;if(!u){this.warn("Audio track details undefined on fragment load progress"),this.removeUnbufferedFrags(s.start);return}const d=a.defaultAudioCodec||c.audioCodec||"mp4a.40.2";let h=this.transmuxer;h||(h=this.transmuxer=new ZE(this.hls,Pe.AUDIO,this._handleTransmuxComplete.bind(this),this._handleTransmuxerFlush.bind(this)));const f=this.initPTS[s.cc],p=(t=s.initSegment)==null?void 0:t.data;if(f!==void 0){const y=i?i.index:-1,g=y!==-1,v=new gf(s.level,s.sn,s.stats.chunkCount,r.byteLength,y,g);h.push(r,p,d,"",s,i,u.totalduration,!1,v,f)}else{this.log(`Unknown video PTS for cc ${s.cc}, waiting for video PTS before demuxing audio frag ${s.sn} of [${u.startSN} ,${u.endSN}],track ${o}`);const{cache:m}=this.waitingData=this.waitingData||{frag:s,part:i,cache:new NE,complete:!1};m.push(new Uint8Array(r)),this.waitingVideoCC=this.videoTrackCC,this.state=re.WAITING_INIT_PTS}}_handleFragmentLoadComplete(e){if(this.waitingData){this.waitingData.complete=!0;return}super._handleFragmentLoadComplete(e)}onBufferReset(){this.mediaBuffer=this.videoBuffer=null,this.loadedmetadata=!1}onBufferCreated(e,t){const s=t.tracks.audio;s&&(this.mediaBuffer=s.buffer||null),t.tracks.video&&(this.videoBuffer=t.tracks.video.buffer||null)}onFragBuffered(e,t){const{frag:s,part:i}=t;if(s.type!==Pe.AUDIO){if(!this.loadedmetadata&&s.type===Pe.MAIN){const r=this.videoBuffer||this.media;r&&ut.getBuffered(r).length&&(this.loadedmetadata=!0)}return}if(this.fragContextChanged(s)){this.warn(`Fragment ${s.sn}${i?" p: "+i.index:""} of level ${s.level} finished buffering, but was aborted. state: ${this.state}, audioSwitch: ${this.switchingTrack?this.switchingTrack.name:"false"}`);return}if(s.sn!=="initSegment"){this.fragPrevious=s;const r=this.switchingTrack;r&&(this.bufferedTrack=r,this.switchingTrack=null,this.hls.trigger(I.AUDIO_TRACK_SWITCHED,Gt({},r)))}this.fragBufferedComplete(s,i)}onError(e,t){var s;if(t.fatal){this.state=re.ERROR;return}switch(t.details){case te.FRAG_GAP:case te.FRAG_PARSING_ERROR:case te.FRAG_DECRYPT_ERROR:case te.FRAG_LOAD_ERROR:case te.FRAG_LOAD_TIMEOUT:case te.KEY_LOAD_ERROR:case te.KEY_LOAD_TIMEOUT:this.onFragmentOrKeyLoadError(Pe.AUDIO,t);break;case te.AUDIO_TRACK_LOAD_ERROR:case te.AUDIO_TRACK_LOAD_TIMEOUT:case te.LEVEL_PARSING_ERROR:!t.levelRetry&&this.state===re.WAITING_TRACK&&((s=t.context)==null?void 0:s.type)===Ye.AUDIO_TRACK&&(this.state=re.IDLE);break;case te.BUFFER_APPEND_ERROR:case te.BUFFER_FULL_ERROR:if(!t.parent||t.parent!=="audio")return;if(t.details===te.BUFFER_APPEND_ERROR){this.resetLoadingState();return}this.reduceLengthAndFlushBuffer(t)&&(this.bufferedTrack=null,super.flushMainBuffer(0,Number.POSITIVE_INFINITY,"audio"));break;case te.INTERNAL_EXCEPTION:this.recoverWorkerError(t);break}}onBufferFlushing(e,{type:t}){t!==st.VIDEO&&(this.flushing=!0)}onBufferFlushed(e,{type:t}){if(t!==st.VIDEO){this.flushing=!1,this.bufferFlushed=!0,this.state===re.ENDED&&(this.state=re.IDLE);const s=this.mediaBuffer||this.media;s&&(this.afterBufferFlushed(s,t,Pe.AUDIO),this.tick())}}_handleTransmuxComplete(e){var t;const s="audio",{hls:i}=this,{remuxResult:r,chunkMeta:a}=e,o=this.getCurrentContext(a);if(!o){this.resetWhenMissingContext(a);return}const{frag:l,part:c,level:u}=o,{details:d}=u,{audio:h,text:f,id3:p,initSegment:m}=r;if(this.fragContextChanged(l)||!d){this.fragmentTracker.removeFragment(l);return}if(this.state=re.PARSING,this.switchingTrack&&h&&this.completeAudioSwitch(this.switchingTrack),m!=null&&m.tracks){const y=l.initSegment||l;this._bufferInitSegment(u,m.tracks,y,a),i.trigger(I.FRAG_PARSING_INIT_SEGMENT,{frag:y,id:s,tracks:m.tracks})}if(h){const{startPTS:y,endPTS:g,startDTS:v,endDTS:E}=h;c&&(c.elementaryStreams[st.AUDIO]={startPTS:y,endPTS:g,startDTS:v,endDTS:E}),l.setElementaryStreamInfo(st.AUDIO,y,g,v,E),this.bufferFragmentData(h,l,c,a)}if(p!=null&&(t=p.samples)!=null&&t.length){const y=It({id:s,frag:l,details:d},p);i.trigger(I.FRAG_PARSING_METADATA,y)}if(f){const y=It({id:s,frag:l,details:d},f);i.trigger(I.FRAG_PARSING_USERDATA,y)}}_bufferInitSegment(e,t,s,i){if(this.state!==re.PARSING)return;t.video&&delete t.video;const r=t.audio;if(!r)return;r.id="audio";const a=e.audioCodec;this.log(`Init audio buffer, container:${r.container}, codecs[level/parsed]=[${a}/${r.codec}]`),a&&a.split(",").length===1&&(r.levelCodec=a),this.hls.trigger(I.BUFFER_CODECS,t);const o=r.initSegment;if(o!=null&&o.byteLength){const l={type:"audio",frag:s,part:null,chunkMeta:i,parent:s.type,data:o};this.hls.trigger(I.BUFFER_APPENDING,l)}this.tickImmediate()}loadFragment(e,t,s){const i=this.fragmentTracker.getState(e);if(this.fragCurrent=e,this.switchingTrack||i===Bt.NOT_LOADED||i===Bt.PARTIAL){var r;if(e.sn==="initSegment")this._loadInitSegment(e,t);else if((r=t.details)!=null&&r.live&&!this.initPTS[e.cc]){this.log(`Waiting for video PTS in continuity counter ${e.cc} of live stream before loading audio fragment ${e.sn} of level ${this.trackId}`),this.state=re.WAITING_INIT_PTS;const a=this.mainDetails;a&&a.fragments[0].start!==t.details.fragments[0].start&&kl(t.details,a)}else this.startFragRequested=!0,super.loadFragment(e,t,s)}else this.clearTrackerIfNeeded(e)}flushAudioIfNeeded(e){const{media:t,bufferedTrack:s}=this,i=s==null?void 0:s.attrs,r=e.attrs;t&&i&&(i.CHANNELS!==r.CHANNELS||s.name!==e.name||s.lang!==e.lang)&&(this.log("Switching audio track : flushing all audio"),super.flushMainBuffer(0,Number.POSITIVE_INFINITY,"audio"),this.bufferedTrack=null)}completeAudioSwitch(e){const{hls:t}=this;this.flushAudioIfNeeded(e),this.bufferedTrack=e,this.switchingTrack=null,t.trigger(I.AUDIO_TRACK_SWITCHED,Gt({},e))}}class hF extends mf{constructor(e){super(e,"[audio-track-controller]"),this.tracks=[],this.groupIds=null,this.tracksInGroup=[],this.trackId=-1,this.currentTrack=null,this.selectDefaultTrack=!0,this.registerListeners()}registerListeners(){const{hls:e}=this;e.on(I.MANIFEST_LOADING,this.onManifestLoading,this),e.on(I.MANIFEST_PARSED,this.onManifestParsed,this),e.on(I.LEVEL_LOADING,this.onLevelLoading,this),e.on(I.LEVEL_SWITCHING,this.onLevelSwitching,this),e.on(I.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),e.on(I.ERROR,this.onError,this)}unregisterListeners(){const{hls:e}=this;e.off(I.MANIFEST_LOADING,this.onManifestLoading,this),e.off(I.MANIFEST_PARSED,this.onManifestParsed,this),e.off(I.LEVEL_LOADING,this.onLevelLoading,this),e.off(I.LEVEL_SWITCHING,this.onLevelSwitching,this),e.off(I.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),e.off(I.ERROR,this.onError,this)}destroy(){this.unregisterListeners(),this.tracks.length=0,this.tracksInGroup.length=0,this.currentTrack=null,super.destroy()}onManifestLoading(){this.tracks=[],this.tracksInGroup=[],this.groupIds=null,this.currentTrack=null,this.trackId=-1,this.selectDefaultTrack=!0}onManifestParsed(e,t){this.tracks=t.audioTracks||[]}onAudioTrackLoaded(e,t){const{id:s,groupId:i,details:r}=t,a=this.tracksInGroup[s];if(!a||a.groupId!==i){this.warn(`Audio track with id:${s} and group:${i} not found in active group ${a==null?void 0:a.groupId}`);return}const o=a.details;a.details=t.details,this.log(`Audio track ${s} "${a.name}" lang:${a.lang} group:${i} loaded [${r.startSN}-${r.endSN}]`),s===this.trackId&&this.playlistLoaded(s,t,o)}onLevelLoading(e,t){this.switchLevel(t.level)}onLevelSwitching(e,t){this.switchLevel(t.level)}switchLevel(e){const t=this.hls.levels[e];if(!t)return;const s=t.audioGroups||null,i=this.groupIds;let r=this.currentTrack;if(!s||(i==null?void 0:i.length)!==(s==null?void 0:s.length)||s!=null&&s.some(o=>(i==null?void 0:i.indexOf(o))===-1)){this.groupIds=s,this.trackId=-1,this.currentTrack=null;const o=this.tracks.filter(h=>!s||s.indexOf(h.groupId)!==-1);if(o.length)this.selectDefaultTrack&&!o.some(h=>h.default)&&(this.selectDefaultTrack=!1),o.forEach((h,f)=>{h.id=f});else if(!r&&!this.tracksInGroup.length)return;this.tracksInGroup=o;const l=this.hls.config.audioPreference;if(!r&&l){const h=mn(l,o,ir);if(h>-1)r=o[h];else{const f=mn(l,this.tracks);r=this.tracks[f]}}let c=this.findTrackId(r);c===-1&&r&&(c=this.findTrackId(null));const u={audioTracks:o};this.log(`Updating audio tracks, ${o.length} track(s) found in group(s): ${s==null?void 0:s.join(",")}`),this.hls.trigger(I.AUDIO_TRACKS_UPDATED,u);const d=this.trackId;if(c!==-1&&d===-1)this.setAudioTrack(c);else if(o.length&&d===-1){var a;const h=new Error(`No audio track selected for current audio group-ID(s): ${(a=this.groupIds)==null?void 0:a.join(",")} track count: ${o.length}`);this.warn(h.message),this.hls.trigger(I.ERROR,{type:Oe.MEDIA_ERROR,details:te.AUDIO_TRACK_LOAD_ERROR,fatal:!0,error:h})}}else this.shouldReloadPlaylist(r)&&this.setAudioTrack(this.trackId)}onError(e,t){t.fatal||!t.context||t.context.type===Ye.AUDIO_TRACK&&t.context.id===this.trackId&&(!this.groupIds||this.groupIds.indexOf(t.context.groupId)!==-1)&&(this.requestScheduled=-1,this.checkRetry(t))}get allAudioTracks(){return this.tracks}get audioTracks(){return this.tracksInGroup}get audioTrack(){return this.trackId}set audioTrack(e){this.selectDefaultTrack=!1,this.setAudioTrack(e)}setAudioOption(e){const t=this.hls;if(t.config.audioPreference=e,e){const s=this.allAudioTracks;if(this.selectDefaultTrack=!1,s.length){const i=this.currentTrack;if(i&&Rr(e,i,ir))return i;const r=mn(e,this.tracksInGroup,ir);if(r>-1){const a=this.tracksInGroup[r];return this.setAudioTrack(r),a}else if(i){let a=t.loadLevel;a===-1&&(a=t.firstAutoLevel);const o=hM(e,t.levels,s,a,ir);if(o===-1)return null;t.nextLoadLevel=o}if(e.channels||e.audioCodec){const a=mn(e,s);if(a>-1)return s[a]}}}return null}setAudioTrack(e){const t=this.tracksInGroup;if(e<0||e>=t.length){this.warn(`Invalid audio track id: ${e}`);return}this.clearTimer(),this.selectDefaultTrack=!1;const s=this.currentTrack,i=t[e],r=i.details&&!i.details.live;if(e===this.trackId&&i===s&&r||(this.log(`Switching to audio-track ${e} "${i.name}" lang:${i.lang} group:${i.groupId} channels:${i.channels}`),this.trackId=e,this.currentTrack=i,this.hls.trigger(I.AUDIO_TRACK_SWITCHING,Gt({},i)),r))return;const a=this.switchParams(i.url,s==null?void 0:s.details);this.loadPlaylist(a)}findTrackId(e){const t=this.tracksInGroup;for(let s=0;s<t.length;s++){const i=t[s];if(!(this.selectDefaultTrack&&!i.default)&&(!e||Rr(e,i,ir)))return s}if(e){const{name:s,lang:i,assocLang:r,characteristics:a,audioCodec:o,channels:l}=e;for(let c=0;c<t.length;c++){const u=t[c];if(Rr({name:s,lang:i,assocLang:r,characteristics:a,audioCodec:o,channels:l},u,ir))return c}for(let c=0;c<t.length;c++){const u=t[c];if(Hr(e.attrs,u.attrs,["LANGUAGE","ASSOC-LANGUAGE","CHARACTERISTICS"]))return c}for(let c=0;c<t.length;c++){const u=t[c];if(Hr(e.attrs,u.attrs,["LANGUAGE"]))return c}}return-1}loadPlaylist(e){const t=this.currentTrack;if(this.shouldLoadPlaylist(t)&&t){super.loadPlaylist();const s=t.id,i=t.groupId;let r=t.url;if(e)try{r=e.addDirectives(r)}catch(a){this.warn(`Could not construct new URL with HLS Delivery Directives: ${a}`)}this.log(`loading audio-track playlist ${s} "${t.name}" lang:${t.lang} group:${i}`),this.clearTimer(),this.hls.trigger(I.AUDIO_TRACK_LOADING,{url:r,id:s,groupId:i,deliveryDirectives:e||null})}}}const jg=500;class fF extends vf{constructor(e,t,s){super(e,t,s,"[subtitle-stream-controller]",Pe.SUBTITLE),this.currentTrackId=-1,this.tracksBuffered=[],this.mainDetails=null,this._registerListeners()}onHandlerDestroying(){this._unregisterListeners(),super.onHandlerDestroying(),this.mainDetails=null}_registerListeners(){const{hls:e}=this;e.on(I.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(I.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(I.MANIFEST_LOADING,this.onManifestLoading,this),e.on(I.LEVEL_LOADED,this.onLevelLoaded,this),e.on(I.ERROR,this.onError,this),e.on(I.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),e.on(I.SUBTITLE_TRACK_SWITCH,this.onSubtitleTrackSwitch,this),e.on(I.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),e.on(I.SUBTITLE_FRAG_PROCESSED,this.onSubtitleFragProcessed,this),e.on(I.BUFFER_FLUSHING,this.onBufferFlushing,this),e.on(I.FRAG_BUFFERED,this.onFragBuffered,this)}_unregisterListeners(){const{hls:e}=this;e.off(I.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(I.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(I.MANIFEST_LOADING,this.onManifestLoading,this),e.off(I.LEVEL_LOADED,this.onLevelLoaded,this),e.off(I.ERROR,this.onError,this),e.off(I.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),e.off(I.SUBTITLE_TRACK_SWITCH,this.onSubtitleTrackSwitch,this),e.off(I.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),e.off(I.SUBTITLE_FRAG_PROCESSED,this.onSubtitleFragProcessed,this),e.off(I.BUFFER_FLUSHING,this.onBufferFlushing,this),e.off(I.FRAG_BUFFERED,this.onFragBuffered,this)}startLoad(e){this.stopLoad(),this.state=re.IDLE,this.setInterval(jg),this.nextLoadPosition=this.startPosition=this.lastCurrentTime=e,this.tick()}onManifestLoading(){this.mainDetails=null,this.fragmentTracker.removeAllFragments()}onMediaDetaching(){this.tracksBuffered=[],super.onMediaDetaching()}onLevelLoaded(e,t){this.mainDetails=t.details}onSubtitleFragProcessed(e,t){const{frag:s,success:i}=t;if(this.fragPrevious=s,this.state=re.IDLE,!i)return;const r=this.tracksBuffered[this.currentTrackId];if(!r)return;let a;const o=s.start;for(let c=0;c<r.length;c++)if(o>=r[c].start&&o<=r[c].end){a=r[c];break}const l=s.start+s.duration;a?a.end=l:(a={start:o,end:l},r.push(a)),this.fragmentTracker.fragBuffered(s),this.fragBufferedComplete(s,null)}onBufferFlushing(e,t){const{startOffset:s,endOffset:i}=t;if(s===0&&i!==Number.POSITIVE_INFINITY){const r=i-1;if(r<=0)return;t.endOffsetSubtitles=Math.max(0,r),this.tracksBuffered.forEach(a=>{for(let o=0;o<a.length;){if(a[o].end<=r){a.shift();continue}else if(a[o].start<r)a[o].start=r;else break;o++}}),this.fragmentTracker.removeFragmentsInRange(s,r,Pe.SUBTITLE)}}onFragBuffered(e,t){if(!this.loadedmetadata&&t.frag.type===Pe.MAIN){var s;(s=this.media)!=null&&s.buffered.length&&(this.loadedmetadata=!0)}}onError(e,t){const s=t.frag;(s==null?void 0:s.type)===Pe.SUBTITLE&&(this.fragCurrent&&this.fragCurrent.abortRequests(),this.state!==re.STOPPED&&(this.state=re.IDLE))}onSubtitleTracksUpdated(e,{subtitleTracks:t}){if(this.levels&&eT(this.levels,t)){this.levels=t.map(s=>new Vr(s));return}this.tracksBuffered=[],this.levels=t.map(s=>{const i=new Vr(s);return this.tracksBuffered[i.id]=[],i}),this.fragmentTracker.removeFragmentsInRange(0,Number.POSITIVE_INFINITY,Pe.SUBTITLE),this.fragPrevious=null,this.mediaBuffer=null}onSubtitleTrackSwitch(e,t){var s;if(this.currentTrackId=t.id,!((s=this.levels)!=null&&s.length)||this.currentTrackId===-1){this.clearInterval();return}const i=this.levels[this.currentTrackId];i!=null&&i.details?this.mediaBuffer=this.mediaBufferTimeRanges:this.mediaBuffer=null,i&&this.setInterval(jg)}onSubtitleTrackLoaded(e,t){var s;const{currentTrackId:i,levels:r}=this,{details:a,id:o}=t;if(!r){this.warn(`Subtitle tracks were reset while loading level ${o}`);return}const l=r[i];if(o>=r.length||o!==i||!l)return;this.log(`Subtitle track ${o} loaded [${a.startSN},${a.endSN}]${a.lastPartSn?`[part-${a.lastPartSn}-${a.lastPartIndex}]`:""},duration:${a.totalduration}`),this.mediaBuffer=this.mediaBufferTimeRanges;let c=0;if(a.live||(s=l.details)!=null&&s.live){const d=this.mainDetails;if(a.deltaUpdateFailed||!d)return;const h=d.fragments[0];if(!l.details)a.hasProgramDateTime&&d.hasProgramDateTime?(kl(a,d),c=a.fragments[0].start):h&&(c=h.start,jd(a,c));else{var u;c=this.alignPlaylists(a,l.details,(u=this.levelLastLoaded)==null?void 0:u.details),c===0&&h&&(c=h.start,jd(a,c))}}l.details=a,this.levelLastLoaded=l,!this.startFragRequested&&(this.mainDetails||!a.live)&&this.setStartPosition(this.mainDetails||a,c),this.tick(),a.live&&!this.fragCurrent&&this.media&&this.state===re.IDLE&&(Dl(null,a.fragments,this.media.currentTime,0)||(this.warn("Subtitle playlist not aligned with playback"),l.details=void 0))}_handleFragmentLoadComplete(e){const{frag:t,payload:s}=e,i=t.decryptdata,r=this.hls;if(!this.fragContextChanged(t)&&s&&s.byteLength>0&&i!=null&&i.key&&i.iv&&i.method==="AES-128"){const a=performance.now();this.decrypter.decrypt(new Uint8Array(s),i.key.buffer,i.iv.buffer).catch(o=>{throw r.trigger(I.ERROR,{type:Oe.MEDIA_ERROR,details:te.FRAG_DECRYPT_ERROR,fatal:!1,error:o,reason:o.message,frag:t}),o}).then(o=>{const l=performance.now();r.trigger(I.FRAG_DECRYPTED,{frag:t,payload:o,stats:{tstart:a,tdecrypt:l}})}).catch(o=>{this.warn(`${o.name}: ${o.message}`),this.state=re.IDLE})}}doTick(){if(!this.media){this.state=re.IDLE;return}if(this.state===re.IDLE){const{currentTrackId:e,levels:t}=this,s=t==null?void 0:t[e];if(!s||!t.length||!s.details)return;const{config:i}=this,r=this.getLoadPosition(),a=ut.bufferedInfo(this.tracksBuffered[this.currentTrackId]||[],r,i.maxBufferHole),{end:o,len:l}=a,c=this.getFwdBufferInfo(this.media,Pe.MAIN),u=s.details,d=this.getMaxBufferLength(c==null?void 0:c.len)+u.levelTargetDuration;if(l>d)return;const h=u.fragments,f=h.length,p=u.edge;let m=null;const y=this.fragPrevious;if(o<p){const g=i.maxFragLookUpTolerance,v=o>p-g?0:g;m=Dl(y,h,Math.max(h[0].start,o),v),!m&&y&&y.start<h[0].start&&(m=h[0])}else m=h[f-1];if(!m)return;if(m=this.mapToInitFragWhenRequired(m),m.sn!=="initSegment"){const g=m.sn-u.startSN,v=h[g-1];v&&v.cc===m.cc&&this.fragmentTracker.getState(v)===Bt.NOT_LOADED&&(m=v)}this.fragmentTracker.getState(m)===Bt.NOT_LOADED&&this.loadFragment(m,s,o)}}getMaxBufferLength(e){const t=super.getMaxBufferLength();return e?Math.max(t,e):t}loadFragment(e,t,s){this.fragCurrent=e,e.sn==="initSegment"?this._loadInitSegment(e,t):(this.startFragRequested=!0,super.loadFragment(e,t,s))}get mediaBufferTimeRanges(){return new pF(this.tracksBuffered[this.currentTrackId]||[])}}class pF{constructor(e){this.buffered=void 0;const t=(s,i,r)=>{if(i=i>>>0,i>r-1)throw new DOMException(`Failed to execute '${s}' on 'TimeRanges': The index provided (${i}) is greater than the maximum bound (${r})`);return e[i][s]};this.buffered={get length(){return e.length},end(s){return t("end",s,e.length)},start(s){return t("start",s,e.length)}}}}class mF extends mf{constructor(e){super(e,"[subtitle-track-controller]"),this.media=null,this.tracks=[],this.groupIds=null,this.tracksInGroup=[],this.trackId=-1,this.currentTrack=null,this.selectDefaultTrack=!0,this.queuedDefaultTrack=-1,this.asyncPollTrackChange=()=>this.pollTrackChange(0),this.useTextTrackPolling=!1,this.subtitlePollingInterval=-1,this._subtitleDisplay=!0,this.onTextTracksChanged=()=>{if(this.useTextTrackPolling||self.clearInterval(this.subtitlePollingInterval),!this.media||!this.hls.config.renderTextTracksNatively)return;let t=null;const s=Jo(this.media.textTracks);for(let r=0;r<s.length;r++)if(s[r].mode==="hidden")t=s[r];else if(s[r].mode==="showing"){t=s[r];break}const i=this.findTrackForTextTrack(t);this.subtitleTrack!==i&&this.setSubtitleTrack(i)},this.registerListeners()}destroy(){this.unregisterListeners(),this.tracks.length=0,this.tracksInGroup.length=0,this.currentTrack=null,this.onTextTracksChanged=this.asyncPollTrackChange=null,super.destroy()}get subtitleDisplay(){return this._subtitleDisplay}set subtitleDisplay(e){this._subtitleDisplay=e,this.trackId>-1&&this.toggleTrackModes()}registerListeners(){const{hls:e}=this;e.on(I.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(I.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(I.MANIFEST_LOADING,this.onManifestLoading,this),e.on(I.MANIFEST_PARSED,this.onManifestParsed,this),e.on(I.LEVEL_LOADING,this.onLevelLoading,this),e.on(I.LEVEL_SWITCHING,this.onLevelSwitching,this),e.on(I.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),e.on(I.ERROR,this.onError,this)}unregisterListeners(){const{hls:e}=this;e.off(I.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(I.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(I.MANIFEST_LOADING,this.onManifestLoading,this),e.off(I.MANIFEST_PARSED,this.onManifestParsed,this),e.off(I.LEVEL_LOADING,this.onLevelLoading,this),e.off(I.LEVEL_SWITCHING,this.onLevelSwitching,this),e.off(I.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),e.off(I.ERROR,this.onError,this)}onMediaAttached(e,t){this.media=t.media,this.media&&(this.queuedDefaultTrack>-1&&(this.subtitleTrack=this.queuedDefaultTrack,this.queuedDefaultTrack=-1),this.useTextTrackPolling=!(this.media.textTracks&&"onchange"in this.media.textTracks),this.useTextTrackPolling?this.pollTrackChange(500):this.media.textTracks.addEventListener("change",this.asyncPollTrackChange))}pollTrackChange(e){self.clearInterval(this.subtitlePollingInterval),this.subtitlePollingInterval=self.setInterval(this.onTextTracksChanged,e)}onMediaDetaching(){if(!this.media)return;self.clearInterval(this.subtitlePollingInterval),this.useTextTrackPolling||this.media.textTracks.removeEventListener("change",this.asyncPollTrackChange),this.trackId>-1&&(this.queuedDefaultTrack=this.trackId),Jo(this.media.textTracks).forEach(t=>{Tr(t)}),this.subtitleTrack=-1,this.media=null}onManifestLoading(){this.tracks=[],this.groupIds=null,this.tracksInGroup=[],this.trackId=-1,this.currentTrack=null,this.selectDefaultTrack=!0}onManifestParsed(e,t){this.tracks=t.subtitleTracks}onSubtitleTrackLoaded(e,t){const{id:s,groupId:i,details:r}=t,a=this.tracksInGroup[s];if(!a||a.groupId!==i){this.warn(`Subtitle track with id:${s} and group:${i} not found in active group ${a==null?void 0:a.groupId}`);return}const o=a.details;a.details=t.details,this.log(`Subtitle track ${s} "${a.name}" lang:${a.lang} group:${i} loaded [${r.startSN}-${r.endSN}]`),s===this.trackId&&this.playlistLoaded(s,t,o)}onLevelLoading(e,t){this.switchLevel(t.level)}onLevelSwitching(e,t){this.switchLevel(t.level)}switchLevel(e){const t=this.hls.levels[e];if(!t)return;const s=t.subtitleGroups||null,i=this.groupIds;let r=this.currentTrack;if(!s||(i==null?void 0:i.length)!==(s==null?void 0:s.length)||s!=null&&s.some(a=>(i==null?void 0:i.indexOf(a))===-1)){this.groupIds=s,this.trackId=-1,this.currentTrack=null;const a=this.tracks.filter(u=>!s||s.indexOf(u.groupId)!==-1);if(a.length)this.selectDefaultTrack&&!a.some(u=>u.default)&&(this.selectDefaultTrack=!1),a.forEach((u,d)=>{u.id=d});else if(!r&&!this.tracksInGroup.length)return;this.tracksInGroup=a;const o=this.hls.config.subtitlePreference;if(!r&&o){this.selectDefaultTrack=!1;const u=mn(o,a);if(u>-1)r=a[u];else{const d=mn(o,this.tracks);r=this.tracks[d]}}let l=this.findTrackId(r);l===-1&&r&&(l=this.findTrackId(null));const c={subtitleTracks:a};this.log(`Updating subtitle tracks, ${a.length} track(s) found in "${s==null?void 0:s.join(",")}" group-id`),this.hls.trigger(I.SUBTITLE_TRACKS_UPDATED,c),l!==-1&&this.trackId===-1&&this.setSubtitleTrack(l)}else this.shouldReloadPlaylist(r)&&this.setSubtitleTrack(this.trackId)}findTrackId(e){const t=this.tracksInGroup,s=this.selectDefaultTrack;for(let i=0;i<t.length;i++){const r=t[i];if(!(s&&!r.default||!s&&!e)&&(!e||Rr(r,e)))return i}if(e){for(let i=0;i<t.length;i++){const r=t[i];if(Hr(e.attrs,r.attrs,["LANGUAGE","ASSOC-LANGUAGE","CHARACTERISTICS"]))return i}for(let i=0;i<t.length;i++){const r=t[i];if(Hr(e.attrs,r.attrs,["LANGUAGE"]))return i}}return-1}findTrackForTextTrack(e){if(e){const t=this.tracksInGroup;for(let s=0;s<t.length;s++){const i=t[s];if(Hd(i,e))return s}}return-1}onError(e,t){t.fatal||!t.context||t.context.type===Ye.SUBTITLE_TRACK&&t.context.id===this.trackId&&(!this.groupIds||this.groupIds.indexOf(t.context.groupId)!==-1)&&this.checkRetry(t)}get allSubtitleTracks(){return this.tracks}get subtitleTracks(){return this.tracksInGroup}get subtitleTrack(){return this.trackId}set subtitleTrack(e){this.selectDefaultTrack=!1,this.setSubtitleTrack(e)}setSubtitleOption(e){if(this.hls.config.subtitlePreference=e,e){const t=this.allSubtitleTracks;if(this.selectDefaultTrack=!1,t.length){const s=this.currentTrack;if(s&&Rr(e,s))return s;const i=mn(e,this.tracksInGroup);if(i>-1){const r=this.tracksInGroup[i];return this.setSubtitleTrack(i),r}else{if(s)return null;{const r=mn(e,t);if(r>-1)return t[r]}}}}return null}loadPlaylist(e){super.loadPlaylist();const t=this.currentTrack;if(this.shouldLoadPlaylist(t)&&t){const s=t.id,i=t.groupId;let r=t.url;if(e)try{r=e.addDirectives(r)}catch(a){this.warn(`Could not construct new URL with HLS Delivery Directives: ${a}`)}this.log(`Loading subtitle playlist for id ${s}`),this.hls.trigger(I.SUBTITLE_TRACK_LOADING,{url:r,id:s,groupId:i,deliveryDirectives:e||null})}}toggleTrackModes(){const{media:e}=this;if(!e)return;const t=Jo(e.textTracks),s=this.currentTrack;let i;if(s&&(i=t.filter(r=>Hd(s,r))[0],i||this.warn(`Unable to find subtitle TextTrack with name "${s.name}" and language "${s.lang}"`)),[].slice.call(t).forEach(r=>{r.mode!=="disabled"&&r!==i&&(r.mode="disabled")}),i){const r=this.subtitleDisplay?"showing":"hidden";i.mode!==r&&(i.mode=r)}}setSubtitleTrack(e){const t=this.tracksInGroup;if(!this.media){this.queuedDefaultTrack=e;return}if(e<-1||e>=t.length||!Se(e)){this.warn(`Invalid subtitle track id: ${e}`);return}this.clearTimer(),this.selectDefaultTrack=!1;const s=this.currentTrack,i=t[e]||null;if(this.trackId=e,this.currentTrack=i,this.toggleTrackModes(),!i){this.hls.trigger(I.SUBTITLE_TRACK_SWITCH,{id:e});return}const r=!!i.details&&!i.details.live;if(e===this.trackId&&i===s&&r)return;this.log(`Switching to subtitle-track ${e}`+(i?` "${i.name}" lang:${i.lang} group:${i.groupId}`:""));const{id:a,groupId:o="",name:l,type:c,url:u}=i;this.hls.trigger(I.SUBTITLE_TRACK_SWITCH,{id:a,groupId:o,name:l,type:c,url:u});const d=this.switchParams(i.url,s==null?void 0:s.details);this.loadPlaylist(d)}}class gF{constructor(e){this.buffers=void 0,this.queues={video:[],audio:[],audiovideo:[]},this.buffers=e}append(e,t,s){const i=this.queues[t];i.push(e),i.length===1&&!s&&this.executeNext(t)}insertAbort(e,t){this.queues[t].unshift(e),this.executeNext(t)}appendBlocker(e){let t;const s=new Promise(r=>{t=r}),i={execute:t,onStart:()=>{},onComplete:()=>{},onError:()=>{}};return this.append(i,e),s}executeNext(e){const t=this.queues[e];if(t.length){const s=t[0];try{s.execute()}catch(i){z.warn(`[buffer-operation-queue]: Exception executing "${e}" SourceBuffer operation: ${i}`),s.onError(i);const r=this.buffers[e];r!=null&&r.updating||this.shiftAndExecuteNext(e)}}}shiftAndExecuteNext(e){this.queues[e].shift(),this.executeNext(e)}current(e){return this.queues[e][0]}}const Gg=/(avc[1234]|hvc1|hev1|dvh[1e]|vp09|av01)(?:\.[^.,]+)+/;class yF{constructor(e){this.details=null,this._objectUrl=null,this.operationQueue=void 0,this.listeners=void 0,this.hls=void 0,this.bufferCodecEventsExpected=0,this._bufferCodecEventsTotal=0,this.media=null,this.mediaSource=null,this.lastMpegAudioChunk=null,this.appendSource=void 0,this.appendErrors={audio:0,video:0,audiovideo:0},this.tracks={},this.pendingTracks={},this.sourceBuffer=void 0,this.log=void 0,this.warn=void 0,this.error=void 0,this._onEndStreaming=s=>{this.hls&&this.hls.pauseBuffering()},this._onStartStreaming=s=>{this.hls&&this.hls.resumeBuffering()},this._onMediaSourceOpen=()=>{const{media:s,mediaSource:i}=this;this.log("Media source opened"),s&&(s.removeEventListener("emptied",this._onMediaEmptied),this.updateMediaElementDuration(),this.hls.trigger(I.MEDIA_ATTACHED,{media:s,mediaSource:i})),i&&i.removeEventListener("sourceopen",this._onMediaSourceOpen),this.checkPendingTracks()},this._onMediaSourceClose=()=>{this.log("Media source closed")},this._onMediaSourceEnded=()=>{this.log("Media source ended")},this._onMediaEmptied=()=>{const{mediaSrc:s,_objectUrl:i}=this;s!==i&&z.error(`Media element src was set while attaching MediaSource (${i} > ${s})`)},this.hls=e;const t="[buffer-controller]";this.appendSource=e.config.preferManagedMediaSource&&typeof self<"u"&&self.ManagedMediaSource,this.log=z.log.bind(z,t),this.warn=z.warn.bind(z,t),this.error=z.error.bind(z,t),this._initSourceBuffer(),this.registerListeners()}hasSourceTypes(){return this.getSourceBufferTypes().length>0||Object.keys(this.pendingTracks).length>0}destroy(){this.unregisterListeners(),this.details=null,this.lastMpegAudioChunk=null,this.hls=null}registerListeners(){const{hls:e}=this;e.on(I.MEDIA_ATTACHING,this.onMediaAttaching,this),e.on(I.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(I.MANIFEST_LOADING,this.onManifestLoading,this),e.on(I.MANIFEST_PARSED,this.onManifestParsed,this),e.on(I.BUFFER_RESET,this.onBufferReset,this),e.on(I.BUFFER_APPENDING,this.onBufferAppending,this),e.on(I.BUFFER_CODECS,this.onBufferCodecs,this),e.on(I.BUFFER_EOS,this.onBufferEos,this),e.on(I.BUFFER_FLUSHING,this.onBufferFlushing,this),e.on(I.LEVEL_UPDATED,this.onLevelUpdated,this),e.on(I.FRAG_PARSED,this.onFragParsed,this),e.on(I.FRAG_CHANGED,this.onFragChanged,this)}unregisterListeners(){const{hls:e}=this;e.off(I.MEDIA_ATTACHING,this.onMediaAttaching,this),e.off(I.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(I.MANIFEST_LOADING,this.onManifestLoading,this),e.off(I.MANIFEST_PARSED,this.onManifestParsed,this),e.off(I.BUFFER_RESET,this.onBufferReset,this),e.off(I.BUFFER_APPENDING,this.onBufferAppending,this),e.off(I.BUFFER_CODECS,this.onBufferCodecs,this),e.off(I.BUFFER_EOS,this.onBufferEos,this),e.off(I.BUFFER_FLUSHING,this.onBufferFlushing,this),e.off(I.LEVEL_UPDATED,this.onLevelUpdated,this),e.off(I.FRAG_PARSED,this.onFragParsed,this),e.off(I.FRAG_CHANGED,this.onFragChanged,this)}_initSourceBuffer(){this.sourceBuffer={},this.operationQueue=new gF(this.sourceBuffer),this.listeners={audio:[],video:[],audiovideo:[]},this.appendErrors={audio:0,video:0,audiovideo:0},this.lastMpegAudioChunk=null}onManifestLoading(){this.bufferCodecEventsExpected=this._bufferCodecEventsTotal=0,this.details=null}onManifestParsed(e,t){let s=2;(t.audio&&!t.video||!t.altAudio)&&(s=1),this.bufferCodecEventsExpected=this._bufferCodecEventsTotal=s,this.log(`${this.bufferCodecEventsExpected} bufferCodec event(s) expected`)}onMediaAttaching(e,t){const s=this.media=t.media,i=Zr(this.appendSource);if(s&&i){var r;const a=this.mediaSource=new i;this.log(`created media source: ${(r=a.constructor)==null?void 0:r.name}`),a.addEventListener("sourceopen",this._onMediaSourceOpen),a.addEventListener("sourceended",this._onMediaSourceEnded),a.addEventListener("sourceclose",this._onMediaSourceClose),this.appendSource&&(a.addEventListener("startstreaming",this._onStartStreaming),a.addEventListener("endstreaming",this._onEndStreaming));const o=this._objectUrl=self.URL.createObjectURL(a);if(this.appendSource)try{s.removeAttribute("src");const l=self.ManagedMediaSource;s.disableRemotePlayback=s.disableRemotePlayback||l&&a instanceof l,Vg(s),vF(s,o),s.load()}catch{s.src=o}else s.src=o;s.addEventListener("emptied",this._onMediaEmptied)}}onMediaDetaching(){const{media:e,mediaSource:t,_objectUrl:s}=this;if(t){if(this.log("media source detaching"),t.readyState==="open")try{t.endOfStream()}catch(i){this.warn(`onMediaDetaching: ${i.message} while calling endOfStream`)}this.onBufferReset(),t.removeEventListener("sourceopen",this._onMediaSourceOpen),t.removeEventListener("sourceended",this._onMediaSourceEnded),t.removeEventListener("sourceclose",this._onMediaSourceClose),this.appendSource&&(t.removeEventListener("startstreaming",this._onStartStreaming),t.removeEventListener("endstreaming",this._onEndStreaming)),e&&(e.removeEventListener("emptied",this._onMediaEmptied),s&&self.URL.revokeObjectURL(s),this.mediaSrc===s?(e.removeAttribute("src"),this.appendSource&&Vg(e),e.load()):this.warn("media|source.src was changed by a third party - skip cleanup")),this.mediaSource=null,this.media=null,this._objectUrl=null,this.bufferCodecEventsExpected=this._bufferCodecEventsTotal,this.pendingTracks={},this.tracks={}}this.hls.trigger(I.MEDIA_DETACHED,void 0)}onBufferReset(){this.getSourceBufferTypes().forEach(e=>{this.resetBuffer(e)}),this._initSourceBuffer()}resetBuffer(e){const t=this.sourceBuffer[e];try{if(t){var s;this.removeBufferListeners(e),this.sourceBuffer[e]=void 0,(s=this.mediaSource)!=null&&s.sourceBuffers.length&&this.mediaSource.removeSourceBuffer(t)}}catch(i){this.warn(`onBufferReset ${e}`,i)}}onBufferCodecs(e,t){const s=this.getSourceBufferTypes().length,i=Object.keys(t);if(i.forEach(a=>{if(s){const l=this.tracks[a];if(l&&typeof l.buffer.changeType=="function"){var o;const{id:c,codec:u,levelCodec:d,container:h,metadata:f}=t[a],p=dg(l.codec,l.levelCodec),m=p==null?void 0:p.replace(Gg,"$1");let y=dg(u,d);const g=(o=y)==null?void 0:o.replace(Gg,"$1");if(y&&m!==g){a.slice(0,5)==="audio"&&(y=wl(y,this.appendSource));const v=`${h};codecs=${y}`;this.appendChangeType(a,v),this.log(`switching codec ${p} to ${y}`),this.tracks[a]={buffer:l.buffer,codec:u,container:h,levelCodec:d,metadata:f,id:c}}}}else this.pendingTracks[a]=t[a]}),s)return;const r=Math.max(this.bufferCodecEventsExpected-1,0);this.bufferCodecEventsExpected!==r&&(this.log(`${r} bufferCodec event(s) expected ${i.join(",")}`),this.bufferCodecEventsExpected=r),this.mediaSource&&this.mediaSource.readyState==="open"&&this.checkPendingTracks()}appendChangeType(e,t){const{operationQueue:s}=this,i={execute:()=>{const r=this.sourceBuffer[e];r&&(this.log(`changing ${e} sourceBuffer type to ${t}`),r.changeType(t)),s.shiftAndExecuteNext(e)},onStart:()=>{},onComplete:()=>{},onError:r=>{this.warn(`Failed to change ${e} SourceBuffer type`,r)}};s.append(i,e,!!this.pendingTracks[e])}onBufferAppending(e,t){const{hls:s,operationQueue:i,tracks:r}=this,{data:a,type:o,frag:l,part:c,chunkMeta:u}=t,d=u.buffering[o],h=self.performance.now();d.start=h;const f=l.stats.buffering,p=c?c.stats.buffering:null;f.start===0&&(f.start=h),p&&p.start===0&&(p.start=h);const m=r.audio;let y=!1;o==="audio"&&(m==null?void 0:m.container)==="audio/mpeg"&&(y=!this.lastMpegAudioChunk||u.id===1||this.lastMpegAudioChunk.sn!==u.sn,this.lastMpegAudioChunk=u);const g=l.start,v={execute:()=>{if(d.executeStart=self.performance.now(),y){const E=this.sourceBuffer[o];if(E){const T=g-E.timestampOffset;Math.abs(T)>=.1&&(this.log(`Updating audio SourceBuffer timestampOffset to ${g} (delta: ${T}) sn: ${l.sn})`),E.timestampOffset=g)}}this.appendExecutor(a,o)},onStart:()=>{},onComplete:()=>{const E=self.performance.now();d.executeEnd=d.end=E,f.first===0&&(f.first=E),p&&p.first===0&&(p.first=E);const{sourceBuffer:T}=this,b={};for(const L in T)b[L]=ut.getBuffered(T[L]);this.appendErrors[o]=0,o==="audio"||o==="video"?this.appendErrors.audiovideo=0:(this.appendErrors.audio=0,this.appendErrors.video=0),this.hls.trigger(I.BUFFER_APPENDED,{type:o,frag:l,part:c,chunkMeta:u,parent:l.type,timeRanges:b})},onError:E=>{const T={type:Oe.MEDIA_ERROR,parent:l.type,details:te.BUFFER_APPEND_ERROR,sourceBufferName:o,frag:l,part:c,chunkMeta:u,error:E,err:E,fatal:!1};if(E.code===DOMException.QUOTA_EXCEEDED_ERR)T.details=te.BUFFER_FULL_ERROR;else{const b=++this.appendErrors[o];T.details=te.BUFFER_APPEND_ERROR,this.warn(`Failed ${b}/${s.config.appendErrorMaxRetry} times to append segment in "${o}" sourceBuffer`),b>=s.config.appendErrorMaxRetry&&(T.fatal=!0)}s.trigger(I.ERROR,T)}};i.append(v,o,!!this.pendingTracks[o])}onBufferFlushing(e,t){const{operationQueue:s}=this,i=r=>({execute:this.removeExecutor.bind(this,r,t.startOffset,t.endOffset),onStart:()=>{},onComplete:()=>{this.hls.trigger(I.BUFFER_FLUSHED,{type:r})},onError:a=>{this.warn(`Failed to remove from ${r} SourceBuffer`,a)}});t.type?s.append(i(t.type),t.type):this.getSourceBufferTypes().forEach(r=>{s.append(i(r),r)})}onFragParsed(e,t){const{frag:s,part:i}=t,r=[],a=i?i.elementaryStreams:s.elementaryStreams;a[st.AUDIOVIDEO]?r.push("audiovideo"):(a[st.AUDIO]&&r.push("audio"),a[st.VIDEO]&&r.push("video"));const o=()=>{const l=self.performance.now();s.stats.buffering.end=l,i&&(i.stats.buffering.end=l);const c=i?i.stats:s.stats;this.hls.trigger(I.FRAG_BUFFERED,{frag:s,part:i,stats:c,id:s.type})};r.length===0&&this.warn(`Fragments must have at least one ElementaryStreamType set. type: ${s.type} level: ${s.level} sn: ${s.sn}`),this.blockBuffers(o,r)}onFragChanged(e,t){this.trimBuffers()}onBufferEos(e,t){this.getSourceBufferTypes().reduce((i,r)=>{const a=this.sourceBuffer[r];return a&&(!t.type||t.type===r)&&(a.ending=!0,a.ended||(a.ended=!0,this.log(`${r} sourceBuffer now EOS`))),i&&!!(!a||a.ended)},!0)&&(this.log("Queueing mediaSource.endOfStream()"),this.blockBuffers(()=>{this.getSourceBufferTypes().forEach(r=>{const a=this.sourceBuffer[r];a&&(a.ending=!1)});const{mediaSource:i}=this;if(!i||i.readyState!=="open"){i&&this.log(`Could not call mediaSource.endOfStream(). mediaSource.readyState: ${i.readyState}`);return}this.log("Calling mediaSource.endOfStream()"),i.endOfStream()}))}onLevelUpdated(e,{details:t}){t.fragments.length&&(this.details=t,this.getSourceBufferTypes().length?this.blockBuffers(this.updateMediaElementDuration.bind(this)):this.updateMediaElementDuration())}trimBuffers(){const{hls:e,details:t,media:s}=this;if(!s||t===null||!this.getSourceBufferTypes().length)return;const r=e.config,a=s.currentTime,o=t.levelTargetDuration,l=t.live&&r.liveBackBufferLength!==null?r.liveBackBufferLength:r.backBufferLength;if(Se(l)&&l>0){const c=Math.max(l,o),u=Math.floor(a/o)*o-c;this.flushBackBuffer(a,o,u)}if(Se(r.frontBufferFlushThreshold)&&r.frontBufferFlushThreshold>0){const c=Math.max(r.maxBufferLength,r.frontBufferFlushThreshold),u=Math.max(c,o),d=Math.floor(a/o)*o+u;this.flushFrontBuffer(a,o,d)}}flushBackBuffer(e,t,s){const{details:i,sourceBuffer:r}=this;this.getSourceBufferTypes().forEach(o=>{const l=r[o];if(l){const c=ut.getBuffered(l);if(c.length>0&&s>c.start(0)){if(this.hls.trigger(I.BACK_BUFFER_REACHED,{bufferEnd:s}),i!=null&&i.live)this.hls.trigger(I.LIVE_BACK_BUFFER_REACHED,{bufferEnd:s});else if(l.ended&&c.end(c.length-1)-e<t*2){this.log(`Cannot flush ${o} back buffer while SourceBuffer is in ended state`);return}this.hls.trigger(I.BUFFER_FLUSHING,{startOffset:0,endOffset:s,type:o})}}})}flushFrontBuffer(e,t,s){const{sourceBuffer:i}=this;this.getSourceBufferTypes().forEach(a=>{const o=i[a];if(o){const l=ut.getBuffered(o),c=l.length;if(c<2)return;const u=l.start(c-1),d=l.end(c-1);if(s>u||e>=u&&e<=d)return;if(o.ended&&e-d<2*t){this.log(`Cannot flush ${a} front buffer while SourceBuffer is in ended state`);return}this.hls.trigger(I.BUFFER_FLUSHING,{startOffset:u,endOffset:1/0,type:a})}})}updateMediaElementDuration(){if(!this.details||!this.media||!this.mediaSource||this.mediaSource.readyState!=="open")return;const{details:e,hls:t,media:s,mediaSource:i}=this,r=e.fragments[0].start+e.totalduration,a=s.duration,o=Se(i.duration)?i.duration:0;e.live&&t.config.liveDurationInfinity?(i.duration=1/0,this.updateSeekableRange(e)):(r>o&&r>a||!Se(a))&&(this.log(`Updating Media Source duration to ${r.toFixed(3)}`),i.duration=r)}updateSeekableRange(e){const t=this.mediaSource,s=e.fragments;if(s.length&&e.live&&t!=null&&t.setLiveSeekableRange){const r=Math.max(0,s[0].start),a=Math.max(r,r+e.totalduration);this.log(`Media Source duration is set to ${t.duration}. Setting seekable range to ${r}-${a}.`),t.setLiveSeekableRange(r,a)}}checkPendingTracks(){const{bufferCodecEventsExpected:e,operationQueue:t,pendingTracks:s}=this,i=Object.keys(s).length;if(i&&(!e||i===2||"audiovideo"in s)){this.createSourceBuffers(s),this.pendingTracks={};const r=this.getSourceBufferTypes();if(r.length)this.hls.trigger(I.BUFFER_CREATED,{tracks:this.tracks}),r.forEach(a=>{t.executeNext(a)});else{const a=new Error("could not create source buffer for media codec(s)");this.hls.trigger(I.ERROR,{type:Oe.MEDIA_ERROR,details:te.BUFFER_INCOMPATIBLE_CODECS_ERROR,fatal:!0,error:a,reason:a.message})}}}createSourceBuffers(e){const{sourceBuffer:t,mediaSource:s}=this;if(!s)throw Error("createSourceBuffers called when mediaSource was null");for(const i in e)if(!t[i]){const r=e[i];if(!r)throw Error(`source buffer exists for track ${i}, however track does not`);let a=r.levelCodec||r.codec;a&&i.slice(0,5)==="audio"&&(a=wl(a,this.appendSource));const o=`${r.container};codecs=${a}`;this.log(`creating sourceBuffer(${o})`);try{const l=t[i]=s.addSourceBuffer(o),c=i;this.addBufferListener(c,"updatestart",this._onSBUpdateStart),this.addBufferListener(c,"updateend",this._onSBUpdateEnd),this.addBufferListener(c,"error",this._onSBUpdateError),this.appendSource&&this.addBufferListener(c,"bufferedchange",(u,d)=>{const h=d.removedRanges;h!=null&&h.length&&this.hls.trigger(I.BUFFER_FLUSHED,{type:i})}),this.tracks[i]={buffer:l,codec:a,container:r.container,levelCodec:r.levelCodec,metadata:r.metadata,id:r.id}}catch(l){this.error(`error while trying to add sourceBuffer: ${l.message}`),this.hls.trigger(I.ERROR,{type:Oe.MEDIA_ERROR,details:te.BUFFER_ADD_CODEC_ERROR,fatal:!1,error:l,sourceBufferName:i,mimeType:o})}}}get mediaSrc(){var e;const t=((e=this.media)==null?void 0:e.firstChild)||this.media;return t==null?void 0:t.src}_onSBUpdateStart(e){const{operationQueue:t}=this;t.current(e).onStart()}_onSBUpdateEnd(e){var t;if(((t=this.mediaSource)==null?void 0:t.readyState)==="closed"){this.resetBuffer(e);return}const{operationQueue:s}=this;s.current(e).onComplete(),s.shiftAndExecuteNext(e)}_onSBUpdateError(e,t){var s;const i=new Error(`${e} SourceBuffer error. MediaSource readyState: ${(s=this.mediaSource)==null?void 0:s.readyState}`);this.error(`${i}`,t),this.hls.trigger(I.ERROR,{type:Oe.MEDIA_ERROR,details:te.BUFFER_APPENDING_ERROR,sourceBufferName:e,error:i,fatal:!1});const r=this.operationQueue.current(e);r&&r.onError(i)}removeExecutor(e,t,s){const{media:i,mediaSource:r,operationQueue:a,sourceBuffer:o}=this,l=o[e];if(!i||!r||!l){this.warn(`Attempting to remove from the ${e} SourceBuffer, but it does not exist`),a.shiftAndExecuteNext(e);return}const c=Se(i.duration)?i.duration:1/0,u=Se(r.duration)?r.duration:1/0,d=Math.max(0,t),h=Math.min(s,c,u);h>d&&(!l.ending||l.ended)?(l.ended=!1,this.log(`Removing [${d},${h}] from the ${e} SourceBuffer`),l.remove(d,h)):a.shiftAndExecuteNext(e)}appendExecutor(e,t){const s=this.sourceBuffer[t];if(!s){if(!this.pendingTracks[t])throw new Error(`Attempting to append to the ${t} SourceBuffer, but it does not exist`);return}s.ended=!1,s.appendBuffer(e)}blockBuffers(e,t=this.getSourceBufferTypes()){if(!t.length){this.log("Blocking operation requested, but no SourceBuffers exist"),Promise.resolve().then(e);return}const{operationQueue:s}=this,i=t.map(r=>s.appendBlocker(r));Promise.all(i).then(()=>{e(),t.forEach(r=>{const a=this.sourceBuffer[r];a!=null&&a.updating||s.shiftAndExecuteNext(r)})})}getSourceBufferTypes(){return Object.keys(this.sourceBuffer)}addBufferListener(e,t,s){const i=this.sourceBuffer[e];if(!i)return;const r=s.bind(this,e);this.listeners[e].push({event:t,listener:r}),i.addEventListener(t,r)}removeBufferListeners(e){const t=this.sourceBuffer[e];t&&this.listeners[e].forEach(s=>{t.removeEventListener(s.event,s.listener)})}}function Vg(n){const e=n.querySelectorAll("source");[].slice.call(e).forEach(t=>{n.removeChild(t)})}function vF(n,e){const t=self.document.createElement("source");t.type="video/mp4",t.src=e,n.appendChild(t)}const Hg={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,128:174,129:176,130:189,131:191,132:8482,133:162,134:163,135:9834,136:224,137:32,138:232,139:226,140:234,141:238,142:244,143:251,144:193,145:201,146:211,147:218,148:220,149:252,150:8216,151:161,152:42,153:8217,154:9473,155:169,156:8480,157:8226,158:8220,159:8221,160:192,161:194,162:199,163:200,164:202,165:203,166:235,167:206,168:207,169:239,170:212,171:217,172:249,173:219,174:171,175:187,176:195,177:227,178:205,179:204,180:236,181:210,182:242,183:213,184:245,185:123,186:125,187:92,188:94,189:95,190:124,191:8764,192:196,193:228,194:214,195:246,196:223,197:165,198:164,199:9475,200:197,201:229,202:216,203:248,204:9487,205:9491,206:9495,207:9499},tT=function(e){let t=e;return Hg.hasOwnProperty(e)&&(t=Hg[e]),String.fromCharCode(t)},$s=15,Ln=100,EF={17:1,18:3,21:5,22:7,23:9,16:11,19:12,20:14},TF={17:2,18:4,21:6,22:8,23:10,19:13,20:15},bF={25:1,26:3,29:5,30:7,31:9,24:11,27:12,28:14},xF={25:2,26:4,29:6,30:8,31:10,27:13,28:15},SF=["white","green","blue","cyan","red","yellow","magenta","black","transparent"];class _F{constructor(){this.time=null,this.verboseLevel=0}log(e,t){if(this.verboseLevel>=e){const s=typeof t=="function"?t():t;z.log(`${this.time} [${e}] ${s}`)}}}const Ri=function(e){const t=[];for(let s=0;s<e.length;s++)t.push(e[s].toString(16));return t};class sT{constructor(){this.foreground="white",this.underline=!1,this.italics=!1,this.background="black",this.flash=!1}reset(){this.foreground="white",this.underline=!1,this.italics=!1,this.background="black",this.flash=!1}setStyles(e){const t=["foreground","underline","italics","background","flash"];for(let s=0;s<t.length;s++){const i=t[s];e.hasOwnProperty(i)&&(this[i]=e[i])}}isDefault(){return this.foreground==="white"&&!this.underline&&!this.italics&&this.background==="black"&&!this.flash}equals(e){return this.foreground===e.foreground&&this.underline===e.underline&&this.italics===e.italics&&this.background===e.background&&this.flash===e.flash}copy(e){this.foreground=e.foreground,this.underline=e.underline,this.italics=e.italics,this.background=e.background,this.flash=e.flash}toString(){return"color="+this.foreground+", underline="+this.underline+", italics="+this.italics+", background="+this.background+", flash="+this.flash}}class AF{constructor(){this.uchar=" ",this.penState=new sT}reset(){this.uchar=" ",this.penState.reset()}setChar(e,t){this.uchar=e,this.penState.copy(t)}setPenState(e){this.penState.copy(e)}equals(e){return this.uchar===e.uchar&&this.penState.equals(e.penState)}copy(e){this.uchar=e.uchar,this.penState.copy(e.penState)}isEmpty(){return this.uchar===" "&&this.penState.isDefault()}}class LF{constructor(e){this.chars=[],this.pos=0,this.currPenState=new sT,this.cueStartTime=null,this.logger=void 0;for(let t=0;t<Ln;t++)this.chars.push(new AF);this.logger=e}equals(e){for(let t=0;t<Ln;t++)if(!this.chars[t].equals(e.chars[t]))return!1;return!0}copy(e){for(let t=0;t<Ln;t++)this.chars[t].copy(e.chars[t])}isEmpty(){let e=!0;for(let t=0;t<Ln;t++)if(!this.chars[t].isEmpty()){e=!1;break}return e}setCursor(e){this.pos!==e&&(this.pos=e),this.pos<0?(this.logger.log(3,"Negative cursor position "+this.pos),this.pos=0):this.pos>Ln&&(this.logger.log(3,"Too large cursor position "+this.pos),this.pos=Ln)}moveCursor(e){const t=this.pos+e;if(e>1)for(let s=this.pos+1;s<t+1;s++)this.chars[s].setPenState(this.currPenState);this.setCursor(t)}backSpace(){this.moveCursor(-1),this.chars[this.pos].setChar(" ",this.currPenState)}insertChar(e){e>=144&&this.backSpace();const t=tT(e);if(this.pos>=Ln){this.logger.log(0,()=>"Cannot insert "+e.toString(16)+" ("+t+") at position "+this.pos+". Skipping it!");return}this.chars[this.pos].setChar(t,this.currPenState),this.moveCursor(1)}clearFromPos(e){let t;for(t=e;t<Ln;t++)this.chars[t].reset()}clear(){this.clearFromPos(0),this.pos=0,this.currPenState.reset()}clearToEndOfRow(){this.clearFromPos(this.pos)}getTextString(){const e=[];let t=!0;for(let s=0;s<Ln;s++){const i=this.chars[s].uchar;i!==" "&&(t=!1),e.push(i)}return t?"":e.join("")}setPenStyles(e){this.currPenState.setStyles(e),this.chars[this.pos].setPenState(this.currPenState)}}class cu{constructor(e){this.rows=[],this.currRow=$s-1,this.nrRollUpRows=null,this.lastOutputScreen=null,this.logger=void 0;for(let t=0;t<$s;t++)this.rows.push(new LF(e));this.logger=e}reset(){for(let e=0;e<$s;e++)this.rows[e].clear();this.currRow=$s-1}equals(e){let t=!0;for(let s=0;s<$s;s++)if(!this.rows[s].equals(e.rows[s])){t=!1;break}return t}copy(e){for(let t=0;t<$s;t++)this.rows[t].copy(e.rows[t])}isEmpty(){let e=!0;for(let t=0;t<$s;t++)if(!this.rows[t].isEmpty()){e=!1;break}return e}backSpace(){this.rows[this.currRow].backSpace()}clearToEndOfRow(){this.rows[this.currRow].clearToEndOfRow()}insertChar(e){this.rows[this.currRow].insertChar(e)}setPen(e){this.rows[this.currRow].setPenStyles(e)}moveCursor(e){this.rows[this.currRow].moveCursor(e)}setCursor(e){this.logger.log(2,"setCursor: "+e),this.rows[this.currRow].setCursor(e)}setPAC(e){this.logger.log(2,()=>"pacData = "+JSON.stringify(e));let t=e.row-1;if(this.nrRollUpRows&&t<this.nrRollUpRows-1&&(t=this.nrRollUpRows-1),this.nrRollUpRows&&this.currRow!==t){for(let o=0;o<$s;o++)this.rows[o].clear();const r=this.currRow+1-this.nrRollUpRows,a=this.lastOutputScreen;if(a){const o=a.rows[r].cueStartTime,l=this.logger.time;if(o!==null&&l!==null&&o<l)for(let c=0;c<this.nrRollUpRows;c++)this.rows[t-this.nrRollUpRows+c+1].copy(a.rows[r+c])}}this.currRow=t;const s=this.rows[this.currRow];if(e.indent!==null){const r=e.indent,a=Math.max(r-1,0);s.setCursor(e.indent),e.color=s.chars[a].penState.foreground}const i={foreground:e.color,underline:e.underline,italics:e.italics,background:"black",flash:!1};this.setPen(i)}setBkgData(e){this.logger.log(2,()=>"bkgData = "+JSON.stringify(e)),this.backSpace(),this.setPen(e),this.insertChar(32)}setRollUpRows(e){this.nrRollUpRows=e}rollUp(){if(this.nrRollUpRows===null){this.logger.log(3,"roll_up but nrRollUpRows not set yet");return}this.logger.log(1,()=>this.getDisplayText());const e=this.currRow+1-this.nrRollUpRows,t=this.rows.splice(e,1)[0];t.clear(),this.rows.splice(this.currRow,0,t),this.logger.log(2,"Rolling up")}getDisplayText(e){e=e||!1;const t=[];let s="",i=-1;for(let r=0;r<$s;r++){const a=this.rows[r].getTextString();a&&(i=r+1,e?t.push("Row "+i+": '"+a+"'"):t.push(a.trim()))}return t.length>0&&(e?s="["+t.join(" | ")+"]":s=t.join(`
`)),s}getTextAndFormat(){return this.rows}}class Kg{constructor(e,t,s){this.chNr=void 0,this.outputFilter=void 0,this.mode=void 0,this.verbose=void 0,this.displayedMemory=void 0,this.nonDisplayedMemory=void 0,this.lastOutputScreen=void 0,this.currRollUpRow=void 0,this.writeScreen=void 0,this.cueStartTime=void 0,this.logger=void 0,this.chNr=e,this.outputFilter=t,this.mode=null,this.verbose=0,this.displayedMemory=new cu(s),this.nonDisplayedMemory=new cu(s),this.lastOutputScreen=new cu(s),this.currRollUpRow=this.displayedMemory.rows[$s-1],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null,this.logger=s}reset(){this.mode=null,this.displayedMemory.reset(),this.nonDisplayedMemory.reset(),this.lastOutputScreen.reset(),this.outputFilter.reset(),this.currRollUpRow=this.displayedMemory.rows[$s-1],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null}getHandler(){return this.outputFilter}setHandler(e){this.outputFilter=e}setPAC(e){this.writeScreen.setPAC(e)}setBkgData(e){this.writeScreen.setBkgData(e)}setMode(e){e!==this.mode&&(this.mode=e,this.logger.log(2,()=>"MODE="+e),this.mode==="MODE_POP-ON"?this.writeScreen=this.nonDisplayedMemory:(this.writeScreen=this.displayedMemory,this.writeScreen.reset()),this.mode!=="MODE_ROLL-UP"&&(this.displayedMemory.nrRollUpRows=null,this.nonDisplayedMemory.nrRollUpRows=null),this.mode=e)}insertChars(e){for(let s=0;s<e.length;s++)this.writeScreen.insertChar(e[s]);const t=this.writeScreen===this.displayedMemory?"DISP":"NON_DISP";this.logger.log(2,()=>t+": "+this.writeScreen.getDisplayText(!0)),(this.mode==="MODE_PAINT-ON"||this.mode==="MODE_ROLL-UP")&&(this.logger.log(1,()=>"DISPLAYED: "+this.displayedMemory.getDisplayText(!0)),this.outputDataUpdate())}ccRCL(){this.logger.log(2,"RCL - Resume Caption Loading"),this.setMode("MODE_POP-ON")}ccBS(){this.logger.log(2,"BS - BackSpace"),this.mode!=="MODE_TEXT"&&(this.writeScreen.backSpace(),this.writeScreen===this.displayedMemory&&this.outputDataUpdate())}ccAOF(){}ccAON(){}ccDER(){this.logger.log(2,"DER- Delete to End of Row"),this.writeScreen.clearToEndOfRow(),this.outputDataUpdate()}ccRU(e){this.logger.log(2,"RU("+e+") - Roll Up"),this.writeScreen=this.displayedMemory,this.setMode("MODE_ROLL-UP"),this.writeScreen.setRollUpRows(e)}ccFON(){this.logger.log(2,"FON - Flash On"),this.writeScreen.setPen({flash:!0})}ccRDC(){this.logger.log(2,"RDC - Resume Direct Captioning"),this.setMode("MODE_PAINT-ON")}ccTR(){this.logger.log(2,"TR"),this.setMode("MODE_TEXT")}ccRTD(){this.logger.log(2,"RTD"),this.setMode("MODE_TEXT")}ccEDM(){this.logger.log(2,"EDM - Erase Displayed Memory"),this.displayedMemory.reset(),this.outputDataUpdate(!0)}ccCR(){this.logger.log(2,"CR - Carriage Return"),this.writeScreen.rollUp(),this.outputDataUpdate(!0)}ccENM(){this.logger.log(2,"ENM - Erase Non-displayed Memory"),this.nonDisplayedMemory.reset()}ccEOC(){if(this.logger.log(2,"EOC - End Of Caption"),this.mode==="MODE_POP-ON"){const e=this.displayedMemory;this.displayedMemory=this.nonDisplayedMemory,this.nonDisplayedMemory=e,this.writeScreen=this.nonDisplayedMemory,this.logger.log(1,()=>"DISP: "+this.displayedMemory.getDisplayText())}this.outputDataUpdate(!0)}ccTO(e){this.logger.log(2,"TO("+e+") - Tab Offset"),this.writeScreen.moveCursor(e)}ccMIDROW(e){const t={flash:!1};if(t.underline=e%2===1,t.italics=e>=46,t.italics)t.foreground="white";else{const s=Math.floor(e/2)-16,i=["white","green","blue","cyan","red","yellow","magenta"];t.foreground=i[s]}this.logger.log(2,"MIDROW: "+JSON.stringify(t)),this.writeScreen.setPen(t)}outputDataUpdate(e=!1){const t=this.logger.time;t!==null&&this.outputFilter&&(this.cueStartTime===null&&!this.displayedMemory.isEmpty()?this.cueStartTime=t:this.displayedMemory.equals(this.lastOutputScreen)||(this.outputFilter.newCue(this.cueStartTime,t,this.lastOutputScreen),e&&this.outputFilter.dispatchCue&&this.outputFilter.dispatchCue(),this.cueStartTime=this.displayedMemory.isEmpty()?null:t),this.lastOutputScreen.copy(this.displayedMemory))}cueSplitAtTime(e){this.outputFilter&&(this.displayedMemory.isEmpty()||(this.outputFilter.newCue&&this.outputFilter.newCue(this.cueStartTime,e,this.displayedMemory),this.cueStartTime=e))}}class Wg{constructor(e,t,s){this.channels=void 0,this.currentChannel=0,this.cmdHistory=Yg(),this.logger=void 0;const i=this.logger=new _F;this.channels=[null,new Kg(e,t,i),new Kg(e+1,s,i)]}getHandler(e){return this.channels[e].getHandler()}setHandler(e,t){this.channels[e].setHandler(t)}addData(e,t){let s,i,r,a=!1;this.logger.time=e;for(let o=0;o<t.length;o+=2)if(i=t[o]&127,r=t[o+1]&127,!(i===0&&r===0)){if(this.logger.log(3,"["+Ri([t[o],t[o+1]])+"] -> ("+Ri([i,r])+")"),s=this.parseCmd(i,r),s||(s=this.parseMidrow(i,r)),s||(s=this.parsePAC(i,r)),s||(s=this.parseBackgroundAttributes(i,r)),!s&&(a=this.parseChars(i,r),a)){const l=this.currentChannel;l&&l>0?this.channels[l].insertChars(a):this.logger.log(2,"No channel found yet. TEXT-MODE?")}!s&&!a&&this.logger.log(2,"Couldn't parse cleaned data "+Ri([i,r])+" orig: "+Ri([t[o],t[o+1]]))}}parseCmd(e,t){const{cmdHistory:s}=this,i=(e===20||e===28||e===21||e===29)&&t>=32&&t<=47,r=(e===23||e===31)&&t>=33&&t<=35;if(!(i||r))return!1;if(zg(e,t,s))return lr(null,null,s),this.logger.log(3,"Repeated command ("+Ri([e,t])+") is dropped"),!0;const a=e===20||e===21||e===23?1:2,o=this.channels[a];return e===20||e===21||e===28||e===29?t===32?o.ccRCL():t===33?o.ccBS():t===34?o.ccAOF():t===35?o.ccAON():t===36?o.ccDER():t===37?o.ccRU(2):t===38?o.ccRU(3):t===39?o.ccRU(4):t===40?o.ccFON():t===41?o.ccRDC():t===42?o.ccTR():t===43?o.ccRTD():t===44?o.ccEDM():t===45?o.ccCR():t===46?o.ccENM():t===47&&o.ccEOC():o.ccTO(t-32),lr(e,t,s),this.currentChannel=a,!0}parseMidrow(e,t){let s=0;if((e===17||e===25)&&t>=32&&t<=47){if(e===17?s=1:s=2,s!==this.currentChannel)return this.logger.log(0,"Mismatch channel in midrow parsing"),!1;const i=this.channels[s];return i?(i.ccMIDROW(t),this.logger.log(3,"MIDROW ("+Ri([e,t])+")"),!0):!1}return!1}parsePAC(e,t){let s;const i=this.cmdHistory,r=(e>=17&&e<=23||e>=25&&e<=31)&&t>=64&&t<=127,a=(e===16||e===24)&&t>=64&&t<=95;if(!(r||a))return!1;if(zg(e,t,i))return lr(null,null,i),!0;const o=e<=23?1:2;t>=64&&t<=95?s=o===1?EF[e]:bF[e]:s=o===1?TF[e]:xF[e];const l=this.channels[o];return l?(l.setPAC(this.interpretPAC(s,t)),lr(e,t,i),this.currentChannel=o,!0):!1}interpretPAC(e,t){let s;const i={color:null,italics:!1,indent:null,underline:!1,row:e};return t>95?s=t-96:s=t-64,i.underline=(s&1)===1,s<=13?i.color=["white","green","blue","cyan","red","yellow","magenta","white"][Math.floor(s/2)]:s<=15?(i.italics=!0,i.color="white"):i.indent=Math.floor((s-16)/2)*4,i}parseChars(e,t){let s,i=null,r=null;if(e>=25?(s=2,r=e-8):(s=1,r=e),r>=17&&r<=19){let a;r===17?a=t+80:r===18?a=t+112:a=t+144,this.logger.log(2,"Special char '"+tT(a)+"' in channel "+s),i=[a]}else e>=32&&e<=127&&(i=t===0?[e]:[e,t]);if(i){const a=Ri(i);this.logger.log(3,"Char codes =  "+a.join(",")),lr(e,t,this.cmdHistory)}return i}parseBackgroundAttributes(e,t){const s=(e===16||e===24)&&t>=32&&t<=47,i=(e===23||e===31)&&t>=45&&t<=47;if(!(s||i))return!1;let r;const a={};e===16||e===24?(r=Math.floor((t-32)/2),a.background=SF[r],t%2===1&&(a.background=a.background+"_semi")):t===45?a.background="transparent":(a.foreground="black",t===47&&(a.underline=!0));const o=e<=23?1:2;return this.channels[o].setBkgData(a),lr(e,t,this.cmdHistory),!0}reset(){for(let e=0;e<Object.keys(this.channels).length;e++){const t=this.channels[e];t&&t.reset()}this.cmdHistory=Yg()}cueSplitAtTime(e){for(let t=0;t<this.channels.length;t++){const s=this.channels[t];s&&s.cueSplitAtTime(e)}}}function lr(n,e,t){t.a=n,t.b=e}function zg(n,e,t){return t.a===n&&t.b===e}function Yg(){return{a:null,b:null}}class Do{constructor(e,t){this.timelineController=void 0,this.cueRanges=[],this.trackName=void 0,this.startTime=null,this.endTime=null,this.screen=null,this.timelineController=e,this.trackName=t}dispatchCue(){this.startTime!==null&&(this.timelineController.addCues(this.trackName,this.startTime,this.endTime,this.screen,this.cueRanges),this.startTime=null)}newCue(e,t,s){(this.startTime===null||this.startTime>e)&&(this.startTime=e),this.endTime=t,this.screen=s,this.timelineController.createCaptionsTrack(this.trackName)}reset(){this.cueRanges=[],this.startTime=null}}var _f=function(){if(Gr!=null&&Gr.VTTCue)return self.VTTCue;const n=["","lr","rl"],e=["start","middle","end","left","right"];function t(o,l){if(typeof l!="string"||!Array.isArray(o))return!1;const c=l.toLowerCase();return~o.indexOf(c)?c:!1}function s(o){return t(n,o)}function i(o){return t(e,o)}function r(o,...l){let c=1;for(;c<arguments.length;c++){const u=arguments[c];for(const d in u)o[d]=u[d]}return o}function a(o,l,c){const u=this,d={enumerable:!0};u.hasBeenReset=!1;let h="",f=!1,p=o,m=l,y=c,g=null,v="",E=!0,T="auto",b="start",L=50,x="middle",w=50,k="middle";Object.defineProperty(u,"id",r({},d,{get:function(){return h},set:function(R){h=""+R}})),Object.defineProperty(u,"pauseOnExit",r({},d,{get:function(){return f},set:function(R){f=!!R}})),Object.defineProperty(u,"startTime",r({},d,{get:function(){return p},set:function(R){if(typeof R!="number")throw new TypeError("Start time must be set to a number.");p=R,this.hasBeenReset=!0}})),Object.defineProperty(u,"endTime",r({},d,{get:function(){return m},set:function(R){if(typeof R!="number")throw new TypeError("End time must be set to a number.");m=R,this.hasBeenReset=!0}})),Object.defineProperty(u,"text",r({},d,{get:function(){return y},set:function(R){y=""+R,this.hasBeenReset=!0}})),Object.defineProperty(u,"region",r({},d,{get:function(){return g},set:function(R){g=R,this.hasBeenReset=!0}})),Object.defineProperty(u,"vertical",r({},d,{get:function(){return v},set:function(R){const P=s(R);if(P===!1)throw new SyntaxError("An invalid or illegal string was specified.");v=P,this.hasBeenReset=!0}})),Object.defineProperty(u,"snapToLines",r({},d,{get:function(){return E},set:function(R){E=!!R,this.hasBeenReset=!0}})),Object.defineProperty(u,"line",r({},d,{get:function(){return T},set:function(R){if(typeof R!="number"&&R!=="auto")throw new SyntaxError("An invalid number or illegal string was specified.");T=R,this.hasBeenReset=!0}})),Object.defineProperty(u,"lineAlign",r({},d,{get:function(){return b},set:function(R){const P=i(R);if(!P)throw new SyntaxError("An invalid or illegal string was specified.");b=P,this.hasBeenReset=!0}})),Object.defineProperty(u,"position",r({},d,{get:function(){return L},set:function(R){if(R<0||R>100)throw new Error("Position must be between 0 and 100.");L=R,this.hasBeenReset=!0}})),Object.defineProperty(u,"positionAlign",r({},d,{get:function(){return x},set:function(R){const P=i(R);if(!P)throw new SyntaxError("An invalid or illegal string was specified.");x=P,this.hasBeenReset=!0}})),Object.defineProperty(u,"size",r({},d,{get:function(){return w},set:function(R){if(R<0||R>100)throw new Error("Size must be between 0 and 100.");w=R,this.hasBeenReset=!0}})),Object.defineProperty(u,"align",r({},d,{get:function(){return k},set:function(R){const P=i(R);if(!P)throw new SyntaxError("An invalid or illegal string was specified.");k=P,this.hasBeenReset=!0}})),u.displayState=void 0}return a.prototype.getCueAsHTML=function(){return self.WebVTT.convertCueToDOMTree(self,this.text)},a}();class wF{decode(e,t){if(!e)return"";if(typeof e!="string")throw new Error("Error - expected string data.");return decodeURIComponent(encodeURIComponent(e))}}function nT(n){function e(s,i,r,a){return(s|0)*3600+(i|0)*60+(r|0)+parseFloat(a||0)}const t=n.match(/^(?:(\d+):)?(\d{2}):(\d{2})(\.\d+)?/);return t?parseFloat(t[2])>59?e(t[2],t[3],0,t[4]):e(t[1],t[2],t[3],t[4]):null}class RF{constructor(){this.values=Object.create(null)}set(e,t){!this.get(e)&&t!==""&&(this.values[e]=t)}get(e,t,s){return s?this.has(e)?this.values[e]:t[s]:this.has(e)?this.values[e]:t}has(e){return e in this.values}alt(e,t,s){for(let i=0;i<s.length;++i)if(t===s[i]){this.set(e,t);break}}integer(e,t){/^-?\d+$/.test(t)&&this.set(e,parseInt(t,10))}percent(e,t){if(/^([\d]{1,3})(\.[\d]*)?%$/.test(t)){const s=parseFloat(t);if(s>=0&&s<=100)return this.set(e,s),!0}return!1}}function iT(n,e,t,s){const i=s?n.split(s):[n];for(const r in i){if(typeof i[r]!="string")continue;const a=i[r].split(t);if(a.length!==2)continue;const o=a[0],l=a[1];e(o,l)}}const Kd=new _f(0,0,""),ko=Kd.align==="middle"?"middle":"center";function IF(n,e,t){const s=n;function i(){const o=nT(n);if(o===null)throw new Error("Malformed timestamp: "+s);return n=n.replace(/^[^\sa-zA-Z-]+/,""),o}function r(o,l){const c=new RF;iT(o,function(h,f){let p;switch(h){case"region":for(let m=t.length-1;m>=0;m--)if(t[m].id===f){c.set(h,t[m].region);break}break;case"vertical":c.alt(h,f,["rl","lr"]);break;case"line":p=f.split(","),c.integer(h,p[0]),c.percent(h,p[0])&&c.set("snapToLines",!1),c.alt(h,p[0],["auto"]),p.length===2&&c.alt("lineAlign",p[1],["start",ko,"end"]);break;case"position":p=f.split(","),c.percent(h,p[0]),p.length===2&&c.alt("positionAlign",p[1],["start",ko,"end","line-left","line-right","auto"]);break;case"size":c.percent(h,f);break;case"align":c.alt(h,f,["start",ko,"end","left","right"]);break}},/:/,/\s/),l.region=c.get("region",null),l.vertical=c.get("vertical","");let u=c.get("line","auto");u==="auto"&&Kd.line===-1&&(u=-1),l.line=u,l.lineAlign=c.get("lineAlign","start"),l.snapToLines=c.get("snapToLines",!0),l.size=c.get("size",100),l.align=c.get("align",ko);let d=c.get("position","auto");d==="auto"&&Kd.position===50&&(d=l.align==="start"||l.align==="left"?0:l.align==="end"||l.align==="right"?100:50),l.position=d}function a(){n=n.replace(/^\s+/,"")}if(a(),e.startTime=i(),a(),n.slice(0,3)!=="-->")throw new Error("Malformed time stamp (time stamps must be separated by '-->'): "+s);n=n.slice(3),a(),e.endTime=i(),a(),r(n,e)}function rT(n){return n.replace(/<br(?: \/)?>/gi,`
`)}class CF{constructor(){this.state="INITIAL",this.buffer="",this.decoder=new wF,this.regionList=[],this.cue=null,this.oncue=void 0,this.onparsingerror=void 0,this.onflush=void 0}parse(e){const t=this;e&&(t.buffer+=t.decoder.decode(e,{stream:!0}));function s(){let r=t.buffer,a=0;for(r=rT(r);a<r.length&&r[a]!=="\r"&&r[a]!==`
`;)++a;const o=r.slice(0,a);return r[a]==="\r"&&++a,r[a]===`
`&&++a,t.buffer=r.slice(a),o}function i(r){iT(r,function(a,o){},/:/)}try{let r="";if(t.state==="INITIAL"){if(!/\r\n|\n/.test(t.buffer))return this;r=s();const o=r.match(/^(ï»¿)?WEBVTT([ \t].*)?$/);if(!(o!=null&&o[0]))throw new Error("Malformed WebVTT signature.");t.state="HEADER"}let a=!1;for(;t.buffer;){if(!/\r\n|\n/.test(t.buffer))return this;switch(a?a=!1:r=s(),t.state){case"HEADER":/:/.test(r)?i(r):r||(t.state="ID");continue;case"NOTE":r||(t.state="ID");continue;case"ID":if(/^NOTE($|[ \t])/.test(r)){t.state="NOTE";break}if(!r)continue;if(t.cue=new _f(0,0,""),t.state="CUE",r.indexOf("-->")===-1){t.cue.id=r;continue}case"CUE":if(!t.cue){t.state="BADCUE";continue}try{IF(r,t.cue,t.regionList)}catch{t.cue=null,t.state="BADCUE";continue}t.state="CUETEXT";continue;case"CUETEXT":{const o=r.indexOf("-->")!==-1;if(!r||o&&(a=!0)){t.oncue&&t.cue&&t.oncue(t.cue),t.cue=null,t.state="ID";continue}if(t.cue===null)continue;t.cue.text&&(t.cue.text+=`
`),t.cue.text+=r}continue;case"BADCUE":r||(t.state="ID")}}}catch{t.state==="CUETEXT"&&t.cue&&t.oncue&&t.oncue(t.cue),t.cue=null,t.state=t.state==="INITIAL"?"BADWEBVTT":"BADCUE"}return this}flush(){const e=this;try{if((e.cue||e.state==="HEADER")&&(e.buffer+=`

`,e.parse()),e.state==="INITIAL"||e.state==="BADWEBVTT")throw new Error("Malformed WebVTT signature.")}catch(t){e.onparsingerror&&e.onparsingerror(t)}return e.onflush&&e.onflush(),this}}const DF=/\r\n|\n\r|\n|\r/g,uu=function(e,t,s=0){return e.slice(s,s+t.length)===t},kF=function(e){let t=parseInt(e.slice(-3));const s=parseInt(e.slice(-6,-4)),i=parseInt(e.slice(-9,-7)),r=e.length>9?parseInt(e.substring(0,e.indexOf(":"))):0;if(!Se(t)||!Se(s)||!Se(i)||!Se(r))throw Error(`Malformed X-TIMESTAMP-MAP: Local:${e}`);return t+=1e3*s,t+=60*1e3*i,t+=60*60*1e3*r,t},du=function(e){let t=5381,s=e.length;for(;s;)t=t*33^e.charCodeAt(--s);return(t>>>0).toString()};function Af(n,e,t){return du(n.toString())+du(e.toString())+du(t)}const PF=function(e,t,s){let i=e[t],r=e[i.prevCC];if(!r||!r.new&&i.new){e.ccOffset=e.presentationOffset=i.start,i.new=!1;return}for(;(a=r)!=null&&a.new;){var a;e.ccOffset+=i.start-r.start,i.new=!1,i=r,r=e[i.prevCC]}e.presentationOffset=s};function OF(n,e,t,s,i,r,a){const o=new CF,l=gn(new Uint8Array(n)).trim().replace(DF,`
`).split(`
`),c=[],u=e?eF(e.baseTime,e.timescale):0;let d="00:00.000",h=0,f=0,p,m=!0;o.oncue=function(y){const g=t[s];let v=t.ccOffset;const E=(h-u)/9e4;if(g!=null&&g.new&&(f!==void 0?v=t.ccOffset=g.start:PF(t,s,E)),E){if(!e){p=new Error("Missing initPTS for VTT MPEGTS");return}v=E-t.presentationOffset}const T=y.endTime-y.startTime,b=ks((y.startTime+v-f)*9e4,i*9e4)/9e4;y.startTime=Math.max(b,0),y.endTime=Math.max(b+T,0);const L=y.text.trim();y.text=decodeURIComponent(encodeURIComponent(L)),y.id||(y.id=Af(y.startTime,y.endTime,L)),y.endTime>0&&c.push(y)},o.onparsingerror=function(y){p=y},o.onflush=function(){if(p){a(p);return}r(c)},l.forEach(y=>{if(m)if(uu(y,"X-TIMESTAMP-MAP=")){m=!1,y.slice(16).split(",").forEach(g=>{uu(g,"LOCAL:")?d=g.slice(6):uu(g,"MPEGTS:")&&(h=parseInt(g.slice(7)))});try{f=kF(d)/1e3}catch(g){p=g}return}else y===""&&(m=!1);o.parse(y+`
`)}),o.flush()}const hu="stpp.ttml.im1t",aT=/^(\d{2,}):(\d{2}):(\d{2}):(\d{2})\.?(\d+)?$/,oT=/^(\d*(?:\.\d*)?)(h|m|s|ms|f|t)$/,MF={left:"start",center:"center",right:"end",start:"start",end:"end"};function qg(n,e,t,s){const i=Ge(new Uint8Array(n),["mdat"]);if(i.length===0){s(new Error("Could not parse IMSC1 mdat"));return}const r=i.map(o=>gn(o)),a=ZM(e.baseTime,1,e.timescale);try{r.forEach(o=>t(FF(o,a)))}catch(o){s(o)}}function FF(n,e){const i=new DOMParser().parseFromString(n,"text/xml").getElementsByTagName("tt")[0];if(!i)throw new Error("Invalid ttml");const r={frameRate:30,subFrameRate:1,frameRateMultiplier:0,tickRate:0},a=Object.keys(r).reduce((d,h)=>(d[h]=i.getAttribute(`ttp:${h}`)||r[h],d),{}),o=i.getAttribute("xml:space")!=="preserve",l=Xg(fu(i,"styling","style")),c=Xg(fu(i,"layout","region")),u=fu(i,"body","[begin]");return[].map.call(u,d=>{const h=lT(d,o);if(!h||!d.hasAttribute("begin"))return null;const f=mu(d.getAttribute("begin"),a),p=mu(d.getAttribute("dur"),a);let m=mu(d.getAttribute("end"),a);if(f===null)throw Qg(d);if(m===null){if(p===null)throw Qg(d);m=f+p}const y=new _f(f-e,m-e,h);y.id=Af(y.startTime,y.endTime,y.text);const g=c[d.getAttribute("region")],v=l[d.getAttribute("style")],E=NF(g,v,l),{textAlign:T}=E;if(T){const b=MF[T];b&&(y.lineAlign=b),y.align=T}return It(y,E),y}).filter(d=>d!==null)}function fu(n,e,t){const s=n.getElementsByTagName(e)[0];return s?[].slice.call(s.querySelectorAll(t)):[]}function Xg(n){return n.reduce((e,t)=>{const s=t.getAttribute("xml:id");return s&&(e[s]=t),e},{})}function lT(n,e){return[].slice.call(n.childNodes).reduce((t,s,i)=>{var r;return s.nodeName==="br"&&i?t+`
`:(r=s.childNodes)!=null&&r.length?lT(s,e):e?t+s.textContent.trim().replace(/\s+/g," "):t+s.textContent},"")}function NF(n,e,t){const s="http://www.w3.org/ns/ttml#styling";let i=null;const r=["displayAlign","textAlign","color","backgroundColor","fontSize","fontFamily"],a=n!=null&&n.hasAttribute("style")?n.getAttribute("style"):null;return a&&t.hasOwnProperty(a)&&(i=t[a]),r.reduce((o,l)=>{const c=pu(e,s,l)||pu(n,s,l)||pu(i,s,l);return c&&(o[l]=c),o},{})}function pu(n,e,t){return n&&n.hasAttributeNS(e,t)?n.getAttributeNS(e,t):null}function Qg(n){return new Error(`Could not parse ttml timestamp ${n}`)}function mu(n,e){if(!n)return null;let t=nT(n);return t===null&&(aT.test(n)?t=BF(n,e):oT.test(n)&&(t=UF(n,e))),t}function BF(n,e){const t=aT.exec(n),s=(t[4]|0)+(t[5]|0)/e.subFrameRate;return(t[1]|0)*3600+(t[2]|0)*60+(t[3]|0)+s/e.frameRate}function UF(n,e){const t=oT.exec(n),s=Number(t[1]);switch(t[2]){case"h":return s*3600;case"m":return s*60;case"ms":return s*1e3;case"f":return s/e.frameRate;case"t":return s/e.tickRate}return s}class $F{constructor(e){this.hls=void 0,this.media=null,this.config=void 0,this.enabled=!0,this.Cues=void 0,this.textTracks=[],this.tracks=[],this.initPTS=[],this.unparsedVttFrags=[],this.captionsTracks={},this.nonNativeCaptionsTracks={},this.cea608Parser1=void 0,this.cea608Parser2=void 0,this.lastCc=-1,this.lastSn=-1,this.lastPartIndex=-1,this.prevCC=-1,this.vttCCs=Zg(),this.captionsProperties=void 0,this.hls=e,this.config=e.config,this.Cues=e.config.cueHandler,this.captionsProperties={textTrack1:{label:this.config.captionsTextTrack1Label,languageCode:this.config.captionsTextTrack1LanguageCode},textTrack2:{label:this.config.captionsTextTrack2Label,languageCode:this.config.captionsTextTrack2LanguageCode},textTrack3:{label:this.config.captionsTextTrack3Label,languageCode:this.config.captionsTextTrack3LanguageCode},textTrack4:{label:this.config.captionsTextTrack4Label,languageCode:this.config.captionsTextTrack4LanguageCode}},e.on(I.MEDIA_ATTACHING,this.onMediaAttaching,this),e.on(I.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(I.MANIFEST_LOADING,this.onManifestLoading,this),e.on(I.MANIFEST_LOADED,this.onManifestLoaded,this),e.on(I.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),e.on(I.FRAG_LOADING,this.onFragLoading,this),e.on(I.FRAG_LOADED,this.onFragLoaded,this),e.on(I.FRAG_PARSING_USERDATA,this.onFragParsingUserdata,this),e.on(I.FRAG_DECRYPTED,this.onFragDecrypted,this),e.on(I.INIT_PTS_FOUND,this.onInitPtsFound,this),e.on(I.SUBTITLE_TRACKS_CLEARED,this.onSubtitleTracksCleared,this),e.on(I.BUFFER_FLUSHING,this.onBufferFlushing,this)}destroy(){const{hls:e}=this;e.off(I.MEDIA_ATTACHING,this.onMediaAttaching,this),e.off(I.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(I.MANIFEST_LOADING,this.onManifestLoading,this),e.off(I.MANIFEST_LOADED,this.onManifestLoaded,this),e.off(I.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),e.off(I.FRAG_LOADING,this.onFragLoading,this),e.off(I.FRAG_LOADED,this.onFragLoaded,this),e.off(I.FRAG_PARSING_USERDATA,this.onFragParsingUserdata,this),e.off(I.FRAG_DECRYPTED,this.onFragDecrypted,this),e.off(I.INIT_PTS_FOUND,this.onInitPtsFound,this),e.off(I.SUBTITLE_TRACKS_CLEARED,this.onSubtitleTracksCleared,this),e.off(I.BUFFER_FLUSHING,this.onBufferFlushing,this),this.hls=this.config=null,this.cea608Parser1=this.cea608Parser2=void 0}initCea608Parsers(){if(this.config.enableCEA708Captions&&(!this.cea608Parser1||!this.cea608Parser2)){const e=new Do(this,"textTrack1"),t=new Do(this,"textTrack2"),s=new Do(this,"textTrack3"),i=new Do(this,"textTrack4");this.cea608Parser1=new Wg(1,e,t),this.cea608Parser2=new Wg(3,s,i)}}addCues(e,t,s,i,r){let a=!1;for(let o=r.length;o--;){const l=r[o],c=jF(l[0],l[1],t,s);if(c>=0&&(l[0]=Math.min(l[0],t),l[1]=Math.max(l[1],s),a=!0,c/(s-t)>.5))return}if(a||r.push([t,s]),this.config.renderTextTracksNatively){const o=this.captionsTracks[e];this.Cues.newCue(o,t,s,i)}else{const o=this.Cues.newCue(null,t,s,i);this.hls.trigger(I.CUES_PARSED,{type:"captions",cues:o,track:e})}}onInitPtsFound(e,{frag:t,id:s,initPTS:i,timescale:r}){const{unparsedVttFrags:a}=this;s==="main"&&(this.initPTS[t.cc]={baseTime:i,timescale:r}),a.length&&(this.unparsedVttFrags=[],a.forEach(o=>{this.onFragLoaded(I.FRAG_LOADED,o)}))}getExistingTrack(e,t){const{media:s}=this;if(s)for(let i=0;i<s.textTracks.length;i++){const r=s.textTracks[i];if(Jg(r,{name:e,lang:t,attrs:{}}))return r}return null}createCaptionsTrack(e){this.config.renderTextTracksNatively?this.createNativeTrack(e):this.createNonNativeTrack(e)}createNativeTrack(e){if(this.captionsTracks[e])return;const{captionsProperties:t,captionsTracks:s,media:i}=this,{label:r,languageCode:a}=t[e],o=this.getExistingTrack(r,a);if(o)s[e]=o,Tr(s[e]),RE(s[e],i);else{const l=this.createTextTrack("captions",r,a);l&&(l[e]=!0,s[e]=l)}}createNonNativeTrack(e){if(this.nonNativeCaptionsTracks[e])return;const t=this.captionsProperties[e];if(!t)return;const s=t.label,i={_id:e,label:s,kind:"captions",default:t.media?!!t.media.default:!1,closedCaptions:t.media};this.nonNativeCaptionsTracks[e]=i,this.hls.trigger(I.NON_NATIVE_TEXT_TRACKS_FOUND,{tracks:[i]})}createTextTrack(e,t,s){const i=this.media;if(i)return i.addTextTrack(e,t,s)}onMediaAttaching(e,t){this.media=t.media,this._cleanTracks()}onMediaDetaching(){const{captionsTracks:e}=this;Object.keys(e).forEach(t=>{Tr(e[t]),delete e[t]}),this.nonNativeCaptionsTracks={}}onManifestLoading(){this.lastCc=-1,this.lastSn=-1,this.lastPartIndex=-1,this.prevCC=-1,this.vttCCs=Zg(),this._cleanTracks(),this.tracks=[],this.captionsTracks={},this.nonNativeCaptionsTracks={},this.textTracks=[],this.unparsedVttFrags=[],this.initPTS=[],this.cea608Parser1&&this.cea608Parser2&&(this.cea608Parser1.reset(),this.cea608Parser2.reset())}_cleanTracks(){const{media:e}=this;if(!e)return;const t=e.textTracks;if(t)for(let s=0;s<t.length;s++)Tr(t[s])}onSubtitleTracksUpdated(e,t){const s=t.subtitleTracks||[],i=s.some(r=>r.textCodec===hu);if(this.config.enableWebVTT||i&&this.config.enableIMSC1){if(eT(this.tracks,s)){this.tracks=s;return}if(this.textTracks=[],this.tracks=s,this.config.renderTextTracksNatively){const a=this.media,o=a?Jo(a.textTracks):null;if(this.tracks.forEach((l,c)=>{let u;if(o){let d=null;for(let h=0;h<o.length;h++)if(o[h]&&Jg(o[h],l)){d=o[h],o[h]=null;break}d&&(u=d)}if(u)Tr(u);else{const d=cT(l);u=this.createTextTrack(d,l.name,l.lang),u&&(u.mode="disabled")}u&&this.textTracks.push(u)}),o!=null&&o.length){const l=o.filter(c=>c!==null).map(c=>c.label);l.length&&z.warn(`Media element contains unused subtitle tracks: ${l.join(", ")}. Replace media element for each source to clear TextTracks and captions menu.`)}}else if(this.tracks.length){const a=this.tracks.map(o=>({label:o.name,kind:o.type.toLowerCase(),default:o.default,subtitleTrack:o}));this.hls.trigger(I.NON_NATIVE_TEXT_TRACKS_FOUND,{tracks:a})}}}onManifestLoaded(e,t){this.config.enableCEA708Captions&&t.captions&&t.captions.forEach(s=>{const i=/(?:CC|SERVICE)([1-4])/.exec(s.instreamId);if(!i)return;const r=`textTrack${i[1]}`,a=this.captionsProperties[r];a&&(a.label=s.name,s.lang&&(a.languageCode=s.lang),a.media=s)})}closedCaptionsForLevel(e){const t=this.hls.levels[e.level];return t==null?void 0:t.attrs["CLOSED-CAPTIONS"]}onFragLoading(e,t){this.initCea608Parsers();const{cea608Parser1:s,cea608Parser2:i,lastCc:r,lastSn:a,lastPartIndex:o}=this;if(!(!this.enabled||!s||!i)&&t.frag.type===Pe.MAIN){var l,c;const{cc:u,sn:d}=t.frag,h=(l=t==null||(c=t.part)==null?void 0:c.index)!=null?l:-1;d===a+1||d===a&&h===o+1||u===r||(s.reset(),i.reset()),this.lastCc=u,this.lastSn=d,this.lastPartIndex=h}}onFragLoaded(e,t){const{frag:s,payload:i}=t;if(s.type===Pe.SUBTITLE)if(i.byteLength){const r=s.decryptdata,a="stats"in t;if(r==null||!r.encrypted||a){const o=this.tracks[s.level],l=this.vttCCs;l[s.cc]||(l[s.cc]={start:s.start,prevCC:this.prevCC,new:!0},this.prevCC=s.cc),o&&o.textCodec===hu?this._parseIMSC1(s,i):this._parseVTTs(t)}}else this.hls.trigger(I.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:s,error:new Error("Empty subtitle payload")})}_parseIMSC1(e,t){const s=this.hls;qg(t,this.initPTS[e.cc],i=>{this._appendCues(i,e.level),s.trigger(I.SUBTITLE_FRAG_PROCESSED,{success:!0,frag:e})},i=>{z.log(`Failed to parse IMSC1: ${i}`),s.trigger(I.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:e,error:i})})}_parseVTTs(e){var t;const{frag:s,payload:i}=e,{initPTS:r,unparsedVttFrags:a}=this,o=r.length-1;if(!r[s.cc]&&o===-1){a.push(e);return}const l=this.hls,c=(t=s.initSegment)!=null&&t.data?Bs(s.initSegment.data,new Uint8Array(i)):i;OF(c,this.initPTS[s.cc],this.vttCCs,s.cc,s.start,u=>{this._appendCues(u,s.level),l.trigger(I.SUBTITLE_FRAG_PROCESSED,{success:!0,frag:s})},u=>{const d=u.message==="Missing initPTS for VTT MPEGTS";d?a.push(e):this._fallbackToIMSC1(s,i),z.log(`Failed to parse VTT cue: ${u}`),!(d&&o>s.cc)&&l.trigger(I.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:s,error:u})})}_fallbackToIMSC1(e,t){const s=this.tracks[e.level];s.textCodec||qg(t,this.initPTS[e.cc],()=>{s.textCodec=hu,this._parseIMSC1(e,t)},()=>{s.textCodec="wvtt"})}_appendCues(e,t){const s=this.hls;if(this.config.renderTextTracksNatively){const i=this.textTracks[t];if(!i||i.mode==="disabled")return;e.forEach(r=>IE(i,r))}else{const i=this.tracks[t];if(!i)return;const r=i.default?"default":"subtitles"+t;s.trigger(I.CUES_PARSED,{type:"subtitles",cues:e,track:r})}}onFragDecrypted(e,t){const{frag:s}=t;s.type===Pe.SUBTITLE&&this.onFragLoaded(I.FRAG_LOADED,t)}onSubtitleTracksCleared(){this.tracks=[],this.captionsTracks={}}onFragParsingUserdata(e,t){this.initCea608Parsers();const{cea608Parser1:s,cea608Parser2:i}=this;if(!this.enabled||!s||!i)return;const{frag:r,samples:a}=t;if(!(r.type===Pe.MAIN&&this.closedCaptionsForLevel(r)==="NONE"))for(let o=0;o<a.length;o++){const l=a[o].bytes;if(l){const c=this.extractCea608Data(l);s.addData(a[o].pts,c[0]),i.addData(a[o].pts,c[1])}}}onBufferFlushing(e,{startOffset:t,endOffset:s,endOffsetSubtitles:i,type:r}){const{media:a}=this;if(!(!a||a.currentTime<s)){if(!r||r==="video"){const{captionsTracks:o}=this;Object.keys(o).forEach(l=>Bd(o[l],t,s))}if(this.config.renderTextTracksNatively&&t===0&&i!==void 0){const{textTracks:o}=this;Object.keys(o).forEach(l=>Bd(o[l],t,i))}}}extractCea608Data(e){const t=[[],[]],s=e[0]&31;let i=2;for(let r=0;r<s;r++){const a=e[i++],o=127&e[i++],l=127&e[i++];if(o===0&&l===0)continue;if((4&a)!==0){const u=3&a;(u===0||u===1)&&(t[u].push(o),t[u].push(l))}}return t}}function cT(n){return n.characteristics&&/transcribes-spoken-dialog/gi.test(n.characteristics)&&/describes-music-and-sound/gi.test(n.characteristics)?"captions":"subtitles"}function Jg(n,e){return!!n&&n.kind===cT(e)&&Hd(e,n)}function jF(n,e,t,s){return Math.min(e,s)-Math.max(n,t)}function Zg(){return{ccOffset:0,presentationOffset:0,0:{start:0,prevCC:-1,new:!0}}}class Lf{constructor(e){this.hls=void 0,this.autoLevelCapping=void 0,this.firstLevel=void 0,this.media=void 0,this.restrictedLevels=void 0,this.timer=void 0,this.clientRect=void 0,this.streamController=void 0,this.hls=e,this.autoLevelCapping=Number.POSITIVE_INFINITY,this.firstLevel=-1,this.media=null,this.restrictedLevels=[],this.timer=void 0,this.clientRect=null,this.registerListeners()}setStreamController(e){this.streamController=e}destroy(){this.hls&&this.unregisterListener(),this.timer&&this.stopCapping(),this.media=null,this.clientRect=null,this.hls=this.streamController=null}registerListeners(){const{hls:e}=this;e.on(I.FPS_DROP_LEVEL_CAPPING,this.onFpsDropLevelCapping,this),e.on(I.MEDIA_ATTACHING,this.onMediaAttaching,this),e.on(I.MANIFEST_PARSED,this.onManifestParsed,this),e.on(I.LEVELS_UPDATED,this.onLevelsUpdated,this),e.on(I.BUFFER_CODECS,this.onBufferCodecs,this),e.on(I.MEDIA_DETACHING,this.onMediaDetaching,this)}unregisterListener(){const{hls:e}=this;e.off(I.FPS_DROP_LEVEL_CAPPING,this.onFpsDropLevelCapping,this),e.off(I.MEDIA_ATTACHING,this.onMediaAttaching,this),e.off(I.MANIFEST_PARSED,this.onManifestParsed,this),e.off(I.LEVELS_UPDATED,this.onLevelsUpdated,this),e.off(I.BUFFER_CODECS,this.onBufferCodecs,this),e.off(I.MEDIA_DETACHING,this.onMediaDetaching,this)}onFpsDropLevelCapping(e,t){const s=this.hls.levels[t.droppedLevel];this.isLevelAllowed(s)&&this.restrictedLevels.push({bitrate:s.bitrate,height:s.height,width:s.width})}onMediaAttaching(e,t){this.media=t.media instanceof HTMLVideoElement?t.media:null,this.clientRect=null,this.timer&&this.hls.levels.length&&this.detectPlayerSize()}onManifestParsed(e,t){const s=this.hls;this.restrictedLevels=[],this.firstLevel=t.firstLevel,s.config.capLevelToPlayerSize&&t.video&&this.startCapping()}onLevelsUpdated(e,t){this.timer&&Se(this.autoLevelCapping)&&this.detectPlayerSize()}onBufferCodecs(e,t){this.hls.config.capLevelToPlayerSize&&t.video&&this.startCapping()}onMediaDetaching(){this.stopCapping()}detectPlayerSize(){if(this.media){if(this.mediaHeight<=0||this.mediaWidth<=0){this.clientRect=null;return}const e=this.hls.levels;if(e.length){const t=this.hls,s=this.getMaxLevel(e.length-1);s!==this.autoLevelCapping&&z.log(`Setting autoLevelCapping to ${s}: ${e[s].height}p@${e[s].bitrate} for media ${this.mediaWidth}x${this.mediaHeight}`),t.autoLevelCapping=s,t.autoLevelCapping>this.autoLevelCapping&&this.streamController&&this.streamController.nextLevelSwitch(),this.autoLevelCapping=t.autoLevelCapping}}}getMaxLevel(e){const t=this.hls.levels;if(!t.length)return-1;const s=t.filter((i,r)=>this.isLevelAllowed(i)&&r<=e);return this.clientRect=null,Lf.getMaxLevelByMediaSize(s,this.mediaWidth,this.mediaHeight)}startCapping(){this.timer||(this.autoLevelCapping=Number.POSITIVE_INFINITY,self.clearInterval(this.timer),this.timer=self.setInterval(this.detectPlayerSize.bind(this),1e3),this.detectPlayerSize())}stopCapping(){this.restrictedLevels=[],this.firstLevel=-1,this.autoLevelCapping=Number.POSITIVE_INFINITY,this.timer&&(self.clearInterval(this.timer),this.timer=void 0)}getDimensions(){if(this.clientRect)return this.clientRect;const e=this.media,t={width:0,height:0};if(e){const s=e.getBoundingClientRect();t.width=s.width,t.height=s.height,!t.width&&!t.height&&(t.width=s.right-s.left||e.width||0,t.height=s.bottom-s.top||e.height||0)}return this.clientRect=t,t}get mediaWidth(){return this.getDimensions().width*this.contentScaleFactor}get mediaHeight(){return this.getDimensions().height*this.contentScaleFactor}get contentScaleFactor(){let e=1;if(!this.hls.config.ignoreDevicePixelRatio)try{e=self.devicePixelRatio}catch{}return e}isLevelAllowed(e){return!this.restrictedLevels.some(s=>e.bitrate===s.bitrate&&e.width===s.width&&e.height===s.height)}static getMaxLevelByMediaSize(e,t,s){if(!(e!=null&&e.length))return-1;const i=(o,l)=>l?o.width!==l.width||o.height!==l.height:!0;let r=e.length-1;const a=Math.max(t,s);for(let o=0;o<e.length;o+=1){const l=e[o];if((l.width>=a||l.height>=a)&&i(l,e[o+1])){r=o;break}}return r}}class GF{constructor(e){this.hls=void 0,this.isVideoPlaybackQualityAvailable=!1,this.timer=void 0,this.media=null,this.lastTime=void 0,this.lastDroppedFrames=0,this.lastDecodedFrames=0,this.streamController=void 0,this.hls=e,this.registerListeners()}setStreamController(e){this.streamController=e}registerListeners(){this.hls.on(I.MEDIA_ATTACHING,this.onMediaAttaching,this)}unregisterListeners(){this.hls.off(I.MEDIA_ATTACHING,this.onMediaAttaching,this)}destroy(){this.timer&&clearInterval(this.timer),this.unregisterListeners(),this.isVideoPlaybackQualityAvailable=!1,this.media=null}onMediaAttaching(e,t){const s=this.hls.config;if(s.capLevelOnFPSDrop){const i=t.media instanceof self.HTMLVideoElement?t.media:null;this.media=i,i&&typeof i.getVideoPlaybackQuality=="function"&&(this.isVideoPlaybackQualityAvailable=!0),self.clearInterval(this.timer),this.timer=self.setInterval(this.checkFPSInterval.bind(this),s.fpsDroppedMonitoringPeriod)}}checkFPS(e,t,s){const i=performance.now();if(t){if(this.lastTime){const r=i-this.lastTime,a=s-this.lastDroppedFrames,o=t-this.lastDecodedFrames,l=1e3*a/r,c=this.hls;if(c.trigger(I.FPS_DROP,{currentDropped:a,currentDecoded:o,totalDroppedFrames:s}),l>0&&a>c.config.fpsDroppedMonitoringThreshold*o){let u=c.currentLevel;z.warn("drop FPS ratio greater than max allowed value for currentLevel: "+u),u>0&&(c.autoLevelCapping===-1||c.autoLevelCapping>=u)&&(u=u-1,c.trigger(I.FPS_DROP_LEVEL_CAPPING,{level:u,droppedLevel:c.currentLevel}),c.autoLevelCapping=u,this.streamController.nextLevelSwitch())}}this.lastTime=i,this.lastDroppedFrames=s,this.lastDecodedFrames=t}}checkFPSInterval(){const e=this.media;if(e)if(this.isVideoPlaybackQualityAvailable){const t=e.getVideoPlaybackQuality();this.checkFPS(e,t.totalVideoFrames,t.droppedVideoFrames)}else this.checkFPS(e,e.webkitDecodedFrameCount,e.webkitDroppedFrameCount)}}const Po="[eme]";class Ir{constructor(e){this.hls=void 0,this.config=void 0,this.media=null,this.keyFormatPromise=null,this.keySystemAccessPromises={},this._requestLicenseFailureCount=0,this.mediaKeySessions=[],this.keyIdToKeySessionPromise={},this.setMediaKeysQueue=Ir.CDMCleanupPromise?[Ir.CDMCleanupPromise]:[],this.onMediaEncrypted=this._onMediaEncrypted.bind(this),this.onWaitingForKey=this._onWaitingForKey.bind(this),this.debug=z.debug.bind(z,Po),this.log=z.log.bind(z,Po),this.warn=z.warn.bind(z,Po),this.error=z.error.bind(z,Po),this.hls=e,this.config=e.config,this.registerListeners()}destroy(){this.unregisterListeners(),this.onMediaDetached();const e=this.config;e.requestMediaKeySystemAccessFunc=null,e.licenseXhrSetup=e.licenseResponseCallback=void 0,e.drmSystems=e.drmSystemOptions={},this.hls=this.onMediaEncrypted=this.onWaitingForKey=this.keyIdToKeySessionPromise=null,this.config=null}registerListeners(){this.hls.on(I.MEDIA_ATTACHED,this.onMediaAttached,this),this.hls.on(I.MEDIA_DETACHED,this.onMediaDetached,this),this.hls.on(I.MANIFEST_LOADING,this.onManifestLoading,this),this.hls.on(I.MANIFEST_LOADED,this.onManifestLoaded,this)}unregisterListeners(){this.hls.off(I.MEDIA_ATTACHED,this.onMediaAttached,this),this.hls.off(I.MEDIA_DETACHED,this.onMediaDetached,this),this.hls.off(I.MANIFEST_LOADING,this.onManifestLoading,this),this.hls.off(I.MANIFEST_LOADED,this.onManifestLoaded,this)}getLicenseServerUrl(e){const{drmSystems:t,widevineLicenseUrl:s}=this.config,i=t[e];if(i)return i.licenseUrl;if(e===mt.WIDEVINE&&s)return s;throw new Error(`no license server URL configured for key-system "${e}"`)}getServerCertificateUrl(e){const{drmSystems:t}=this.config,s=t[e];if(s)return s.serverCertificateUrl;this.log(`No Server Certificate in config.drmSystems["${e}"]`)}attemptKeySystemAccess(e){const t=this.hls.levels,s=(a,o,l)=>!!a&&l.indexOf(a)===o,i=t.map(a=>a.audioCodec).filter(s),r=t.map(a=>a.videoCodec).filter(s);return i.length+r.length===0&&r.push("avc1.42e01e"),new Promise((a,o)=>{const l=c=>{const u=c.shift();this.getMediaKeysPromise(u,i,r).then(d=>a({keySystem:u,mediaKeys:d})).catch(d=>{c.length?l(c):d instanceof Is?o(d):o(new Is({type:Oe.KEY_SYSTEM_ERROR,details:te.KEY_SYSTEM_NO_ACCESS,error:d,fatal:!0},d.message))})};l(e)})}requestMediaKeySystemAccess(e,t){const{requestMediaKeySystemAccessFunc:s}=this.config;if(typeof s!="function"){let i=`Configured requestMediaKeySystemAccess is not a function ${s}`;return mE===null&&self.location.protocol==="http:"&&(i=`navigator.requestMediaKeySystemAccess is not available over insecure protocol ${location.protocol}`),Promise.reject(new Error(i))}return s(e,t)}getMediaKeysPromise(e,t,s){const i=ZP(e,t,s,this.config.drmSystemOptions),r=this.keySystemAccessPromises[e];let a=r==null?void 0:r.keySystemAccess;if(!a){this.log(`Requesting encrypted media "${e}" key-system access with config: ${JSON.stringify(i)}`),a=this.requestMediaKeySystemAccess(e,i);const o=this.keySystemAccessPromises[e]={keySystemAccess:a};return a.catch(l=>{this.log(`Failed to obtain access to key-system "${e}": ${l}`)}),a.then(l=>{this.log(`Access for key-system "${l.keySystem}" obtained`);const c=this.fetchServerCertificate(e);return this.log(`Create media-keys for "${e}"`),o.mediaKeys=l.createMediaKeys().then(u=>(this.log(`Media-keys created for "${e}"`),c.then(d=>d?this.setMediaKeysServerCertificate(u,e,d):u))),o.mediaKeys.catch(u=>{this.error(`Failed to create media-keys for "${e}"}: ${u}`)}),o.mediaKeys})}return a.then(()=>r.mediaKeys)}createMediaKeySessionContext({decryptdata:e,keySystem:t,mediaKeys:s}){this.log(`Creating key-system session "${t}" keyId: ${rn.hexDump(e.keyId||[])}`);const i=s.createSession(),r={decryptdata:e,keySystem:t,mediaKeys:s,mediaKeysSession:i,keyStatus:"status-pending"};return this.mediaKeySessions.push(r),r}renewKeySession(e){const t=e.decryptdata;if(t.pssh){const s=this.createMediaKeySessionContext(e),i=this.getKeyIdString(t),r="cenc";this.keyIdToKeySessionPromise[i]=this.generateRequestWithPreferredKeySession(s,r,t.pssh,"expired")}else this.warn("Could not renew expired session. Missing pssh initData.");this.removeSession(e)}getKeyIdString(e){if(!e)throw new Error("Could not read keyId of undefined decryptdata");if(e.keyId===null)throw new Error("keyId is null");return rn.hexDump(e.keyId)}updateKeySession(e,t){var s;const i=e.mediaKeysSession;return this.log(`Updating key-session "${i.sessionId}" for keyID ${rn.hexDump(((s=e.decryptdata)==null?void 0:s.keyId)||[])}
      } (data length: ${t&&t.byteLength})`),i.update(t)}selectKeySystemFormat(e){const t=Object.keys(e.levelkeys||{});return this.keyFormatPromise||(this.log(`Selecting key-system from fragment (sn: ${e.sn} ${e.type}: ${e.level}) key formats ${t.join(", ")}`),this.keyFormatPromise=this.getKeyFormatPromise(t)),this.keyFormatPromise}getKeyFormatPromise(e){return new Promise((t,s)=>{const i=Qc(this.config),r=e.map(ig).filter(a=>!!a&&i.indexOf(a)!==-1);return this.getKeySystemSelectionPromise(r).then(({keySystem:a})=>{const o=rg(a);o?t(o):s(new Error(`Unable to find format for key-system "${a}"`))}).catch(s)})}loadKey(e){const t=e.keyInfo.decryptdata,s=this.getKeyIdString(t),i=`(keyId: ${s} format: "${t.keyFormat}" method: ${t.method} uri: ${t.uri})`;this.log(`Starting session for key ${i}`);let r=this.keyIdToKeySessionPromise[s];return r||(r=this.keyIdToKeySessionPromise[s]=this.getKeySystemForKeyPromise(t).then(({keySystem:a,mediaKeys:o})=>(this.throwIfDestroyed(),this.log(`Handle encrypted media sn: ${e.frag.sn} ${e.frag.type}: ${e.frag.level} using key ${i}`),this.attemptSetMediaKeys(a,o).then(()=>{this.throwIfDestroyed();const l=this.createMediaKeySessionContext({keySystem:a,mediaKeys:o,decryptdata:t}),c="cenc";return this.generateRequestWithPreferredKeySession(l,c,t.pssh,"playlist-key")}))),r.catch(a=>this.handleError(a))),r}throwIfDestroyed(e="Invalid state"){if(!this.hls)throw new Error("invalid state")}handleError(e){this.hls&&(this.error(e.message),e instanceof Is?this.hls.trigger(I.ERROR,e.data):this.hls.trigger(I.ERROR,{type:Oe.KEY_SYSTEM_ERROR,details:te.KEY_SYSTEM_NO_KEYS,error:e,fatal:!0}))}getKeySystemForKeyPromise(e){const t=this.getKeyIdString(e),s=this.keyIdToKeySessionPromise[t];if(!s){const i=ig(e.keyFormat),r=i?[i]:Qc(this.config);return this.attemptKeySystemAccess(r)}return s}getKeySystemSelectionPromise(e){if(e.length||(e=Qc(this.config)),e.length===0)throw new Is({type:Oe.KEY_SYSTEM_ERROR,details:te.KEY_SYSTEM_NO_CONFIGURED_LICENSE,fatal:!0},`Missing key-system license configuration options ${JSON.stringify({drmSystems:this.config.drmSystems})}`);return this.attemptKeySystemAccess(e)}_onMediaEncrypted(e){const{initDataType:t,initData:s}=e;if(this.debug(`"${e.type}" event: init data type: "${t}"`),s===null)return;let i,r;if(t==="sinf"&&this.config.drmSystems[mt.FAIRPLAY]){const u=Ct(new Uint8Array(s));try{const d=df(JSON.parse(u).sinf),h=SE(new Uint8Array(d));if(!h)return;i=h.subarray(8,24),r=mt.FAIRPLAY}catch{this.warn('Failed to parse sinf "encrypted" event message initData');return}}else{const u=_O(s);if(u===null)return;u.version===0&&u.systemId===pE.WIDEVINE&&u.data&&(i=u.data.subarray(8,24)),r=JP(u.systemId)}if(!r||!i)return;const a=rn.hexDump(i),{keyIdToKeySessionPromise:o,mediaKeySessions:l}=this;let c=o[a];for(let u=0;u<l.length;u++){const d=l[u],h=d.decryptdata;if(h.pssh||!h.keyId)continue;const f=rn.hexDump(h.keyId);if(a===f||h.uri.replace(/-/g,"").indexOf(a)!==-1){c=o[f],delete o[f],h.pssh=new Uint8Array(s),h.keyId=i,c=o[a]=c.then(()=>this.generateRequestWithPreferredKeySession(d,t,s,"encrypted-event-key-match"));break}}c||(c=o[a]=this.getKeySystemSelectionPromise([r]).then(({keySystem:u,mediaKeys:d})=>{var h;this.throwIfDestroyed();const f=new za("ISO-23001-7",a,(h=rg(u))!=null?h:"");return f.pssh=new Uint8Array(s),f.keyId=i,this.attemptSetMediaKeys(u,d).then(()=>{this.throwIfDestroyed();const p=this.createMediaKeySessionContext({decryptdata:f,keySystem:u,mediaKeys:d});return this.generateRequestWithPreferredKeySession(p,t,s,"encrypted-event-no-match")})})),c.catch(u=>this.handleError(u))}_onWaitingForKey(e){this.log(`"${e.type}" event`)}attemptSetMediaKeys(e,t){const s=this.setMediaKeysQueue.slice();this.log(`Setting media-keys for "${e}"`);const i=Promise.all(s).then(()=>{if(!this.media)throw new Error("Attempted to set mediaKeys without media element attached");return this.media.setMediaKeys(t)});return this.setMediaKeysQueue.push(i),i.then(()=>{this.log(`Media-keys set for "${e}"`),s.push(i),this.setMediaKeysQueue=this.setMediaKeysQueue.filter(r=>s.indexOf(r)===-1)})}generateRequestWithPreferredKeySession(e,t,s,i){var r,a;const o=(r=this.config.drmSystems)==null||(a=r[e.keySystem])==null?void 0:a.generateRequest;if(o)try{const p=o.call(this.hls,t,s,e);if(!p)throw new Error("Invalid response from configured generateRequest filter");t=p.initDataType,s=e.decryptdata.pssh=p.initData?new Uint8Array(p.initData):null}catch(p){var l;if(this.warn(p.message),(l=this.hls)!=null&&l.config.debug)throw p}if(s===null)return this.log(`Skipping key-session request for "${i}" (no initData)`),Promise.resolve(e);const c=this.getKeyIdString(e.decryptdata);this.log(`Generating key-session request for "${i}": ${c} (init data type: ${t} length: ${s?s.byteLength:null})`);const u=new Sf,d=e._onmessage=p=>{const m=e.mediaKeysSession;if(!m){u.emit("error",new Error("invalid state"));return}const{messageType:y,message:g}=p;this.log(`"${y}" message event for session "${m.sessionId}" message size: ${g.byteLength}`),y==="license-request"||y==="license-renewal"?this.renewLicense(e,g).catch(v=>{this.handleError(v),u.emit("error",v)}):y==="license-release"?e.keySystem===mt.FAIRPLAY&&(this.updateKeySession(e,Fd("acknowledged")),this.removeSession(e)):this.warn(`unhandled media key message type "${y}"`)},h=e._onkeystatuseschange=p=>{if(!e.mediaKeysSession){u.emit("error",new Error("invalid state"));return}this.onKeyStatusChange(e);const y=e.keyStatus;u.emit("keyStatus",y),y==="expired"&&(this.warn(`${e.keySystem} expired for key ${c}`),this.renewKeySession(e))};e.mediaKeysSession.addEventListener("message",d),e.mediaKeysSession.addEventListener("keystatuseschange",h);const f=new Promise((p,m)=>{u.on("error",m),u.on("keyStatus",y=>{y.startsWith("usable")?p():y==="output-restricted"?m(new Is({type:Oe.KEY_SYSTEM_ERROR,details:te.KEY_SYSTEM_STATUS_OUTPUT_RESTRICTED,fatal:!1},"HDCP level output restricted")):y==="internal-error"?m(new Is({type:Oe.KEY_SYSTEM_ERROR,details:te.KEY_SYSTEM_STATUS_INTERNAL_ERROR,fatal:!0},`key status changed to "${y}"`)):y==="expired"?m(new Error("key expired while generating request")):this.warn(`unhandled key status change "${y}"`)})});return e.mediaKeysSession.generateRequest(t,s).then(()=>{var p;this.log(`Request generated for key-session "${(p=e.mediaKeysSession)==null?void 0:p.sessionId}" keyId: ${c}`)}).catch(p=>{throw new Is({type:Oe.KEY_SYSTEM_ERROR,details:te.KEY_SYSTEM_NO_SESSION,error:p,fatal:!1},`Error generating key-session request: ${p}`)}).then(()=>f).catch(p=>{throw u.removeAllListeners(),this.removeSession(e),p}).then(()=>(u.removeAllListeners(),e))}onKeyStatusChange(e){e.mediaKeysSession.keyStatuses.forEach((t,s)=>{this.log(`key status change "${t}" for keyStatuses keyId: ${rn.hexDump("buffer"in s?new Uint8Array(s.buffer,s.byteOffset,s.byteLength):new Uint8Array(s))} session keyId: ${rn.hexDump(new Uint8Array(e.decryptdata.keyId||[]))} uri: ${e.decryptdata.uri}`),e.keyStatus=t})}fetchServerCertificate(e){const t=this.config,s=t.loader,i=new s(t),r=this.getServerCertificateUrl(e);return r?(this.log(`Fetching server certificate for "${e}"`),new Promise((a,o)=>{const l={responseType:"arraybuffer",url:r},c=t.certLoadPolicy.default,u={loadPolicy:c,timeout:c.maxLoadTimeMs,maxRetry:0,retryDelay:0,maxRetryDelay:0},d={onSuccess:(h,f,p,m)=>{a(h.data)},onError:(h,f,p,m)=>{o(new Is({type:Oe.KEY_SYSTEM_ERROR,details:te.KEY_SYSTEM_SERVER_CERTIFICATE_REQUEST_FAILED,fatal:!0,networkDetails:p,response:Gt({url:l.url,data:void 0},h)},`"${e}" certificate request failed (${r}). Status: ${h.code} (${h.text})`))},onTimeout:(h,f,p)=>{o(new Is({type:Oe.KEY_SYSTEM_ERROR,details:te.KEY_SYSTEM_SERVER_CERTIFICATE_REQUEST_FAILED,fatal:!0,networkDetails:p,response:{url:l.url,data:void 0}},`"${e}" certificate request timed out (${r})`))},onAbort:(h,f,p)=>{o(new Error("aborted"))}};i.load(l,u,d)})):Promise.resolve()}setMediaKeysServerCertificate(e,t,s){return new Promise((i,r)=>{e.setServerCertificate(s).then(a=>{this.log(`setServerCertificate ${a?"success":"not supported by CDM"} (${s==null?void 0:s.byteLength}) on "${t}"`),i(e)}).catch(a=>{r(new Is({type:Oe.KEY_SYSTEM_ERROR,details:te.KEY_SYSTEM_SERVER_CERTIFICATE_UPDATE_FAILED,error:a,fatal:!0},a.message))})})}renewLicense(e,t){return this.requestLicense(e,new Uint8Array(t)).then(s=>this.updateKeySession(e,new Uint8Array(s)).catch(i=>{throw new Is({type:Oe.KEY_SYSTEM_ERROR,details:te.KEY_SYSTEM_SESSION_UPDATE_FAILED,error:i,fatal:!0},i.message)}))}unpackPlayReadyKeyMessage(e,t){const s=String.fromCharCode.apply(null,new Uint16Array(t.buffer));if(!s.includes("PlayReadyKeyMessage"))return e.setRequestHeader("Content-Type","text/xml; charset=utf-8"),t;const i=new DOMParser().parseFromString(s,"application/xml"),r=i.querySelectorAll("HttpHeader");if(r.length>0){let u;for(let d=0,h=r.length;d<h;d++){var a,o;u=r[d];const f=(a=u.querySelector("name"))==null?void 0:a.textContent,p=(o=u.querySelector("value"))==null?void 0:o.textContent;f&&p&&e.setRequestHeader(f,p)}}const l=i.querySelector("Challenge"),c=l==null?void 0:l.textContent;if(!c)throw new Error("Cannot find <Challenge> in key message");return Fd(atob(c))}setupLicenseXHR(e,t,s,i){const r=this.config.licenseXhrSetup;return r?Promise.resolve().then(()=>{if(!s.decryptdata)throw new Error("Key removed");return r.call(this.hls,e,t,s,i)}).catch(a=>{if(!s.decryptdata)throw a;return e.open("POST",t,!0),r.call(this.hls,e,t,s,i)}).then(a=>(e.readyState||e.open("POST",t,!0),{xhr:e,licenseChallenge:a||i})):(e.open("POST",t,!0),Promise.resolve({xhr:e,licenseChallenge:i}))}requestLicense(e,t){const s=this.config.keyLoadPolicy.default;return new Promise((i,r)=>{const a=this.getLicenseServerUrl(e.keySystem);this.log(`Sending license request to URL: ${a}`);const o=new XMLHttpRequest;o.responseType="arraybuffer",o.onreadystatechange=()=>{if(!this.hls||!e.mediaKeysSession)return r(new Error("invalid state"));if(o.readyState===4)if(o.status===200){this._requestLicenseFailureCount=0;let l=o.response;this.log(`License received ${l instanceof ArrayBuffer?l.byteLength:l}`);const c=this.config.licenseResponseCallback;if(c)try{l=c.call(this.hls,o,a,e)}catch(u){this.error(u)}i(l)}else{const l=s.errorRetry,c=l?l.maxNumRetry:0;if(this._requestLicenseFailureCount++,this._requestLicenseFailureCount>c||o.status>=400&&o.status<500)r(new Is({type:Oe.KEY_SYSTEM_ERROR,details:te.KEY_SYSTEM_LICENSE_REQUEST_FAILED,fatal:!0,networkDetails:o,response:{url:a,data:void 0,code:o.status,text:o.statusText}},`License Request XHR failed (${a}). Status: ${o.status} (${o.statusText})`));else{const u=c-this._requestLicenseFailureCount+1;this.warn(`Retrying license request, ${u} attempts left`),this.requestLicense(e,t).then(i,r)}}},e.licenseXhr&&e.licenseXhr.readyState!==XMLHttpRequest.DONE&&e.licenseXhr.abort(),e.licenseXhr=o,this.setupLicenseXHR(o,a,e,t).then(({xhr:l,licenseChallenge:c})=>{e.keySystem==mt.PLAYREADY&&(c=this.unpackPlayReadyKeyMessage(l,c)),l.send(c)})})}onMediaAttached(e,t){if(!this.config.emeEnabled)return;const s=t.media;this.media=s,s.addEventListener("encrypted",this.onMediaEncrypted),s.addEventListener("waitingforkey",this.onWaitingForKey)}onMediaDetached(){const e=this.media,t=this.mediaKeySessions;e&&(e.removeEventListener("encrypted",this.onMediaEncrypted),e.removeEventListener("waitingforkey",this.onWaitingForKey),this.media=null),this._requestLicenseFailureCount=0,this.setMediaKeysQueue=[],this.mediaKeySessions=[],this.keyIdToKeySessionPromise={},za.clearKeyUriToKeyIdMap();const s=t.length;Ir.CDMCleanupPromise=Promise.all(t.map(i=>this.removeSession(i)).concat(e==null?void 0:e.setMediaKeys(null).catch(i=>{this.log(`Could not clear media keys: ${i}`)}))).then(()=>{s&&(this.log("finished closing key sessions and clearing media keys"),t.length=0)}).catch(i=>{this.log(`Could not close sessions and clear media keys: ${i}`)})}onManifestLoading(){this.keyFormatPromise=null}onManifestLoaded(e,{sessionKeys:t}){if(!(!t||!this.config.emeEnabled)&&!this.keyFormatPromise){const s=t.reduce((i,r)=>(i.indexOf(r.keyFormat)===-1&&i.push(r.keyFormat),i),[]);this.log(`Selecting key-system from session-keys ${s.join(", ")}`),this.keyFormatPromise=this.getKeyFormatPromise(s)}}removeSession(e){const{mediaKeysSession:t,licenseXhr:s}=e;if(t){this.log(`Remove licenses and keys and close session ${t.sessionId}`),e._onmessage&&(t.removeEventListener("message",e._onmessage),e._onmessage=void 0),e._onkeystatuseschange&&(t.removeEventListener("keystatuseschange",e._onkeystatuseschange),e._onkeystatuseschange=void 0),s&&s.readyState!==XMLHttpRequest.DONE&&s.abort(),e.mediaKeysSession=e.decryptdata=e.licenseXhr=void 0;const i=this.mediaKeySessions.indexOf(e);return i>-1&&this.mediaKeySessions.splice(i,1),t.remove().catch(r=>{this.log(`Could not remove session: ${r}`)}).then(()=>t.close()).catch(r=>{this.log(`Could not close session: ${r}`)})}}}Ir.CDMCleanupPromise=void 0;class Is extends Error{constructor(e,t){super(t),this.data=void 0,e.error||(e.error=new Error(t)),this.data=e,e.err=e.error}}var Qt;(function(n){n.MANIFEST="m",n.AUDIO="a",n.VIDEO="v",n.MUXED="av",n.INIT="i",n.CAPTION="c",n.TIMED_TEXT="tt",n.KEY="k",n.OTHER="o"})(Qt||(Qt={}));var Wd;(function(n){n.DASH="d",n.HLS="h",n.SMOOTH="s",n.OTHER="o"})(Wd||(Wd={}));var Ni;(function(n){n.OBJECT="CMCD-Object",n.REQUEST="CMCD-Request",n.SESSION="CMCD-Session",n.STATUS="CMCD-Status"})(Ni||(Ni={}));const VF={[Ni.OBJECT]:["br","d","ot","tb"],[Ni.REQUEST]:["bl","dl","mtp","nor","nrr","su"],[Ni.SESSION]:["cid","pr","sf","sid","st","v"],[Ni.STATUS]:["bs","rtp"]};class Kr{constructor(e,t){this.value=void 0,this.params=void 0,Array.isArray(e)&&(e=e.map(s=>s instanceof Kr?s:new Kr(s))),this.value=e,this.params=t}}class uT{constructor(e){this.description=void 0,this.description=e}}const HF="Dict";function KF(n){return Array.isArray(n)?JSON.stringify(n):n instanceof Map?"Map{}":n instanceof Set?"Set{}":typeof n=="object"?JSON.stringify(n):String(n)}function WF(n,e,t,s){return new Error(`failed to ${n} "${KF(e)}" as ${t}`,{cause:s})}const e0="Bare Item",zF="Boolean",YF="Byte Sequence",qF="Decimal",XF="Integer";function QF(n){return n<-999999999999999||999999999999999<n}const JF=/[\x00-\x1f\x7f]+/,ZF="Token",eN="Key";function bn(n,e,t){return WF("serialize",n,e,t)}function tN(n){if(typeof n!="boolean")throw bn(n,zF);return n?"?1":"?0"}function sN(n){return btoa(String.fromCharCode(...n))}function nN(n){if(ArrayBuffer.isView(n)===!1)throw bn(n,YF);return`:${sN(n)}:`}function dT(n){if(QF(n))throw bn(n,XF);return n.toString()}function iN(n){return`@${dT(n.getTime()/1e3)}`}function hT(n,e){if(n<0)return-hT(-n,e);const t=Math.pow(10,e);if(Math.abs(n*t%1-.5)<Number.EPSILON){const i=Math.floor(n*t);return(i%2===0?i:i+1)/t}else return Math.round(n*t)/t}function rN(n){const e=hT(n,3);if(Math.floor(Math.abs(e)).toString().length>12)throw bn(n,qF);const t=e.toString();return t.includes(".")?t:`${t}.0`}const aN="String";function oN(n){if(JF.test(n))throw bn(n,aN);return`"${n.replace(/\\/g,"\\\\").replace(/"/g,'\\"')}"`}function lN(n){return n.description||n.toString().slice(7,-1)}function t0(n){const e=lN(n);if(/^([a-zA-Z*])([!#$%&'*+\-.^_`|~\w:/]*)$/.test(e)===!1)throw bn(e,ZF);return e}function zd(n){switch(typeof n){case"number":if(!Se(n))throw bn(n,e0);return Number.isInteger(n)?dT(n):rN(n);case"string":return oN(n);case"symbol":return t0(n);case"boolean":return tN(n);case"object":if(n instanceof Date)return iN(n);if(n instanceof Uint8Array)return nN(n);if(n instanceof uT)return t0(n);default:throw bn(n,e0)}}function Yd(n){if(/^[a-z*][a-z0-9\-_.*]*$/.test(n)===!1)throw bn(n,eN);return n}function wf(n){return n==null?"":Object.entries(n).map(([e,t])=>t===!0?`;${Yd(e)}`:`;${Yd(e)}=${zd(t)}`).join("")}function fT(n){return n instanceof Kr?`${zd(n.value)}${wf(n.params)}`:zd(n)}function cN(n){return`(${n.value.map(fT).join(" ")})${wf(n.params)}`}function uN(n,e={whitespace:!0}){if(typeof n!="object")throw bn(n,HF);const t=n instanceof Map?n.entries():Object.entries(n),s=e!=null&&e.whitespace?" ":"";return Array.from(t).map(([i,r])=>{r instanceof Kr||(r=new Kr(r));let a=Yd(i);return r.value===!0?a+=wf(r.params):(a+="=",Array.isArray(r.value)?a+=cN(r):a+=fT(r)),a}).join(`,${s}`)}function dN(n,e){return uN(n,e)}const hN=n=>n==="ot"||n==="sf"||n==="st",fN=n=>typeof n=="number"?Se(n):n!=null&&n!==""&&n!==!1;function pN(n,e){const t=new URL(n),s=new URL(e);if(t.origin!==s.origin)return n;const i=t.pathname.split("/").slice(1),r=s.pathname.split("/").slice(1,-1);for(;i[0]===r[0];)i.shift(),r.shift();for(;r.length;)r.shift(),i.unshift("..");return i.join("/")}function mN(){try{return crypto.randomUUID()}catch{try{const e=URL.createObjectURL(new Blob),t=e.toString();return URL.revokeObjectURL(e),t.slice(t.lastIndexOf("/")+1)}catch{let t=new Date().getTime();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,i=>{const r=(t+Math.random()*16)%16|0;return t=Math.floor(t/16),(i=="x"?r:r&3|8).toString(16)})}}}const nl=n=>Math.round(n),gN=(n,e)=>(e!=null&&e.baseUrl&&(n=pN(n,e.baseUrl)),encodeURIComponent(n)),Oo=n=>nl(n/100)*100,yN={br:nl,d:nl,bl:Oo,dl:Oo,mtp:Oo,nor:gN,rtp:Oo,tb:nl};function vN(n,e){const t={};if(n==null||typeof n!="object")return t;const s=Object.keys(n).sort(),i=It({},yN,e==null?void 0:e.formatters),r=e==null?void 0:e.filter;return s.forEach(a=>{if(r!=null&&r(a))return;let o=n[a];const l=i[a];l&&(o=l(o,e)),!(a==="v"&&o===1)&&(a=="pr"&&o===1||fN(o)&&(hN(a)&&typeof o=="string"&&(o=new uT(o)),t[a]=o))}),t}function pT(n,e={}){return n?dN(vN(n,e),It({whitespace:!1},e)):""}function EN(n,e={}){if(!n)return{};const t=Object.entries(n),s=Object.entries(VF).concat(Object.entries((e==null?void 0:e.customHeaderMap)||{})),i=t.reduce((r,a)=>{var o,l;const[c,u]=a,d=((o=s.find(h=>h[1].includes(c)))==null?void 0:o[0])||Ni.REQUEST;return(l=r[d])!=null||(r[d]={}),r[d][c]=u,r},{});return Object.entries(i).reduce((r,[a,o])=>(r[a]=pT(o,e),r),{})}function TN(n,e,t){return It(n,EN(e,t))}const bN="CMCD";function xN(n,e={}){if(!n)return"";const t=pT(n,e);return`${bN}=${encodeURIComponent(t)}`}const s0=/CMCD=[^&#]+/;function SN(n,e,t){const s=xN(e,t);if(!s)return n;if(s0.test(n))return n.replace(s0,s);const i=n.includes("?")?"&":"?";return`${n}${i}${s}`}class _N{constructor(e){this.hls=void 0,this.config=void 0,this.media=void 0,this.sid=void 0,this.cid=void 0,this.useHeaders=!1,this.includeKeys=void 0,this.initialized=!1,this.starved=!1,this.buffering=!0,this.audioBuffer=void 0,this.videoBuffer=void 0,this.onWaiting=()=>{this.initialized&&(this.starved=!0),this.buffering=!0},this.onPlaying=()=>{this.initialized||(this.initialized=!0),this.buffering=!1},this.applyPlaylistData=i=>{try{this.apply(i,{ot:Qt.MANIFEST,su:!this.initialized})}catch(r){z.warn("Could not generate manifest CMCD data.",r)}},this.applyFragmentData=i=>{try{const r=i.frag,a=this.hls.levels[r.level],o=this.getObjectType(r),l={d:r.duration*1e3,ot:o};(o===Qt.VIDEO||o===Qt.AUDIO||o==Qt.MUXED)&&(l.br=a.bitrate/1e3,l.tb=this.getTopBandwidth(o)/1e3,l.bl=this.getBufferLength(o)),this.apply(i,l)}catch(r){z.warn("Could not generate segment CMCD data.",r)}},this.hls=e;const t=this.config=e.config,{cmcd:s}=t;s!=null&&(t.pLoader=this.createPlaylistLoader(),t.fLoader=this.createFragmentLoader(),this.sid=s.sessionId||mN(),this.cid=s.contentId,this.useHeaders=s.useHeaders===!0,this.includeKeys=s.includeKeys,this.registerListeners())}registerListeners(){const e=this.hls;e.on(I.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(I.MEDIA_DETACHED,this.onMediaDetached,this),e.on(I.BUFFER_CREATED,this.onBufferCreated,this)}unregisterListeners(){const e=this.hls;e.off(I.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(I.MEDIA_DETACHED,this.onMediaDetached,this),e.off(I.BUFFER_CREATED,this.onBufferCreated,this)}destroy(){this.unregisterListeners(),this.onMediaDetached(),this.hls=this.config=this.audioBuffer=this.videoBuffer=null,this.onWaiting=this.onPlaying=null}onMediaAttached(e,t){this.media=t.media,this.media.addEventListener("waiting",this.onWaiting),this.media.addEventListener("playing",this.onPlaying)}onMediaDetached(){this.media&&(this.media.removeEventListener("waiting",this.onWaiting),this.media.removeEventListener("playing",this.onPlaying),this.media=null)}onBufferCreated(e,t){var s,i;this.audioBuffer=(s=t.tracks.audio)==null?void 0:s.buffer,this.videoBuffer=(i=t.tracks.video)==null?void 0:i.buffer}createData(){var e;return{v:1,sf:Wd.HLS,sid:this.sid,cid:this.cid,pr:(e=this.media)==null?void 0:e.playbackRate,mtp:this.hls.bandwidthEstimate/1e3}}apply(e,t={}){It(t,this.createData());const s=t.ot===Qt.INIT||t.ot===Qt.VIDEO||t.ot===Qt.MUXED;this.starved&&s&&(t.bs=!0,t.su=!0,this.starved=!1),t.su==null&&(t.su=this.buffering);const{includeKeys:i}=this;i&&(t=Object.keys(t).reduce((r,a)=>(i.includes(a)&&(r[a]=t[a]),r),{})),this.useHeaders?(e.headers||(e.headers={}),TN(e.headers,t)):e.url=SN(e.url,t)}getObjectType(e){const{type:t}=e;if(t==="subtitle")return Qt.TIMED_TEXT;if(e.sn==="initSegment")return Qt.INIT;if(t==="audio")return Qt.AUDIO;if(t==="main")return this.hls.audioTracks.length?Qt.VIDEO:Qt.MUXED}getTopBandwidth(e){let t=0,s;const i=this.hls;if(e===Qt.AUDIO)s=i.audioTracks;else{const r=i.maxAutoLevel,a=r>-1?r+1:i.levels.length;s=i.levels.slice(0,a)}for(const r of s)r.bitrate>t&&(t=r.bitrate);return t>0?t:NaN}getBufferLength(e){const t=this.hls.media,s=e===Qt.AUDIO?this.audioBuffer:this.videoBuffer;return!s||!t?NaN:ut.bufferInfo(s,t.currentTime,this.config.maxBufferHole).len*1e3}createPlaylistLoader(){const{pLoader:e}=this.config,t=this.applyPlaylistData,s=e||this.config.loader;return class{constructor(r){this.loader=void 0,this.loader=new s(r)}get stats(){return this.loader.stats}get context(){return this.loader.context}destroy(){this.loader.destroy()}abort(){this.loader.abort()}load(r,a,o){t(r),this.loader.load(r,a,o)}}}createFragmentLoader(){const{fLoader:e}=this.config,t=this.applyFragmentData,s=e||this.config.loader;return class{constructor(r){this.loader=void 0,this.loader=new s(r)}get stats(){return this.loader.stats}get context(){return this.loader.context}destroy(){this.loader.destroy()}abort(){this.loader.abort()}load(r,a,o){t(r),this.loader.load(r,a,o)}}}}const AN=3e5;class LN{constructor(e){this.hls=void 0,this.log=void 0,this.loader=null,this.uri=null,this.pathwayId=".",this.pathwayPriority=null,this.timeToLoad=300,this.reloadTimer=-1,this.updated=0,this.started=!1,this.enabled=!0,this.levels=null,this.audioTracks=null,this.subtitleTracks=null,this.penalizedPathways={},this.hls=e,this.log=z.log.bind(z,"[content-steering]:"),this.registerListeners()}registerListeners(){const e=this.hls;e.on(I.MANIFEST_LOADING,this.onManifestLoading,this),e.on(I.MANIFEST_LOADED,this.onManifestLoaded,this),e.on(I.MANIFEST_PARSED,this.onManifestParsed,this),e.on(I.ERROR,this.onError,this)}unregisterListeners(){const e=this.hls;e&&(e.off(I.MANIFEST_LOADING,this.onManifestLoading,this),e.off(I.MANIFEST_LOADED,this.onManifestLoaded,this),e.off(I.MANIFEST_PARSED,this.onManifestParsed,this),e.off(I.ERROR,this.onError,this))}startLoad(){if(this.started=!0,this.clearTimeout(),this.enabled&&this.uri){if(this.updated){const e=this.timeToLoad*1e3-(performance.now()-this.updated);if(e>0){this.scheduleRefresh(this.uri,e);return}}this.loadSteeringManifest(this.uri)}}stopLoad(){this.started=!1,this.loader&&(this.loader.destroy(),this.loader=null),this.clearTimeout()}clearTimeout(){this.reloadTimer!==-1&&(self.clearTimeout(this.reloadTimer),this.reloadTimer=-1)}destroy(){this.unregisterListeners(),this.stopLoad(),this.hls=null,this.levels=this.audioTracks=this.subtitleTracks=null}removeLevel(e){const t=this.levels;t&&(this.levels=t.filter(s=>s!==e))}onManifestLoading(){this.stopLoad(),this.enabled=!0,this.timeToLoad=300,this.updated=0,this.uri=null,this.pathwayId=".",this.levels=this.audioTracks=this.subtitleTracks=null}onManifestLoaded(e,t){const{contentSteering:s}=t;s!==null&&(this.pathwayId=s.pathwayId,this.uri=s.uri,this.started&&this.startLoad())}onManifestParsed(e,t){this.audioTracks=t.audioTracks,this.subtitleTracks=t.subtitleTracks}onError(e,t){const{errorAction:s}=t;if((s==null?void 0:s.action)===Wt.SendAlternateToPenaltyBox&&s.flags===Us.MoveAllAlternatesMatchingHost){const i=this.levels;let r=this.pathwayPriority,a=this.pathwayId;if(t.context){const{groupId:o,pathwayId:l,type:c}=t.context;o&&i?a=this.getPathwayForGroupId(o,c,a):l&&(a=l)}a in this.penalizedPathways||(this.penalizedPathways[a]=performance.now()),!r&&i&&(r=i.reduce((o,l)=>(o.indexOf(l.pathwayId)===-1&&o.push(l.pathwayId),o),[])),r&&r.length>1&&(this.updatePathwayPriority(r),s.resolved=this.pathwayId!==a),s.resolved||z.warn(`Could not resolve ${t.details} ("${t.error.message}") with content-steering for Pathway: ${a} levels: ${i&&i.length} priorities: ${JSON.stringify(r)} penalized: ${JSON.stringify(this.penalizedPathways)}`)}}filterParsedLevels(e){this.levels=e;let t=this.getLevelsForPathway(this.pathwayId);if(t.length===0){const s=e[0].pathwayId;this.log(`No levels found in Pathway ${this.pathwayId}. Setting initial Pathway to "${s}"`),t=this.getLevelsForPathway(s),this.pathwayId=s}return t.length!==e.length?(this.log(`Found ${t.length}/${e.length} levels in Pathway "${this.pathwayId}"`),t):e}getLevelsForPathway(e){return this.levels===null?[]:this.levels.filter(t=>e===t.pathwayId)}updatePathwayPriority(e){this.pathwayPriority=e;let t;const s=this.penalizedPathways,i=performance.now();Object.keys(s).forEach(r=>{i-s[r]>AN&&delete s[r]});for(let r=0;r<e.length;r++){const a=e[r];if(a in s)continue;if(a===this.pathwayId)return;const o=this.hls.nextLoadLevel,l=this.hls.levels[o];if(t=this.getLevelsForPathway(a),t.length>0){this.log(`Setting Pathway to "${a}"`),this.pathwayId=a,PE(t),this.hls.trigger(I.LEVELS_UPDATED,{levels:t});const c=this.hls.levels[o];l&&c&&this.levels&&(c.attrs["STABLE-VARIANT-ID"]!==l.attrs["STABLE-VARIANT-ID"]&&c.bitrate!==l.bitrate&&this.log(`Unstable Pathways change from bitrate ${l.bitrate} to ${c.bitrate}`),this.hls.nextLoadLevel=o);break}}}getPathwayForGroupId(e,t,s){const i=this.getLevelsForPathway(s).concat(this.levels||[]);for(let r=0;r<i.length;r++)if(t===Ye.AUDIO_TRACK&&i[r].hasAudioGroup(e)||t===Ye.SUBTITLE_TRACK&&i[r].hasSubtitleGroup(e))return i[r].pathwayId;return s}clonePathways(e){const t=this.levels;if(!t)return;const s={},i={};e.forEach(r=>{const{ID:a,"BASE-ID":o,"URI-REPLACEMENT":l}=r;if(t.some(u=>u.pathwayId===a))return;const c=this.getLevelsForPathway(o).map(u=>{const d=new Et(u.attrs);d["PATHWAY-ID"]=a;const h=d.AUDIO&&`${d.AUDIO}_clone_${a}`,f=d.SUBTITLES&&`${d.SUBTITLES}_clone_${a}`;h&&(s[d.AUDIO]=h,d.AUDIO=h),f&&(i[d.SUBTITLES]=f,d.SUBTITLES=f);const p=mT(u.uri,d["STABLE-VARIANT-ID"],"PER-VARIANT-URIS",l),m=new Vr({attrs:d,audioCodec:u.audioCodec,bitrate:u.bitrate,height:u.height,name:u.name,url:p,videoCodec:u.videoCodec,width:u.width});if(u.audioGroups)for(let y=1;y<u.audioGroups.length;y++)m.addGroupId("audio",`${u.audioGroups[y]}_clone_${a}`);if(u.subtitleGroups)for(let y=1;y<u.subtitleGroups.length;y++)m.addGroupId("text",`${u.subtitleGroups[y]}_clone_${a}`);return m});t.push(...c),n0(this.audioTracks,s,l,a),n0(this.subtitleTracks,i,l,a)})}loadSteeringManifest(e){const t=this.hls.config,s=t.loader;this.loader&&this.loader.destroy(),this.loader=new s(t);let i;try{i=new self.URL(e)}catch{this.enabled=!1,this.log(`Failed to parse Steering Manifest URI: ${e}`);return}if(i.protocol!=="data:"){const u=(this.hls.bandwidthEstimate||t.abrEwmaDefaultEstimate)|0;i.searchParams.set("_HLS_pathway",this.pathwayId),i.searchParams.set("_HLS_throughput",""+u)}const r={responseType:"json",url:i.href},a=t.steeringManifestLoadPolicy.default,o=a.errorRetry||a.timeoutRetry||{},l={loadPolicy:a,timeout:a.maxLoadTimeMs,maxRetry:o.maxNumRetry||0,retryDelay:o.retryDelayMs||0,maxRetryDelay:o.maxRetryDelayMs||0},c={onSuccess:(u,d,h,f)=>{this.log(`Loaded steering manifest: "${i}"`);const p=u.data;if(p.VERSION!==1){this.log(`Steering VERSION ${p.VERSION} not supported!`);return}this.updated=performance.now(),this.timeToLoad=p.TTL;const{"RELOAD-URI":m,"PATHWAY-CLONES":y,"PATHWAY-PRIORITY":g}=p;if(m)try{this.uri=new self.URL(m,i).href}catch{this.enabled=!1,this.log(`Failed to parse Steering Manifest RELOAD-URI: ${m}`);return}this.scheduleRefresh(this.uri||h.url),y&&this.clonePathways(y);const v={steeringManifest:p,url:i.toString()};this.hls.trigger(I.STEERING_MANIFEST_LOADED,v),g&&this.updatePathwayPriority(g)},onError:(u,d,h,f)=>{if(this.log(`Error loading steering manifest: ${u.code} ${u.text} (${d.url})`),this.stopLoad(),u.code===410){this.enabled=!1,this.log(`Steering manifest ${d.url} no longer available`);return}let p=this.timeToLoad*1e3;if(u.code===429){const m=this.loader;if(typeof(m==null?void 0:m.getResponseHeader)=="function"){const y=m.getResponseHeader("Retry-After");y&&(p=parseFloat(y)*1e3)}this.log(`Steering manifest ${d.url} rate limited`);return}this.scheduleRefresh(this.uri||d.url,p)},onTimeout:(u,d,h)=>{this.log(`Timeout loading steering manifest (${d.url})`),this.scheduleRefresh(this.uri||d.url)}};this.log(`Requesting steering manifest: ${i}`),this.loader.load(r,l,c)}scheduleRefresh(e,t=this.timeToLoad*1e3){this.clearTimeout(),this.reloadTimer=self.setTimeout(()=>{var s;const i=(s=this.hls)==null?void 0:s.media;if(i&&!i.ended){this.loadSteeringManifest(e);return}this.scheduleRefresh(e,this.timeToLoad*1e3)},t)}}function n0(n,e,t,s){n&&Object.keys(e).forEach(i=>{const r=n.filter(a=>a.groupId===i).map(a=>{const o=It({},a);return o.details=void 0,o.attrs=new Et(o.attrs),o.url=o.attrs.URI=mT(a.url,a.attrs["STABLE-RENDITION-ID"],"PER-RENDITION-URIS",t),o.groupId=o.attrs["GROUP-ID"]=e[i],o.attrs["PATHWAY-ID"]=s,o});n.push(...r)})}function mT(n,e,t,s){const{HOST:i,PARAMS:r,[t]:a}=s;let o;e&&(o=a==null?void 0:a[e],o&&(n=o));const l=new self.URL(n);return i&&!o&&(l.host=i),r&&Object.keys(r).sort().forEach(c=>{c&&l.searchParams.set(c,r[c])}),l.href}const wN=/^age:\s*[\d.]+\s*$/im;class gT{constructor(e){this.xhrSetup=void 0,this.requestTimeout=void 0,this.retryTimeout=void 0,this.retryDelay=void 0,this.config=null,this.callbacks=null,this.context=null,this.loader=null,this.stats=void 0,this.xhrSetup=e&&e.xhrSetup||null,this.stats=new pc,this.retryDelay=0}destroy(){this.callbacks=null,this.abortInternal(),this.loader=null,this.config=null,this.context=null,this.xhrSetup=null,this.stats=null}abortInternal(){const e=this.loader;self.clearTimeout(this.requestTimeout),self.clearTimeout(this.retryTimeout),e&&(e.onreadystatechange=null,e.onprogress=null,e.readyState!==4&&(this.stats.aborted=!0,e.abort()))}abort(){var e;this.abortInternal(),(e=this.callbacks)!=null&&e.onAbort&&this.callbacks.onAbort(this.stats,this.context,this.loader)}load(e,t,s){if(this.stats.loading.start)throw new Error("Loader can only be used once.");this.stats.loading.start=self.performance.now(),this.context=e,this.config=t,this.callbacks=s,this.loadInternal()}loadInternal(){const{config:e,context:t}=this;if(!e||!t)return;const s=this.loader=new self.XMLHttpRequest,i=this.stats;i.loading.first=0,i.loaded=0,i.aborted=!1;const r=this.xhrSetup;r?Promise.resolve().then(()=>{if(!this.stats.aborted)return r(s,t.url)}).catch(a=>(s.open("GET",t.url,!0),r(s,t.url))).then(()=>{this.stats.aborted||this.openAndSendXhr(s,t,e)}).catch(a=>{this.callbacks.onError({code:s.status,text:a.message},t,s,i)}):this.openAndSendXhr(s,t,e)}openAndSendXhr(e,t,s){e.readyState||e.open("GET",t.url,!0);const i=t.headers,{maxTimeToFirstByteMs:r,maxLoadTimeMs:a}=s.loadPolicy;if(i)for(const o in i)e.setRequestHeader(o,i[o]);t.rangeEnd&&e.setRequestHeader("Range","bytes="+t.rangeStart+"-"+(t.rangeEnd-1)),e.onreadystatechange=this.readystatechange.bind(this),e.onprogress=this.loadprogress.bind(this),e.responseType=t.responseType,self.clearTimeout(this.requestTimeout),s.timeout=r&&Se(r)?r:a,this.requestTimeout=self.setTimeout(this.loadtimeout.bind(this),s.timeout),e.send()}readystatechange(){const{context:e,loader:t,stats:s}=this;if(!e||!t)return;const i=t.readyState,r=this.config;if(!s.aborted&&i>=2&&(s.loading.first===0&&(s.loading.first=Math.max(self.performance.now(),s.loading.start),r.timeout!==r.loadPolicy.maxLoadTimeMs&&(self.clearTimeout(this.requestTimeout),r.timeout=r.loadPolicy.maxLoadTimeMs,this.requestTimeout=self.setTimeout(this.loadtimeout.bind(this),r.loadPolicy.maxLoadTimeMs-(s.loading.first-s.loading.start)))),i===4)){self.clearTimeout(this.requestTimeout),t.onreadystatechange=null,t.onprogress=null;const a=t.status,o=t.responseType!=="text";if(a>=200&&a<300&&(o&&t.response||t.responseText!==null)){s.loading.end=Math.max(self.performance.now(),s.loading.first);const l=o?t.response:t.responseText,c=t.responseType==="arraybuffer"?l.byteLength:l.length;if(s.loaded=s.total=c,s.bwEstimate=s.total*8e3/(s.loading.end-s.loading.first),!this.callbacks)return;const u=this.callbacks.onProgress;if(u&&u(s,e,l,t),!this.callbacks)return;const d={url:t.responseURL,data:l,code:a};this.callbacks.onSuccess(d,s,e,t)}else{const l=r.loadPolicy.errorRetry,c=s.retry,u={url:e.url,data:void 0,code:a};Cl(l,c,!1,u)?this.retry(l):(z.error(`${a} while loading ${e.url}`),this.callbacks.onError({code:a,text:t.statusText},e,t,s))}}}loadtimeout(){var e;const t=(e=this.config)==null?void 0:e.loadPolicy.timeoutRetry,s=this.stats.retry;if(Cl(t,s,!0))this.retry(t);else{var i;z.warn(`timeout while loading ${(i=this.context)==null?void 0:i.url}`);const r=this.callbacks;r&&(this.abortInternal(),r.onTimeout(this.stats,this.context,this.loader))}}retry(e){const{context:t,stats:s}=this;this.retryDelay=pf(e,s.retry),s.retry++,z.warn(`${status?"HTTP Status "+status:"Timeout"} while loading ${t==null?void 0:t.url}, retrying ${s.retry}/${e.maxNumRetry} in ${this.retryDelay}ms`),this.abortInternal(),this.loader=null,self.clearTimeout(this.retryTimeout),this.retryTimeout=self.setTimeout(this.loadInternal.bind(this),this.retryDelay)}loadprogress(e){const t=this.stats;t.loaded=e.loaded,e.lengthComputable&&(t.total=e.total)}getCacheAge(){let e=null;if(this.loader&&wN.test(this.loader.getAllResponseHeaders())){const t=this.loader.getResponseHeader("age");e=t?parseFloat(t):null}return e}getResponseHeader(e){return this.loader&&new RegExp(`^${e}:\\s*[\\d.]+\\s*$`,"im").test(this.loader.getAllResponseHeaders())?this.loader.getResponseHeader(e):null}}function RN(){if(self.fetch&&self.AbortController&&self.ReadableStream&&self.Request)try{return new self.ReadableStream({}),!0}catch{}return!1}const IN=/(\d+)-(\d+)\/(\d+)/;class i0{constructor(e){this.fetchSetup=void 0,this.requestTimeout=void 0,this.request=null,this.response=null,this.controller=void 0,this.context=null,this.config=null,this.callbacks=null,this.stats=void 0,this.loader=null,this.fetchSetup=e.fetchSetup||PN,this.controller=new self.AbortController,this.stats=new pc}destroy(){this.loader=this.callbacks=this.context=this.config=this.request=null,this.abortInternal(),this.response=null,this.fetchSetup=this.controller=this.stats=null}abortInternal(){this.controller&&!this.stats.loading.end&&(this.stats.aborted=!0,this.controller.abort())}abort(){var e;this.abortInternal(),(e=this.callbacks)!=null&&e.onAbort&&this.callbacks.onAbort(this.stats,this.context,this.response)}load(e,t,s){const i=this.stats;if(i.loading.start)throw new Error("Loader can only be used once.");i.loading.start=self.performance.now();const r=CN(e,this.controller.signal),a=s.onProgress,o=e.responseType==="arraybuffer",l=o?"byteLength":"length",{maxTimeToFirstByteMs:c,maxLoadTimeMs:u}=t.loadPolicy;this.context=e,this.config=t,this.callbacks=s,this.request=this.fetchSetup(e,r),self.clearTimeout(this.requestTimeout),t.timeout=c&&Se(c)?c:u,this.requestTimeout=self.setTimeout(()=>{this.abortInternal(),s.onTimeout(i,e,this.response)},t.timeout),self.fetch(this.request).then(d=>{this.response=this.loader=d;const h=Math.max(self.performance.now(),i.loading.start);if(self.clearTimeout(this.requestTimeout),t.timeout=u,this.requestTimeout=self.setTimeout(()=>{this.abortInternal(),s.onTimeout(i,e,this.response)},u-(h-i.loading.start)),!d.ok){const{status:f,statusText:p}=d;throw new ON(p||"fetch, bad network response",f,d)}return i.loading.first=h,i.total=kN(d.headers)||i.total,a&&Se(t.highWaterMark)?this.loadProgressively(d,i,e,t.highWaterMark,a):o?d.arrayBuffer():e.responseType==="json"?d.json():d.text()}).then(d=>{const h=this.response;if(!h)throw new Error("loader destroyed");self.clearTimeout(this.requestTimeout),i.loading.end=Math.max(self.performance.now(),i.loading.first);const f=d[l];f&&(i.loaded=i.total=f);const p={url:h.url,data:d,code:h.status};a&&!Se(t.highWaterMark)&&a(i,e,d,h),s.onSuccess(p,i,e,h)}).catch(d=>{if(self.clearTimeout(this.requestTimeout),i.aborted)return;const h=d&&d.code||0,f=d?d.message:null;s.onError({code:h,text:f},e,d?d.details:null,i)})}getCacheAge(){let e=null;if(this.response){const t=this.response.headers.get("age");e=t?parseFloat(t):null}return e}getResponseHeader(e){return this.response?this.response.headers.get(e):null}loadProgressively(e,t,s,i=0,r){const a=new NE,o=e.body.getReader(),l=()=>o.read().then(c=>{if(c.done)return a.dataLength&&r(t,s,a.flush(),e),Promise.resolve(new ArrayBuffer(0));const u=c.value,d=u.length;return t.loaded+=d,d<i||a.dataLength?(a.push(u),a.dataLength>=i&&r(t,s,a.flush(),e)):r(t,s,u,e),l()}).catch(()=>Promise.reject());return l()}}function CN(n,e){const t={method:"GET",mode:"cors",credentials:"same-origin",signal:e,headers:new self.Headers(It({},n.headers))};return n.rangeEnd&&t.headers.set("Range","bytes="+n.rangeStart+"-"+String(n.rangeEnd-1)),t}function DN(n){const e=IN.exec(n);if(e)return parseInt(e[2])-parseInt(e[1])+1}function kN(n){const e=n.get("Content-Range");if(e){const s=DN(e);if(Se(s))return s}const t=n.get("Content-Length");if(t)return parseInt(t)}function PN(n,e){return new self.Request(n.url,e)}class ON extends Error{constructor(e,t,s){super(e),this.code=void 0,this.details=void 0,this.code=t,this.details=s}}const MN=/\s/,FN={newCue(n,e,t,s){const i=[];let r,a,o,l,c;const u=self.VTTCue||self.TextTrackCue;for(let h=0;h<s.rows.length;h++)if(r=s.rows[h],o=!0,l=0,c="",!r.isEmpty()){var d;for(let m=0;m<r.chars.length;m++)MN.test(r.chars[m].uchar)&&o?l++:(c+=r.chars[m].uchar,o=!1);r.cueStartTime=e,e===t&&(t+=1e-4),l>=16?l--:l++;const f=rT(c.trim()),p=Af(e,t,f);n!=null&&(d=n.cues)!=null&&d.getCueById(p)||(a=new u(e,t,f),a.id=p,a.line=h+1,a.align="left",a.position=10+Math.min(80,Math.floor(l*8/32)*10),i.push(a))}return n&&i.length&&(i.sort((h,f)=>h.line==="auto"||f.line==="auto"?0:h.line>8&&f.line>8?f.line-h.line:h.line-f.line),i.forEach(h=>IE(n,h))),i}},NN={maxTimeToFirstByteMs:8e3,maxLoadTimeMs:2e4,timeoutRetry:null,errorRetry:null},yT=Gt(Gt({autoStartLoad:!0,startPosition:-1,defaultAudioCodec:void 0,debug:!1,capLevelOnFPSDrop:!1,capLevelToPlayerSize:!1,ignoreDevicePixelRatio:!1,preferManagedMediaSource:!0,initialLiveManifestSize:1,maxBufferLength:30,backBufferLength:1/0,frontBufferFlushThreshold:1/0,maxBufferSize:60*1e3*1e3,maxBufferHole:.1,highBufferWatchdogPeriod:2,nudgeOffset:.1,nudgeMaxRetry:3,maxFragLookUpTolerance:.25,liveSyncDurationCount:3,liveMaxLatencyDurationCount:1/0,liveSyncDuration:void 0,liveMaxLatencyDuration:void 0,maxLiveSyncPlaybackRate:1,liveDurationInfinity:!1,liveBackBufferLength:null,maxMaxBufferLength:600,enableWorker:!0,workerPath:null,enableSoftwareAES:!0,startLevel:void 0,startFragPrefetch:!1,fpsDroppedMonitoringPeriod:5e3,fpsDroppedMonitoringThreshold:.2,appendErrorMaxRetry:3,loader:gT,fLoader:void 0,pLoader:void 0,xhrSetup:void 0,licenseXhrSetup:void 0,licenseResponseCallback:void 0,abrController:fM,bufferController:yF,capLevelController:Lf,errorController:tM,fpsController:GF,stretchShortVideoTrack:!1,maxAudioFramesDrift:1,forceKeyFrameOnDiscontinuity:!0,abrEwmaFastLive:3,abrEwmaSlowLive:9,abrEwmaFastVoD:3,abrEwmaSlowVoD:9,abrEwmaDefaultEstimate:5e5,abrEwmaDefaultEstimateMax:5e6,abrBandWidthFactor:.95,abrBandWidthUpFactor:.7,abrMaxWithRealBitrate:!1,maxStarvationDelay:4,maxLoadingDelay:4,minAutoBitrate:0,emeEnabled:!1,widevineLicenseUrl:void 0,drmSystems:{},drmSystemOptions:{},requestMediaKeySystemAccessFunc:mE,testBandwidth:!0,progressive:!1,lowLatencyMode:!0,cmcd:void 0,enableDateRangeMetadataCues:!0,enableEmsgMetadataCues:!0,enableID3MetadataCues:!0,useMediaCapabilities:!0,certLoadPolicy:{default:NN},keyLoadPolicy:{default:{maxTimeToFirstByteMs:8e3,maxLoadTimeMs:2e4,timeoutRetry:{maxNumRetry:1,retryDelayMs:1e3,maxRetryDelayMs:2e4,backoff:"linear"},errorRetry:{maxNumRetry:8,retryDelayMs:1e3,maxRetryDelayMs:2e4,backoff:"linear"}}},manifestLoadPolicy:{default:{maxTimeToFirstByteMs:1/0,maxLoadTimeMs:2e4,timeoutRetry:{maxNumRetry:2,retryDelayMs:0,maxRetryDelayMs:0},errorRetry:{maxNumRetry:1,retryDelayMs:1e3,maxRetryDelayMs:8e3}}},playlistLoadPolicy:{default:{maxTimeToFirstByteMs:1e4,maxLoadTimeMs:2e4,timeoutRetry:{maxNumRetry:2,retryDelayMs:0,maxRetryDelayMs:0},errorRetry:{maxNumRetry:2,retryDelayMs:1e3,maxRetryDelayMs:8e3}}},fragLoadPolicy:{default:{maxTimeToFirstByteMs:1e4,maxLoadTimeMs:12e4,timeoutRetry:{maxNumRetry:4,retryDelayMs:0,maxRetryDelayMs:0},errorRetry:{maxNumRetry:6,retryDelayMs:1e3,maxRetryDelayMs:8e3}}},steeringManifestLoadPolicy:{default:{maxTimeToFirstByteMs:1e4,maxLoadTimeMs:2e4,timeoutRetry:{maxNumRetry:2,retryDelayMs:0,maxRetryDelayMs:0},errorRetry:{maxNumRetry:1,retryDelayMs:1e3,maxRetryDelayMs:8e3}}},manifestLoadingTimeOut:1e4,manifestLoadingMaxRetry:1,manifestLoadingRetryDelay:1e3,manifestLoadingMaxRetryTimeout:64e3,levelLoadingTimeOut:1e4,levelLoadingMaxRetry:4,levelLoadingRetryDelay:1e3,levelLoadingMaxRetryTimeout:64e3,fragLoadingTimeOut:2e4,fragLoadingMaxRetry:6,fragLoadingRetryDelay:1e3,fragLoadingMaxRetryTimeout:64e3},BN()),{},{subtitleStreamController:fF,subtitleTrackController:mF,timelineController:$F,audioStreamController:dF,audioTrackController:hF,emeController:Ir,cmcdController:_N,contentSteeringController:LN});function BN(){return{cueHandler:FN,enableWebVTT:!0,enableIMSC1:!0,enableCEA708Captions:!0,captionsTextTrack1Label:"English",captionsTextTrack1LanguageCode:"en",captionsTextTrack2Label:"Spanish",captionsTextTrack2LanguageCode:"es",captionsTextTrack3Label:"Unknown CC",captionsTextTrack3LanguageCode:"",captionsTextTrack4Label:"Unknown CC",captionsTextTrack4LanguageCode:"",renderTextTracksNatively:!0}}function UN(n,e){if((e.liveSyncDurationCount||e.liveMaxLatencyDurationCount)&&(e.liveSyncDuration||e.liveMaxLatencyDuration))throw new Error("Illegal hls.js config: don't mix up liveSyncDurationCount/liveMaxLatencyDurationCount and liveSyncDuration/liveMaxLatencyDuration");if(e.liveMaxLatencyDurationCount!==void 0&&(e.liveSyncDurationCount===void 0||e.liveMaxLatencyDurationCount<=e.liveSyncDurationCount))throw new Error('Illegal hls.js config: "liveMaxLatencyDurationCount" must be greater than "liveSyncDurationCount"');if(e.liveMaxLatencyDuration!==void 0&&(e.liveSyncDuration===void 0||e.liveMaxLatencyDuration<=e.liveSyncDuration))throw new Error('Illegal hls.js config: "liveMaxLatencyDuration" must be greater than "liveSyncDuration"');const t=qd(n),s=["manifest","level","frag"],i=["TimeOut","MaxRetry","RetryDelay","MaxRetryTimeout"];return s.forEach(r=>{const a=`${r==="level"?"playlist":r}LoadPolicy`,o=e[a]===void 0,l=[];i.forEach(c=>{const u=`${r}Loading${c}`,d=e[u];if(d!==void 0&&o){l.push(u);const h=t[a].default;switch(e[a]={default:h},c){case"TimeOut":h.maxLoadTimeMs=d,h.maxTimeToFirstByteMs=d;break;case"MaxRetry":h.errorRetry.maxNumRetry=d,h.timeoutRetry.maxNumRetry=d;break;case"RetryDelay":h.errorRetry.retryDelayMs=d,h.timeoutRetry.retryDelayMs=d;break;case"MaxRetryTimeout":h.errorRetry.maxRetryDelayMs=d,h.timeoutRetry.maxRetryDelayMs=d;break}}}),l.length&&z.warn(`hls.js config: "${l.join('", "')}" setting(s) are deprecated, use "${a}": ${JSON.stringify(e[a])}`)}),Gt(Gt({},t),e)}function qd(n){return n&&typeof n=="object"?Array.isArray(n)?n.map(qd):Object.keys(n).reduce((e,t)=>(e[t]=qd(n[t]),e),{}):n}function $N(n){const e=n.loader;e!==i0&&e!==gT?(z.log("[config]: Custom loader detected, cannot enable progressive streaming"),n.progressive=!1):RN()&&(n.loader=i0,n.progressive=!0,n.enableSoftwareAES=!0,z.log("[config]: Progressive streaming enabled, using FetchLoader"))}let gu;class jN extends mf{constructor(e,t){super(e,"[level-controller]"),this._levels=[],this._firstLevel=-1,this._maxAutoLevel=-1,this._startLevel=void 0,this.currentLevel=null,this.currentLevelIndex=-1,this.manualLevelIndex=-1,this.steering=void 0,this.onParsedComplete=void 0,this.steering=t,this._registerListeners()}_registerListeners(){const{hls:e}=this;e.on(I.MANIFEST_LOADING,this.onManifestLoading,this),e.on(I.MANIFEST_LOADED,this.onManifestLoaded,this),e.on(I.LEVEL_LOADED,this.onLevelLoaded,this),e.on(I.LEVELS_UPDATED,this.onLevelsUpdated,this),e.on(I.FRAG_BUFFERED,this.onFragBuffered,this),e.on(I.ERROR,this.onError,this)}_unregisterListeners(){const{hls:e}=this;e.off(I.MANIFEST_LOADING,this.onManifestLoading,this),e.off(I.MANIFEST_LOADED,this.onManifestLoaded,this),e.off(I.LEVEL_LOADED,this.onLevelLoaded,this),e.off(I.LEVELS_UPDATED,this.onLevelsUpdated,this),e.off(I.FRAG_BUFFERED,this.onFragBuffered,this),e.off(I.ERROR,this.onError,this)}destroy(){this._unregisterListeners(),this.steering=null,this.resetLevels(),super.destroy()}stopLoad(){this._levels.forEach(t=>{t.loadError=0,t.fragmentError=0}),super.stopLoad()}resetLevels(){this._startLevel=void 0,this.manualLevelIndex=-1,this.currentLevelIndex=-1,this.currentLevel=null,this._levels=[],this._maxAutoLevel=-1}onManifestLoading(e,t){this.resetLevels()}onManifestLoaded(e,t){const s=this.hls.config.preferManagedMediaSource,i=[],r={},a={};let o=!1,l=!1,c=!1;t.levels.forEach(u=>{var d,h;const f=u.attrs;let{audioCodec:p,videoCodec:m}=u;((d=p)==null?void 0:d.indexOf("mp4a.40.34"))!==-1&&(gu||(gu=/chrome|firefox/i.test(navigator.userAgent)),gu&&(u.audioCodec=p=void 0)),p&&(u.audioCodec=p=wl(p,s)),((h=m)==null?void 0:h.indexOf("avc1"))===0&&(m=u.videoCodec=CO(m));const{width:y,height:g,unknownCodecs:v}=u;if(o||(o=!!(y&&g)),l||(l=!!m),c||(c=!!p),v!=null&&v.length||p&&!tu(p,"audio",s)||m&&!tu(m,"video",s))return;const{CODECS:E,"FRAME-RATE":T,"HDCP-LEVEL":b,"PATHWAY-ID":L,RESOLUTION:x,"VIDEO-RANGE":w}=f,R=`${`${L||"."}-`}${u.bitrate}-${x}-${T}-${E}-${w}-${b}`;if(r[R])if(r[R].uri!==u.url&&!u.attrs["PATHWAY-ID"]){const P=a[R]+=1;u.attrs["PATHWAY-ID"]=new Array(P+1).join(".");const D=new Vr(u);r[R]=D,i.push(D)}else r[R].addGroupId("audio",f.AUDIO),r[R].addGroupId("text",f.SUBTITLES);else{const P=new Vr(u);r[R]=P,a[R]=1,i.push(P)}}),this.filterAndSortMediaOptions(i,t,o,l,c)}filterAndSortMediaOptions(e,t,s,i,r){let a=[],o=[],l=e;if((s||i)&&r&&(l=l.filter(({videoCodec:p,videoRange:m,width:y,height:g})=>(!!p||!!(y&&g))&&VO(m))),l.length===0){Promise.resolve().then(()=>{if(this.hls){t.levels.length&&this.warn(`One or more CODECS in variant not supported: ${JSON.stringify(t.levels[0].attrs)}`);const p=new Error("no level with compatible codecs found in manifest");this.hls.trigger(I.ERROR,{type:Oe.MEDIA_ERROR,details:te.MANIFEST_INCOMPATIBLE_CODECS_ERROR,fatal:!0,url:t.url,error:p,reason:p.message})}});return}if(t.audioTracks){const{preferManagedMediaSource:p}=this.hls.config;a=t.audioTracks.filter(m=>!m.audioCodec||tu(m.audioCodec,"audio",p)),r0(a)}t.subtitles&&(o=t.subtitles,r0(o));const c=l.slice(0);l.sort((p,m)=>{if(p.attrs["HDCP-LEVEL"]!==m.attrs["HDCP-LEVEL"])return(p.attrs["HDCP-LEVEL"]||"")>(m.attrs["HDCP-LEVEL"]||"")?1:-1;if(s&&p.height!==m.height)return p.height-m.height;if(p.frameRate!==m.frameRate)return p.frameRate-m.frameRate;if(p.videoRange!==m.videoRange)return Rl.indexOf(p.videoRange)-Rl.indexOf(m.videoRange);if(p.videoCodec!==m.videoCodec){const y=ug(p.videoCodec),g=ug(m.videoCodec);if(y!==g)return g-y}if(p.uri===m.uri&&p.codecSet!==m.codecSet){const y=Ll(p.codecSet),g=Ll(m.codecSet);if(y!==g)return g-y}return p.averageBitrate!==m.averageBitrate?p.averageBitrate-m.averageBitrate:0});let u=c[0];if(this.steering&&(l=this.steering.filterParsedLevels(l),l.length!==c.length)){for(let p=0;p<c.length;p++)if(c[p].pathwayId===l[0].pathwayId){u=c[p];break}}this._levels=l;for(let p=0;p<l.length;p++)if(l[p]===u){var d;this._firstLevel=p;const m=u.bitrate,y=this.hls.bandwidthEstimate;if(this.log(`manifest loaded, ${l.length} level(s) found, first bitrate: ${m}`),((d=this.hls.userConfig)==null?void 0:d.abrEwmaDefaultEstimate)===void 0){const g=Math.min(m,this.hls.config.abrEwmaDefaultEstimateMax);g>y&&y===yT.abrEwmaDefaultEstimate&&(this.hls.bandwidthEstimate=g)}break}const h=r&&!i,f={levels:l,audioTracks:a,subtitleTracks:o,sessionData:t.sessionData,sessionKeys:t.sessionKeys,firstLevel:this._firstLevel,stats:t.stats,audio:r,video:i,altAudio:!h&&a.some(p=>!!p.url)};this.hls.trigger(I.MANIFEST_PARSED,f),(this.hls.config.autoStartLoad||this.hls.forceStartLoad)&&this.hls.startLoad(this.hls.config.startPosition)}get levels(){return this._levels.length===0?null:this._levels}get level(){return this.currentLevelIndex}set level(e){const t=this._levels;if(t.length===0)return;if(e<0||e>=t.length){const u=new Error("invalid level idx"),d=e<0;if(this.hls.trigger(I.ERROR,{type:Oe.OTHER_ERROR,details:te.LEVEL_SWITCH_ERROR,level:e,fatal:d,error:u,reason:u.message}),d)return;e=Math.min(e,t.length-1)}const s=this.currentLevelIndex,i=this.currentLevel,r=i?i.attrs["PATHWAY-ID"]:void 0,a=t[e],o=a.attrs["PATHWAY-ID"];if(this.currentLevelIndex=e,this.currentLevel=a,s===e&&a.details&&i&&r===o)return;this.log(`Switching to level ${e} (${a.height?a.height+"p ":""}${a.videoRange?a.videoRange+" ":""}${a.codecSet?a.codecSet+" ":""}@${a.bitrate})${o?" with Pathway "+o:""} from level ${s}${r?" with Pathway "+r:""}`);const l={level:e,attrs:a.attrs,details:a.details,bitrate:a.bitrate,averageBitrate:a.averageBitrate,maxBitrate:a.maxBitrate,realBitrate:a.realBitrate,width:a.width,height:a.height,codecSet:a.codecSet,audioCodec:a.audioCodec,videoCodec:a.videoCodec,audioGroups:a.audioGroups,subtitleGroups:a.subtitleGroups,loaded:a.loaded,loadError:a.loadError,fragmentError:a.fragmentError,name:a.name,id:a.id,uri:a.uri,url:a.url,urlId:0,audioGroupIds:a.audioGroupIds,textGroupIds:a.textGroupIds};this.hls.trigger(I.LEVEL_SWITCHING,l);const c=a.details;if(!c||c.live){const u=this.switchParams(a.uri,i==null?void 0:i.details);this.loadPlaylist(u)}}get manualLevel(){return this.manualLevelIndex}set manualLevel(e){this.manualLevelIndex=e,this._startLevel===void 0&&(this._startLevel=e),e!==-1&&(this.level=e)}get firstLevel(){return this._firstLevel}set firstLevel(e){this._firstLevel=e}get startLevel(){if(this._startLevel===void 0){const e=this.hls.config.startLevel;return e!==void 0?e:this.hls.firstAutoLevel}return this._startLevel}set startLevel(e){this._startLevel=e}onError(e,t){t.fatal||!t.context||t.context.type===Ye.LEVEL&&t.context.level===this.level&&this.checkRetry(t)}onFragBuffered(e,{frag:t}){if(t!==void 0&&t.type===Pe.MAIN){const s=t.elementaryStreams;if(!Object.keys(s).some(r=>!!s[r]))return;const i=this._levels[t.level];i!=null&&i.loadError&&(this.log(`Resetting level error count of ${i.loadError} on frag buffered`),i.loadError=0)}}onLevelLoaded(e,t){var s;const{level:i,details:r}=t,a=this._levels[i];if(!a){var o;this.warn(`Invalid level index ${i}`),(o=t.deliveryDirectives)!=null&&o.skip&&(r.deltaUpdateFailed=!0);return}i===this.currentLevelIndex?(a.fragmentError===0&&(a.loadError=0),this.playlistLoaded(i,t,a.details)):(s=t.deliveryDirectives)!=null&&s.skip&&(r.deltaUpdateFailed=!0)}loadPlaylist(e){super.loadPlaylist();const t=this.currentLevelIndex,s=this.currentLevel;if(s&&this.shouldLoadPlaylist(s)){let i=s.uri;if(e)try{i=e.addDirectives(i)}catch(a){this.warn(`Could not construct new URL with HLS Delivery Directives: ${a}`)}const r=s.attrs["PATHWAY-ID"];this.log(`Loading level index ${t}${(e==null?void 0:e.msn)!==void 0?" at sn "+e.msn+" part "+e.part:""} with${r?" Pathway "+r:""} ${i}`),this.clearTimer(),this.hls.trigger(I.LEVEL_LOADING,{url:i,level:t,pathwayId:s.attrs["PATHWAY-ID"],id:0,deliveryDirectives:e||null})}}get nextLoadLevel(){return this.manualLevelIndex!==-1?this.manualLevelIndex:this.hls.nextAutoLevel}set nextLoadLevel(e){this.level=e,this.manualLevelIndex===-1&&(this.hls.nextAutoLevel=e)}removeLevel(e){var t;const s=this._levels.filter((i,r)=>r!==e?!0:(this.steering&&this.steering.removeLevel(i),i===this.currentLevel&&(this.currentLevel=null,this.currentLevelIndex=-1,i.details&&i.details.fragments.forEach(a=>a.level=-1)),!1));PE(s),this._levels=s,this.currentLevelIndex>-1&&(t=this.currentLevel)!=null&&t.details&&(this.currentLevelIndex=this.currentLevel.details.fragments[0].level),this.hls.trigger(I.LEVELS_UPDATED,{levels:s})}onLevelsUpdated(e,{levels:t}){this._levels=t}checkMaxAutoUpdated(){const{autoLevelCapping:e,maxAutoLevel:t,maxHdcpLevel:s}=this.hls;this._maxAutoLevel!==t&&(this._maxAutoLevel=t,this.hls.trigger(I.MAX_AUTO_LEVEL_UPDATED,{autoLevelCapping:e,levels:this.levels,maxAutoLevel:t,minAutoLevel:this.hls.minAutoLevel,maxHdcpLevel:s}))}}function r0(n){const e={};n.forEach(t=>{const s=t.groupId||"";t.id=e[s]=e[s]||0,e[s]++})}class GN{constructor(e){this.config=void 0,this.keyUriToKeyInfo={},this.emeController=null,this.config=e}abort(e){for(const s in this.keyUriToKeyInfo){const i=this.keyUriToKeyInfo[s].loader;if(i){var t;if(e&&e!==((t=i.context)==null?void 0:t.frag.type))return;i.abort()}}}detach(){for(const e in this.keyUriToKeyInfo){const t=this.keyUriToKeyInfo[e];(t.mediaKeySessionContext||t.decryptdata.isCommonEncryption)&&delete this.keyUriToKeyInfo[e]}}destroy(){this.detach();for(const e in this.keyUriToKeyInfo){const t=this.keyUriToKeyInfo[e].loader;t&&t.destroy()}this.keyUriToKeyInfo={}}createKeyLoadError(e,t=te.KEY_LOAD_ERROR,s,i,r){return new Dn({type:Oe.NETWORK_ERROR,details:t,fatal:!1,frag:e,response:r,error:s,networkDetails:i})}loadClear(e,t){if(this.emeController&&this.config.emeEnabled){const{sn:s,cc:i}=e;for(let r=0;r<t.length;r++){const a=t[r];if(i<=a.cc&&(s==="initSegment"||a.sn==="initSegment"||s<a.sn)){this.emeController.selectKeySystemFormat(a).then(o=>{a.setKeyFormat(o)});break}}}}load(e){return!e.decryptdata&&e.encrypted&&this.emeController?this.emeController.selectKeySystemFormat(e).then(t=>this.loadInternal(e,t)):this.loadInternal(e)}loadInternal(e,t){var s,i;t&&e.setKeyFormat(t);const r=e.decryptdata;if(!r){const c=new Error(t?`Expected frag.decryptdata to be defined after setting format ${t}`:"Missing decryption data on fragment in onKeyLoading");return Promise.reject(this.createKeyLoadError(e,te.KEY_LOAD_ERROR,c))}const a=r.uri;if(!a)return Promise.reject(this.createKeyLoadError(e,te.KEY_LOAD_ERROR,new Error(`Invalid key URI: "${a}"`)));let o=this.keyUriToKeyInfo[a];if((s=o)!=null&&s.decryptdata.key)return r.key=o.decryptdata.key,Promise.resolve({frag:e,keyInfo:o});if((i=o)!=null&&i.keyLoadPromise){var l;switch((l=o.mediaKeySessionContext)==null?void 0:l.keyStatus){case void 0:case"status-pending":case"usable":case"usable-in-future":return o.keyLoadPromise.then(c=>(r.key=c.keyInfo.decryptdata.key,{frag:e,keyInfo:o}))}}switch(o=this.keyUriToKeyInfo[a]={decryptdata:r,keyLoadPromise:null,loader:null,mediaKeySessionContext:null},r.method){case"ISO-23001-7":case"SAMPLE-AES":case"SAMPLE-AES-CENC":case"SAMPLE-AES-CTR":return r.keyFormat==="identity"?this.loadKeyHTTP(o,e):this.loadKeyEME(o,e);case"AES-128":return this.loadKeyHTTP(o,e);default:return Promise.reject(this.createKeyLoadError(e,te.KEY_LOAD_ERROR,new Error(`Key supplied with unsupported METHOD: "${r.method}"`)))}}loadKeyEME(e,t){const s={frag:t,keyInfo:e};if(this.emeController&&this.config.emeEnabled){const i=this.emeController.loadKey(s);if(i)return(e.keyLoadPromise=i.then(r=>(e.mediaKeySessionContext=r,s))).catch(r=>{throw e.keyLoadPromise=null,r})}return Promise.resolve(s)}loadKeyHTTP(e,t){const s=this.config,i=s.loader,r=new i(s);return t.keyLoader=e.loader=r,e.keyLoadPromise=new Promise((a,o)=>{const l={keyInfo:e,frag:t,responseType:"arraybuffer",url:e.decryptdata.uri},c=s.keyLoadPolicy.default,u={loadPolicy:c,timeout:c.maxLoadTimeMs,maxRetry:0,retryDelay:0,maxRetryDelay:0},d={onSuccess:(h,f,p,m)=>{const{frag:y,keyInfo:g,url:v}=p;if(!y.decryptdata||g!==this.keyUriToKeyInfo[v])return o(this.createKeyLoadError(y,te.KEY_LOAD_ERROR,new Error("after key load, decryptdata unset or changed"),m));g.decryptdata.key=y.decryptdata.key=new Uint8Array(h.data),y.keyLoader=null,g.loader=null,a({frag:y,keyInfo:g})},onError:(h,f,p,m)=>{this.resetLoader(f),o(this.createKeyLoadError(t,te.KEY_LOAD_ERROR,new Error(`HTTP Error ${h.code} loading key ${h.text}`),p,Gt({url:l.url,data:void 0},h)))},onTimeout:(h,f,p)=>{this.resetLoader(f),o(this.createKeyLoadError(t,te.KEY_LOAD_TIMEOUT,new Error("key loading timed out"),p))},onAbort:(h,f,p)=>{this.resetLoader(f),o(this.createKeyLoadError(t,te.INTERNAL_ABORTED,new Error("key loading aborted"),p))}};r.load(l,u,d)})}resetLoader(e){const{frag:t,keyInfo:s,url:i}=e,r=s.loader;t.keyLoader===r&&(t.keyLoader=null,s.loader=null),delete this.keyUriToKeyInfo[i],r&&r.destroy()}}function vT(){return self.SourceBuffer||self.WebKitSourceBuffer}function ET(){if(!Zr())return!1;const e=vT();return!e||e.prototype&&typeof e.prototype.appendBuffer=="function"&&typeof e.prototype.remove=="function"}function VN(){if(!ET())return!1;const n=Zr();return typeof(n==null?void 0:n.isTypeSupported)=="function"&&(["avc1.42E01E,mp4a.40.2","av01.0.01M.08","vp09.00.50.08"].some(e=>n.isTypeSupported(Ya(e,"video")))||["mp4a.40.2","fLaC"].some(e=>n.isTypeSupported(Ya(e,"audio"))))}function HN(){var n;const e=vT();return typeof(e==null||(n=e.prototype)==null?void 0:n.changeType)=="function"}const KN=250,il=2,WN=.1,zN=.05;class YN{constructor(e,t,s,i){this.config=void 0,this.media=null,this.fragmentTracker=void 0,this.hls=void 0,this.nudgeRetry=0,this.stallReported=!1,this.stalled=null,this.moved=!1,this.seeking=!1,this.config=e,this.media=t,this.fragmentTracker=s,this.hls=i}destroy(){this.media=null,this.hls=this.fragmentTracker=null}poll(e,t){const{config:s,media:i,stalled:r}=this;if(i===null)return;const{currentTime:a,seeking:o}=i,l=this.seeking&&!o,c=!this.seeking&&o;if(this.seeking=o,a!==e){if(this.moved=!0,o||(this.nudgeRetry=0),r!==null){if(this.stallReported){const y=self.performance.now()-r;z.warn(`playback not stuck anymore @${a}, after ${Math.round(y)}ms`),this.stallReported=!1}this.stalled=null}return}if(c||l){this.stalled=null;return}if(i.paused&&!o||i.ended||i.playbackRate===0||!ut.getBuffered(i).length){this.nudgeRetry=0;return}const u=ut.bufferInfo(i,a,0),d=u.nextStart||0;if(o){const y=u.len>il,g=!d||t&&t.start<=a||d-a>il&&!this.fragmentTracker.getPartialFragment(a);if(y||g)return;this.moved=!1}if(!this.moved&&this.stalled!==null){var h;if(!(u.len>0)&&!d)return;const g=Math.max(d,u.start||0)-a,v=this.hls.levels?this.hls.levels[this.hls.currentLevel]:null,T=(v==null||(h=v.details)==null?void 0:h.live)?v.details.targetduration*2:il,b=this.fragmentTracker.getPartialFragment(a);if(g>0&&(g<=T||b)){i.paused||this._trySkipBufferHole(b);return}}const f=self.performance.now();if(r===null){this.stalled=f;return}const p=f-r;if(!o&&p>=KN&&(this._reportStall(u),!this.media))return;const m=ut.bufferInfo(i,a,s.maxBufferHole);this._tryFixBufferStall(m,p)}_tryFixBufferStall(e,t){const{config:s,fragmentTracker:i,media:r}=this;if(r===null)return;const a=r.currentTime,o=i.getPartialFragment(a);o&&(this._trySkipBufferHole(o)||!this.media)||(e.len>s.maxBufferHole||e.nextStart&&e.nextStart-a<s.maxBufferHole)&&t>s.highBufferWatchdogPeriod*1e3&&(z.warn("Trying to nudge playhead over buffer-hole"),this.stalled=null,this._tryNudgeBuffer())}_reportStall(e){const{hls:t,media:s,stallReported:i}=this;if(!i&&s){this.stallReported=!0;const r=new Error(`Playback stalling at @${s.currentTime} due to low buffer (${JSON.stringify(e)})`);z.warn(r.message),t.trigger(I.ERROR,{type:Oe.MEDIA_ERROR,details:te.BUFFER_STALLED_ERROR,fatal:!1,error:r,buffer:e.len})}}_trySkipBufferHole(e){const{config:t,hls:s,media:i}=this;if(i===null)return 0;const r=i.currentTime,a=ut.bufferInfo(i,r,0),o=r<a.start?a.start:a.nextStart;if(o){const l=a.len<=t.maxBufferHole,c=a.len>0&&a.len<1&&i.readyState<3,u=o-r;if(u>0&&(l||c)){if(u>t.maxBufferHole){const{fragmentTracker:h}=this;let f=!1;if(r===0){const p=h.getAppendedFrag(0,Pe.MAIN);p&&o<p.end&&(f=!0)}if(!f){const p=e||h.getAppendedFrag(r,Pe.MAIN);if(p){let m=!1,y=p.end;for(;y<o;){const g=h.getPartialFragment(y);if(g)y+=g.duration;else{m=!0;break}}if(m)return 0}}}const d=Math.max(o+zN,r+WN);if(z.warn(`skipping hole, adjusting currentTime from ${r} to ${d}`),this.moved=!0,this.stalled=null,i.currentTime=d,e&&!e.gap){const h=new Error(`fragment loaded with buffer holes, seeking from ${r} to ${d}`);s.trigger(I.ERROR,{type:Oe.MEDIA_ERROR,details:te.BUFFER_SEEK_OVER_HOLE,fatal:!1,error:h,reason:h.message,frag:e})}return d}}return 0}_tryNudgeBuffer(){const{config:e,hls:t,media:s,nudgeRetry:i}=this;if(s===null)return;const r=s.currentTime;if(this.nudgeRetry++,i<e.nudgeMaxRetry){const a=r+(i+1)*e.nudgeOffset,o=new Error(`Nudging 'currentTime' from ${r} to ${a}`);z.warn(o.message),s.currentTime=a,t.trigger(I.ERROR,{type:Oe.MEDIA_ERROR,details:te.BUFFER_NUDGE_ON_STALL,error:o,fatal:!1})}else{const a=new Error(`Playhead still not moving while enough data buffered @${r} after ${e.nudgeMaxRetry} nudges`);z.error(a.message),t.trigger(I.ERROR,{type:Oe.MEDIA_ERROR,details:te.BUFFER_STALLED_ERROR,error:a,fatal:!0})}}}const qN=100;class XN extends vf{constructor(e,t,s){super(e,t,s,"[stream-controller]",Pe.MAIN),this.audioCodecSwap=!1,this.gapController=null,this.level=-1,this._forceStartLoad=!1,this.altAudio=!1,this.audioOnly=!1,this.fragPlaying=null,this.onvplaying=null,this.onvseeked=null,this.fragLastKbps=0,this.couldBacktrack=!1,this.backtrackFragment=null,this.audioCodecSwitch=!1,this.videoBuffer=null,this._registerListeners()}_registerListeners(){const{hls:e}=this;e.on(I.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(I.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(I.MANIFEST_LOADING,this.onManifestLoading,this),e.on(I.MANIFEST_PARSED,this.onManifestParsed,this),e.on(I.LEVEL_LOADING,this.onLevelLoading,this),e.on(I.LEVEL_LOADED,this.onLevelLoaded,this),e.on(I.FRAG_LOAD_EMERGENCY_ABORTED,this.onFragLoadEmergencyAborted,this),e.on(I.ERROR,this.onError,this),e.on(I.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),e.on(I.AUDIO_TRACK_SWITCHED,this.onAudioTrackSwitched,this),e.on(I.BUFFER_CREATED,this.onBufferCreated,this),e.on(I.BUFFER_FLUSHED,this.onBufferFlushed,this),e.on(I.LEVELS_UPDATED,this.onLevelsUpdated,this),e.on(I.FRAG_BUFFERED,this.onFragBuffered,this)}_unregisterListeners(){const{hls:e}=this;e.off(I.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(I.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(I.MANIFEST_LOADING,this.onManifestLoading,this),e.off(I.MANIFEST_PARSED,this.onManifestParsed,this),e.off(I.LEVEL_LOADED,this.onLevelLoaded,this),e.off(I.FRAG_LOAD_EMERGENCY_ABORTED,this.onFragLoadEmergencyAborted,this),e.off(I.ERROR,this.onError,this),e.off(I.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),e.off(I.AUDIO_TRACK_SWITCHED,this.onAudioTrackSwitched,this),e.off(I.BUFFER_CREATED,this.onBufferCreated,this),e.off(I.BUFFER_FLUSHED,this.onBufferFlushed,this),e.off(I.LEVELS_UPDATED,this.onLevelsUpdated,this),e.off(I.FRAG_BUFFERED,this.onFragBuffered,this)}onHandlerDestroying(){this._unregisterListeners(),super.onHandlerDestroying()}startLoad(e){if(this.levels){const{lastCurrentTime:t,hls:s}=this;if(this.stopLoad(),this.setInterval(qN),this.level=-1,!this.startFragRequested){let i=s.startLevel;i===-1&&(s.config.testBandwidth&&this.levels.length>1?(i=0,this.bitrateTest=!0):i=s.firstAutoLevel),s.nextLoadLevel=i,this.level=s.loadLevel,this.loadedmetadata=!1}t>0&&e===-1&&(this.log(`Override startPosition with lastCurrentTime @${t.toFixed(3)}`),e=t),this.state=re.IDLE,this.nextLoadPosition=this.startPosition=this.lastCurrentTime=e,this.tick()}else this._forceStartLoad=!0,this.state=re.STOPPED}stopLoad(){this._forceStartLoad=!1,super.stopLoad()}doTick(){switch(this.state){case re.WAITING_LEVEL:{const{levels:t,level:s}=this,i=t==null?void 0:t[s],r=i==null?void 0:i.details;if(r&&(!r.live||this.levelLastLoaded===i)){if(this.waitForCdnTuneIn(r))break;this.state=re.IDLE;break}else if(this.hls.nextLoadLevel!==this.level){this.state=re.IDLE;break}break}case re.FRAG_LOADING_WAITING_RETRY:{var e;const t=self.performance.now(),s=this.retryDate;if(!s||t>=s||(e=this.media)!=null&&e.seeking){const{levels:i,level:r}=this,a=i==null?void 0:i[r];this.resetStartWhenNotLoaded(a||null),this.state=re.IDLE}}break}this.state===re.IDLE&&this.doTickIdle(),this.onTickEnd()}onTickEnd(){super.onTickEnd(),this.checkBuffer(),this.checkFragmentChanged()}doTickIdle(){const{hls:e,levelLastLoaded:t,levels:s,media:i}=this;if(t===null||!i&&(this.startFragRequested||!e.config.startFragPrefetch)||this.altAudio&&this.audioOnly)return;const r=e.nextLoadLevel;if(!(s!=null&&s[r]))return;const a=s[r],o=this.getMainFwdBufferInfo();if(o===null)return;const l=this.getLevelDetails();if(l&&this._streamEnded(o,l)){const m={};this.altAudio&&(m.type="video"),this.hls.trigger(I.BUFFER_EOS,m),this.state=re.ENDED;return}e.loadLevel!==r&&e.manualLevel===-1&&this.log(`Adapting to level ${r} from level ${this.level}`),this.level=e.nextLoadLevel=r;const c=a.details;if(!c||this.state===re.WAITING_LEVEL||c.live&&this.levelLastLoaded!==a){this.level=r,this.state=re.WAITING_LEVEL;return}const u=o.len,d=this.getMaxBufferLength(a.maxBitrate);if(u>=d)return;this.backtrackFragment&&this.backtrackFragment.start>o.end&&(this.backtrackFragment=null);const h=this.backtrackFragment?this.backtrackFragment.start:o.end;let f=this.getNextFragment(h,c);if(this.couldBacktrack&&!this.fragPrevious&&f&&f.sn!=="initSegment"&&this.fragmentTracker.getState(f)!==Bt.OK){var p;const y=((p=this.backtrackFragment)!=null?p:f).sn-c.startSN,g=c.fragments[y-1];g&&f.cc===g.cc&&(f=g,this.fragmentTracker.removeFragment(g))}else this.backtrackFragment&&o.len&&(this.backtrackFragment=null);if(f&&this.isLoopLoading(f,h)){if(!f.gap){const y=this.audioOnly&&!this.altAudio?st.AUDIO:st.VIDEO,g=(y===st.VIDEO?this.videoBuffer:this.mediaBuffer)||this.media;g&&this.afterBufferFlushed(g,y,Pe.MAIN)}f=this.getNextFragmentLoopLoading(f,c,o,Pe.MAIN,d)}f&&(f.initSegment&&!f.initSegment.data&&!this.bitrateTest&&(f=f.initSegment),this.loadFragment(f,a,h))}loadFragment(e,t,s){const i=this.fragmentTracker.getState(e);this.fragCurrent=e,i===Bt.NOT_LOADED||i===Bt.PARTIAL?e.sn==="initSegment"?this._loadInitSegment(e,t):this.bitrateTest?(this.log(`Fragment ${e.sn} of level ${e.level} is being downloaded to test bitrate and will not be buffered`),this._loadBitrateTestFrag(e,t)):(this.startFragRequested=!0,super.loadFragment(e,t,s)):this.clearTrackerIfNeeded(e)}getBufferedFrag(e){return this.fragmentTracker.getBufferedFrag(e,Pe.MAIN)}followingBufferedFrag(e){return e?this.getBufferedFrag(e.end+.5):null}immediateLevelSwitch(){this.abortCurrentFrag(),this.flushMainBuffer(0,Number.POSITIVE_INFINITY)}nextLevelSwitch(){const{levels:e,media:t}=this;if(t!=null&&t.readyState){let s;const i=this.getAppendedFrag(t.currentTime);i&&i.start>1&&this.flushMainBuffer(0,i.start-1);const r=this.getLevelDetails();if(r!=null&&r.live){const o=this.getMainFwdBufferInfo();if(!o||o.len<r.targetduration*2)return}if(!t.paused&&e){const o=this.hls.nextLoadLevel,l=e[o],c=this.fragLastKbps;c&&this.fragCurrent?s=this.fragCurrent.duration*l.maxBitrate/(1e3*c)+1:s=0}else s=0;const a=this.getBufferedFrag(t.currentTime+s);if(a){const o=this.followingBufferedFrag(a);if(o){this.abortCurrentFrag();const l=o.maxStartPTS?o.maxStartPTS:o.start,c=o.duration,u=Math.max(a.end,l+Math.min(Math.max(c-this.config.maxFragLookUpTolerance,c*(this.couldBacktrack?.5:.125)),c*(this.couldBacktrack?.75:.25)));this.flushMainBuffer(u,Number.POSITIVE_INFINITY)}}}}abortCurrentFrag(){const e=this.fragCurrent;switch(this.fragCurrent=null,this.backtrackFragment=null,e&&(e.abortRequests(),this.fragmentTracker.removeFragment(e)),this.state){case re.KEY_LOADING:case re.FRAG_LOADING:case re.FRAG_LOADING_WAITING_RETRY:case re.PARSING:case re.PARSED:this.state=re.IDLE;break}this.nextLoadPosition=this.getLoadPosition()}flushMainBuffer(e,t){super.flushMainBuffer(e,t,this.altAudio?"video":null)}onMediaAttached(e,t){super.onMediaAttached(e,t);const s=t.media;this.onvplaying=this.onMediaPlaying.bind(this),this.onvseeked=this.onMediaSeeked.bind(this),s.addEventListener("playing",this.onvplaying),s.addEventListener("seeked",this.onvseeked),this.gapController=new YN(this.config,s,this.fragmentTracker,this.hls)}onMediaDetaching(){const{media:e}=this;e&&this.onvplaying&&this.onvseeked&&(e.removeEventListener("playing",this.onvplaying),e.removeEventListener("seeked",this.onvseeked),this.onvplaying=this.onvseeked=null,this.videoBuffer=null),this.fragPlaying=null,this.gapController&&(this.gapController.destroy(),this.gapController=null),super.onMediaDetaching()}onMediaPlaying(){this.tick()}onMediaSeeked(){const e=this.media,t=e?e.currentTime:null;Se(t)&&this.log(`Media seeked to ${t.toFixed(3)}`);const s=this.getMainFwdBufferInfo();if(s===null||s.len===0){this.warn(`Main forward buffer length on "seeked" event ${s?s.len:"empty"})`);return}this.tick()}onManifestLoading(){this.log("Trigger BUFFER_RESET"),this.hls.trigger(I.BUFFER_RESET,void 0),this.fragmentTracker.removeAllFragments(),this.couldBacktrack=!1,this.startPosition=this.lastCurrentTime=this.fragLastKbps=0,this.levels=this.fragPlaying=this.backtrackFragment=this.levelLastLoaded=null,this.altAudio=this.audioOnly=this.startFragRequested=!1}onManifestParsed(e,t){let s=!1,i=!1;t.levels.forEach(r=>{const a=r.audioCodec;a&&(s=s||a.indexOf("mp4a.40.2")!==-1,i=i||a.indexOf("mp4a.40.5")!==-1)}),this.audioCodecSwitch=s&&i&&!HN(),this.audioCodecSwitch&&this.log("Both AAC/HE-AAC audio found in levels; declaring level codec as HE-AAC"),this.levels=t.levels,this.startFragRequested=!1}onLevelLoading(e,t){const{levels:s}=this;if(!s||this.state!==re.IDLE)return;const i=s[t.level];(!i.details||i.details.live&&this.levelLastLoaded!==i||this.waitForCdnTuneIn(i.details))&&(this.state=re.WAITING_LEVEL)}onLevelLoaded(e,t){var s;const{levels:i}=this,r=t.level,a=t.details,o=a.totalduration;if(!i){this.warn(`Levels were reset while loading level ${r}`);return}this.log(`Level ${r} loaded [${a.startSN},${a.endSN}]${a.lastPartSn?`[part-${a.lastPartSn}-${a.lastPartIndex}]`:""}, cc [${a.startCC}, ${a.endCC}] duration:${o}`);const l=i[r],c=this.fragCurrent;c&&(this.state===re.FRAG_LOADING||this.state===re.FRAG_LOADING_WAITING_RETRY)&&c.level!==t.level&&c.loader&&this.abortCurrentFrag();let u=0;if(a.live||(s=l.details)!=null&&s.live){var d;if(this.checkLiveUpdate(a),a.deltaUpdateFailed)return;u=this.alignPlaylists(a,l.details,(d=this.levelLastLoaded)==null?void 0:d.details)}if(l.details=a,this.levelLastLoaded=l,this.hls.trigger(I.LEVEL_UPDATED,{details:a,level:r}),this.state===re.WAITING_LEVEL){if(this.waitForCdnTuneIn(a))return;this.state=re.IDLE}this.startFragRequested?a.live&&this.synchronizeToLiveEdge(a):this.setStartPosition(a,u),this.tick()}_handleFragmentLoadProgress(e){var t;const{frag:s,part:i,payload:r}=e,{levels:a}=this;if(!a){this.warn(`Levels were reset while fragment load was in progress. Fragment ${s.sn} of level ${s.level} will not be buffered`);return}const o=a[s.level],l=o.details;if(!l){this.warn(`Dropping fragment ${s.sn} of level ${s.level} after level details were reset`),this.fragmentTracker.removeFragment(s);return}const c=o.videoCodec,u=l.PTSKnown||!l.live,d=(t=s.initSegment)==null?void 0:t.data,h=this._getAudioCodec(o),f=this.transmuxer=this.transmuxer||new ZE(this.hls,Pe.MAIN,this._handleTransmuxComplete.bind(this),this._handleTransmuxerFlush.bind(this)),p=i?i.index:-1,m=p!==-1,y=new gf(s.level,s.sn,s.stats.chunkCount,r.byteLength,p,m),g=this.initPTS[s.cc];f.push(r,d,h,c,s,i,l.totalduration,u,y,g)}onAudioTrackSwitching(e,t){const s=this.altAudio;if(!!!t.url){if(this.mediaBuffer!==this.media){this.log("Switching on main audio, use media.buffered to schedule main fragment loading"),this.mediaBuffer=this.media;const a=this.fragCurrent;a&&(this.log("Switching to main audio track, cancel main fragment load"),a.abortRequests(),this.fragmentTracker.removeFragment(a)),this.resetTransmuxer(),this.resetLoadingState()}else this.audioOnly&&this.resetTransmuxer();const r=this.hls;s&&(r.trigger(I.BUFFER_FLUSHING,{startOffset:0,endOffset:Number.POSITIVE_INFINITY,type:null}),this.fragmentTracker.removeAllFragments()),r.trigger(I.AUDIO_TRACK_SWITCHED,t)}}onAudioTrackSwitched(e,t){const s=t.id,i=!!this.hls.audioTracks[s].url;if(i){const r=this.videoBuffer;r&&this.mediaBuffer!==r&&(this.log("Switching on alternate audio, use video.buffered to schedule main fragment loading"),this.mediaBuffer=r)}this.altAudio=i,this.tick()}onBufferCreated(e,t){const s=t.tracks;let i,r,a=!1;for(const o in s){const l=s[o];if(l.id==="main"){if(r=o,i=l,o==="video"){const c=s[o];c&&(this.videoBuffer=c.buffer)}}else a=!0}a&&i?(this.log(`Alternate track found, use ${r}.buffered to schedule main fragment loading`),this.mediaBuffer=i.buffer):this.mediaBuffer=this.media}onFragBuffered(e,t){const{frag:s,part:i}=t;if(s&&s.type!==Pe.MAIN)return;if(this.fragContextChanged(s)){this.warn(`Fragment ${s.sn}${i?" p: "+i.index:""} of level ${s.level} finished buffering, but was aborted. state: ${this.state}`),this.state===re.PARSED&&(this.state=re.IDLE);return}const r=i?i.stats:s.stats;this.fragLastKbps=Math.round(8*r.total/(r.buffering.end-r.loading.first)),s.sn!=="initSegment"&&(this.fragPrevious=s),this.fragBufferedComplete(s,i)}onError(e,t){var s;if(t.fatal){this.state=re.ERROR;return}switch(t.details){case te.FRAG_GAP:case te.FRAG_PARSING_ERROR:case te.FRAG_DECRYPT_ERROR:case te.FRAG_LOAD_ERROR:case te.FRAG_LOAD_TIMEOUT:case te.KEY_LOAD_ERROR:case te.KEY_LOAD_TIMEOUT:this.onFragmentOrKeyLoadError(Pe.MAIN,t);break;case te.LEVEL_LOAD_ERROR:case te.LEVEL_LOAD_TIMEOUT:case te.LEVEL_PARSING_ERROR:!t.levelRetry&&this.state===re.WAITING_LEVEL&&((s=t.context)==null?void 0:s.type)===Ye.LEVEL&&(this.state=re.IDLE);break;case te.BUFFER_APPEND_ERROR:case te.BUFFER_FULL_ERROR:if(!t.parent||t.parent!=="main")return;if(t.details===te.BUFFER_APPEND_ERROR){this.resetLoadingState();return}this.reduceLengthAndFlushBuffer(t)&&this.flushMainBuffer(0,Number.POSITIVE_INFINITY);break;case te.INTERNAL_EXCEPTION:this.recoverWorkerError(t);break}}checkBuffer(){const{media:e,gapController:t}=this;if(!(!e||!t||!e.readyState)){if(this.loadedmetadata||!ut.getBuffered(e).length){const s=this.state!==re.IDLE?this.fragCurrent:null;t.poll(this.lastCurrentTime,s)}this.lastCurrentTime=e.currentTime}}onFragLoadEmergencyAborted(){this.state=re.IDLE,this.loadedmetadata||(this.startFragRequested=!1,this.nextLoadPosition=this.startPosition),this.tickImmediate()}onBufferFlushed(e,{type:t}){if(t!==st.AUDIO||this.audioOnly&&!this.altAudio){const s=(t===st.VIDEO?this.videoBuffer:this.mediaBuffer)||this.media;this.afterBufferFlushed(s,t,Pe.MAIN),this.tick()}}onLevelsUpdated(e,t){this.level>-1&&this.fragCurrent&&(this.level=this.fragCurrent.level),this.levels=t.levels}swapAudioCodec(){this.audioCodecSwap=!this.audioCodecSwap}seekToStartPos(){const{media:e}=this;if(!e)return;const t=e.currentTime;let s=this.startPosition;if(s>=0&&t<s){if(e.seeking){this.log(`could not seek to ${s}, already seeking at ${t}`);return}const i=ut.getBuffered(e),a=(i.length?i.start(0):0)-s;a>0&&(a<this.config.maxBufferHole||a<this.config.maxFragLookUpTolerance)&&(this.log(`adjusting start position by ${a} to match buffer start`),s+=a,this.startPosition=s),this.log(`seek to target start position ${s} from current time ${t}`),e.currentTime=s}}_getAudioCodec(e){let t=this.config.defaultAudioCodec||e.audioCodec;return this.audioCodecSwap&&t&&(this.log("Swapping audio codec"),t.indexOf("mp4a.40.5")!==-1?t="mp4a.40.2":t="mp4a.40.5"),t}_loadBitrateTestFrag(e,t){e.bitrateTest=!0,this._doFragLoad(e,t).then(s=>{const{hls:i}=this;if(!s||this.fragContextChanged(e))return;t.fragmentError=0,this.state=re.IDLE,this.startFragRequested=!1,this.bitrateTest=!1;const r=e.stats;r.parsing.start=r.parsing.end=r.buffering.start=r.buffering.end=self.performance.now(),i.trigger(I.FRAG_LOADED,s),e.bitrateTest=!1})}_handleTransmuxComplete(e){var t;const s="main",{hls:i}=this,{remuxResult:r,chunkMeta:a}=e,o=this.getCurrentContext(a);if(!o){this.resetWhenMissingContext(a);return}const{frag:l,part:c,level:u}=o,{video:d,text:h,id3:f,initSegment:p}=r,{details:m}=u,y=this.altAudio?void 0:r.audio;if(this.fragContextChanged(l)){this.fragmentTracker.removeFragment(l);return}if(this.state=re.PARSING,p){if(p!=null&&p.tracks){const E=l.initSegment||l;this._bufferInitSegment(u,p.tracks,E,a),i.trigger(I.FRAG_PARSING_INIT_SEGMENT,{frag:E,id:s,tracks:p.tracks})}const g=p.initPTS,v=p.timescale;Se(g)&&(this.initPTS[l.cc]={baseTime:g,timescale:v},i.trigger(I.INIT_PTS_FOUND,{frag:l,id:s,initPTS:g,timescale:v}))}if(d&&m&&l.sn!=="initSegment"){const g=m.fragments[l.sn-1-m.startSN],v=l.sn===m.startSN,E=!g||l.cc>g.cc;if(r.independent!==!1){const{startPTS:T,endPTS:b,startDTS:L,endDTS:x}=d;if(c)c.elementaryStreams[d.type]={startPTS:T,endPTS:b,startDTS:L,endDTS:x};else if(d.firstKeyFrame&&d.independent&&a.id===1&&!E&&(this.couldBacktrack=!0),d.dropped&&d.independent){const w=this.getMainFwdBufferInfo(),k=(w?w.end:this.getLoadPosition())+this.config.maxBufferHole,R=d.firstKeyFramePTS?d.firstKeyFramePTS:T;if(!v&&k<R-this.config.maxBufferHole&&!E){this.backtrack(l);return}else E&&(l.gap=!0);l.setElementaryStreamInfo(d.type,l.start,b,l.start,x,!0)}else v&&T>il&&(l.gap=!0);l.setElementaryStreamInfo(d.type,T,b,L,x),this.backtrackFragment&&(this.backtrackFragment=l),this.bufferFragmentData(d,l,c,a,v||E)}else if(v||E)l.gap=!0;else{this.backtrack(l);return}}if(y){const{startPTS:g,endPTS:v,startDTS:E,endDTS:T}=y;c&&(c.elementaryStreams[st.AUDIO]={startPTS:g,endPTS:v,startDTS:E,endDTS:T}),l.setElementaryStreamInfo(st.AUDIO,g,v,E,T),this.bufferFragmentData(y,l,c,a)}if(m&&f!=null&&(t=f.samples)!=null&&t.length){const g={id:s,frag:l,details:m,samples:f.samples};i.trigger(I.FRAG_PARSING_METADATA,g)}if(m&&h){const g={id:s,frag:l,details:m,samples:h.samples};i.trigger(I.FRAG_PARSING_USERDATA,g)}}_bufferInitSegment(e,t,s,i){if(this.state!==re.PARSING)return;this.audioOnly=!!t.audio&&!t.video,this.altAudio&&!this.audioOnly&&delete t.audio;const{audio:r,video:a,audiovideo:o}=t;if(r){let l=e.audioCodec;const c=navigator.userAgent.toLowerCase();this.audioCodecSwitch&&(l&&(l.indexOf("mp4a.40.5")!==-1?l="mp4a.40.2":l="mp4a.40.5"),r.metadata.channelCount!==1&&c.indexOf("firefox")===-1&&(l="mp4a.40.5")),l&&l.indexOf("mp4a.40.5")!==-1&&c.indexOf("android")!==-1&&r.container!=="audio/mpeg"&&(l="mp4a.40.2",this.log(`Android: force audio codec to ${l}`)),e.audioCodec&&e.audioCodec!==l&&this.log(`Swapping manifest audio codec "${e.audioCodec}" for "${l}"`),r.levelCodec=l,r.id="main",this.log(`Init audio buffer, container:${r.container}, codecs[selected/level/parsed]=[${l||""}/${e.audioCodec||""}/${r.codec}]`)}a&&(a.levelCodec=e.videoCodec,a.id="main",this.log(`Init video buffer, container:${a.container}, codecs[level/parsed]=[${e.videoCodec||""}/${a.codec}]`)),o&&this.log(`Init audiovideo buffer, container:${o.container}, codecs[level/parsed]=[${e.codecs}/${o.codec}]`),this.hls.trigger(I.BUFFER_CODECS,t),Object.keys(t).forEach(l=>{const u=t[l].initSegment;u!=null&&u.byteLength&&this.hls.trigger(I.BUFFER_APPENDING,{type:l,data:u,frag:s,part:null,chunkMeta:i,parent:s.type})}),this.tickImmediate()}getMainFwdBufferInfo(){return this.getFwdBufferInfo(this.mediaBuffer?this.mediaBuffer:this.media,Pe.MAIN)}backtrack(e){this.couldBacktrack=!0,this.backtrackFragment=e,this.resetTransmuxer(),this.flushBufferGap(e),this.fragmentTracker.removeFragment(e),this.fragPrevious=null,this.nextLoadPosition=e.start,this.state=re.IDLE}checkFragmentChanged(){const e=this.media;let t=null;if(e&&e.readyState>1&&e.seeking===!1){const s=e.currentTime;if(ut.isBuffered(e,s)?t=this.getAppendedFrag(s):ut.isBuffered(e,s+.1)&&(t=this.getAppendedFrag(s+.1)),t){this.backtrackFragment=null;const i=this.fragPlaying,r=t.level;(!i||t.sn!==i.sn||i.level!==r)&&(this.fragPlaying=t,this.hls.trigger(I.FRAG_CHANGED,{frag:t}),(!i||i.level!==r)&&this.hls.trigger(I.LEVEL_SWITCHED,{level:r}))}}}get nextLevel(){const e=this.nextBufferedFrag;return e?e.level:-1}get currentFrag(){const e=this.media;return e?this.fragPlaying||this.getAppendedFrag(e.currentTime):null}get currentProgramDateTime(){const e=this.media;if(e){const t=e.currentTime,s=this.currentFrag;if(s&&Se(t)&&Se(s.programDateTime)){const i=s.programDateTime+(t-s.start)*1e3;return new Date(i)}}return null}get currentLevel(){const e=this.currentFrag;return e?e.level:-1}get nextBufferedFrag(){const e=this.currentFrag;return e?this.followingBufferedFrag(e):null}get forceStartLoad(){return this._forceStartLoad}}class Nn{static get version(){return"1.5.7"}static isMSESupported(){return ET()}static isSupported(){return VN()}static getMediaSource(){return Zr()}static get Events(){return I}static get ErrorTypes(){return Oe}static get ErrorDetails(){return te}static get DefaultConfig(){return Nn.defaultConfig?Nn.defaultConfig:yT}static set DefaultConfig(e){Nn.defaultConfig=e}constructor(e={}){this.config=void 0,this.userConfig=void 0,this.coreComponents=void 0,this.networkControllers=void 0,this.started=!1,this._emitter=new Sf,this._autoLevelCapping=-1,this._maxHdcpLevel=null,this.abrController=void 0,this.bufferController=void 0,this.capLevelController=void 0,this.latencyController=void 0,this.levelController=void 0,this.streamController=void 0,this.audioTrackController=void 0,this.subtitleTrackController=void 0,this.emeController=void 0,this.cmcdController=void 0,this._media=null,this.url=null,this.triggeringException=void 0,GP(e.debug||!1,"Hls instance");const t=this.config=UN(Nn.DefaultConfig,e);this.userConfig=e,t.progressive&&$N(t);const{abrController:s,bufferController:i,capLevelController:r,errorController:a,fpsController:o}=t,l=new a(this),c=this.abrController=new s(this),u=this.bufferController=new i(this),d=this.capLevelController=new r(this),h=new o(this),f=new MO(this),p=new $O(this),m=t.contentSteeringController,y=m?new m(this):null,g=this.levelController=new jN(this,y),v=new mM(this),E=new GN(this.config),T=this.streamController=new XN(this,v,E);d.setStreamController(T),h.setStreamController(T);const b=[f,g,T];y&&b.splice(1,0,y),this.networkControllers=b;const L=[c,u,d,h,p,v];this.audioTrackController=this.createController(t.audioTrackController,b);const x=t.audioStreamController;x&&b.push(new x(this,v,E)),this.subtitleTrackController=this.createController(t.subtitleTrackController,b);const w=t.subtitleStreamController;w&&b.push(new w(this,v,E)),this.createController(t.timelineController,L),E.emeController=this.emeController=this.createController(t.emeController,L),this.cmcdController=this.createController(t.cmcdController,L),this.latencyController=this.createController(jO,L),this.coreComponents=L,b.push(l);const k=l.onErrorOut;typeof k=="function"&&this.on(I.ERROR,k,l)}createController(e,t){if(e){const s=new e(this);return t&&t.push(s),s}return null}on(e,t,s=this){this._emitter.on(e,t,s)}once(e,t,s=this){this._emitter.once(e,t,s)}removeAllListeners(e){this._emitter.removeAllListeners(e)}off(e,t,s=this,i){this._emitter.off(e,t,s,i)}listeners(e){return this._emitter.listeners(e)}emit(e,t,s){return this._emitter.emit(e,t,s)}trigger(e,t){if(this.config.debug)return this.emit(e,e,t);try{return this.emit(e,e,t)}catch(s){if(z.error("An internal error happened while handling event "+e+'. Error message: "'+s.message+'". Here is a stacktrace:',s),!this.triggeringException){this.triggeringException=!0;const i=e===I.ERROR;this.trigger(I.ERROR,{type:Oe.OTHER_ERROR,details:te.INTERNAL_EXCEPTION,fatal:i,event:e,error:s}),this.triggeringException=!1}}return!1}listenerCount(e){return this._emitter.listenerCount(e)}destroy(){z.log("destroy"),this.trigger(I.DESTROYING,void 0),this.detachMedia(),this.removeAllListeners(),this._autoLevelCapping=-1,this.url=null,this.networkControllers.forEach(t=>t.destroy()),this.networkControllers.length=0,this.coreComponents.forEach(t=>t.destroy()),this.coreComponents.length=0;const e=this.config;e.xhrSetup=e.fetchSetup=void 0,this.userConfig=null}attachMedia(e){z.log("attachMedia"),this._media=e,this.trigger(I.MEDIA_ATTACHING,{media:e})}detachMedia(){z.log("detachMedia"),this.trigger(I.MEDIA_DETACHING,void 0),this._media=null}loadSource(e){this.stopLoad();const t=this.media,s=this.url,i=this.url=uf.buildAbsoluteURL(self.location.href,e,{alwaysNormalize:!0});this._autoLevelCapping=-1,this._maxHdcpLevel=null,z.log(`loadSource:${i}`),t&&s&&(s!==i||this.bufferController.hasSourceTypes())&&(this.detachMedia(),this.attachMedia(t)),this.trigger(I.MANIFEST_LOADING,{url:e})}startLoad(e=-1){z.log(`startLoad(${e})`),this.started=!0,this.networkControllers.forEach(t=>{t.startLoad(e)})}stopLoad(){z.log("stopLoad"),this.started=!1,this.networkControllers.forEach(e=>{e.stopLoad()})}resumeBuffering(){this.started&&this.networkControllers.forEach(e=>{"fragmentLoader"in e&&e.startLoad(-1)})}pauseBuffering(){this.networkControllers.forEach(e=>{"fragmentLoader"in e&&e.stopLoad()})}swapAudioCodec(){z.log("swapAudioCodec"),this.streamController.swapAudioCodec()}recoverMediaError(){z.log("recoverMediaError");const e=this._media;this.detachMedia(),e&&this.attachMedia(e)}removeLevel(e){this.levelController.removeLevel(e)}get levels(){const e=this.levelController.levels;return e||[]}get currentLevel(){return this.streamController.currentLevel}set currentLevel(e){z.log(`set currentLevel:${e}`),this.levelController.manualLevel=e,this.streamController.immediateLevelSwitch()}get nextLevel(){return this.streamController.nextLevel}set nextLevel(e){z.log(`set nextLevel:${e}`),this.levelController.manualLevel=e,this.streamController.nextLevelSwitch()}get loadLevel(){return this.levelController.level}set loadLevel(e){z.log(`set loadLevel:${e}`),this.levelController.manualLevel=e}get nextLoadLevel(){return this.levelController.nextLoadLevel}set nextLoadLevel(e){this.levelController.nextLoadLevel=e}get firstLevel(){return Math.max(this.levelController.firstLevel,this.minAutoLevel)}set firstLevel(e){z.log(`set firstLevel:${e}`),this.levelController.firstLevel=e}get startLevel(){const e=this.levelController.startLevel;return e===-1&&this.abrController.forcedAutoLevel>-1?this.abrController.forcedAutoLevel:e}set startLevel(e){z.log(`set startLevel:${e}`),e!==-1&&(e=Math.max(e,this.minAutoLevel)),this.levelController.startLevel=e}get capLevelToPlayerSize(){return this.config.capLevelToPlayerSize}set capLevelToPlayerSize(e){const t=!!e;t!==this.config.capLevelToPlayerSize&&(t?this.capLevelController.startCapping():(this.capLevelController.stopCapping(),this.autoLevelCapping=-1,this.streamController.nextLevelSwitch()),this.config.capLevelToPlayerSize=t)}get autoLevelCapping(){return this._autoLevelCapping}get bandwidthEstimate(){const{bwEstimator:e}=this.abrController;return e?e.getEstimate():NaN}set bandwidthEstimate(e){this.abrController.resetEstimator(e)}get ttfbEstimate(){const{bwEstimator:e}=this.abrController;return e?e.getEstimateTTFB():NaN}set autoLevelCapping(e){this._autoLevelCapping!==e&&(z.log(`set autoLevelCapping:${e}`),this._autoLevelCapping=e,this.levelController.checkMaxAutoUpdated())}get maxHdcpLevel(){return this._maxHdcpLevel}set maxHdcpLevel(e){GO(e)&&this._maxHdcpLevel!==e&&(this._maxHdcpLevel=e,this.levelController.checkMaxAutoUpdated())}get autoLevelEnabled(){return this.levelController.manualLevel===-1}get manualLevel(){return this.levelController.manualLevel}get minAutoLevel(){const{levels:e,config:{minAutoBitrate:t}}=this;if(!e)return 0;const s=e.length;for(let i=0;i<s;i++)if(e[i].maxBitrate>=t)return i;return 0}get maxAutoLevel(){const{levels:e,autoLevelCapping:t,maxHdcpLevel:s}=this;let i;if(t===-1&&e!=null&&e.length?i=e.length-1:i=t,s)for(let r=i;r--;){const a=e[r].attrs["HDCP-LEVEL"];if(a&&a<=s)return r}return i}get firstAutoLevel(){return this.abrController.firstAutoLevel}get nextAutoLevel(){return this.abrController.nextAutoLevel}set nextAutoLevel(e){this.abrController.nextAutoLevel=e}get playingDate(){return this.streamController.currentProgramDateTime}get mainForwardBufferInfo(){return this.streamController.getMainFwdBufferInfo()}setAudioOption(e){var t;return(t=this.audioTrackController)==null?void 0:t.setAudioOption(e)}setSubtitleOption(e){var t;return(t=this.subtitleTrackController)==null||t.setSubtitleOption(e),null}get allAudioTracks(){const e=this.audioTrackController;return e?e.allAudioTracks:[]}get audioTracks(){const e=this.audioTrackController;return e?e.audioTracks:[]}get audioTrack(){const e=this.audioTrackController;return e?e.audioTrack:-1}set audioTrack(e){const t=this.audioTrackController;t&&(t.audioTrack=e)}get allSubtitleTracks(){const e=this.subtitleTrackController;return e?e.allSubtitleTracks:[]}get subtitleTracks(){const e=this.subtitleTrackController;return e?e.subtitleTracks:[]}get subtitleTrack(){const e=this.subtitleTrackController;return e?e.subtitleTrack:-1}get media(){return this._media}set subtitleTrack(e){const t=this.subtitleTrackController;t&&(t.subtitleTrack=e)}get subtitleDisplay(){const e=this.subtitleTrackController;return e?e.subtitleDisplay:!1}set subtitleDisplay(e){const t=this.subtitleTrackController;t&&(t.subtitleDisplay=e)}get lowLatencyMode(){return this.config.lowLatencyMode}set lowLatencyMode(e){this.config.lowLatencyMode=e}get liveSyncPosition(){return this.latencyController.liveSyncPosition}get latency(){return this.latencyController.latency}get maxLatency(){return this.latencyController.maxLatency}get targetLatency(){return this.latencyController.targetLatency}get drift(){return this.latencyController.drift}get forceStartLoad(){return this.streamController.forceStartLoad}}Nn.defaultConfig=void 0;const QN={name:"d-icon"},JN=Object.assign(QN,{props:{icon:String,size:[Number,String]},setup(n){const e=n,t=Ve(()=>({fontSize:/^\d+$/.test(e.size)?e.size+"px":e.size}));return(s,i)=>(ve(),Te("i",{class:ft(["d-icon iconfont",n.icon]),style:de(t.value)},null,6))}}),an=At(JN,[["__scopeId","data-v-9d68b847"]]),ZN={class:"d-player-top"},e3={class:"top-title"},t3={class:"top-title"},s3={__name:"d-player-top",props:{title:{default:""}},setup(n){Date.prototype.format=function(s){let i={"h+":this.getHours(),"m+":this.getMinutes(),"s+":this.getSeconds()};for(var r in i)new RegExp("("+r+")").test(s)&&(s=s.replace(RegExp.$1,RegExp.$1.length==1?i[r]:("00"+i[r]).substr((""+i[r]).length)));return s};let e=ce("00:00:00");e.value=new Date().format("hh:mm:ss");let t=null;return t=setInterval(()=>{e.value=new Date().format("hh:mm:ss")},1e3),Hn(()=>{clearInterval(t)}),(s,i)=>(ve(),Te("div",ZN,[_("p",e3,he(n.title||""),1),_("p",t3,he(De(e)),1)]))}},n3=At(s3,[["__scopeId","data-v-35ad81a5"]]),i3={class:"d-status"},r3={class:"d-flex-center"},a3={class:"d-flex-center"},o3=Ze({__name:"d-status",props:["state"],setup(n){return(e,t)=>ct((ve(),Te("div",i3,[ct(_("li",r3,[fe(an,{size:"18",class:"d-status-icon",icon:`icon-volume-${n.state.volume==0?"mute":n.state.volume>.5?"up":"down"}`},null,8,["icon"]),nt(" "+he(~~(n.state.volume*100))+"% ",1)],512),[[ot,n.state.handleType=="volume"]]),ct(_("li",a3,[fe(an,{size:"12",icon:"icon-play"}),fe(an,{size:"12",icon:"icon-play",style:{"margin-right":"5px"}}),nt("5倍速播放中 ")],512),[[ot,n.state.handleType=="playbackRate"||n.state.isMultiplesPlay]])],512)),[[ot,n.state.handleType||n.state.isMultiplesPlay]])}}),l3=At(o3,[["__scopeId","data-v-6b9e926d"]]),c3=n=>(Ls("data-v-477363f1"),n=n(),ws(),n),u3=["checked","true-value","false-value"],d3=c3(()=>_("span",{class:"d-switch_action"},null,-1)),h3=Ze({__name:"d-switch",props:{modelValue:{type:[Number,String,Boolean]},width:{type:String,default:"40px"},trueValue:{type:[Number,String,Boolean],default:!0},falseValue:{type:[Number,String,Boolean],default:!0},activeColor:{type:[String],default:"#409EFF"}},emits:["update:modelValue","change"],setup(n,{emit:e}){Zi(o=>({fcbd0e6e:n.width,"567af0c0":n.activeColor}));const t=n,s=e,i=ce(null),r=Ve(()=>t.modelValue===t.trueValue),a=()=>{Gn(()=>{const o=i.value.checked;s("update:modelValue",o),s("change",o)})};return(o,l)=>(ve(),Te("div",{class:ft(["d-switch",{"is-checked":r.value}])},[_("input",{class:"d-switch__input",ref_key:"input",ref:i,type:"checkbox",checked:r.value,onChange:a,"true-value":n.trueValue,"false-value":n.falseValue},null,40,u3),d3],2))}}),yu=At(h3,[["__scopeId","data-v-477363f1"]]),ro=n=>(Ls("data-v-f49d7fdb"),n=n(),ws(),n),f3={key:0},p3=ro(()=>_("i",{class:"rotating iconfont icon-loading f50"},null,-1)),m3=ro(()=>_("i",{class:"rotating iconfont icon-loading f50"},null,-1)),g3=ro(()=>_("p",null,"正在缓冲...",-1)),y3=[m3,g3],v3=ro(()=>_("i",{class:"iconfont icon-replay f24 mr5"},null,-1)),E3=ro(()=>_("i",{class:"iconfont icon-replay f24 mr5"},null,-1)),T3=Ze({__name:"d-loading",props:{loadType:String,text:{type:String,default:""}},setup(n){const{proxy:e}=ts(),t=["loadstart","waiting","ended","error","stalled"],s=n,i=()=>{e.$parent.play()},r=Ve(()=>{let a="background: rgba(0, 0, 0, .1);z-index:1";return s.loadType=="loadstart"&&(a="background: rgba(0, 0, 0, 1);;z-index:3"),a});return(a,o)=>ct((ve(),Te("div",{class:"d-loading",style:de(r.value)},[_("div",null,[n.loadType=="loadstart"?(ve(),Te("span",f3,[p3,_("p",null,he(n.text),1)])):et("",!0),ct(_("span",null,y3,512),[[ot,n.loadType=="waiting"]]),ct(_("span",null,[_("p",{onClick:i,class:"d-flex-x d-pointer"},[v3,nt("重新播放 ")])],512),[[ot,n.loadType=="ended"]]),ct(_("span",null,[_("p",{onClick:i,class:"d-flex-x d-pointer"},[E3,nt("请求错误 ")])],512),[[ot,n.loadType=="error"||n.loadType=="stalled"]])])],4)),[[ot,t.includes(n.loadType)]])}}),b3=At(T3,[["__scopeId","data-v-f49d7fdb"]]),Bi=function(n,e,t,s=!1){n&&e&&t&&n.addEventListener(e,t,s)},Ts=function(n,e,t,s=!1){n&&e&&t&&n.removeEventListener(e,t,s)},x3=["onMousedown"],S3={name:"DSlider"},_3=Ze({...S3,props:{modelValue:{required:!0,type:Number,default:0},disabled:{type:Boolean,default:!1},vertical:{type:Boolean,default:!1},hover:{type:Boolean,default:!0},hoverText:{type:String,default:""},preload:{type:Number,default:0},size:{type:String,default:"10px"}},emits:["update:modelValue","change","onMousemove"],setup(n,{emit:e}){Zi(g=>({"133acc96":n.size}));const t=ce(null),s=ce(null),i=n,r=e,a=qt({dragging:!1,hoverPosition:0,hoverTipsLeft:"50%"}),o=Ve(()=>{let g=i.modelValue<0?0:i.modelValue>1?1:i.modelValue;return i.vertical?`height:${g*100}%`:`width:${g*100}%`}),l=Ve(()=>{let g=i.preload<0?0:i.preload>1?1:i.preload;return i.vertical?`height:${g*100}%`:`width:${g*100}%`}),c=Ve(()=>{let g=a.hoverPosition<0?0:a.hoverPosition>1?1:a.hoverPosition;return i.vertical?`bottom:${g*100}%`:`left:${g*100}%`}),u=g=>{g.preventDefault()},d=g=>{i.disabled||(g.preventDefault(),a.dragging=!0,f(g),Bi(window,"mousemove",m),Bi(window,"touchmove",m),Bi(window,"mouseup",y),Bi(window,"touchend",y))},h=g=>{if(!i.hover)return;let v=p(g);if(r("onMousemove",g,v),a.hoverPosition=v,i.vertical)return;let E=t.value,T=s.value.clientWidth/2,b=g.clientX-E.getBoundingClientRect().left;b<T?a.hoverTipsLeft=T-b+"px":E.clientWidth-b<T?a.hoverTipsLeft=E.clientWidth-b-T+"px":a.hoverTipsLeft="50%"},f=g=>{let v=p(g);r("update:modelValue",v),r("change",g,v)},p=g=>{let v=t.value,E=0;if(i.vertical){let T=v.clientHeight;E=(v.getBoundingClientRect().bottom-g.clientY)/T}else E=(g.clientX-v.getBoundingClientRect().left)/v.clientWidth;return E<0?0:E>1?1:E},m=g=>{f(g)},y=g=>{a.dragging&&(Ts(window,"mousemove",m),Ts(window,"touchmove",m),Ts(window,"mouseup",y),Ts(window,"touchend",y),Ts(window,"contextmenu",y),setTimeout(()=>{a.dragging=!1},0))};return(g,v)=>(ve(),Te("div",{ref_key:"refSlider",ref:t,class:ft(["d-slider",{"is-vertical":i.vertical}]),onMousedown:Ua(d,["stop"]),onContextmenu:u},[_("div",{class:"d-slider__runway",onMousemove:h},[ct(_("div",{class:"d-slider__cursor",style:de(c.value)},[ct(_("div",{class:"d-slider__tips",ref_key:"refTips",ref:s,style:de({left:a.hoverTipsLeft})},he(i.hoverText),5),[[ot,i.hoverText]])],4),[[ot,i.hover]]),_("div",{class:"d-slider__preload",style:de(l.value)},null,4),_("div",{class:"d-slider__bar",style:de(o.value)},null,4)],32)],42,x3))}}),La=At(_3,[["__scopeId","data-v-e39dac36"]]),a0="1.3.2",gc=n=>(Ls("data-v-44114481"),n=n(),ws(),n),A3={key:0,class:"d-player-dialog"},L3={class:"d-player-dialog-body"},w3={class:"d-player-dialog-title"},R3={class:"d-player-hotkey-panel"},I3={class:"d-player-filter-panel"},C3={class:"d-player-filter-panel-item"},D3=gc(()=>_("span",null,"饱和度",-1)),k3={class:"d-player-filter-panel-item"},P3=gc(()=>_("span",null,"亮度",-1)),O3={class:"d-player-filter-panel-item"},M3=gc(()=>_("span",null,"对比度",-1)),F3={key:0,class:"d-player-contextmenu"},N3=["dplayerKeyCode"],B3=gc(()=>_("input",{class:"d-player-copyText"},null,-1)),U3={__name:"d-contextmenu",setup(n){const e=qt({show:!1,dialogType:"",dialogTitle:"",version:a0,mouseX:0,mouseY:0}),t=[{label:"视频色彩调整",key:"filter"},{label:"快捷键说明",key:"hotkey"},{label:"复制视频网址",key:"copy"},{label:"版本："+a0,key:"version"}],s=[{key:"Space",label:"播放/暂停"},{key:"→",label:"单次快进10s，长按5倍速播放"},{key:"←",label:"快退5s"},{key:"↑",label:"音量增加10%"},{key:"↓",label:"音量增加降低10%"},{key:"Esc",label:"退出全屏/退出网页全屏"},{key:"F",label:"全屏/退出全屏"}],i=qt({saturate:.392,brightness:.392,contrast:.392}),r=Ve(()=>({left:e.mouseX+"px",top:e.mouseY+"px"}));_t(i,u=>{let d=document.querySelector("#dPlayerVideo"),h=(u.saturate*2.55).toFixed(2),f=(u.brightness*2.55).toFixed(2),p=(u.contrast*2.55).toFixed(2);d.style.filter=`saturate(${h}) brightness(${f}) contrast(${p})`});const a=()=>{i.saturate=.392,i.brightness=.392,i.contrast=.392},o=u=>{u.key=="Escape"&&c(0)},l=u=>{u.preventDefault(),Bi(window,"keydown",o),Bi(window,"click",c);let d=document.querySelector("#refPlayerWrap"),h=d.clientWidth;d.clientHeight,e.mouseX=u.clientX-d.getBoundingClientRect().left,h-e.mouseX<130&&(e.mouseX=e.mouseX+(h-e.mouseX-130)),e.mouseY=u.clientY-d.getBoundingClientRect().top,e.show=!0},c=u=>{let d=u.target.nodeName=="LI",h=u.target.attributes.dplayerKeyCode&&u.target.attributes.dplayerKeyCode.value,f=t.map(p=>p.key);if(d&&f.includes(h))if(e.dialogTitle=u.target.innerText,e.dialogType=h,h=="copy"){let p=document.querySelector(".d-player-copyText");p.value=window.location.href,p.select(),document.execCommand("copy"),e.dialogType=""}else h=="version"&&(e.dialogType="");e.show=!1,Ts(window,"keydown",o),Ts(window,"click",c)};return vt(()=>{let u=document.querySelector("#refPlayerWrap");Ts(window,"keydown",o),Ts(window,"click",c),Ts(u,"contextmenu",l),Bi(u,"contextmenu",l)}),Hn(()=>{let u=document.querySelector("#refPlayerWrap");Ts(window,"keydown",o),Ts(window,"click",c),Ts(u,"contextmenu",l)}),(u,d)=>(ve(),Te("div",null,[fe(En,{name:"d-fade-in"},{default:Pt(()=>[e.dialogType?(ve(),Te("div",A3,[_("div",L3,[_("h5",w3,[nt(he(e.dialogTitle)+" ",1),_("i",{onClick:d[0]||(d[0]=h=>e.dialogType=!1),class:"icon icon-close"},"X")]),ct(_("ul",R3,[(ve(),Te(We,null,As(s,h=>_("li",{class:"d-player-hotkey-panel-item",key:h.key},[_("span",null,he(h.key),1),_("span",null,he(h.label),1)])),64))],512),[[ot,e.dialogType=="hotkey"]]),ct(_("ul",I3,[_("li",C3,[D3,fe(La,{class:"filter-panel-slider",size:"5px",modelValue:i.saturate,"onUpdate:modelValue":d[1]||(d[1]=h=>i.saturate=h)},null,8,["modelValue"]),_("span",null,he(Math.round(i.saturate*255)),1)]),_("li",k3,[P3,fe(La,{class:"filter-panel-slider",size:"5px",modelValue:i.brightness,"onUpdate:modelValue":d[2]||(d[2]=h=>i.brightness=h)},null,8,["modelValue"]),_("span",null,he(Math.round(i.brightness*255)),1)]),_("li",O3,[M3,fe(La,{class:"filter-panel-slider",size:"5px",modelValue:i.contrast,"onUpdate:modelValue":d[3]||(d[3]=h=>i.contrast=h)},null,8,["modelValue"]),_("span",null,he(Math.round(i.contrast*255)),1)]),_("span",{onClick:a,title:"重置","aria-label":"重置",class:"d-player-filter-reset"},"重置")],512),[[ot,e.dialogType=="filter"]])])])):et("",!0)]),_:1}),e.show?(ve(),Te("div",F3,[_("ul",{class:"d-player-contextmenu-body",style:de(r.value)},[(ve(),Te(We,null,As(t,h=>_("li",{dplayerKeyCode:h.key,key:h.key},he(h.label),9,N3)),64))],4),B3])):et("",!0)]))}},$3=At(U3,[["__scopeId","data-v-44114481"]]),j3=n=>`${parseInt("0x"+n.slice(1,3))},${parseInt("0x"+n.slice(3,5))},${parseInt("0x"+n.slice(5,7))}`,G3=n=>n.charAt(0).toUpperCase()+n.slice(1),vu=n=>{let e=~~(n/3600),t=~~(n%3600/60),s=~~(n%60);return e=e<10?"0"+e:e,t=t<10?"0"+t:t,s=s<10?"0"+s:s,`${e}:${t}:${s}`},la="ontouchstart"in window,V3=n=>{let e=document,t=e.webkitIsFullScreen||e.fullscreen;return t?(document.exitFullscreen||e.webkitExitFullScreen).call(e):(n.requestFullscreen||n.webkitRequestFullScreen).call(n),!t},H3=n=>{document.pictureInPictureElement?document.exitPictureInPicture().catch(e=>{console.log(e,"Video failed to leave Picture-in-Picture mode.")}):n.requestPictureInPicture().catch(e=>{console.log(e,"Video failed to enter Picture-in-Picture mode.")})},o0=["loadstart","play","pause","playing","seeking","seeked","waiting","durationchange","progress","canplay","timeupdate","ended","error","stalled"],K3={width:{type:String,default:"800px"},height:{type:String,default:"450px"},color:{type:String,default:"#409eff"},src:{required:!0,type:String,default:""},title:{type:String,default:""},type:{type:String,default:"video/mp4"},poster:{type:String,default:""},webFullScreen:{type:Boolean,default:!1},speed:{type:Boolean,default:!0},currentTime:{type:Number,default:0},playsinline:{type:Boolean,default:!1},muted:{type:Boolean,default:!1},speedRate:{type:Array,default:()=>["2.0","1.5","1.25","1.0","0.75","0.5"]},autoPlay:{type:Boolean,default:!1},loop:{type:Boolean,default:!1},mirror:{type:Boolean,default:!1},ligthOff:{type:Boolean,default:!1},volume:{type:[String,Number],default:.3},control:{type:Boolean,default:!0},controlBtns:{type:Array,default:["audioTrack","quality","speedRate","volume","setting","pip","pageFullScreen","fullScreen"]},preload:{type:String,default:"auto"}},yc=n=>(Ls("data-v-4fcf08cd"),n=n(),ws(),n),W3={class:"d-player-video",id:"dPlayerVideo"},z3=["controls","webkit-playsinline","playsinline","volume","muted","loop","preload","src","poster"],Y3={class:"d-player-lightoff"},q3={key:1,class:"d-player-state"},X3={class:"d-play-btn"},Q3=["onKeyup","onKeydown"],J3={class:"d-control-progress"},Z3={class:"d-tool-bar"},e4={key:0,class:"d-tool-item d-tool-time audioTrack-btn"},t4=yc(()=>_("span",{style:{margin:"0 3px"}},"/",-1)),s4={class:"total-time"},n4={class:"d-tool-bar"},i4={key:0,class:"d-tool-item quality-btn"},r4={class:"d-tool-item-main"},a4={class:"speed-main",style:{"text-align":"center"}},o4=["onClick"],l4={key:1,class:"d-tool-item speedRate-btn"},c4={class:"d-tool-item-main"},u4={class:"speed-main"},d4=["onClick"],h4={key:2,class:"d-tool-item volume-btn"},f4={class:"d-tool-item-main volume-box",style:{width:"52px"}},p4={class:"volume-text-size"},m4={key:3,class:"d-tool-item setting-btn"},g4={class:"d-tool-item-main"},y4={class:"speed-main"},v4=yc(()=>_("div",{class:"d-tool-item-main"},"画中画",-1)),E4=yc(()=>_("div",{class:"d-tool-item-main"},"网页全屏",-1)),T4=yc(()=>_("div",{class:"d-tool-item-main"},"全屏",-1)),b4={name:"vue3VideoPlay",inheritAttrs:!1},x4=Ze({...b4,props:K3,emits:[...o0,"mirrorChange","loopChange","lightOffChange"],setup(n,{expose:e,emit:t}){Zi(B=>({"3940b7ad":De(p),"734ed3d2":B.width,"4686a6ca":B.height}));const s=new Nn({fragLoadingTimeOut:2e3}),i=n,r=t,a=ce(null),o=ce(null),l=ce(null),c=ce(null),u=qt({dVideo:null,...i,muted:i.muted,playBtnState:i.autoPlay?"pause":"play",loadStateType:"loadstart",fullScreen:!1,handleType:"",currentTime:"00:00:00",preloadBar:0,totalTime:"00:00:00",isVideoHovering:!0,speedActive:"1.0",playProgress:0,isMultiplesPlay:!1,longPressTimeout:null,progressCursorTime:"00:00:00",qualityLevels:[],currentLevel:0}),d=(...B)=>j=>B.reverse().reduce((Y,me)=>me(Y),j),h=o0.reduce((B,j)=>{let Y=`on${G3(j)}`;return B[Y]=me=>{u.loadStateType=j,r(j,me)},B},{});h.onCanplay=d(h.onCanplay,()=>{u.playBtnState!="play"&&u.dVideo.play(),u.autoPlay&&(u.dVideo.play(),u.playBtnState="pause")}),h.onEnded=d(h.onEnded,()=>{u.playBtnState="replay"}),h.onDurationchange=B=>{r("durationchange",B),i.currentTime!=0&&(u.dVideo.currentTime=i.currentTime),h.onTimeupdate(B)},h.onProgress=B=>{console.log("缓冲中..."),r("progress",B);let j=B.target.duration,Y=B.target.buffered,me=B.target.buffered.length&&B.target.buffered.end(Y-1);u.preloadBar=me/j},h.onTimeupdate=B=>{r("timeupdate",B);let j=B.duration||B.target.duration||0,Y=B.currentTime||B.target.currentTime;u.playProgress=Y/j,u.currentTime=vu(Y),u.totalTime=vu(j)},h.onError=d(h.onError,()=>{u.playBtnState="replay"});let f=Oh();for(let B in f)h[B]=f[B];const p=j3(u.color),m=tg(500,()=>{u.handleType=""}),y=B=>{B.preventDefault(),B.code=="ArrowUp"?u.volume=u.volume+.1>1?1:u.volume+.1:u.volume=u.volume-.1<0?0:u.volume-.1,u.muted=!1,u.handleType="volume",m()},g=B=>{i.speed&&(u.dVideo.currentTime=u.dVideo.currentTime<10?.1:u.dVideo.currentTime-10,h.onTimeupdate(u.dVideo),T())},v=B=>{B.preventDefault();let j=B.type;if(B.key=="ArrowRight"){if(T(),j=="keyup"){if(clearTimeout(u.longPressTimeout),!i.speed&&!u.longPressTimeout)return;u.isMultiplesPlay?(u.dVideo.playbackRate=u.speedActive,u.isMultiplesPlay=!1):(u.dVideo.currentTime=u.dVideo.currentTime+10,h.onTimeupdate(u.dVideo))}else if(j=="keydown"){if(!i.speed)return;u.isMultiplesPlay&&clearTimeout(u.longPressTimeout),u.longPressTimeout=setTimeout(()=>{u.isMultiplesPlay=!0,u.dVideo.playbackRate=5,u.handleType="playbackRate",m()},500)}}},E=()=>{la||c.value.focus()},T=()=>{u.loadStateType="play",u.dVideo.play().catch(()=>{u.dVideo.load(),setTimeout(()=>{u.dVideo.play().catch(()=>{u.playBtnState="replay",u.loadStateType="error"})},200)}),u.playBtnState="pause"},b=()=>{u.dVideo.pause(),u.playBtnState="play"},L=B=>{B&&B.preventDefault(),u.playBtnState=="play"||u.playBtnState=="replay"?T():u.playBtnState=="pause"&&b()},x=()=>{u.muted=!u.muted,u.volume==0&&(u.volume=.05)},w=(B,j)=>{let Y=u.dVideo.duration||u.dVideo.target.duration;u.dVideo.currentTime=Y*j,u.playBtnState=="play"&&(u.dVideo.play(),u.playBtnState="pause")},k=(B,j)=>{u.progressCursorTime=vu(u.dVideo.duration*j)},R=tg(2500,()=>{u.isVideoHovering=!1}),P=B=>{u.isVideoHovering=!0,R()},D=(B,j)=>{s.currentLevel=j,u.currentLevel=j},O=B=>{u.speedActive=B,u.dVideo.playbackRate=B},N=B=>{r("mirrorChange",B,u.dVideo)},$=B=>{r("loopChange",B,u.dVideo)},K=B=>{r("lightOffChange",B,u.dVideo)},ee=()=>{H3(u.dVideo)},V=()=>{u.fullScreen=V3(a.value)},U=()=>{u.dVideo.canPlayType(i.type)||console.error("vue3-video-play: Format not supported,Check the [type] parameter"),u.dVideo.canPlayType(i.type)||u.dVideo.canPlayType("application/vnd.apple.mpegurl")?u.muted=i.autoPlay:Nn.isSupported()&&(s.detachMedia(),s.attachMedia(u.dVideo),s.on(Nn.Events.MEDIA_ATTACHED,()=>{s.loadSource(i.src),s.on("hlsManifestParsed",(B,j)=>{console.log(j),u.currentLevel=j.level,u.qualityLevels=j.levels||[]})}),s.on("hlsLevelSwitching",(B,j)=>{console.log(j),console.log("LEVEL_SWITCHING")}),s.on("hlsLevelSwitched",(B,j)=>{u.currentLevel=j.level,console.log("LEVEL_SWITCHED")}))};return _t(()=>i.src,()=>{Gn(()=>{U()})},{immediate:!0}),vt(()=>{u.dVideo=o,E()}),e({play:T,pause:b,togglePlay:L}),(B,j)=>(ve(),Te("div",{ref_key:"refPlayerWrap",ref:a,id:"refPlayerWrap",class:ft(["d-player-wrap",{"web-full-screen":u.webFullScreen,"is-lightoff":u.lightOff,"d-player-wrap-hover":u.playBtnState=="play"||u.isVideoHovering}]),onMousemove:P},[_("div",W3,[_("video",Xr({ref_key:"refdVideo",ref:o,class:["d-player-video-main",{"video-mirror":u.mirror}],id:"dPlayerVideoMain",controls:!!(De(la)&&u.speed),"webkit-playsinline":i.playsinline,playsinline:i.playsinline},De(h),{volume:u.volume,muted:u.muted,loop:u.loop,preload:B.preload,width:"100%",height:"100%",src:i.src,poster:i.poster})," 您的浏览器不支持Video标签。 ",16,z3)]),fe(En,{name:"d-fade-in"},{default:Pt(()=>[ct(_("div",Y3,null,512),[[ot,u.lightOff]])]),_:1}),u.fullScreen?(ve(),qr(n3,{key:0,title:i.title},null,8,["title"])):et("",!0),De(la)?et("",!0):(ve(),Te("div",q3,[fe(En,{name:"d-scale-out"},{default:Pt(()=>[ct(_("div",X3,[fe(an,{icon:"icon-play",size:40})],512),[[ot,u.playBtnState=="play"]])]),_:1}),fe(l3,{state:u},null,8,["state"])])),De(la)?et("",!0):(ve(),Te("input",{key:2,type:"input",readonly:"readonly",ref_key:"refInput",ref:c,onDblclick:V,onKeyup:[Ws(V,["f"]),j[0]||(j[0]=Ws(Y=>u.webFullScreen=!1,["esc"])),v],onClick:L,onKeydown:[Ws(L,["space"]),Ws(g,["arrow-left"]),Ws(y,["arrow-up","arrow-down"]),v],class:"d-player-input",maxlength:"0"},null,40,Q3)),fe(b3,{loadType:u.loadStateType},null,8,["loadType"]),fe($3),!De(la)&&u.control?(ve(),Te("div",{key:3,class:"d-player-control",ref_key:"refPlayerControl",ref:l},[_("div",J3,[fe(La,{class:"d-progress-bar",onOnMousemove:k,onChange:w,disabled:!u.speed,hoverText:u.progressCursorTime,modelValue:u.playProgress,"onUpdate:modelValue":j[1]||(j[1]=Y=>u.playProgress=Y),preload:u.preloadBar},null,8,["disabled","hoverText","modelValue","preload"])]),_("div",{class:"d-control-tool",onClick:E},[_("div",Z3,[_("div",{class:"d-tool-item",onClick:L},[fe(an,{size:"24",icon:`icon-${u.playBtnState}`},null,8,["icon"])]),i.controlBtns.includes("audioTrack")?(ve(),Te("div",e4,[_("span",null,he(u.currentTime),1),t4,_("span",s4,he(u.totalTime),1)])):et("",!0)]),_("div",n4,[u.qualityLevels.length&&i.controlBtns.includes("quality")?(ve(),Te("div",i4,[nt(he(u.qualityLevels.length&&(u.qualityLevels[u.currentLevel]||{}).height)+"P ",1),_("div",r4,[_("ul",a4,[(ve(!0),Te(We,null,As(u.qualityLevels,(Y,me)=>(ve(),Te("li",{class:ft({"speed-active":u.currentLevel==me}),onClick:xe=>D(Y,me),key:Y},he(Y.height)+"P ",11,o4))),128))])])])):et("",!0),i.controlBtns.includes("speedRate")?(ve(),Te("div",l4,[nt(he(u.speedActive=="1.0"?"倍速":u.speedActive+"x")+" ",1),_("div",c4,[_("ul",u4,[(ve(!0),Te(We,null,As(u.speedRate,Y=>(ve(),Te("li",{class:ft({"speed-active":u.speedActive==Y}),onClick:me=>O(Y),key:Y},he(Y)+"x ",11,d4))),128))])])])):et("",!0),i.controlBtns.includes("volume")?(ve(),Te("div",h4,[_("div",f4,[_("div",{class:ft(["volume-main",{"is-muted":u.muted}])},[_("span",p4,he(u.muted?0:~~(u.volume*100))+"%",1),fe(La,{onChange:j[2]||(j[2]=Y=>u.muted=!1),hover:!1,size:"5px",vertical:!0,modelValue:u.volume,"onUpdate:modelValue":j[3]||(j[3]=Y=>u.volume=Y)},null,8,["modelValue"])],2)]),_("span",{onClick:x,style:{display:"flex"}},[fe(an,{size:"20",icon:`icon-volume-${u.volume==0||u.muted?"mute":u.volume>.5?"up":"down"}`},null,8,["icon"])])])):et("",!0),i.controlBtns.includes("setting")?(ve(),Te("div",m4,[fe(an,{size:"20",class:"rotateHover",icon:"icon-settings"}),_("div",g4,[_("ul",y4,[_("li",null,[nt(" 镜像画面 "),fe(yu,{onChange:N,modelValue:u.mirror,"onUpdate:modelValue":j[4]||(j[4]=Y=>u.mirror=Y)},null,8,["modelValue"])]),_("li",null,[nt(" 循环播放 "),fe(yu,{onChange:$,modelValue:u.loop,"onUpdate:modelValue":j[5]||(j[5]=Y=>u.loop=Y)},null,8,["modelValue"])]),_("li",null,[nt(" 关灯模式 "),fe(yu,{onChange:K,modelValue:u.lightOff,"onUpdate:modelValue":j[6]||(j[6]=Y=>u.lightOff=Y)},null,8,["modelValue"])])])])])):et("",!0),i.controlBtns.includes("pip")?(ve(),Te("div",{key:4,class:"d-tool-item pip-btn",onClick:ee},[fe(an,{size:"20",icon:"icon-pip"}),v4])):et("",!0),i.controlBtns.includes("pageFullScreen")?(ve(),Te("div",{key:5,class:"d-tool-item pip-btn",onClick:j[7]||(j[7]=Y=>u.webFullScreen=!u.webFullScreen)},[fe(an,{size:"20",icon:"icon-web-screen"}),E4])):et("",!0),i.controlBtns.includes("fullScreen")?(ve(),Te("div",{key:6,class:"d-tool-item fullScreen-btn",onClick:V},[T4,fe(an,{size:"20",icon:"icon-screen"})])):et("",!0)])])],512)):et("",!0)],34))}}),qa=At(x4,[["__scopeId","data-v-4fcf08cd"]]);function S4(n){n.component(qa.name,qa)}qa.install=S4;const _4="/PersonalWeb/assets/background_vbike-28b0a93c.svg",A4="/PersonalWeb/assets/video_vbike_post-3b4a347f.svg",L4="/PersonalWeb/assets/picture_vbike01-8fcf9a58.svg",w4="/PersonalWeb/assets/picture_vbike02-92cdce0e.svg",R4="/PersonalWeb/assets/picture_vbike03-3f82ffec.svg",I4="/PersonalWeb/assets/picture_vbike04-cadaecf0.svg",C4="/PersonalWeb/assets/picture_vbike05-1e0cfecf.svg",D4="/PersonalWeb/assets/picture_vbike06-12b59bc8.svg",k4={class:"text-overlay custom-font"},P4={class:"container mx-auto custom-font"},O4={class:"text-left ml-18 mt-10"},M4={class:"container mx-auto block sm:flex sm:gap-10 mt-10 sm:mt-20 justify-center"},F4={class:"flex items-center"},N4={class:"container mx-auto custom-font"},B4={class:"text-left ml-18 mt-10"},U4={class:"container mx-auto block sm:flex sm:gap-10 mt-10 sm:mt-20 justify-center"},$4={class:"container mx-auto block sm:flex sm:gap-10 mt-10 sm:mt-10 justify-center"},j4=["src"],G4={class:"container mx-auto block sm:flex sm:gap-10 mt-10 sm:mt-20 justify-center"},V4={class:"container mx-auto block sm:flex sm:gap-10 mt-10 sm:mt-10 justify-center"},H4=["src"],K4={class:"container mx-auto custom-font"},W4={class:"text-left ml-18 mt-10"},z4={class:"container mx-auto block sm:flex sm:gap-10 mt-10 sm:mt-20 justify-center"},Y4={class:"container mx-auto block sm:flex mt-10 m:gap-10 sm:mt-10 justify-center"},q4=["src"],X4={class:"container mx-auto block sm:flex mt-10 sm:gap-10 sm:mt-10 justify-center"},Q4=["src"],J4={class:"container mx-auto block sm:flex sm:gap-10 mt-10 sm:mt-20 justify-center"},Z4={class:"container mx-auto block sm:flex mt-10 sm:gap-10 sm:mt-10 justify-center"},eB=["src"],tB={class:"container mx-auto custom-font"},sB={class:"text-left ml-18 mt-10"},nB={class:"container mx-auto block sm:flex sm:gap-10 mt-10 sm:mt-20 justify-center"},iB={class:"container mx-auto block sm:flex sm:gap-10 mt-10 sm:mt-10 justify-center"},rB={class:"container mx-auto block sm:flex mt-10 sm:gap-10 sm:mt-10 justify-center"},aB=["src"],oB={class:"container mx-auto block sm:flex sm:gap-10 mt-10 sm:mt-20 justify-center"},lB={class:"container mx-auto custom-font block sm:flex sm:gap-10 mt-10 sm:mt-20 justify-center"},cB={class:"button-section"},uB=Ze({__name:"VBike",setup(n){const e=ce(_4),t=ce({}),s=ce({}),i=ce({}),r=ce({}),a=ce({}),o=ce({}),l=qt({width:"900px",height:"500px",color:"#409eff",muted:!1,webFullScreen:!1,speedRate:["0.75","1.0","1.25","1.5","2.0"],autoPlay:!1,loop:!1,mirror:!1,ligthOff:!1,volume:.3,control:!0,title:"",src:"https://dl.dropboxusercontent.com/scl/fi/aegujzs3koaona3jll37s/video_vbike.mp4?rlkey=jnloksexp0tqxuus0m5d5iba3&dl=0",poster:A4}),c=m=>{console.log(m,"Play")},u=m=>{console.log(m,"Stop")},d=m=>{console.log(m,"時間更新")},h=m=>{console.log(m,"可以播放")},f=()=>{window.innerWidth<=768?(t.value={fontSize:"50px"},s.value={fontSize:"16px"},i.value={fontSize:"14px"},r.value={width:"90%"},a.value={width:"90%"},o.value={fontSize:"2.25rem"}):(t.value={fontSize:"120px"},s.value={fontSize:"40px"},i.value={fontSize:"18px",maxWidth:"60%",margin:"0px auto"},r.value={width:"60%"},a.value={width:"98%"},o.value={fontSize:"3.75rem"})},p=()=>{ao.push({path:"/PersonalWeb/Projects"})};return vt(()=>{f(),window.addEventListener("resize",f)}),Vt(()=>{window.removeEventListener("resize",f)}),(m,y)=>(ve(),Te(We,null,[_("div",{style:de({"background-image":"url("+e.value+")"}),class:"background-container"},[_("div",k4,[_("p",{style:de(t.value),class:"text-overlay-content mb-2 font-bold"},"V-Bike",4),_("p",{style:de(s.value),class:"text-overlay-content mb-6"},he(m.$t("project4-subtitle")),5),_("p",{style:de(i.value),class:"text-overlay-content"},he(m.$t("project4-brief")),5)])],4),_("div",P4,[_("div",O4,[_("h1",{class:"md:text-4x1 lg: font-bold ml-4","data-aos":"fade-left",style:de(o.value)}," Review ",4)])]),_("div",M4,[_("div",F4,[fe(De(qa),Xr(l,{onPlay:c,onPause:u,onTimeupdate:d,onCanplay:h}),null,16)])]),_("div",N4,[_("div",B4,[_("h1",{class:"font-bold ml-4","data-aos":"fade-left",style:de(o.value)}," Features ",4)])]),_("div",U4,[_("p",{class:"ml-4 content-center",style:de(a.value),"data-aos":"fade-up"},he(m.$t("project4-feature-content1")),5)]),_("div",$4,[_("img",{src:De(L4),class:"content-center",style:de(r.value),"data-aos":"fade-up"},null,12,j4)]),_("div",G4,[_("p",{class:"ml-4 content-center",style:de(a.value),"data-aos":"fade-up"},he(m.$t("project4-feature-content2")),5)]),_("div",V4,[_("img",{src:De(w4),class:"content-center",style:de(r.value),"data-aos":"fade-up"},null,12,H4)]),_("div",K4,[_("div",W4,[_("h1",{class:"font-bold ml-4","data-aos":"fade-left",style:de(o.value)}," Design ",4)])]),_("div",z4,[_("p",{class:"ml-4 content-center",style:de(a.value),"data-aos":"fade-up"},he(m.$t("project4-design-content1")),5)]),_("div",Y4,[_("img",{src:De(R4),class:"content-center",style:de(r.value),"data-aos":"fade-up"},null,12,q4)]),_("div",X4,[_("img",{src:De(I4),class:"content-center",style:de(r.value),"data-aos":"fade-up"},null,12,Q4)]),_("div",J4,[_("p",{class:"ml-4 content-center",style:de(a.value),"data-aos":"fade-up"},he(m.$t("project4-design-content2")),5)]),_("div",Z4,[_("img",{src:De(C4),class:"content-center",style:de(r.value),"data-aos":"fade-up"},null,12,eB)]),_("div",tB,[_("div",sB,[_("h1",{class:"font-bold ml-4","data-aos":"fade-left",style:de(o.value)}," Experiment ",4)])]),_("div",nB,[_("p",{class:"ml-4 content-center",style:de(a.value),"data-aos":"fade-up"},he(m.$t("project4-experiment-content1")),5)]),_("div",iB,[_("p",{class:"ml-4 content-center",style:de(a.value),"data-aos":"fade-up"},he(m.$t("project4-experiment-content2")),5)]),_("div",rB,[_("img",{src:De(D4),class:"content-center",style:de(r.value),"data-aos":"fade-up"},null,12,aB)]),_("div",oB,[_("p",{class:"ml-4 content-center",style:de(a.value),"data-aos":"fade-up"},he(m.$t("project4-experiment-content3")),5)]),_("div",lB,[_("div",cB,[_("button",{type:"button",class:"btn-default",onClick:y[0]||(y[0]=g=>p())},"Go Back")])])],64))}}),dB=At(uB,[["__scopeId","data-v-8794effc"]]),hB="/PersonalWeb/assets/background_kuchipa-9cefbcd5.svg",fB="/PersonalWeb/assets/picture_kuchipa01-57d3f284.svg",pB="/PersonalWeb/assets/picture_kuchipa02-6df7a4e0.svg",mB="/PersonalWeb/assets/picture_kuchipa03-5a0aa1c3.svg",gB="/PersonalWeb/assets/picture_kuchipa04-d9364f2f.svg",yB="/PersonalWeb/assets/picture_kuchipa05-08d377d1.svg",vB="/PersonalWeb/assets/picture_kuchipa06-ab665a39.svg",EB="/PersonalWeb/assets/picture_kuchipa07-6f316ff9.svg",TB={class:"text-overlay custom-font"},bB={class:"container mx-auto custom-font"},xB={class:"text-left ml-18 mt-10"},SB={class:"container mx-auto block sm:flex sm:gap-10 mt-10 sm:mt-20 justify-center"},_B={class:"flex items-center"},AB={class:"container mx-auto custom-font"},LB={class:"text-left ml-18 mt-10"},wB={class:"container mx-auto block sm:flex sm:gap-10 mt-10 sm:mt-10 justify-center"},RB=["src"],IB={class:"container mx-auto block sm:flex sm:gap-10 mt-10 sm:mt-20 justify-center"},CB={class:"container mx-auto block sm:flex sm:gap-10 mt-10 sm:mt-20 justify-center"},DB={class:"container mx-auto block sm:flex sm:gap-10 mt-10 sm:mt-10 justify-center"},kB=["src"],PB={class:"container mx-auto block sm:flex sm:gap-10 mt-10 sm:mt-20 justify-center"},OB={class:"container mx-auto block sm:flex sm:gap-10 mt-10 sm:mt-10 justify-center"},MB=["src"],FB={class:"container mx-auto block sm:flex sm:gap-10 mt-10 sm:mt-20 justify-center"},NB={class:"container mx-auto block sm:flex sm:gap-10 mt-10 sm:mt-10 justify-center"},BB=["src"],UB={class:"container mx-auto block sm:flex sm:gap-10 mt-10 sm:mt-20 justify-center"},$B={class:"container mx-auto block sm:flex sm:gap-10 mt-10 sm:mt-10 justify-center"},jB=["src"],GB={class:"container mx-auto block sm:flex sm:gap-10 mt-10 sm:mt-20 justify-center"},VB={class:"container mx-auto custom-font"},HB={class:"text-left ml-18 mt-10"},KB={class:"container mx-auto block sm:flex sm:gap-10 mt-10 sm:mt-10 justify-center"},WB=["src"],zB={class:"container mx-auto block sm:flex sm:gap-10 mt-10 sm:mt-20 justify-center"},YB={class:"container mx-auto block sm:flex sm:gap-10 mt-10 sm:mt-10 justify-center"},qB=["src"],XB={class:"container mx-auto block sm:flex sm:gap-10 mt-10 sm:mt-20 justify-center"},QB={class:"container mx-auto custom-font block sm:flex sm:gap-10 mt-10 sm:mt-20 justify-center"},JB={class:"button-section"},ZB=Ze({__name:"Kuchipa",setup(n){const e=ce(hB),t=ce({}),s=ce({}),i=ce({}),r=ce({}),a=ce({}),o=ce({}),l=qt({width:"880px",height:"500px",color:"#409eff",muted:!1,webFullScreen:!1,speedRate:["0.75","1.0","1.25","1.5","2.0"],autoPlay:!1,loop:!1,mirror:!1,ligthOff:!1,volume:.3,control:!0,title:"",src:"https://dl.dropboxusercontent.com/scl/fi/aha0z46gufpggu55b2smd/video_kuchipa.mp4?rlkey=muqub2gz1577yd8j4jh8a1wfi&dl=0",poster:""}),c=m=>{console.log(m,"Play")},u=m=>{console.log(m,"Stop")},d=m=>{console.log(m,"時間更新")},h=m=>{console.log(m,"可以播放")},f=()=>{window.innerWidth<=768?(t.value={fontSize:"50px"},s.value={fontSize:"16px"},i.value={fontSize:"14px"},r.value={width:"90%"},a.value={width:"90%"},o.value={fontSize:"2.25rem"}):(t.value={fontSize:"120px"},s.value={fontSize:"40px"},i.value={fontSize:"18px",maxWidth:"60%",margin:"0px auto"},r.value={width:"60%"},a.value={width:"98%"},o.value={fontSize:"3.75rem"})},p=()=>{ao.push({path:"/PersonalWeb/Projects"})};return vt(()=>{f(),window.addEventListener("resize",f)}),Vt(()=>{window.removeEventListener("resize",f)}),(m,y)=>(ve(),Te(We,null,[_("div",{style:de({"background-image":"url("+e.value+")"}),class:"background-container"},[_("div",TB,[_("p",{style:de(t.value),class:"text-overlay-content mb-2 font-bold"},"Kuchipa",4),_("p",{style:de(s.value),class:"text-overlay-content mb-6"},he(m.$t("project5-subtitle")),5),_("p",{style:de(i.value),class:"text-overlay-content"},he(m.$t("project5-brief")),5)])],4),_("div",bB,[_("div",xB,[_("h1",{class:"font-bold ml-4","data-aos":"fade-left",style:de(o.value)}," Review ",4)])]),_("div",SB,[_("div",_B,[fe(De(qa),Xr(l,{onPlay:c,onPause:u,onTimeupdate:d,onCanplay:h}),null,16)])]),_("div",AB,[_("div",LB,[_("h1",{class:"font-bold ml-4","data-aos":"fade-left",style:de(o.value)}," Features ",4)])]),_("div",wB,[_("img",{src:De(fB),class:"content-center",style:de(r.value),"data-aos":"fade-up"},null,12,RB)]),_("div",IB,[_("p",{class:"ml-4 content-center",style:de(a.value),"data-aos":"fade-up"},he(m.$t("project5-feature-content1")),5)]),_("div",CB,[_("p",{class:"ml-4 content-center",style:de(a.value),"data-aos":"fade-up"},he(m.$t("project5-feature-content2")),5)]),_("div",DB,[_("img",{src:De(pB),class:"content-center",style:de(r.value),"data-aos":"fade-up"},null,12,kB)]),_("div",PB,[_("p",{class:"ml-4 content-center",style:de(a.value),"data-aos":"fade-up"},he(m.$t("project5-feature-content3")),5)]),_("div",OB,[_("img",{src:De(mB),class:"content-center",style:de(r.value),"data-aos":"fade-up"},null,12,MB)]),_("div",FB,[_("p",{class:"ml-4 content-center",style:de(a.value),"data-aos":"fade-up"},he(m.$t("project5-feature-content4")),5)]),_("div",NB,[_("img",{src:De(gB),class:"content-center",style:de(r.value),"data-aos":"fade-up"},null,12,BB)]),_("div",UB,[_("p",{class:"ml-4 content-center",style:de(a.value),"data-aos":"fade-up"},he(m.$t("project5-feature-content5")),5)]),_("div",$B,[_("img",{src:De(yB),class:"content-center",style:de(r.value),"data-aos":"fade-up"},null,12,jB)]),_("div",GB,[_("p",{class:"ml-4 content-center",style:de(a.value),"data-aos":"fade-up"},he(m.$t("project5-feature-content6")),5)]),_("div",VB,[_("div",HB,[_("h1",{class:"font-bold ml-4","data-aos":"fade-left",style:de(o.value)}," Future ",4)])]),_("div",KB,[_("img",{src:De(vB),class:"content-center",style:de(r.value),"data-aos":"fade-up"},null,12,WB)]),_("div",zB,[_("p",{class:"ml-4 content-center",style:de(a.value),"data-aos":"fade-up"},he(m.$t("project5-future-content1")),5)]),_("div",YB,[_("img",{src:De(EB),class:"content-center",style:de(r.value),"data-aos":"fade-up"},null,12,qB)]),_("div",XB,[_("p",{class:"ml-4 content-center",style:de(a.value),"data-aos":"fade-up"},he(m.$t("project5-future-content2")),5)]),_("div",QB,[_("div",JB,[_("button",{type:"button",class:"btn-default",onClick:y[0]||(y[0]=g=>p())},"Go Back")])])],64))}}),eU=At(ZB,[["__scopeId","data-v-9fd6c786"]]),tU="/PersonalWeb/assets/background_kick-74a01317.svg",sU="/PersonalWeb/assets/gif_kick01-8d74bb13.gif",nU="/PersonalWeb/assets/picture_kick01-e6ce31da.svg",iU="/PersonalWeb/assets/picture_kick02-c53c4cf7.svg",rU="/PersonalWeb/assets/picture_kick03-af75f346.svg",aU={class:"text-overlay custom-font"},oU={class:"container mx-auto custom-font"},lU={class:"text-left ml-18 mt-10"},cU={class:"container mx-auto block sm:flex sm:gap-10 mt-10 sm:mt-10 justify-center"},uU=["src"],dU={class:"container mx-auto custom-font"},hU={class:"text-left ml-18 mt-10"},fU={class:"container mx-auto block sm:flex sm:gap-10 mt-10 sm:mt-10 justify-center"},pU={class:"container mx-auto block sm:flex sm:gap-10 mt-10 sm:mt-10 justify-center"},mU=["src"],gU={class:"container mx-auto block sm:flex sm:gap-10 mt-10 sm:mt-10 justify-center"},yU={class:"container mx-auto block sm:flex sm:gap-10 mt-10 sm:mt-10 justify-center"},vU=["src"],EU={class:"container mx-auto block sm:flex sm:gap-10 mt-10 sm:mt-10 justify-center"},TU={class:"container mx-auto block sm:flex sm:gap-10 mt-10 sm:mt-10 justify-center"},bU=["src"],xU={class:"container mx-auto custom-font block sm:flex sm:gap-10 mt-10 sm:mt-20 justify-center"},SU={class:"button-section"},_U=Ze({__name:"Kick",setup(n){const e=ce(tU),t=ce({}),s=ce({}),i=ce({}),r=ce({}),a=ce({}),o=ce({}),l=()=>{window.innerWidth<=768?(t.value={fontSize:"50px"},s.value={fontSize:"16px"},i.value={fontSize:"14px"},r.value={width:"90%"},a.value={width:"90%"},o.value={fontSize:"2.25rem"}):(t.value={fontSize:"120px"},s.value={fontSize:"40px"},i.value={fontSize:"18px",maxWidth:"60%",margin:"0px auto"},r.value={width:"60%"},a.value={width:"98%"},o.value={fontSize:"3.75rem"})},c=()=>{ao.push({path:"/PersonalWeb/Projects"})};return vt(()=>{l(),window.addEventListener("resize",l)}),Vt(()=>{window.removeEventListener("resize",l)}),(u,d)=>(ve(),Te(We,null,[_("div",{style:de({"background-image":"url("+e.value+")"}),class:"background-container"},[_("div",aU,[_("p",{style:de(t.value),class:"text-overlay-content mb-2 font-bold"},"Kick",4),_("p",{style:de(s.value),class:"text-overlay-content mb-6"},"運用腿部動作操控桌上足球台設計",4),_("p",{style:de(i.value),class:"text-overlay-content"}," KICK為運用腿部動作操控桌上足球台，改變桌上足球台的互動形式，將操作結合到腳上，讓年輕人能有新穎的互動體驗， 同時可以幫助高齡者小腿伸展及多重認知任務訓練，以達到重複性訓練的小腿運動效果， 進而減緩高齡者下肢肌力衰弱、預防步態不穩的情況產生。",4)])],4),_("div",oU,[_("div",lU,[_("h1",{class:"font-bold ml-4",style:de(o.value)}," Review ",4)])]),_("div",cU,[_("img",{src:De(sU)},null,8,uU)]),_("div",dU,[_("div",hU,[_("h1",{class:"font-bold ml-4","data-aos":"fade-left",style:de(o.value)}," Features ",4)])]),_("div",fU,[_("p",{class:"ml-4 content-center",style:de(a.value),"data-aos":"fade-up"}," Kick為一台兩側各三排的桌上足球台、兩個手持控制器、兩個感測晶片(放置於腿帶內)、 及兩套腿帶。高齡者利用腿帶固定晶片於小腿脛骨上，透過小腿前後左右的移動伸展，轉換成數值控制桌上足球員的移動， 並透過手握控制器操作前中後排的設計， ",4)]),_("div",pU,[_("img",{src:De(nU),class:"content-center",style:de(r.value),"data-aos":"fade-up"},null,12,mU)]),_("div",gU,[_("p",{class:"ml-4 content-center",style:de(a.value),"data-aos":"fade-up"}," 我們將此設備讓年輕人進行體驗。大部分年輕人皆認為此項操作很有趣， 可以訓練到自己的反應能力。透過互相競爭遊戲的方式，可以讓彼此更透入於遊戲中。 ",4)]),_("div",yU,[_("img",{src:De(iU),class:"content-center",style:de(r.value),"data-aos":"fade-up"},null,12,vU)]),_("div",EU,[_("p",{class:"ml-4 content-center",style:de(a.value),"data-aos":"fade-up"}," 同時我們將Kick帶至高雄榮民醫院-台南分院日間照護中心，給高齡者進行三個禮拜的操作體驗。對於高齡者來說， 他們認為此項設備可以讓他們動腦去思考，要如何才能踢到球。不會讓他們太累，又能運動到。 但在操作過程中，需要有照護人員協助，才能讓高齡者更順利的進行遊戲。 ",4)]),_("div",TU,[_("img",{src:De(rU),class:"content-center",style:de(r.value),"data-aos":"fade-up"},null,12,bU)]),_("div",xU,[_("div",SU,[_("button",{type:"button",class:"btn-default",onClick:d[0]||(d[0]=h=>c())},"Go Back")])])],64))}}),AU=At(_U,[["__scopeId","data-v-eb5fb8da"]]),LU=[{path:"/PersonalWeb/",component:Zm,name:"home"},{path:"/",component:Zm,name:"Home"},{path:"/PersonalWeb/projects",component:aE,name:"Projects"},{path:"/PersonalWeb/about",component:rE,name:"About"},{path:"/PersonalWeb/contact",component:uE,name:"Contact"},{path:"/PersonalWeb/projects/fabAR",component:wP,name:"FabAR"},{path:"/PersonalWeb/projects/doddle",component:CP,name:"Doddle"},{path:"/PersonalWeb/projects/metaHuman",component:PP,name:"MetaHuman"},{path:"/PersonalWeb/projects/vBike",component:dB,name:"VBike"},{path:"/PersonalWeb/projects/kuchipa",component:eU,name:"Kuchipa"},{path:"/PersonalWeb/projects/kick",component:AU,name:"Kick"}],ao=GR({history:iR(),routes:LU});/*!
 * vuex v4.1.0
 * (c) 2022 Evan You
 * @license MIT
 */var wU="store";function ea(n,e){Object.keys(n).forEach(function(t){return e(n[t],t)})}function RU(n){return n!==null&&typeof n=="object"}function IU(n){return n&&typeof n.then=="function"}function CU(n,e){return function(){return n(e)}}function TT(n,e,t){return e.indexOf(n)<0&&(t&&t.prepend?e.unshift(n):e.push(n)),function(){var s=e.indexOf(n);s>-1&&e.splice(s,1)}}function bT(n,e){n._actions=Object.create(null),n._mutations=Object.create(null),n._wrappedGetters=Object.create(null),n._modulesNamespaceMap=Object.create(null);var t=n.state;vc(n,t,[],n._modules.root,!0),Rf(n,t,e)}function Rf(n,e,t){var s=n._state,i=n._scope;n.getters={},n._makeLocalGettersCache=Object.create(null);var r=n._wrappedGetters,a={},o={},l=fh(!0);l.run(function(){ea(r,function(c,u){a[u]=CU(c,n),o[u]=Ve(function(){return a[u]()}),Object.defineProperty(n.getters,u,{get:function(){return o[u].value},enumerable:!0})})}),n._state=qt({data:e}),n._scope=l,n.strict&&MU(n),s&&t&&n._withCommit(function(){s.data=null}),i&&i.stop()}function vc(n,e,t,s,i){var r=!t.length,a=n._modules.getNamespace(t);if(s.namespaced&&(n._modulesNamespaceMap[a],n._modulesNamespaceMap[a]=s),!r&&!i){var o=If(e,t.slice(0,-1)),l=t[t.length-1];n._withCommit(function(){o[l]=s.state})}var c=s.context=DU(n,a,t);s.forEachMutation(function(u,d){var h=a+d;kU(n,h,u,c)}),s.forEachAction(function(u,d){var h=u.root?d:a+d,f=u.handler||u;PU(n,h,f,c)}),s.forEachGetter(function(u,d){var h=a+d;OU(n,h,u,c)}),s.forEachChild(function(u,d){vc(n,e,t.concat(d),u,i)})}function DU(n,e,t){var s=e==="",i={dispatch:s?n.dispatch:function(r,a,o){var l=Ol(r,a,o),c=l.payload,u=l.options,d=l.type;return(!u||!u.root)&&(d=e+d),n.dispatch(d,c)},commit:s?n.commit:function(r,a,o){var l=Ol(r,a,o),c=l.payload,u=l.options,d=l.type;(!u||!u.root)&&(d=e+d),n.commit(d,c,u)}};return Object.defineProperties(i,{getters:{get:s?function(){return n.getters}:function(){return xT(n,e)}},state:{get:function(){return If(n.state,t)}}}),i}function xT(n,e){if(!n._makeLocalGettersCache[e]){var t={},s=e.length;Object.keys(n.getters).forEach(function(i){if(i.slice(0,s)===e){var r=i.slice(s);Object.defineProperty(t,r,{get:function(){return n.getters[i]},enumerable:!0})}}),n._makeLocalGettersCache[e]=t}return n._makeLocalGettersCache[e]}function kU(n,e,t,s){var i=n._mutations[e]||(n._mutations[e]=[]);i.push(function(a){t.call(n,s.state,a)})}function PU(n,e,t,s){var i=n._actions[e]||(n._actions[e]=[]);i.push(function(a){var o=t.call(n,{dispatch:s.dispatch,commit:s.commit,getters:s.getters,state:s.state,rootGetters:n.getters,rootState:n.state},a);return IU(o)||(o=Promise.resolve(o)),n._devtoolHook?o.catch(function(l){throw n._devtoolHook.emit("vuex:error",l),l}):o})}function OU(n,e,t,s){n._wrappedGetters[e]||(n._wrappedGetters[e]=function(r){return t(s.state,s.getters,r.state,r.getters)})}function MU(n){_t(function(){return n._state.data},function(){},{deep:!0,flush:"sync"})}function If(n,e){return e.reduce(function(t,s){return t[s]},n)}function Ol(n,e,t){return RU(n)&&n.type&&(t=e,e=n,n=n.type),{type:n,payload:e,options:t}}var FU="vuex bindings",l0="vuex:mutations",Eu="vuex:actions",cr="vuex",NU=0;function BU(n,e){p2({id:"org.vuejs.vuex",app:n,label:"Vuex",homepage:"https://next.vuex.vuejs.org/",logo:"https://vuejs.org/images/icons/favicon-96x96.png",packageName:"vuex",componentStateTypes:[FU]},function(t){t.addTimelineLayer({id:l0,label:"Vuex Mutations",color:c0}),t.addTimelineLayer({id:Eu,label:"Vuex Actions",color:c0}),t.addInspector({id:cr,label:"Vuex",icon:"storage",treeFilterPlaceholder:"Filter stores..."}),t.on.getInspectorTree(function(s){if(s.app===n&&s.inspectorId===cr)if(s.filter){var i=[];LT(i,e._modules.root,s.filter,""),s.rootNodes=i}else s.rootNodes=[AT(e._modules.root,"")]}),t.on.getInspectorState(function(s){if(s.app===n&&s.inspectorId===cr){var i=s.nodeId;xT(e,i),s.state=jU(VU(e._modules,i),i==="root"?e.getters:e._makeLocalGettersCache,i)}}),t.on.editInspectorState(function(s){if(s.app===n&&s.inspectorId===cr){var i=s.nodeId,r=s.path;i!=="root"&&(r=i.split("/").filter(Boolean).concat(r)),e._withCommit(function(){s.set(e._state.data,r,s.state.value)})}}),e.subscribe(function(s,i){var r={};s.payload&&(r.payload=s.payload),r.state=i,t.notifyComponentUpdate(),t.sendInspectorTree(cr),t.sendInspectorState(cr),t.addTimelineEvent({layerId:l0,event:{time:Date.now(),title:s.type,data:r}})}),e.subscribeAction({before:function(s,i){var r={};s.payload&&(r.payload=s.payload),s._id=NU++,s._time=Date.now(),r.state=i,t.addTimelineEvent({layerId:Eu,event:{time:s._time,title:s.type,groupId:s._id,subtitle:"start",data:r}})},after:function(s,i){var r={},a=Date.now()-s._time;r.duration={_custom:{type:"duration",display:a+"ms",tooltip:"Action duration",value:a}},s.payload&&(r.payload=s.payload),r.state=i,t.addTimelineEvent({layerId:Eu,event:{time:Date.now(),title:s.type,groupId:s._id,subtitle:"end",data:r}})}})})}var c0=8702998,UU=6710886,$U=16777215,ST={label:"namespaced",textColor:$U,backgroundColor:UU};function _T(n){return n&&n!=="root"?n.split("/").slice(-2,-1)[0]:"Root"}function AT(n,e){return{id:e||"root",label:_T(e),tags:n.namespaced?[ST]:[],children:Object.keys(n._children).map(function(t){return AT(n._children[t],e+t+"/")})}}function LT(n,e,t,s){s.includes(t)&&n.push({id:s||"root",label:s.endsWith("/")?s.slice(0,s.length-1):s||"Root",tags:e.namespaced?[ST]:[]}),Object.keys(e._children).forEach(function(i){LT(n,e._children[i],t,s+i+"/")})}function jU(n,e,t){e=t==="root"?e:e[t];var s=Object.keys(e),i={state:Object.keys(n.state).map(function(a){return{key:a,editable:!0,value:n.state[a]}})};if(s.length){var r=GU(e);i.getters=Object.keys(r).map(function(a){return{key:a.endsWith("/")?_T(a):a,editable:!1,value:Xd(function(){return r[a]})}})}return i}function GU(n){var e={};return Object.keys(n).forEach(function(t){var s=t.split("/");if(s.length>1){var i=e,r=s.pop();s.forEach(function(a){i[a]||(i[a]={_custom:{value:{},display:a,tooltip:"Module",abstract:!0}}),i=i[a]._custom.value}),i[r]=Xd(function(){return n[t]})}else e[t]=Xd(function(){return n[t]})}),e}function VU(n,e){var t=e.split("/").filter(function(s){return s});return t.reduce(function(s,i,r){var a=s[i];if(!a)throw new Error('Missing module "'+i+'" for path "'+e+'".');return r===t.length-1?a:a._children},e==="root"?n:n.root._children)}function Xd(n){try{return n()}catch(e){return e}}var Zs=function(e,t){this.runtime=t,this._children=Object.create(null),this._rawModule=e;var s=e.state;this.state=(typeof s=="function"?s():s)||{}},wT={namespaced:{configurable:!0}};wT.namespaced.get=function(){return!!this._rawModule.namespaced};Zs.prototype.addChild=function(e,t){this._children[e]=t};Zs.prototype.removeChild=function(e){delete this._children[e]};Zs.prototype.getChild=function(e){return this._children[e]};Zs.prototype.hasChild=function(e){return e in this._children};Zs.prototype.update=function(e){this._rawModule.namespaced=e.namespaced,e.actions&&(this._rawModule.actions=e.actions),e.mutations&&(this._rawModule.mutations=e.mutations),e.getters&&(this._rawModule.getters=e.getters)};Zs.prototype.forEachChild=function(e){ea(this._children,e)};Zs.prototype.forEachGetter=function(e){this._rawModule.getters&&ea(this._rawModule.getters,e)};Zs.prototype.forEachAction=function(e){this._rawModule.actions&&ea(this._rawModule.actions,e)};Zs.prototype.forEachMutation=function(e){this._rawModule.mutations&&ea(this._rawModule.mutations,e)};Object.defineProperties(Zs.prototype,wT);var er=function(e){this.register([],e,!1)};er.prototype.get=function(e){return e.reduce(function(t,s){return t.getChild(s)},this.root)};er.prototype.getNamespace=function(e){var t=this.root;return e.reduce(function(s,i){return t=t.getChild(i),s+(t.namespaced?i+"/":"")},"")};er.prototype.update=function(e){RT([],this.root,e)};er.prototype.register=function(e,t,s){var i=this;s===void 0&&(s=!0);var r=new Zs(t,s);if(e.length===0)this.root=r;else{var a=this.get(e.slice(0,-1));a.addChild(e[e.length-1],r)}t.modules&&ea(t.modules,function(o,l){i.register(e.concat(l),o,s)})};er.prototype.unregister=function(e){var t=this.get(e.slice(0,-1)),s=e[e.length-1],i=t.getChild(s);i&&i.runtime&&t.removeChild(s)};er.prototype.isRegistered=function(e){var t=this.get(e.slice(0,-1)),s=e[e.length-1];return t?t.hasChild(s):!1};function RT(n,e,t){if(e.update(t),t.modules)for(var s in t.modules){if(!e.getChild(s))return;RT(n.concat(s),e.getChild(s),t.modules[s])}}function HU(n){return new ys(n)}var ys=function(e){var t=this;e===void 0&&(e={});var s=e.plugins;s===void 0&&(s=[]);var i=e.strict;i===void 0&&(i=!1);var r=e.devtools;this._committing=!1,this._actions=Object.create(null),this._actionSubscribers=[],this._mutations=Object.create(null),this._wrappedGetters=Object.create(null),this._modules=new er(e),this._modulesNamespaceMap=Object.create(null),this._subscribers=[],this._makeLocalGettersCache=Object.create(null),this._scope=null,this._devtools=r;var a=this,o=this,l=o.dispatch,c=o.commit;this.dispatch=function(h,f){return l.call(a,h,f)},this.commit=function(h,f,p){return c.call(a,h,f,p)},this.strict=i;var u=this._modules.root.state;vc(this,u,[],this._modules.root),Rf(this,u),s.forEach(function(d){return d(t)})},Cf={state:{configurable:!0}};ys.prototype.install=function(e,t){e.provide(t||wU,this),e.config.globalProperties.$store=this;var s=this._devtools!==void 0?this._devtools:!1;s&&BU(e,this)};Cf.state.get=function(){return this._state.data};Cf.state.set=function(n){};ys.prototype.commit=function(e,t,s){var i=this,r=Ol(e,t,s),a=r.type,o=r.payload,l={type:a,payload:o},c=this._mutations[a];c&&(this._withCommit(function(){c.forEach(function(d){d(o)})}),this._subscribers.slice().forEach(function(u){return u(l,i.state)}))};ys.prototype.dispatch=function(e,t){var s=this,i=Ol(e,t),r=i.type,a=i.payload,o={type:r,payload:a},l=this._actions[r];if(l){try{this._actionSubscribers.slice().filter(function(u){return u.before}).forEach(function(u){return u.before(o,s.state)})}catch{}var c=l.length>1?Promise.all(l.map(function(u){return u(a)})):l[0](a);return new Promise(function(u,d){c.then(function(h){try{s._actionSubscribers.filter(function(f){return f.after}).forEach(function(f){return f.after(o,s.state)})}catch{}u(h)},function(h){try{s._actionSubscribers.filter(function(f){return f.error}).forEach(function(f){return f.error(o,s.state,h)})}catch{}d(h)})})}};ys.prototype.subscribe=function(e,t){return TT(e,this._subscribers,t)};ys.prototype.subscribeAction=function(e,t){var s=typeof e=="function"?{before:e}:e;return TT(s,this._actionSubscribers,t)};ys.prototype.watch=function(e,t,s){var i=this;return _t(function(){return e(i.state,i.getters)},t,Object.assign({},s))};ys.prototype.replaceState=function(e){var t=this;this._withCommit(function(){t._state.data=e})};ys.prototype.registerModule=function(e,t,s){s===void 0&&(s={}),typeof e=="string"&&(e=[e]),this._modules.register(e,t),vc(this,this.state,e,this._modules.get(e),s.preserveState),Rf(this,this.state)};ys.prototype.unregisterModule=function(e){var t=this;typeof e=="string"&&(e=[e]),this._modules.unregister(e),this._withCommit(function(){var s=If(t.state,e.slice(0,-1));delete s[e[e.length-1]]}),bT(this)};ys.prototype.hasModule=function(e){return typeof e=="string"&&(e=[e]),this._modules.isRegistered(e)};ys.prototype.hotUpdate=function(e){this._modules.update(e),bT(this,!0)};ys.prototype._withCommit=function(e){var t=this._committing;this._committing=!0,e(),this._committing=t};Object.defineProperties(ys.prototype,Cf);const KU=HU({state:{},getters:{},mutations:{},actions:{},modules:{}});var IT={exports:{}};const WU=N_(F_);(function(n,e){(function(s,i){n.exports=i(WU)})(Hh,t=>(()=>{var s={657:(o,l)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.default=(c,u)=>{const d=c.__vccOpts||c;for(const[h,f]of u)d[h]=f;return d}},976:o=>{o.exports=t}},i={};function r(o){var l=i[o];if(l!==void 0)return l.exports;var c=i[o]={exports:{}};return s[o](c,c.exports,r),c.exports}r.d=(o,l)=>{for(var c in l)r.o(l,c)&&!r.o(o,c)&&Object.defineProperty(o,c,{enumerable:!0,get:l[c]})},r.o=(o,l)=>Object.prototype.hasOwnProperty.call(o,l),r.r=o=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(o,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(o,"__esModule",{value:!0})};var a={};return(()=>{r.r(a),r.d(a,{Component:()=>Le,LoadingPlugin:()=>Q,default:()=>oe,useLoading:()=>we});var o=r(976);function l(q){var ge;typeof q.remove<"u"?q.remove():(ge=q.parentNode)==null||ge.removeChild(q)}function c(q,ge,Re){let F=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};const A=(0,o.h)(q,ge,F),S=document.createElement("div");return S.classList.add("vld-container"),Re.appendChild(S),(0,o.render)(A,S),A.component}function u(){return typeof window<"u"}const d=u()?window.HTMLElement:Object,h=["aria-busy"],f={class:"vl-icon"};function p(q,ge,Re,F,A,S){return(0,o.openBlock)(),(0,o.createBlock)(o.Transition,{name:q.transition},{default:(0,o.withCtx)(()=>[(0,o.withDirectives)((0,o.createElementVNode)("div",{tabindex:"0",class:(0,o.normalizeClass)(["vl-overlay vl-active",{"vl-full-page":q.isFullPage}]),"aria-busy":q.isActive,"aria-label":"Loading",style:(0,o.normalizeStyle)({zIndex:q.zIndex})},[(0,o.createElementVNode)("div",{class:"vl-background",onClick:ge[0]||(ge[0]=(0,o.withModifiers)(function(){return q.cancel&&q.cancel(...arguments)},["prevent"])),style:(0,o.normalizeStyle)(q.bgStyle)},null,4),(0,o.createElementVNode)("div",f,[(0,o.renderSlot)(q.$slots,"before"),(0,o.renderSlot)(q.$slots,"default",{},()=>[((0,o.openBlock)(),(0,o.createBlock)((0,o.resolveDynamicComponent)(q.loader),{color:q.color,width:q.width,height:q.height},null,8,["color","width","height"]))]),(0,o.renderSlot)(q.$slots,"after")])],14,h),[[o.vShow,q.isActive]])]),_:3},8,["name"])}const m={mounted(){this.enforceFocus&&document.addEventListener("focusin",this.focusIn)},methods:{focusIn(q){if(!this.isActive||q.target===this.$el||this.$el.contains(q.target))return;let ge=this.container?this.container:this.isFullPage?null:this.$el.parentElement;(this.isFullPage||ge&&ge.contains(q.target))&&(q.preventDefault(),this.$el.focus())}},beforeUnmount(){document.removeEventListener("focusin",this.focusIn)}},y=["width","height","stroke"],v=[(0,o.createStaticVNode)('<g fill="none" fill-rule="evenodd"><g transform="translate(1 1)" stroke-width="2"><circle stroke-opacity=".25" cx="18" cy="18" r="18"></circle><path d="M36 18c0-9.94-8.06-18-18-18"><animateTransform attributeName="transform" type="rotate" from="0 18 18" to="360 18 18" dur="0.8s" repeatCount="indefinite"></animateTransform></path></g></g>',1)];function E(q,ge,Re,F,A,S){return(0,o.openBlock)(),(0,o.createElementBlock)("svg",{viewBox:"0 0 38 38",xmlns:"http://www.w3.org/2000/svg",width:q.width,height:q.height,stroke:q.color},v,8,y)}const T=(0,o.defineComponent)({name:"spinner",props:{color:{type:String,default:"#000"},height:{type:Number,default:64},width:{type:Number,default:64}}});var b=r(657);const x=(0,b.default)(T,[["render",E]]),w=["fill","width","height"],R=[(0,o.createStaticVNode)('<circle cx="15" cy="15" r="15"><animate attributeName="r" from="15" to="15" begin="0s" dur="0.8s" values="15;9;15" calcMode="linear" repeatCount="indefinite"></animate><animate attributeName="fill-opacity" from="1" to="1" begin="0s" dur="0.8s" values="1;.5;1" calcMode="linear" repeatCount="indefinite"></animate></circle><circle cx="60" cy="15" r="9" fill-opacity="0.3"><animate attributeName="r" from="9" to="9" begin="0s" dur="0.8s" values="9;15;9" calcMode="linear" repeatCount="indefinite"></animate><animate attributeName="fill-opacity" from="0.5" to="0.5" begin="0s" dur="0.8s" values=".5;1;.5" calcMode="linear" repeatCount="indefinite"></animate></circle><circle cx="105" cy="15" r="15"><animate attributeName="r" from="15" to="15" begin="0s" dur="0.8s" values="15;9;15" calcMode="linear" repeatCount="indefinite"></animate><animate attributeName="fill-opacity" from="1" to="1" begin="0s" dur="0.8s" values="1;.5;1" calcMode="linear" repeatCount="indefinite"></animate></circle>',3)];function P(q,ge,Re,F,A,S){return(0,o.openBlock)(),(0,o.createElementBlock)("svg",{viewBox:"0 0 120 30",xmlns:"http://www.w3.org/2000/svg",fill:q.color,width:q.width,height:q.height},R,8,w)}const D=(0,o.defineComponent)({name:"dots",props:{color:{type:String,default:"#000"},height:{type:Number,default:240},width:{type:Number,default:60}}}),N=(0,b.default)(D,[["render",P]]),$=["height","width","fill"],ee=[(0,o.createStaticVNode)('<rect x="0" y="13" width="4" height="5"><animate attributeName="height" attributeType="XML" values="5;21;5" begin="0s" dur="0.6s" repeatCount="indefinite"></animate><animate attributeName="y" attributeType="XML" values="13; 5; 13" begin="0s" dur="0.6s" repeatCount="indefinite"></animate></rect><rect x="10" y="13" width="4" height="5"><animate attributeName="height" attributeType="XML" values="5;21;5" begin="0.15s" dur="0.6s" repeatCount="indefinite"></animate><animate attributeName="y" attributeType="XML" values="13; 5; 13" begin="0.15s" dur="0.6s" repeatCount="indefinite"></animate></rect><rect x="20" y="13" width="4" height="5"><animate attributeName="height" attributeType="XML" values="5;21;5" begin="0.3s" dur="0.6s" repeatCount="indefinite"></animate><animate attributeName="y" attributeType="XML" values="13; 5; 13" begin="0.3s" dur="0.6s" repeatCount="indefinite"></animate></rect>',3)];function V(q,ge,Re,F,A,S){return(0,o.openBlock)(),(0,o.createElementBlock)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 30 30",height:q.height,width:q.width,fill:q.color},ee,8,$)}const U=(0,o.defineComponent)({name:"bars",props:{color:{type:String,default:"#000"},height:{type:Number,default:40},width:{type:Number,default:40}}}),Y={Spinner:x,Dots:N,Bars:(0,b.default)(U,[["render",V]])},me=(0,o.defineComponent)({name:"VueLoading",mixins:[m],props:{active:Boolean,programmatic:Boolean,container:[Object,Function,d],isFullPage:{type:Boolean,default:!0},enforceFocus:{type:Boolean,default:!0},lockScroll:Boolean,transition:{type:String,default:"fade"},canCancel:Boolean,onCancel:{type:Function,default:()=>{}},color:String,backgroundColor:String,opacity:Number,width:Number,height:Number,zIndex:Number,loader:{type:String,default:"spinner"}},components:Y,emits:["hide","update:active"],data(){return{isActive:this.active}},mounted(){document.addEventListener("keyup",this.keyPress)},methods:{cancel(){!this.canCancel||!this.isActive||(this.hide(),this.onCancel.apply(null,arguments))},hide(){this.$emit("hide"),this.$emit("update:active",!1),this.programmatic&&(this.isActive=!1,setTimeout(()=>{const q=this.$el.parentElement;(0,o.render)(null,q),l(q)},150))},disableScroll(){this.isFullPage&&this.lockScroll&&document.body.classList.add("vl-shown")},enableScroll(){this.isFullPage&&this.lockScroll&&document.body.classList.remove("vl-shown")},keyPress(q){q.keyCode===27&&this.cancel()}},watch:{active(q){this.isActive=q},isActive(q){q?this.disableScroll():this.enableScroll()}},computed:{bgStyle(){return{background:this.backgroundColor,opacity:this.opacity}}},beforeUnmount(){document.removeEventListener("keyup",this.keyPress)}}),Le=(0,b.default)(me,[["render",p]]);function we(){let q=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},ge=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return{show(){let Re=arguments.length>0&&arguments[0]!==void 0?arguments[0]:q,F=arguments.length>1&&arguments[1]!==void 0?arguments[1]:ge;const S={...q,...Re,...{programmatic:!0,lockScroll:!0,isFullPage:!1,active:!0}};let M=S.container;S.container||(M=document.body,S.isFullPage=!0);const G={...ge,...F};return{hide:c(Le,S,M,G).ctx.hide}}}}const Q=function(q){let ge=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},Re=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const F=we(ge,Re);q.config.globalProperties.$loading=F,q.provide("$loading",F)},oe=Le})(),a})())})(IT);var zU=IT.exports;const YU="首頁",qU={home:YU,"project-title":"專案計畫","about-title":"個人履歷","contact-title":"聯絡資訊","about-content-aboutme":"我是蘇義翔。目前任職於友達光電數位體驗發展部工程師。專長為人因互動、虛擬實境體驗開發、前端介面設計與實作。我期許自己持續保持設計的開放與創造力，不停止學習新知與深化技能，客觀歸納資料與科技趨勢，並落實解決問題與確保執行力，以面對人生各種未知與挑戰。","about-content-education-01":"國立成功大學 工業設計學系 碩士 , Sep 2019 - Feb 2022","about-content-education-02":"國立九州大學 藝術工學部 大學院 交換生 , Sep 2021 - Jan 2022","about-content-education-03":"國立高雄師範大學 工業設計學系 學士 , Sep 2016 - Jun 2019","about-content-experience-01":"友達光電 數位體驗發展部  高級工程師 , Mar 2022 - Present","about-content-experience-02":"國立成功大學  專案助理 , Sep 2020 - Jun 2021","about-content-experience-03":"25TOGO Design  產品設計 實習 , Jul 2018 - Aug 2018","about-content-education-01-content-01":"人因與互動設計研究室","about-content-education-01-content-02":"論文：應用真實全景影片式虛擬實境提升高齡者下肢踩踏裝置使用動機之研究","about-content-education-02-content-01":"電腦圖學設計研究室 ( Matsuguma Hiroyuki )","about-content-education-02-content-02":"Paper: ‘’Kuchipa’’ 針對構音障礙兒童口腔訓練之遊戲設計與開發 ","about-content-education-03-content-01":"畢業製作：Rescuer 智慧救護系統 - 金點概念設計獎 入圍","about-content-education-03-content-02":"獲獎設計：Vita Beads 生態淨水系統 - 2019環境關懷競賽 金獎","about-content-experience-01-content-01":"開發AR情境應用於AUO內部製造場域  ex: Hololens","about-content-experience-01-content-02":"研究與調查新科技與技術應用。ex: XR, Web3, Avatar, etc. ","about-content-experience-01-content-03":"智慧友達展 網站系統 UIUX Design & Front-end","about-content-experience-02-content-01":"計畫名稱：創新樂齡智慧健康照護生態鏈之建立","about-content-experience-02-content-02":"跨域合作：與醫學工程學系和歷史學系合作建立互動裝置設計","about-content-experience-03-content-01":"Origami 背包 運動風格設計","about-content-experience-03-content-02":"Origami 手機殼系列設計","project1-subtitle":"智慧工廠AR應用","project1-brief":"FabAR 是一套以工廠巡檢、路線指引作做為模擬情境的系統。 組合情境中所需要的圖表顯示、資料串接以及QRcode顯示定位等Compoent。 目的為讓公司二次開發者可以透過簡單操作的方式利用各式元件進行開發，快速部署到Hololens或Android上應用。","project1-review-content1":"FabAR 以Unity環境為主，打造Fab應用的各項AR應用的Component ，讓二次開發者可以透過簡單操作我們打包好的元件去進行開發，然後部署到Hololens上去使用。 FabAR製作開發了QR code、UI 、IOT 、Web Browser等元件，讓使用者針對自己的需求去下載，依照各項應用場域進行後續的開發工作。","project1-feature-subtitle1":"工廠巡檢","project1-feature-content1":"使用者可利用掃描QRcode去監控機台的資訊，並且可自由地去拖拉資訊面板到自己想要的位置。 當機台資訊出現異常時，使用者可以開啟修機指引文件去輔助檢查。如果仍需近一步的操作指引，可以進到Guides App去瀏覽事先編輯好的Guides去看指南或資料。","project1-feature-subtitle2":"路線指引","project1-feature-content2":"使用者透過已開發的Component去進行二次開發。以路線指引做為模擬情境。 將箭頭、標籤、機台資訊等物件任意地拖拉到指定位置後儲存，去完成路線指引的規劃。","project4-subtitle":"真實全景影片式虛擬實境結合下肢踩踏裝置系統","project4-brief":"V-Bike 是一套透過生理數據、訓練課程等設計，並結合360度真實全景影片式虛擬實境技術的踩踏裝置系統。 透過簡單的操作模式，高齡長輩即使人在病房、室內場所，也能V-Bike前往不同的風景名勝、國外景點， 一邊踩踏一邊欣賞當地360度的景色，讓訓練不單單只是訓練，而是一趟美好的旅程。","project4-feature-content1":"V-Bike 主要以頭戴顯示器以及螢幕作為播放媒介兩種方式，讓使用者能自由的選擇自己喜歡的方式進行運動。 我們將拍攝好全景影片內容放入Unity進行虛實整合系統設計，透過視覺化、直覺的操作方式，設計適合使用者的介面及運動流程。","project4-feature-content2":"在 Pilot Test時使用螢幕與頭戴顯示器兩種顯示器給高齡者進行使用。頭戴顯示器的部分，長輩們常常因為頭暈、頭戴顯示器會壓到眼鏡造成不適、 畫面感覺有點霧霧的、焦距調整不到自己適合的距離等原因，造成體驗時間約1分鐘就希望能停止活動。以螢幕作為觀賞的部分，每位受測者皆踩踏超過4分鐘的時間， 且認為螢幕觀賞搭配踩踏比較舒服。此外對於畫面內容則認為能回味或比較之前去過的景點差異而感到喜歡，也認為可以邊運動邊觀賞喜歡的古蹟景點很不錯。 因此了解到高齡者對於使用螢幕作為真實全景影片式虛擬實境結合腳踩踏裝置的介面體驗優於使用頭戴顯示器。","project4-design-content1":"V-Bike以高齡者為主要使用者，考量每項步驟的高齡者操作促使功能或狀態改變，讓高齡者能在執行完動作時，系統能馬上有回饋以增加彼此的互動性。 透過一系列的設計方法Functional Map, Flow Chart等，將使用者流程的步驟作為流程的起點與終點， 考量高齡者如何使用控制器去改變畫面狀態進行設計，以做為後續程式開發實作的依循。","project4-design-content2":"控制器在設計規劃上以簡單、少量的操作按鍵進行硬體與電路設計，只有使用確定與取消的按鍵，還有可以觀賞全景影片的搖桿。並安置在握把中間位置，以方便高齡者能輕易操作，並透過藍芽通訊， 將指令傳給V-bike系統以促使系統運作。配合QRcode登入功能，製作給高齡者可單手拿取進行掃描的卡片。 並且留有空白位置可以讓高齡者寫上自己的姓名或編號，以方便在拿取卡片時不會拿錯。","project4-experiment-content1":"V-Bike為了瞭解真實全景影片式虛擬實境對於高齡者使用踩踏裝置的動機成效，將裝置帶至嘉義東過社區進行兩個月的測試， 實驗過程中記錄此系統在社區場域與高齡者互動的情況，了解是否符合場域需求，以及高齡者、親屬與照護者的使用意願性， 作為未來落實評估的依據。受測對象為65歲以上之高齡者。收案人數為10人。高齡者在實驗介入前從未使用過此V-Bike系統， 且透過MMSE認知評估量表進行評估為認知正常，同時必須長期於該場域活動，並排除：下肢受損嚴重以致無法進行實驗動作、 視覺與聽覺受損以致無法進行實驗的受測者。","project4-experiment-content2":"測試過程中，我們收集高齡者的相關生理數據，如：(1)踩踏圈數：分別紀錄高齡者使用資訊版與風景版每次的踩踏圈數，以比較受測者前後是否有變化與其原因、 (2)踩踏速率：分別紀錄高齡者使用資訊版與風景版每次的踩踏速率，以每秒測到的踩踏速率綜合除以每次踩踏時間。以了解受測者的下肢能力在資訊版與風景版之間是否有差異、 (3)平均心率：將每次踩踏過程中的心率總和除以踩踏時間，作為受試者在踩踏時衡量運動能力的參考、 (4)踩踏次數：以確保高齡者使用的次數足夠且差異較小，不會影響使用動機。踩踏圈數、踩踏速率與平均心率以即時數據的方式記錄，後續再透過平均計算整理。","project4-experiment-content3":"透過兩個月的測試後，我們認為透過真實全景影片進行觀賞，高齡者會更覺得自己有親身到當地遊玩的感受。針對真實全景影片帶來的沉浸體驗之特色如何讓高齡者長期使用， 我們提出可以藉由虛擬導覽的方式，利用關卡或箭頭指引他們使用360度觀賞，增加他們對內容的認識。針對系統內容方面，我們建議能增加真實全景影片數量到10部以上讓高齡者能有更多的選擇， 並搭配影音解說導覽風景內容與遊戲關卡設計，預期能讓高齡者享受真實全景影片的沉浸體驗之外，更投入於互動系統當中。但目前真實全景影片虛擬實境結合踩踏裝置僅測試於社區場域， 尚未針對日照中心與其他院所進行測試，但我們認為落實於日照中心應具有可行性。未來我們會依循該篇之建議進行修正，並進行其他實驗與場域測試，以期待此項設計能真正應用到場域幫助更多高齡者在漫長訓練中更有動機去完成，幫助高齡者下肢健康。","project5-subtitle":"運用影像辨識孩童發音嘴型訓練設計","project5-brief":"Kuchipa專案為利用互動設計與製作的方式，幫助孩童學習發音以避免構音障礙的問題發生。而其中的一款互動：びいいいいむ主要利用人臉辨識去偵測小孩的嘴型，透過嘴巴射出的雷射去攻擊怪物，讓小孩可以以有趣的遊戲去維持著嘴型，訓練他嘴部附近的肌肉。","project5-feature-content1":"Kuchipa為與九州大學藝術工學部大學院研究室一起製作的一個專案。因為疫情關係，形式使用網路進行專案的討論與執行。","project5-feature-content2":"構音異常，其實多數指的是沒有任何口腔構造上及神經生理等功能上的異常，在整個構音過程中， 造成構音位置的錯誤或是氣流方向、力量、速度的不準確、口腔動作動作不協調，所造成語音錯誤及改變， 導致發出的語音無法完全正確且清晰度降低，而多數與語音聽辨力及口腔動作的協調性不佳、說話習慣、單純的錯誤學習等因素有關。","project5-feature-content3":"在日本，小孩經常面臨的發音問題有以下幾項常見的情形： (1) 發音カ行、サ行以及タ行時不太清楚。例如：カラスがいる！ 小孩子常會發音不標準而說成タラス。 (2) 像嬰兒的說話方式。例如：猫がたくさんいた！ 常發音發成タクチャン。 (3) 發音不清楚而無法清楚知道小孩說了什麼。","project5-feature-content4":"而現實情況，父母往往會因孩子的構音障礙而感到壓力。 父母會希望小孩在 6 歲之前達到沒有發音障礙的狀態，因為這是語言的關鍵時期。 但是根據參訪發現有些孩子很難能達成。 由於醫院開放至17:00，父母和孩子平時都要上班或上學。 有些孩子因為學校的原因而無法去醫院進行訓練，因此提供可以在家中進行的服務是不可或缺的。 目前聲學分析和人工智能技術持續進步，我們希望打造能建立構音基礎的遊戲，符合來院訓練、在家訓練以及在診所等候室的需求， 幫助小孩子能打好構音的基礎，以避免誤學和減輕父母的壓力。","project5-feature-content5":"因此kuchipa目標對象以4-6歲的孩童為主，每日最多訓練的時間約為10分鐘。希望透過玩樂帶來訓練效果且能容易理解遊戲的內容。","project5-feature-content6":"我們快速製作了功能模型到診所給小孩子以及醫生進行體驗。醫生認為嘴部辨識結合遊戲設計的方式， 對於小孩子訓練嘴形時能更專注，是很適合且有需求的軟體。小孩子也很喜歡動動嘴巴去完成遊戲內的關卡。 最終我們設計了 びいいいいむ。一款利用人臉辨識去偵測小孩的嘴型，透過嘴巴射出的雷射去攻擊怪物， 讓小孩可以以有趣的遊戲去維持著嘴型，訓練他嘴部附近的肌肉。","project5-future-content1":"現在製作的遊戲都屬於嘴巴做大動作的控制。後續期望能以辨識更細微的控制。未來將朝著目標情境下使用的模型繼續製作， 並將目前製作的4種遊戲合併成一個應用程式，以方便進行後續的使用者測試及相關實驗。","project5-future-content2":"未來我們希望能讓遊戲設計能符合上面的三種情境。分別為看診期間、在家期間以及等候室期間。以方便醫生、家長、小孩子操作與使用。 未來也將設計讓小朋友繪製塗鴉的方式，透過掃描讓小朋友的畫作能融入到遊戲當中以增加遊戲與小孩子的連結性。"},XU="Home",QU={home:XU,"project-title":"Projects","about-title":"About","contact-title":"Contact","about-content-aboutme":"I am SU YI XIANG, currently working as an engineer in the Digital Experience Development Department at AUO Company. My expertise lies HCI, VR/AR development, and front-end interface design and implementation. I aspire to maintain an open and creative mindset in my design work, continuously learn new knowledge, and deepen my skills. I strive to objectively analyze data and technological trends, implement solutions, and ensure execution efficiency to face various unknowns and challenges in life.","about-content-education-01":"National Cheng Kung University Master’s degree , Sep 2019 - Feb 2022","about-content-education-02":"National Kyushu University Master’s Exchange , Sep 2021 - Jan 2022","about-content-education-03":"National Kaohsiung Normal University Bachelor’s degree , Sep 2016 - Jun 2019","about-content-experience-01":"AUO Digital Experience Development Senior Engineer , Mar 2022 - Present","about-content-experience-02":"National Cheng Kung University Project Research Assistant , Sep 2020 - Jun 2021","about-content-experience-03":"25TOGO Design Product Design Intern , Jul 2018 - Aug 2018","about-content-education-01-content-01":"Ergonomics & Interaction Design Lab","about-content-education-01-content-02":"Thesis: 360° Real Scene-Based Virtual Reality to Enhance Motivation for Elderly to Use the Lower Limb Pedaling Device","about-content-education-02-content-01":"Computer Graphics Design Lab ( Matsuguma Hiroyuki )","about-content-education-02-content-02":"Paper: Development of ‘’Kuchipa’’ a game of mouth exercises for children with dysarthria ","about-content-education-03-content-01":"Department of Industrial Design","about-content-education-03-content-02":"Graduation Project: Rescuer - Golden Pin Concept Design Award shortlisted ","about-content-experience-01-content-01":"Develop AR scenarios that fit AUO’s internal manufacturing field","about-content-experience-01-content-02":"Research and  investigate new technologies such as XR, Web3, Avatar, etc. ","about-content-experience-01-content-03":"Smart AUO Exhibition Web UIUX Design & Front-end","about-content-experience-02-content-01":"Project: Establishment of Intelligent Healthcare Ecosystem for Senior Adults","about-content-experience-02-content-02":"Cross-field collaboration with the Department of Medical Engineering and History for interactive device design","about-content-experience-03-content-01":"Origami bag sports style design","about-content-experience-03-content-02":"Origami mobile phone shell series design","project1-subtitle":"Smart Factory AR Application","project1-brief":"FabAR is a system that uses factory inspections and route guidance as simulation scenarios. It includes components such as chart display, data integration, and QR code display positioning required in the simulation scenario. The purpose is to allow secondary developers in the company to develop using various components through simple operations and quickly deploy them to Hololens or Android applications.","project1-review-content1":"FabAR is primarily based on the Unity environment, creating various AR application components for Fab applications. This allows secondary developers to develop by simply operating our packaged components and then deploy them for use on Hololens. FabAR has developed components such as QR code, UI, IOT, Web Browser, etc., allowing users to download according to their needs and carry out subsequent development work according to various application scenarios.","project1-feature-subtitle1":"Factory Inspection","project1-feature-content1":"Users can scan QR codes to monitor machine information and freely drag information panels to their desired positions. When there is abnormal machine information, users can open the machine repair guide to assist in inspection. If further operational guidance is needed, users can access the Guides App to browse pre-edited guides for instructions or data.","project1-feature-subtitle2":"Route Guidance","project1-feature-content2":"Users perform secondary development through the developed component. Use route guidance as a simulation scenario. After dragging and dropping arrows, labels, machine information, and other objects to designated positions, save them to complete the planning of route guidance.","project4-subtitle":"Realistic panoramic video-style virtual reality combined with lower limb stepping device system","project4-brief":"V-Bike is a cycling device system designed for elderly users, incorporating physiological data, training courses, and 360-degree real panoramic video virtual reality technology. With simple operation, even seniors in hospital rooms or indoor settings can use V-Bike to travel to different scenic spots and foreign locations. While pedaling, they can enjoy the local 360-degree scenery, turning training into a delightful journey.","project4-feature-content1":"V-Bike primarily offers two modes of playback media: head-mounted displays and screens, allowing users to freely choose their preferred way to exercise. We integrate panoramic video content shot into Unity for a mixed reality system, designing interfaces and workout processes suitable for users through visual and intuitive operations.","project4-feature-content2":"During the pilot test, both screens and head-mounted displays were used for elderly users. For the head-mounted displays, seniors often felt dizzy, discomfort from pressing against their glasses, a slightly hazy screen, and difficulty adjusting the focal length to a comfortable distance, leading them to stop the activity after about 1 minute. In contrast, each participant spent over 4 minutes using the screen and found it more comfortable for viewing while pedaling. They also enjoyed reminiscing about or comparing differences in places they had visited before based on the screen content, and they liked the idea of exercising while viewing their favorite historical sites. Therefore, it was understood that elderly users prefer using screens for a realistic panoramic video virtual reality experience combined with pedaling devices over head-mounted displays.","project4-design-content1":"V-Bike targets elderly users as its primary users, considering each step of operation by elderly users to prompt function changes or status updates, enabling immediate feedback upon completing an action to increase interactivity. Through a series of design methods such as Functional Map and Flow Chart, the user process steps are used as the starting and ending points of the flow, considering how elderly users use controllers to change screen states in the design process, serving as a guideline for subsequent programming and implementation.","project4-design-content2":"The controller is designed with simplicity and minimal operation buttons for hardware and circuit design, featuring only buttons for confirmation and cancellation, along with a joystick for viewing panoramic videos. It is placed in the middle of the handlebars for easy operation by elderly users and communicates commands to the V-Bike system via Bluetooth. It also includes QR code login functionality, allowing elderly users to easily scan a card with one hand. Additionally, there is blank space available for users to write their name or ID number, ensuring they do not mistake cards when picking them up.","project4-experiment-content1":"V-Bike conducted a two-month test in the Dongguo Community in Chiayi to understand the motivation and effectiveness of using the pedal device with real panoramic video virtual reality for elderly users. During the experiment, the system's interaction with elderly users in the community was recorded to assess whether it meets the community's needs and the willingness of elderly users, their relatives, and caregivers to use it, serving as the basis for future evaluations. The participants were elderly individuals aged 65 and above, with a total of 10 participants. These elderly participants had never used the V-Bike system before the experiment and were assessed as having normal cognition through the MMSE cognitive assessment scale. They also had to engage in activities in the field long-term and were excluded if they had severe lower limb injuries preventing them from participating in the experiment, or if they had impaired vision or hearing preventing them from participating.","project4-experiment-content2":"In the testing process, we collect relevant physiological data from elderly users, such as: (1) Pedal revolutions: recording the number of pedal revolutions each time elderly users use the information version and the scenic version, to compare whether there are changes in the users before and after testing and the reasons for them; (2) Pedal speed: recording the pedal speed each time elderly users use the information version and the scenic version, by dividing the comprehensive pedal speed measured per second by the pedal time, to understand whether there are differences in the lower limb abilities of the users between the information version and the scenic version; (3) Average heart rate: dividing the sum of heart rates during each pedal process by the pedal time, as a reference for measuring the users' exercise ability during pedaling; (4) Pedal count: to ensure that the number of times elderly users use it is sufficient and with minimal differences, without affecting their motivation. Pedal revolutions, pedal speed, and average heart rate are recorded in real-time and then organized through averaging.","project4-experiment-content3":"After two months of testing, we believe that elderly users feel a stronger sense of actually being at the location when watching real panoramic videos. To enhance their long-term use of the immersive experience brought by real panoramic videos, we propose using virtual guides, such as levels or arrow indicators, to guide them in 360-degree viewing, increasing their understanding of the content. Regarding the system content, we suggest increasing the number of real panoramic videos to over 10 to provide more choices for elderly users. We also recommend combining audiovisual guided scenic content with game level design to further engage elderly users in the interactive system. Currently, the integration of real panoramic videos with virtual reality and pedaling devices has only been tested in community settings and has not been tested in day care centers and other facilities. However, we believe that implementing it in day care centers is feasible. In the future, we will follow the recommendations in this article for adjustments and conduct additional experiments and field tests, hoping that this design can truly be applied in the field to help more elderly users stay motivated during their lengthy training and improve lower limb health.","project5-subtitle":"Designing Training for Children's Pronunciation Mouth Shapes Using Image Recognition","project5-brief":"The Kuchipa project utilizes interactive design and production to assist children in learning pronunciation and avoiding articulation disorders. One of its interactions, びいいいいむ, primarily uses facial recognition to detect the child's mouth shape. It employs lasers emitted from the mouth to attack monsters, enabling children to maintain their mouth shape through an engaging game and train the muscles around their mouths.","project5-feature-content1":"The Kuchipa project is a collaboration with the Graduate School of Art and Engineering at Kyushu University. Due to the pandemic, discussions and execution of the project are conducted online.","project5-feature-content2":"Speech sound disorders often refer to abnormalities in oral structures and neurological functions during the articulation process. These abnormalities can result in errors in articulation position, airflow direction, force, speed, and coordination of oral movements, leading to speech errors and alterations. This can cause the produced speech to be incomplete, less clear, and often related to factors such as poor speech perception, lack of coordination in oral movements, speaking habits, and simple learning errors.","project5-feature-content3":"In Japan, children often face the following common pronunciation issues: Unclear pronunciation of the カ (ka), サ (sa), and タ (ta) rows. For example: カラスがいる！ (There's a crow!) Children often mispronounce it as タラス (tarasu). Speaking in a baby-like manner. For example: 猫がたくさんいた！ (There were many cats!) Pronunciation often becomes タクチャン (takuchan). Unclear pronunciation leading to difficulties in understanding what the child is saying.","project5-feature-content4":"In reality, parents often feel stressed due to their children's articulation disorders. Parents hope that their children can achieve a state without pronunciation barriers before the age of 6, as this is a critical period for language development. However, it is found through visits that some children find it difficult to achieve this. Since hospitals are open until 5:00 PM, parents and children are usually at work or school during that time. Some children cannot receive training at hospitals due to school reasons, so providing services that can be conducted at home is essential. With ongoing advancements in acoustic analysis and artificial intelligence technology, we aim to create games that can build the foundation of articulation, meeting the needs for training at the hospital, at home, and in clinic waiting rooms. This helps children establish a strong foundation in articulation, preventing mislearning and reducing parental stress.","project5-feature-content5":"The target audience for Kuchipa is mainly children aged 4-6 years old, with a maximum daily training time of about 10 minutes. The goal is to achieve training effectiveness through playfulness and ensure easy understanding of the game's content.","project5-feature-content6":"We quickly developed a functional model for use in clinics by children and doctors for an interactive experience. Doctors believe that combining mouth recognition with game design is a suitable and in-demand software for training children's mouth shapes, as it helps them focus better. Children also enjoy moving their mouths to complete levels within the game. In the end, we designed 'びいいいいむ,' a software that uses facial recognition to detect children's mouth shapes. Through shooting lasers from the mouth to attack monsters, children can maintain their mouth shapes through an engaging game, effectively training the muscles around their mouths.","project5-future-content1":"The games currently being developed involve controlling large mouth movements. It is hoped that finer control can be achieved through recognition in the future. The plan is to continue developing models used in target scenarios and combine the four games currently being developed into one application for easier user testing and related experiments.","project5-future-content2":"In the future, we hope to design games that fit into three scenarios: during consultations, at home, and in waiting rooms. This is to facilitate operation and use by doctors, parents, and children. We also plan to allow children to draw and scan their artwork into the game to enhance the connection between the game and children."},JU="首頁",ZU={home:JU,"project-title":"プロジェクト","about-title":"個人情報","contact-title":"連絡先","about-content-aboutme":"私は蘇義翔です。現在、友達光電デジタルエクスペリエンス開発部でエンジニアを務めています。専門はヒューマンインタラクション、バーチャルリアリティ体験開発、フロントエンドインターフェースの設計と実装です。私は自分自身に設計のオープンさと創造性を持続させ、新しい知識を学び続け、スキルを深化させることを期待しています。また、データとテクノロジートレンドを客観的にまとめ、問題解決を実践し、実行力を確保して、人生のさまざまな未知の挑戦に対応していきます。","about-content-education-01":"国立成功大学 工業デザイン学科 修士 , Sep 2019 - Feb 2022","about-content-education-02":"国立九州大学 芸術工学部 大学院 交換生 , Sep 2021 - Jan 2022","about-content-education-03":"国立高雄師範大学 工業デザイン学科 学士 , Sep 2016 - Jun 2019","about-content-experience-01":"友達光電 デジタルエクスペリエンス開発部 高級エンジニア , Mar 2022 - Present","about-content-experience-02":"国立成功大学 プロジェクトアシスタント , Sep 2020 - Jun 2021","about-content-experience-03":"25TOGOデザイン製品設計インターンシップ , Jul 2018 - Aug 2018","about-content-education-01-content-01":"人因とインタラクションデザイン研究室","about-content-education-01-content-02":"論文：実際の全景ビデオを用いた仮想現実の適用による高齢者の下肢踏み踏み装置の使用動機向上の研究","about-content-education-02-content-01":"コンピュータグラフィックスデザイン研究室 ( Matsuguma Hiroyuki )","about-content-education-02-content-02":"「Kuchipa（クチパ）」：音声障害を持つ子供の口腔トレーニング向けゲームの設計と開発","about-content-education-03-content-01":"卒業制作：Rescuer スマート救護システム - デザインコンセプト賞ノミネート","about-content-education-03-content-02":"Vita Beads 生態淨水システム - 2019環境ケアコンテスト 金賞","about-content-experience-01-content-01":"AUO内部製造現場でのARシナリオ開発、例：Hololens","about-content-experience-01-content-02":"研究と調査は、XR、Web3、アバターなどの新しい技術と技術の応用に関するものです。","about-content-experience-01-content-03":"スマートフレンズ展示 ウェブサイトシステム UIUXデザイン＆フロントエンド","about-content-experience-02-content-01":"プロジェクト名：創造的な高齢者向けスマートヘルスケアエコシステムの構築","about-content-experience-02-content-02":"跨域合作：医学工学系と歴史学系との協力によるインタラクティブデバイスの設計","about-content-experience-03-content-01":"Origami バックパック 運動風スタイルの設計","about-content-experience-03-content-02":"Origami スマホケースシリーズのデザイン","project1-subtitle":"Smart Factory AR Application","project1-brief":"FabARは、工場の巡回や経路案内をシミュレーションシナリオとして使用するシステムです。シミュレーションシナリオで必要なチャート表示、データ統合、QRコード表示位置などのコンポーネントが含まれています。目的は、企業の二次開発者がさまざまなコンポーネントを簡単な操作で使用し、HololensやAndroidアプリケーションに迅速に展開できるようにすることです。","project1-review-content1":"FabARは主にUnity環境をベースにしており、FabアプリケーションのさまざまなARアプリケーションコンポーネントを作成しています。これにより、二次開発者は単純な操作で私たちのパッケージ化されたコンポーネントを使用して開発し、それをHololensで使用するために展開できます。FabARはQRコード、UI、IOT、Webブラウザなどのコンポーネントを開発しました。ユーザーは自分のニーズに応じてダウンロードし、さまざまなアプリケーションシナリオに応じて後続の開発作業を行うことができます。","project1-feature-subtitle1":"工場巡回","project1-feature-content1":"ユーザーはQRコードをスキャンして機械情報を監視し、情報パネルを自由にドラッグして所望の位置に配置できます。機械情報に異常がある場合、ユーザーは修理ガイドを開いて検査を支援できます。さらなる操作ガイダンスが必要な場合は、Guides Appにアクセスして事前に編集されたガイドを参照して手順やデータを確認できます。","project1-feature-subtitle2":"経路ガイダンス","project1-feature-content2":"ユーザーは開発済みのコンポーネントを使用して二次開発を行います。経路ガイダンスをシミュレーションシナリオとして使用します。矢印、ラベル、機械情報などのオブジェクトを指定された位置に任意にドラッグアンドドロップして保存し、経路ガイダンスの計画を完了します。","project4-subtitle":"Realistic panoramic video-style virtual reality combined with lower limb stepping device system","project4-brief":"V-Bikeは、高齢者向けのサイクリングデバイスシステムであり、生理データ、トレーニングコース、360度リアル全景ビデオ仮想現実技術を組み合わせています。簡単な操作で、病室や室内であっても高齢者はV-Bikeを使用してさまざまな風景や海外の場所に旅行できます。ペダリングしながら、現地の360度の景色を楽しむことができ、トレーニングを楽しい旅に変えることができます。","project4-feature-content1":"V-Bikeは、主にヘッドマウントディスプレイとスクリーンの2種類の再生メディアを提供し、ユーザーが自由に運動を行うための好きな方法を選択できます。 我々はUnityに撮影された360度パノラマ映像を統合し、視覚的かつ直感的な操作を通じてユーザーに適したインターフェースと運動プロセスを設計しています。","project4-feature-content2":"パイロットテストでは、高齢者がスクリーンとヘッドマウントディスプレイの両方を使用しました。ヘッドマウントディスプレイに関しては、高齢者はよくめまいを感じ、眼鏡が圧迫される不快感、画面が少し霞んで見えること、焦点距離を自分に合った距離に調整するのが難しいことから、約1分で活動を停止することがありました。一方、各参加者はスクリーンを使って4分以上過ごし、ペダリングしながらの視聴がより快適であることを感じました。また、画面のコンテンツについては、以前訪れた場所の違いを思い出したり比較したりすることが楽しく、お気に入りの歴史的な場所を観賞しながら運動するアイデアも気に入っていました。したがって、高齢者はスクリーンを使用した方が、ペダリングデバイスと組み合わせたリアルな全景ビデオバーチャルリアリティ体験を好み、ヘッドマウントディスプレイよりも優れているということがわかりました。","project4-design-content1":"V-Bikeは高齢者を主な利用者としており、高齢者の操作に関する各ステップを考慮して、機能の変更や状態の更新を促すことで、行動を完了した際に即座にフィードバックを得て相互作用を増加させることができます。Functional MapやFlow Chartなどの一連の設計手法を通じて、ユーザーのプロセスステップを流れの開始点と終了点として使用し、高齢者がコントローラーを使用して画面状態を変更する方法を考慮して設計します。これは後続のプログラミングと実装のガイドラインとなります。","project4-design-content2":"コントローラーは、ハードウェアと回路設計のためにシンプルで少ない操作ボタンを備えており、確認とキャンセルのボタンと、全景ビデオを表示するためのジョイスティックが含まれています。これは高齢者が簡単に操作できるように、ハンドルバーの中央に配置され、Bluetooth通信を介してV-Bikeシステムにコマンドを送信します。また、QRコードログイン機能も備えており、高齢者が片手で簡単にカードをスキャンできます。さらに、ユーザーが自分の名前やID番号を書くための空白スペースがあり、カードを取る際に間違えることがありません。","project4-experiment-content1":"V-Bikeは高齢者が実際のパノラマビデオ仮想現実とペダル装置を使用する動機と効果を理解するため、嘉義市の東過社區で2ヶ月間のテストを行いました。実験中には、高齢者とのシステムの相互作用を記録し、コミュニティのニーズに適合しているか、高齢者、その家族、介護者が使用する意欲があるかを評価し、将来の評価の基礎とします。参加者は65歳以上の高齢者で、合計10人でした。これらの高齢者は実験前にV-Bikeシステムを使用したことがなく、MMSE認知評価スケールで認知が正常であることが評価されていました。また、彼らは長期間フィールドで活動し、実験に参加できないほど重度の下肢の怪我がある場合や、視覚や聴覚が障害されている場合は除外されました。","project4-experiment-content2":"テストプロセスでは、高齢者から関連する生理データを収集します。具体的には、(1) ペダル回転数：高齢者が情報版と風景版を使用するたびにペダル回転数を記録し、受検前後の変化とその理由を比較します。(2) ペダル速度：高齢者が情報版と風景版を使用するたびにペダル速度を記録し、毎秒測定されたペダル速度をペダル時間で除算することで、下肢能力に差異があるかどうかを理解します。(3) 平均心拍数：各ペダリングプロセス中の心拍数の合計をペダル時間で除算し、ペダリング時の運動能力を測定するための基準とします。(4) ペダル回数：高齢者が使用する回数が十分であり、差異が少なく、使用動機に影響を与えないことを確認します。ペダル回転数、ペダル速度、平均心拍数はリアルタイムで記録され、後で平均化されます。","project4-experiment-content3":"2か月のテストの結果、高齢者は実際の全景ビデオを視聴することで、現地にいるような感覚をより強く感じると考えています。実際の全景ビデオによってもたらされる没入体験の長期利用を促進するために、仮想ガイドを使用し、レベルや矢印で360度視聴を案内することを提案します。これにより、彼らのコンテンツの理解を高めます。システムコンテンツに関しては、実際の全景ビデオの数を10以上に増やし、高齢者がより多くの選択肢を持つことを提案しています。また、オーディオビジュアルガイド付きの風景コンテンツとゲームレベル設計を組み合わせ、高齢者をよりインタラクティブなシステムに参加させることをお勧めします。現在、実際の全景ビデオとバーチャルリアリティ、踏み台デバイスの統合はコミュニティ設定でのみテストされており、デイケアセンターや他の施設でのテストは行われていません。ただし、デイケアセンターでの実装は可能であると考えています。将来的には、この記事の推奨事項に従って調整を行い、追加の実験とフィールドテストを行う予定です。これにより、この設計が実際にフィールドで適用され、より多くの高齢者が長期的なトレーニング中にやる気を持ち続け、下肢の健康を改善するのに役立つことを期待しています。","project5-subtitle":"画像認識を用いた子供の発音口形状トレーニングの設計","project5-brief":"Kuchipaプロジェクトは、インタラクティブなデザインと製作を活用して、子供たちが発音を学び、語音障害を避けるのを支援します。その中で、'びいいいいむ' というインタラクションは、主に顔認識を使用して子供の口の形状を検出します。口から発射されるレーザーを使ってモンスターを攻撃し、子供たちが興味深いゲームを通じて口の形を保つことができ、口周りの筋肉をトレーニングすることができます。","project5-feature-content1":"Kuchipaは九州大学芸術工学部大学院研究室との共同プロジェクトです。パンデミックの影響で、プロジェクトの議論と実行はオンラインで行われています。","project5-feature-content2":"音声音響異常とは、通常口腔構造や神経機能における異常を指し、その結果として発音過程での位置誤り、気流方向、力、速度の不正確さ、協調の取れていない口腔運動などが挙げられます。これらの要因により、音声の誤りや変化が生じ、発せられる音声が完全でなく、不明瞭になることがあります。この状態は、音声知覚の問題、口腔運動の協調不足、話し方の習慣、学習の誤りなどと関連しています。","project5-feature-content3":"日本では、子供たちはしばしば次のような一般的な発音の問題に直面しています：カ行、サ行、タ行の発音がはっきりしない。例えば：カラスがいる！（カラスがいます！） 子供たちはよくタラスと発音しています。赤ちゃんのような話し方をすること。例えば：猫がたくさんいた！（猫がたくさんいました！） 発音がタクチャンとなります。発音が不明瞭で、子供が何を言っているか理解しづらい。","project5-feature-content4":"現実の状況では、親はしばしば子供の発音障害によってストレスを感じます。親は、子供が6歳になる前に発音障害のない状態になることを望んでいます。なぜなら、これは言語発達の重要な時期だからです。しかし、訪問調査によれば、一部の子供はこれを達成するのが難しいということがわかっています。病院は17:00まで開いているため、親と子供は通常、その時間に仕事や学校にいます。学校の理由で病院での訓練を受けられない子供もいますので、家で行えるサービスを提供することが不可欠です。音響分析と人工知能技術の進歩により、病院での訓練、家での訓練、そしてクリニックの待合室でのニーズに応える発音基盤を築くゲームを作成することを目指しています。これにより、子供たちは発音の強固な基盤を築き、誤学習を防ぎ、親のストレスを軽減することができます。","project5-feature-content5":"Kuchipaの対象は、主に4〜6歳の子供たちで、1日の最大トレーニング時間は約10分です。ゲームの内容を理解しやすくするために、遊び心を活かした訓練効果を目指しています。","project5-feature-content6":"私たちは小児科や医師が体験するための機能モデルを迅速に開発しました。医師たちは、口の認識とゲームデザインを組み合わせることが、子供たちの口の形を訓練するために非常に適切で需要があるソフトウェアだと考えています。子供たちはゲーム内のレベルをクリアするために口を動かすことを楽しんでいます。最終的に私たちは「びいいいいむ」というソフトウェアを設計しました。これは顔の認識を使用して子供の口の形を検出します。口からレーザーを発射してモンスターを攻撃することで、子供たちは興味深いゲームを通じて口の形を維持し、口周りの筋肉を効果的にトレーニングすることができます。","project5-future-content1":"現在開発中のゲームは、大きな口の動きを制御することを目指しています。将来的には、より細かい制御が認識を通じて実現できることを期待しています。今後は、ターゲットシナリオで使用されるモデルの開発を続け、現在開発中の4つのゲームを1つのアプリケーションに統合し、ユーザーテストや関連実験をより簡単に行うためのものです。","project5-future-content2":"将来的には、診察中、自宅、待合室の3つのシナリオに適合したゲームを設計したいと考えています。これにより、医師、保護者、子供が操作して使用しやすくなります。また、子供たちが絵を描いてスキャンし、その作品をゲームに取り込むことで、ゲームと子供たちとのつながりを強化したいと計画しています。"},e5=C2({legacy:!1,locale:localStorage.getItem("selectedLanguage")||"en-US",fallbackLocale:"en-US",globalInjection:!0,messages:{"zh-TW":qU,"en-US":QU,"ja-JP":ZU}}),t5={Swiper:Pd,SwiperSlide:Sl,install(n){n.component("Swiper",Pd),n.component("SwiperSlide",Sl)}};function s5(n,e,t){var s=t||{},i=s.noTrailing,r=i===void 0?!1:i,a=s.noLeading,o=a===void 0?!1:a,l=s.debounceMode,c=l===void 0?void 0:l,u,d=!1,h=0;function f(){u&&clearTimeout(u)}function p(y){var g=y||{},v=g.upcomingOnly,E=v===void 0?!1:v;f(),d=!E}function m(){for(var y=arguments.length,g=new Array(y),v=0;v<y;v++)g[v]=arguments[v];var E=this,T=Date.now()-h;if(d)return;function b(){h=Date.now(),e.apply(E,g)}function L(){u=void 0}!o&&c&&!u&&b(),f(),c===void 0&&T>n?o?(h=Date.now(),r||(u=setTimeout(c?L:b,n))):b():r!==!0&&(u=setTimeout(c?L:b,c===void 0?n-T:n))}return m.cancel=p,m}function u0(n,e,t){var s=t||{},i=s.atBegin,r=i===void 0?!1:i;return s5(n,e,{debounceMode:r!==!1})}function n5(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var CT={exports:{}};(function(n,e){(function(t){var s=/^(?=((?:[a-zA-Z0-9+\-.]+:)?))\1(?=((?:\/\/[^\/?#]*)?))\2(?=((?:(?:[^?#\/]*\/)*[^;?#\/]*)?))\3((?:;[^?#]*)?)(\?[^#]*)?(#[^]*)?$/,i=/^(?=([^\/?#]*))\1([^]*)$/,r=/(?:\/|^)\.(?=\/)/g,a=/(?:\/|^)\.\.\/(?!\.\.\/)[^\/]*(?=\/)/g,o={buildAbsoluteURL:function(l,c,u){if(u=u||{},l=l.trim(),c=c.trim(),!c){if(!u.alwaysNormalize)return l;var d=o.parseURL(l);if(!d)throw new Error("Error trying to parse base URL.");return d.path=o.normalizePath(d.path),o.buildURLFromParts(d)}var h=o.parseURL(c);if(!h)throw new Error("Error trying to parse relative URL.");if(h.scheme)return u.alwaysNormalize?(h.path=o.normalizePath(h.path),o.buildURLFromParts(h)):c;var f=o.parseURL(l);if(!f)throw new Error("Error trying to parse base URL.");if(!f.netLoc&&f.path&&f.path[0]!=="/"){var p=i.exec(f.path);f.netLoc=p[1],f.path=p[2]}f.netLoc&&!f.path&&(f.path="/");var m={scheme:f.scheme,netLoc:h.netLoc,path:null,params:h.params,query:h.query,fragment:h.fragment};if(!h.netLoc&&(m.netLoc=f.netLoc,h.path[0]!=="/"))if(!h.path)m.path=f.path,h.params||(m.params=f.params,h.query||(m.query=f.query));else{var y=f.path,g=y.substring(0,y.lastIndexOf("/")+1)+h.path;m.path=o.normalizePath(g)}return m.path===null&&(m.path=u.alwaysNormalize?o.normalizePath(h.path):h.path),o.buildURLFromParts(m)},parseURL:function(l){var c=s.exec(l);return c?{scheme:c[1]||"",netLoc:c[2]||"",path:c[3]||"",params:c[4]||"",query:c[5]||"",fragment:c[6]||""}:null},normalizePath:function(l){for(l=l.split("").reverse().join("").replace(r,"");l.length!==(l=l.replace(a,"")).length;);return l.split("").reverse().join("")},buildURLFromParts:function(l){return l.scheme+l.netLoc+l.path+l.params+l.query+l.fragment}};n.exports=o})()})(CT);var Df=CT.exports;function d0(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);e&&(s=s.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,s)}return t}function ms(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?d0(Object(t),!0).forEach(function(s){i5(n,s,t[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):d0(Object(t)).forEach(function(s){Object.defineProperty(n,s,Object.getOwnPropertyDescriptor(t,s))})}return n}function i5(n,e,t){return e=a5(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function Mt(){return Mt=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(n[s]=t[s])}return n},Mt.apply(this,arguments)}function r5(n,e){if(typeof n!="object"||n===null)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var s=t.call(n,e||"default");if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function a5(n){var e=r5(n,"string");return typeof e=="symbol"?e:String(e)}const Ce=Number.isFinite||function(n){return typeof n=="number"&&isFinite(n)};let C=function(n){return n.MEDIA_ATTACHING="hlsMediaAttaching",n.MEDIA_ATTACHED="hlsMediaAttached",n.MEDIA_DETACHING="hlsMediaDetaching",n.MEDIA_DETACHED="hlsMediaDetached",n.BUFFER_RESET="hlsBufferReset",n.BUFFER_CODECS="hlsBufferCodecs",n.BUFFER_CREATED="hlsBufferCreated",n.BUFFER_APPENDING="hlsBufferAppending",n.BUFFER_APPENDED="hlsBufferAppended",n.BUFFER_EOS="hlsBufferEos",n.BUFFER_FLUSHING="hlsBufferFlushing",n.BUFFER_FLUSHED="hlsBufferFlushed",n.MANIFEST_LOADING="hlsManifestLoading",n.MANIFEST_LOADED="hlsManifestLoaded",n.MANIFEST_PARSED="hlsManifestParsed",n.LEVEL_SWITCHING="hlsLevelSwitching",n.LEVEL_SWITCHED="hlsLevelSwitched",n.LEVEL_LOADING="hlsLevelLoading",n.LEVEL_LOADED="hlsLevelLoaded",n.LEVEL_UPDATED="hlsLevelUpdated",n.LEVEL_PTS_UPDATED="hlsLevelPtsUpdated",n.LEVELS_UPDATED="hlsLevelsUpdated",n.AUDIO_TRACKS_UPDATED="hlsAudioTracksUpdated",n.AUDIO_TRACK_SWITCHING="hlsAudioTrackSwitching",n.AUDIO_TRACK_SWITCHED="hlsAudioTrackSwitched",n.AUDIO_TRACK_LOADING="hlsAudioTrackLoading",n.AUDIO_TRACK_LOADED="hlsAudioTrackLoaded",n.SUBTITLE_TRACKS_UPDATED="hlsSubtitleTracksUpdated",n.SUBTITLE_TRACKS_CLEARED="hlsSubtitleTracksCleared",n.SUBTITLE_TRACK_SWITCH="hlsSubtitleTrackSwitch",n.SUBTITLE_TRACK_LOADING="hlsSubtitleTrackLoading",n.SUBTITLE_TRACK_LOADED="hlsSubtitleTrackLoaded",n.SUBTITLE_FRAG_PROCESSED="hlsSubtitleFragProcessed",n.CUES_PARSED="hlsCuesParsed",n.NON_NATIVE_TEXT_TRACKS_FOUND="hlsNonNativeTextTracksFound",n.INIT_PTS_FOUND="hlsInitPtsFound",n.FRAG_LOADING="hlsFragLoading",n.FRAG_LOAD_EMERGENCY_ABORTED="hlsFragLoadEmergencyAborted",n.FRAG_LOADED="hlsFragLoaded",n.FRAG_DECRYPTED="hlsFragDecrypted",n.FRAG_PARSING_INIT_SEGMENT="hlsFragParsingInitSegment",n.FRAG_PARSING_USERDATA="hlsFragParsingUserdata",n.FRAG_PARSING_METADATA="hlsFragParsingMetadata",n.FRAG_PARSED="hlsFragParsed",n.FRAG_BUFFERED="hlsFragBuffered",n.FRAG_CHANGED="hlsFragChanged",n.FPS_DROP="hlsFpsDrop",n.FPS_DROP_LEVEL_CAPPING="hlsFpsDropLevelCapping",n.ERROR="hlsError",n.DESTROYING="hlsDestroying",n.KEY_LOADING="hlsKeyLoading",n.KEY_LOADED="hlsKeyLoaded",n.LIVE_BACK_BUFFER_REACHED="hlsLiveBackBufferReached",n.BACK_BUFFER_REACHED="hlsBackBufferReached",n}({}),Me=function(n){return n.NETWORK_ERROR="networkError",n.MEDIA_ERROR="mediaError",n.KEY_SYSTEM_ERROR="keySystemError",n.MUX_ERROR="muxError",n.OTHER_ERROR="otherError",n}({}),ne=function(n){return n.KEY_SYSTEM_NO_KEYS="keySystemNoKeys",n.KEY_SYSTEM_NO_ACCESS="keySystemNoAccess",n.KEY_SYSTEM_NO_SESSION="keySystemNoSession",n.KEY_SYSTEM_NO_CONFIGURED_LICENSE="keySystemNoConfiguredLicense",n.KEY_SYSTEM_LICENSE_REQUEST_FAILED="keySystemLicenseRequestFailed",n.KEY_SYSTEM_SERVER_CERTIFICATE_REQUEST_FAILED="keySystemServerCertificateRequestFailed",n.KEY_SYSTEM_SERVER_CERTIFICATE_UPDATE_FAILED="keySystemServerCertificateUpdateFailed",n.KEY_SYSTEM_SESSION_UPDATE_FAILED="keySystemSessionUpdateFailed",n.KEY_SYSTEM_STATUS_OUTPUT_RESTRICTED="keySystemStatusOutputRestricted",n.KEY_SYSTEM_STATUS_INTERNAL_ERROR="keySystemStatusInternalError",n.MANIFEST_LOAD_ERROR="manifestLoadError",n.MANIFEST_LOAD_TIMEOUT="manifestLoadTimeOut",n.MANIFEST_PARSING_ERROR="manifestParsingError",n.MANIFEST_INCOMPATIBLE_CODECS_ERROR="manifestIncompatibleCodecsError",n.LEVEL_EMPTY_ERROR="levelEmptyError",n.LEVEL_LOAD_ERROR="levelLoadError",n.LEVEL_LOAD_TIMEOUT="levelLoadTimeOut",n.LEVEL_PARSING_ERROR="levelParsingError",n.LEVEL_SWITCH_ERROR="levelSwitchError",n.AUDIO_TRACK_LOAD_ERROR="audioTrackLoadError",n.AUDIO_TRACK_LOAD_TIMEOUT="audioTrackLoadTimeOut",n.SUBTITLE_LOAD_ERROR="subtitleTrackLoadError",n.SUBTITLE_TRACK_LOAD_TIMEOUT="subtitleTrackLoadTimeOut",n.FRAG_LOAD_ERROR="fragLoadError",n.FRAG_LOAD_TIMEOUT="fragLoadTimeOut",n.FRAG_DECRYPT_ERROR="fragDecryptError",n.FRAG_PARSING_ERROR="fragParsingError",n.FRAG_GAP="fragGap",n.REMUX_ALLOC_ERROR="remuxAllocError",n.KEY_LOAD_ERROR="keyLoadError",n.KEY_LOAD_TIMEOUT="keyLoadTimeOut",n.BUFFER_ADD_CODEC_ERROR="bufferAddCodecError",n.BUFFER_INCOMPATIBLE_CODECS_ERROR="bufferIncompatibleCodecsError",n.BUFFER_APPEND_ERROR="bufferAppendError",n.BUFFER_APPENDING_ERROR="bufferAppendingError",n.BUFFER_STALLED_ERROR="bufferStalledError",n.BUFFER_FULL_ERROR="bufferFullError",n.BUFFER_SEEK_OVER_HOLE="bufferSeekOverHole",n.BUFFER_NUDGE_ON_STALL="bufferNudgeOnStall",n.INTERNAL_EXCEPTION="internalException",n.INTERNAL_ABORTED="aborted",n.UNKNOWN="unknown",n}({});const Di=function(){},Qd={trace:Di,debug:Di,log:Di,warn:Di,info:Di,error:Di};let wa=Qd;function o5(n){const e=self.console[n];return e?e.bind(self.console,`[${n}] >`):Di}function l5(n,...e){e.forEach(function(t){wa[t]=n[t]?n[t].bind(n):o5(t)})}function c5(n,e){if(self.console&&n===!0||typeof n=="object"){l5(n,"debug","log","info","warn","error");try{wa.log(`Debug logs enabled for "${e}" in hls.js version 1.4.12`)}catch{wa=Qd}}else wa=Qd}const H=wa,u5=/^(\d+)x(\d+)$/,h0=/(.+?)=(".*?"|.*?)(?:,|$)/g;class Tt{constructor(e){typeof e=="string"&&(e=Tt.parseAttrList(e));for(const t in e)e.hasOwnProperty(t)&&(t.substring(0,2)==="X-"&&(this.clientAttrs=this.clientAttrs||[],this.clientAttrs.push(t)),this[t]=e[t])}decimalInteger(e){const t=parseInt(this[e],10);return t>Number.MAX_SAFE_INTEGER?1/0:t}hexadecimalInteger(e){if(this[e]){let t=(this[e]||"0x").slice(2);t=(t.length&1?"0":"")+t;const s=new Uint8Array(t.length/2);for(let i=0;i<t.length/2;i++)s[i]=parseInt(t.slice(i*2,i*2+2),16);return s}else return null}hexadecimalIntegerAsNumber(e){const t=parseInt(this[e],16);return t>Number.MAX_SAFE_INTEGER?1/0:t}decimalFloatingPoint(e){return parseFloat(this[e])}optionalFloat(e,t){const s=this[e];return s?parseFloat(s):t}enumeratedString(e){return this[e]}bool(e){return this[e]==="YES"}decimalResolution(e){const t=u5.exec(this[e]);if(t!==null)return{width:parseInt(t[1],10),height:parseInt(t[2],10)}}static parseAttrList(e){let t;const s={},i='"';for(h0.lastIndex=0;(t=h0.exec(e))!==null;){let r=t[2];r.indexOf(i)===0&&r.lastIndexOf(i)===r.length-1&&(r=r.slice(1,-1));const a=t[1].trim();s[a]=r}return s}}function d5(n){return n!=="ID"&&n!=="CLASS"&&n!=="START-DATE"&&n!=="DURATION"&&n!=="END-DATE"&&n!=="END-ON-NEXT"}function h5(n){return n==="SCTE35-OUT"||n==="SCTE35-IN"}class DT{constructor(e,t){if(this.attr=void 0,this._startDate=void 0,this._endDate=void 0,this._badValueForSameId=void 0,t){const s=t.attr;for(const i in s)if(Object.prototype.hasOwnProperty.call(e,i)&&e[i]!==s[i]){H.warn(`DATERANGE tag attribute: "${i}" does not match for tags with ID: "${e.ID}"`),this._badValueForSameId=i;break}e=Mt(new Tt({}),s,e)}if(this.attr=e,this._startDate=new Date(e["START-DATE"]),"END-DATE"in this.attr){const s=new Date(this.attr["END-DATE"]);Ce(s.getTime())&&(this._endDate=s)}}get id(){return this.attr.ID}get class(){return this.attr.CLASS}get startDate(){return this._startDate}get endDate(){if(this._endDate)return this._endDate;const e=this.duration;return e!==null?new Date(this._startDate.getTime()+e*1e3):null}get duration(){if("DURATION"in this.attr){const e=this.attr.decimalFloatingPoint("DURATION");if(Ce(e))return e}else if(this._endDate)return(this._endDate.getTime()-this._startDate.getTime())/1e3;return null}get plannedDuration(){return"PLANNED-DURATION"in this.attr?this.attr.decimalFloatingPoint("PLANNED-DURATION"):null}get endOnNext(){return this.attr.bool("END-ON-NEXT")}get isValid(){return!!this.id&&!this._badValueForSameId&&Ce(this.startDate.getTime())&&(this.duration===null||this.duration>=0)&&(!this.endOnNext||!!this.class)}}class Ec{constructor(){this.aborted=!1,this.loaded=0,this.retry=0,this.total=0,this.chunkCount=0,this.bwEstimate=0,this.loading={start:0,first:0,end:0},this.parsing={start:0,end:0},this.buffering={start:0,first:0,end:0}}}var at={AUDIO:"audio",VIDEO:"video",AUDIOVIDEO:"audiovideo"};class kT{constructor(e){this._byteRange=null,this._url=null,this.baseurl=void 0,this.relurl=void 0,this.elementaryStreams={[at.AUDIO]:null,[at.VIDEO]:null,[at.AUDIOVIDEO]:null},this.baseurl=e}setByteRange(e,t){const s=e.split("@",2),i=[];s.length===1?i[0]=t?t.byteRangeEndOffset:0:i[0]=parseInt(s[1]),i[1]=parseInt(s[0])+i[0],this._byteRange=i}get byteRange(){return this._byteRange?this._byteRange:[]}get byteRangeStartOffset(){return this.byteRange[0]}get byteRangeEndOffset(){return this.byteRange[1]}get url(){return!this._url&&this.baseurl&&this.relurl&&(this._url=Df.buildAbsoluteURL(this.baseurl,this.relurl,{alwaysNormalize:!0})),this._url||""}set url(e){this._url=e}}class Tu extends kT{constructor(e,t){super(t),this._decryptdata=null,this.rawProgramDateTime=null,this.programDateTime=null,this.tagList=[],this.duration=0,this.sn=0,this.levelkeys=void 0,this.type=void 0,this.loader=null,this.keyLoader=null,this.level=-1,this.cc=0,this.startPTS=void 0,this.endPTS=void 0,this.startDTS=void 0,this.endDTS=void 0,this.start=0,this.deltaPTS=void 0,this.maxStartPTS=void 0,this.minEndPTS=void 0,this.stats=new Ec,this.urlId=0,this.data=void 0,this.bitrateTest=!1,this.title=null,this.initSegment=null,this.endList=void 0,this.gap=void 0,this.type=e}get decryptdata(){const{levelkeys:e}=this;if(!e&&!this._decryptdata)return null;if(!this._decryptdata&&this.levelkeys&&!this.levelkeys.NONE){const t=this.levelkeys.identity;if(t)this._decryptdata=t.getDecryptData(this.sn);else{const s=Object.keys(this.levelkeys);if(s.length===1)return this._decryptdata=this.levelkeys[s[0]].getDecryptData(this.sn)}}return this._decryptdata}get end(){return this.start+this.duration}get endProgramDateTime(){if(this.programDateTime===null||!Ce(this.programDateTime))return null;const e=Ce(this.duration)?this.duration:0;return this.programDateTime+e*1e3}get encrypted(){var e;if((e=this._decryptdata)!=null&&e.encrypted)return!0;if(this.levelkeys){const t=Object.keys(this.levelkeys),s=t.length;if(s>1||s===1&&this.levelkeys[t[0]].encrypted)return!0}return!1}setKeyFormat(e){if(this.levelkeys){const t=this.levelkeys[e];t&&!this._decryptdata&&(this._decryptdata=t.getDecryptData(this.sn))}}abortRequests(){var e,t;(e=this.loader)==null||e.abort(),(t=this.keyLoader)==null||t.abort()}setElementaryStreamInfo(e,t,s,i,r,a=!1){const{elementaryStreams:o}=this,l=o[e];if(!l){o[e]={startPTS:t,endPTS:s,startDTS:i,endDTS:r,partial:a};return}l.startPTS=Math.min(l.startPTS,t),l.endPTS=Math.max(l.endPTS,s),l.startDTS=Math.min(l.startDTS,i),l.endDTS=Math.max(l.endDTS,r)}clearElementaryStreamInfo(){const{elementaryStreams:e}=this;e[at.AUDIO]=null,e[at.VIDEO]=null,e[at.AUDIOVIDEO]=null}}class f5 extends kT{constructor(e,t,s,i,r){super(s),this.fragOffset=0,this.duration=0,this.gap=!1,this.independent=!1,this.relurl=void 0,this.fragment=void 0,this.index=void 0,this.stats=new Ec,this.duration=e.decimalFloatingPoint("DURATION"),this.gap=e.bool("GAP"),this.independent=e.bool("INDEPENDENT"),this.relurl=e.enumeratedString("URI"),this.fragment=t,this.index=i;const a=e.enumeratedString("BYTERANGE");a&&this.setByteRange(a,r),r&&(this.fragOffset=r.fragOffset+r.duration)}get start(){return this.fragment.start+this.fragOffset}get end(){return this.start+this.duration}get loaded(){const{elementaryStreams:e}=this;return!!(e.audio||e.video||e.audiovideo)}}const p5=10;class m5{constructor(e){this.PTSKnown=!1,this.alignedSliding=!1,this.averagetargetduration=void 0,this.endCC=0,this.endSN=0,this.fragments=void 0,this.fragmentHint=void 0,this.partList=null,this.dateRanges=void 0,this.live=!0,this.ageHeader=0,this.advancedDateTime=void 0,this.updated=!0,this.advanced=!0,this.availabilityDelay=void 0,this.misses=0,this.startCC=0,this.startSN=0,this.startTimeOffset=null,this.targetduration=0,this.totalduration=0,this.type=null,this.url=void 0,this.m3u8="",this.version=null,this.canBlockReload=!1,this.canSkipUntil=0,this.canSkipDateRanges=!1,this.skippedSegments=0,this.recentlyRemovedDateranges=void 0,this.partHoldBack=0,this.holdBack=0,this.partTarget=0,this.preloadHint=void 0,this.renditionReports=void 0,this.tuneInGoal=0,this.deltaUpdateFailed=void 0,this.driftStartTime=0,this.driftEndTime=0,this.driftStart=0,this.driftEnd=0,this.encryptedFragments=void 0,this.playlistParsingError=null,this.variableList=null,this.hasVariableRefs=!1,this.fragments=[],this.encryptedFragments=[],this.dateRanges={},this.url=e}reloaded(e){if(!e){this.advanced=!0,this.updated=!0;return}const t=this.lastPartSn-e.lastPartSn,s=this.lastPartIndex-e.lastPartIndex;this.updated=this.endSN!==e.endSN||!!s||!!t||!this.live,this.advanced=this.endSN>e.endSN||t>0||t===0&&s>0,this.updated||this.advanced?this.misses=Math.floor(e.misses*.6):this.misses=e.misses+1,this.availabilityDelay=e.availabilityDelay}get hasProgramDateTime(){return this.fragments.length?Ce(this.fragments[this.fragments.length-1].programDateTime):!1}get levelTargetDuration(){return this.averagetargetduration||this.targetduration||p5}get drift(){const e=this.driftEndTime-this.driftStartTime;return e>0?(this.driftEnd-this.driftStart)*1e3/e:1}get edge(){return this.partEnd||this.fragmentEnd}get partEnd(){var e;return(e=this.partList)!=null&&e.length?this.partList[this.partList.length-1].end:this.fragmentEnd}get fragmentEnd(){var e;return(e=this.fragments)!=null&&e.length?this.fragments[this.fragments.length-1].end:0}get age(){return this.advancedDateTime?Math.max(Date.now()-this.advancedDateTime,0)/1e3:0}get lastPartIndex(){var e;return(e=this.partList)!=null&&e.length?this.partList[this.partList.length-1].index:-1}get lastPartSn(){var e;return(e=this.partList)!=null&&e.length?this.partList[this.partList.length-1].fragment.sn:this.endSN}}function kf(n){return Uint8Array.from(atob(n),e=>e.charCodeAt(0))}function g5(n){const e=PT(n).subarray(0,16),t=new Uint8Array(16);return t.set(e,16-e.length),t}function y5(n){const e=function(t,s,i){const r=t[s];t[s]=t[i],t[i]=r};e(n,0,3),e(n,1,2),e(n,4,5),e(n,6,7)}function v5(n){const e=n.split(":");let t=null;if(e[0]==="data"&&e.length===2){const s=e[1].split(";"),i=s[s.length-1].split(",");if(i.length===2){const r=i[0]==="base64",a=i[1];r?(s.splice(-1,1),t=kf(a)):t=g5(a)}}return t}function PT(n){return Uint8Array.from(unescape(encodeURIComponent(n)),e=>e.charCodeAt(0))}var xt={CLEARKEY:"org.w3.clearkey",FAIRPLAY:"com.apple.fps",PLAYREADY:"com.microsoft.playready",WIDEVINE:"com.widevine.alpha"},us={CLEARKEY:"org.w3.clearkey",FAIRPLAY:"com.apple.streamingkeydelivery",PLAYREADY:"com.microsoft.playready",WIDEVINE:"urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed"};function f0(n){switch(n){case us.FAIRPLAY:return xt.FAIRPLAY;case us.PLAYREADY:return xt.PLAYREADY;case us.WIDEVINE:return xt.WIDEVINE;case us.CLEARKEY:return xt.CLEARKEY}}var OT={WIDEVINE:"edef8ba979d64acea3c827dcd51d21ed"};function E5(n){if(n===OT.WIDEVINE)return xt.WIDEVINE}function p0(n){switch(n){case xt.FAIRPLAY:return us.FAIRPLAY;case xt.PLAYREADY:return us.PLAYREADY;case xt.WIDEVINE:return us.WIDEVINE;case xt.CLEARKEY:return us.CLEARKEY}}function bu(n){const{drmSystems:e,widevineLicenseUrl:t}=n,s=e?[xt.FAIRPLAY,xt.WIDEVINE,xt.PLAYREADY,xt.CLEARKEY].filter(i=>!!e[i]):[];return!s[xt.WIDEVINE]&&t&&s.push(xt.WIDEVINE),s}const MT=function(){return typeof self<"u"&&self.navigator&&self.navigator.requestMediaKeySystemAccess?self.navigator.requestMediaKeySystemAccess.bind(self.navigator):null}();function T5(n,e,t,s){let i;switch(n){case xt.FAIRPLAY:i=["cenc","sinf"];break;case xt.WIDEVINE:case xt.PLAYREADY:i=["cenc"];break;case xt.CLEARKEY:i=["cenc","keyids"];break;default:throw new Error(`Unknown key-system: ${n}`)}return b5(i,e,t,s)}function b5(n,e,t,s){return[{initDataTypes:n,persistentState:s.persistentState||"not-allowed",distinctiveIdentifier:s.distinctiveIdentifier||"not-allowed",sessionTypes:s.sessionTypes||[s.sessionType||"temporary"],audioCapabilities:e.map(i=>({contentType:`audio/mp4; codecs="${i}"`,robustness:s.audioRobustness||"",encryptionScheme:s.audioEncryptionScheme||null})),videoCapabilities:t.map(i=>({contentType:`video/mp4; codecs="${i}"`,robustness:s.videoRobustness||"",encryptionScheme:s.videoEncryptionScheme||null}))}]}function Ki(n,e,t){return Uint8Array.prototype.slice?n.slice(e,t):new Uint8Array(Array.prototype.slice.call(n,e,t))}const Pf=(n,e)=>e+10<=n.length&&n[e]===73&&n[e+1]===68&&n[e+2]===51&&n[e+3]<255&&n[e+4]<255&&n[e+6]<128&&n[e+7]<128&&n[e+8]<128&&n[e+9]<128,FT=(n,e)=>e+10<=n.length&&n[e]===51&&n[e+1]===68&&n[e+2]===73&&n[e+3]<255&&n[e+4]<255&&n[e+6]<128&&n[e+7]<128&&n[e+8]<128&&n[e+9]<128,Ml=(n,e)=>{const t=e;let s=0;for(;Pf(n,e);){s+=10;const i=Tc(n,e+6);s+=i,FT(n,e+10)&&(s+=10),e+=s}if(s>0)return n.subarray(t,t+s)},Tc=(n,e)=>{let t=0;return t=(n[e]&127)<<21,t|=(n[e+1]&127)<<14,t|=(n[e+2]&127)<<7,t|=n[e+3]&127,t},x5=(n,e)=>Pf(n,e)&&Tc(n,e+6)+10<=n.length-e,S5=n=>{const e=BT(n);for(let t=0;t<e.length;t++){const s=e[t];if(NT(s))return I5(s)}},NT=n=>n&&n.key==="PRIV"&&n.info==="com.apple.streaming.transportStreamTimestamp",_5=n=>{const e=String.fromCharCode(n[0],n[1],n[2],n[3]),t=Tc(n,4),s=10;return{type:e,size:t,data:n.subarray(s,s+t)}},BT=n=>{let e=0;const t=[];for(;Pf(n,e);){const s=Tc(n,e+6);e+=10;const i=e+s;for(;e+8<i;){const r=_5(n.subarray(e)),a=A5(r);a&&t.push(a),e+=r.size+10}FT(n,e)&&(e+=10)}return t},A5=n=>n.type==="PRIV"?L5(n):n.type[0]==="W"?R5(n):w5(n),L5=n=>{if(n.size<2)return;const e=yn(n.data,!0),t=new Uint8Array(n.data.subarray(e.length+1));return{key:n.type,info:e,data:t.buffer}},w5=n=>{if(n.size<2)return;if(n.type==="TXXX"){let t=1;const s=yn(n.data.subarray(t),!0);t+=s.length+1;const i=yn(n.data.subarray(t));return{key:n.type,info:s,data:i}}const e=yn(n.data.subarray(1));return{key:n.type,data:e}},R5=n=>{if(n.type==="WXXX"){if(n.size<2)return;let t=1;const s=yn(n.data.subarray(t),!0);t+=s.length+1;const i=yn(n.data.subarray(t));return{key:n.type,info:s,data:i}}const e=yn(n.data);return{key:n.type,data:e}},I5=n=>{if(n.data.byteLength===8){const e=new Uint8Array(n.data),t=e[3]&1;let s=(e[4]<<23)+(e[5]<<15)+(e[6]<<7)+e[7];return s/=45,t&&(s+=4772185884e-2),Math.round(s)}},yn=(n,e=!1)=>{const t=C5();if(t){const c=t.decode(n);if(e){const u=c.indexOf("\0");return u!==-1?c.substring(0,u):c}return c.replace(/\0/g,"")}const s=n.length;let i,r,a,o="",l=0;for(;l<s;){if(i=n[l++],i===0&&e)return o;if(!(i===0||i===3))switch(i>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:o+=String.fromCharCode(i);break;case 12:case 13:r=n[l++],o+=String.fromCharCode((i&31)<<6|r&63);break;case 14:r=n[l++],a=n[l++],o+=String.fromCharCode((i&15)<<12|(r&63)<<6|(a&63)<<0);break}}return o};let xu;function C5(){return!xu&&typeof self.TextDecoder<"u"&&(xu=new self.TextDecoder("utf-8")),xu}const on={hexDump:function(n){let e="";for(let t=0;t<n.length;t++){let s=n[t].toString(16);s.length<2&&(s="0"+s),e+=s}return e}},Fl=Math.pow(2,32)-1,D5=[].push,UT={video:1,audio:2,id3:3,text:4};function Ht(n){return String.fromCharCode.apply(null,n)}function $T(n,e){const t=n[e]<<8|n[e+1];return t<0?65536+t:t}function $e(n,e){const t=jT(n,e);return t<0?4294967296+t:t}function jT(n,e){return n[e]<<24|n[e+1]<<16|n[e+2]<<8|n[e+3]}function Su(n,e,t){n[e]=t>>24,n[e+1]=t>>16&255,n[e+2]=t>>8&255,n[e+3]=t&255}function Qe(n,e){const t=[];if(!e.length)return t;const s=n.byteLength;for(let i=0;i<s;){const r=$e(n,i),a=Ht(n.subarray(i+4,i+8)),o=r>1?i+r:s;if(a===e[0])if(e.length===1)t.push(n.subarray(i+8,o));else{const l=Qe(n.subarray(i+8,o),e.slice(1));l.length&&D5.apply(t,l)}i=o}return t}function k5(n){const e=[],t=n[0];let s=8;const i=$e(n,s);s+=4;const r=0,a=0;t===0?s+=8:s+=16,s+=2;let o=n.length+a;const l=$T(n,s);s+=2;for(let c=0;c<l;c++){let u=s;const d=$e(n,u);u+=4;const h=d&2147483647;if((d&2147483648)>>>31===1)return H.warn("SIDX has hierarchical references (not supported)"),null;const f=$e(n,u);u+=4,e.push({referenceSize:h,subsegmentDuration:f,info:{duration:f/i,start:o,end:o+h-1}}),o+=h,u+=4,s=u}return{earliestPresentationTime:r,timescale:i,version:t,referencesCount:l,references:e}}function GT(n){const e=[],t=Qe(n,["moov","trak"]);for(let s=0;s<t.length;s++){const i=t[s],r=Qe(i,["tkhd"])[0];if(r){let a=r[0],o=a===0?12:20;const l=$e(r,o),c=Qe(i,["mdia","mdhd"])[0];if(c){a=c[0],o=a===0?12:20;const u=$e(c,o),d=Qe(i,["mdia","hdlr"])[0];if(d){const h=Ht(d.subarray(8,12)),f={soun:at.AUDIO,vide:at.VIDEO}[h];if(f){const p=Qe(i,["mdia","minf","stbl","stsd"])[0];let m;p&&(m=Ht(p.subarray(12,16))),e[l]={timescale:u,type:f},e[f]={timescale:u,id:l,codec:m}}}}}}return Qe(n,["moov","mvex","trex"]).forEach(s=>{const i=$e(s,4),r=e[i];r&&(r.default={duration:$e(s,12),flags:$e(s,20)})}),e}function P5(n,e){if(!n||!e)return n;const t=e.keyId;return t&&e.isCommonEncryption&&Qe(n,["moov","trak"]).forEach(s=>{const i=Qe(s,["mdia","minf","stbl","stsd"])[0].subarray(8);let r=Qe(i,["enca"]);const a=r.length>0;a||(r=Qe(i,["encv"])),r.forEach(o=>{const l=a?o.subarray(28):o.subarray(78);Qe(l,["sinf"]).forEach(c=>{const u=VT(c);if(u){const d=u.subarray(8,24);d.some(h=>h!==0)||(H.log(`[eme] Patching keyId in 'enc${a?"a":"v"}>sinf>>tenc' box: ${on.hexDump(d)} -> ${on.hexDump(t)}`),u.set(t,8))}})})}),n}function VT(n){const e=Qe(n,["schm"])[0];if(e){const t=Ht(e.subarray(4,8));if(t==="cbcs"||t==="cenc")return Qe(n,["schi","tenc"])[0]}return H.error("[eme] missing 'schm' box"),null}function O5(n,e){return Qe(e,["moof","traf"]).reduce((t,s)=>{const i=Qe(s,["tfdt"])[0],r=i[0],a=Qe(s,["tfhd"]).reduce((o,l)=>{const c=$e(l,4),u=n[c];if(u){let d=$e(i,4);if(r===1){if(d===Fl)return H.warn("[mp4-demuxer]: Ignoring assumed invalid signed 64-bit track fragment decode time"),o;d*=Fl+1,d+=$e(i,8)}const h=u.timescale||9e4,f=d/h;if(isFinite(f)&&(o===null||f<o))return f}return o},null);return a!==null&&isFinite(a)&&(t===null||a<t)?a:t},null)}function M5(n,e){let t=0,s=0,i=0;const r=Qe(n,["moof","traf"]);for(let a=0;a<r.length;a++){const o=r[a],l=Qe(o,["tfhd"])[0],c=$e(l,4),u=e[c];if(!u)continue;const d=u.default,h=$e(l,0)|(d==null?void 0:d.flags);let f=d==null?void 0:d.duration;h&8&&(h&2?f=$e(l,12):f=$e(l,8));const p=u.timescale||9e4,m=Qe(o,["trun"]);for(let y=0;y<m.length;y++){if(t=F5(m[y]),!t&&f){const g=$e(m[y],4);t=f*g}u.type===at.VIDEO?s+=t/p:u.type===at.AUDIO&&(i+=t/p)}}if(s===0&&i===0){let a=0;const o=Qe(n,["sidx"]);for(let l=0;l<o.length;l++){const c=k5(o[l]);c!=null&&c.references&&(a+=c.references.reduce((u,d)=>u+d.info.duration||0,0))}return a}return s||i}function F5(n){const e=$e(n,0);let t=8;e&1&&(t+=4),e&4&&(t+=4);let s=0;const i=$e(n,4);for(let r=0;r<i;r++){if(e&256){const a=$e(n,t);s+=a,t+=4}e&512&&(t+=4),e&1024&&(t+=4),e&2048&&(t+=4)}return s}function N5(n,e,t){Qe(e,["moof","traf"]).forEach(s=>{Qe(s,["tfhd"]).forEach(i=>{const r=$e(i,4),a=n[r];if(!a)return;const o=a.timescale||9e4;Qe(s,["tfdt"]).forEach(l=>{const c=l[0];let u=$e(l,4);if(c===0)u-=t*o,u=Math.max(u,0),Su(l,4,u);else{u*=Math.pow(2,32),u+=$e(l,8),u-=t*o,u=Math.max(u,0);const d=Math.floor(u/(Fl+1)),h=Math.floor(u%(Fl+1));Su(l,4,d),Su(l,8,h)}})})})}function B5(n){const e={valid:null,remainder:null},t=Qe(n,["moof"]);if(t){if(t.length<2)return e.remainder=n,e}else return e;const s=t[t.length-1];return e.valid=Ki(n,0,s.byteOffset-8),e.remainder=Ki(n,s.byteOffset-8),e}function Xi(n,e){const t=new Uint8Array(n.length+e.length);return t.set(n),t.set(e,n.length),t}function m0(n,e){const t=[],s=e.samples,i=e.timescale,r=e.id;let a=!1;return Qe(s,["moof"]).map(o=>{const l=o.byteOffset-8;Qe(o,["traf"]).map(c=>{const u=Qe(c,["tfdt"]).map(d=>{const h=d[0];let f=$e(d,4);return h===1&&(f*=Math.pow(2,32),f+=$e(d,8)),f/i})[0];return u!==void 0&&(n=u),Qe(c,["tfhd"]).map(d=>{const h=$e(d,4),f=$e(d,0)&16777215,p=(f&1)!==0,m=(f&2)!==0,y=(f&8)!==0;let g=0;const v=(f&16)!==0;let E=0;const T=(f&32)!==0;let b=8;h===r&&(p&&(b+=8),m&&(b+=4),y&&(g=$e(d,b),b+=4),v&&(E=$e(d,b),b+=4),T&&(b+=4),e.type==="video"&&(a=U5(e.codec)),Qe(c,["trun"]).map(L=>{const x=L[0],w=$e(L,0)&16777215,k=(w&1)!==0;let R=0;const P=(w&4)!==0,D=(w&256)!==0;let O=0;const N=(w&512)!==0;let $=0;const K=(w&1024)!==0,ee=(w&2048)!==0;let V=0;const U=$e(L,4);let B=8;k&&(R=$e(L,B),B+=4),P&&(B+=4);let j=R+l;for(let Y=0;Y<U;Y++){if(D?(O=$e(L,B),B+=4):O=g,N?($=$e(L,B),B+=4):$=E,K&&(B+=4),ee&&(x===0?V=$e(L,B):V=jT(L,B),B+=4),e.type===at.VIDEO){let me=0;for(;me<$;){const xe=$e(s,j);if(j+=4,$5(a,s[j])){const Le=s.subarray(j,j+xe);HT(Le,a?2:1,n+V/i,t)}j+=xe,me+=xe+4}}n+=O/i}}))})})}),t}function U5(n){if(!n)return!1;const e=n.indexOf("."),t=e<0?n:n.substring(0,e);return t==="hvc1"||t==="hev1"||t==="dvh1"||t==="dvhe"}function $5(n,e){if(n){const t=e>>1&63;return t===39||t===40}else return(e&31)===6}function HT(n,e,t,s){const i=KT(n);let r=0;r+=e;let a=0,o=0,l=!1,c=0;for(;r<i.length;){a=0;do{if(r>=i.length)break;c=i[r++],a+=c}while(c===255);o=0;do{if(r>=i.length)break;c=i[r++],o+=c}while(c===255);const u=i.length-r;if(!l&&a===4&&r<i.length){if(l=!0,i[r++]===181){const d=$T(i,r);if(r+=2,d===49){const h=$e(i,r);if(r+=4,h===1195456820){const f=i[r++];if(f===3){const p=i[r++],m=31&p,y=64&p,g=y?2+m*3:0,v=new Uint8Array(g);if(y){v[0]=p;for(let E=1;E<g;E++)v[E]=i[r++]}s.push({type:f,payloadType:a,pts:t,bytes:v})}}}}}else if(a===5&&o<u){if(l=!0,o>16){const d=[];for(let p=0;p<16;p++){const m=i[r++].toString(16);d.push(m.length==1?"0"+m:m),(p===3||p===5||p===7||p===9)&&d.push("-")}const h=o-16,f=new Uint8Array(h);for(let p=0;p<h;p++)f[p]=i[r++];s.push({payloadType:a,pts:t,uuid:d.join(""),userData:yn(f),userDataBytes:f})}}else if(o<u)r+=o;else if(o>u)break}}function KT(n){const e=n.byteLength,t=[];let s=1;for(;s<e-2;)n[s]===0&&n[s+1]===0&&n[s+2]===3?(t.push(s+2),s+=2):s++;if(t.length===0)return n;const i=e-t.length,r=new Uint8Array(i);let a=0;for(s=0;s<i;a++,s++)a===t[0]&&(a++,t.shift()),r[s]=n[a];return r}function j5(n){const e=n[0];let t="",s="",i=0,r=0,a=0,o=0,l=0,c=0;if(e===0){for(;Ht(n.subarray(c,c+1))!=="\0";)t+=Ht(n.subarray(c,c+1)),c+=1;for(t+=Ht(n.subarray(c,c+1)),c+=1;Ht(n.subarray(c,c+1))!=="\0";)s+=Ht(n.subarray(c,c+1)),c+=1;s+=Ht(n.subarray(c,c+1)),c+=1,i=$e(n,12),r=$e(n,16),o=$e(n,20),l=$e(n,24),c=28}else if(e===1){c+=4,i=$e(n,c),c+=4;const d=$e(n,c);c+=4;const h=$e(n,c);for(c+=4,a=2**32*d+h,Number.isSafeInteger(a)||(a=Number.MAX_SAFE_INTEGER,H.warn("Presentation time exceeds safe integer limit and wrapped to max safe integer in parsing emsg box")),o=$e(n,c),c+=4,l=$e(n,c),c+=4;Ht(n.subarray(c,c+1))!=="\0";)t+=Ht(n.subarray(c,c+1)),c+=1;for(t+=Ht(n.subarray(c,c+1)),c+=1;Ht(n.subarray(c,c+1))!=="\0";)s+=Ht(n.subarray(c,c+1)),c+=1;s+=Ht(n.subarray(c,c+1)),c+=1}const u=n.subarray(c,n.byteLength);return{schemeIdUri:t,value:s,timeScale:i,presentationTime:a,presentationTimeDelta:r,eventDuration:o,id:l,payload:u}}function G5(n,...e){const t=e.length;let s=8,i=t;for(;i--;)s+=e[i].byteLength;const r=new Uint8Array(s);for(r[0]=s>>24&255,r[1]=s>>16&255,r[2]=s>>8&255,r[3]=s&255,r.set(n,4),i=0,s=8;i<t;i++)r.set(e[i],s),s+=e[i].byteLength;return r}function V5(n,e,t){if(n.byteLength!==16)throw new RangeError("Invalid system id");let s,i;if(e){s=1,i=new Uint8Array(e.length*16);for(let o=0;o<e.length;o++){const l=e[o];if(l.byteLength!==16)throw new RangeError("Invalid key");i.set(l,o*16)}}else s=0,i=new Uint8Array;let r;s>0?(r=new Uint8Array(4),e.length>0&&new DataView(r.buffer).setUint32(0,e.length,!1)):r=new Uint8Array;const a=new Uint8Array(4);return t&&t.byteLength>0&&new DataView(a.buffer).setUint32(0,t.byteLength,!1),G5([112,115,115,104],new Uint8Array([s,0,0,0]),n,r,i,a,t||new Uint8Array)}function H5(n){if(!(n instanceof ArrayBuffer)||n.byteLength<32)return null;const e={version:0,systemId:"",kids:null,data:null},t=new DataView(n),s=t.getUint32(0);if(n.byteLength!==s&&s>44||t.getUint32(4)!==1886614376||(e.version=t.getUint32(8)>>>24,e.version>1))return null;e.systemId=on.hexDump(new Uint8Array(n,12,16));const i=t.getUint32(28);if(e.version===0){if(s-32<i)return null;e.data=new Uint8Array(n,32,i)}else if(e.version===1){e.kids=[];for(let r=0;r<i;r++)e.kids.push(new Uint8Array(n,32+r*16,16))}return e}let Mo={};class Xa{static clearKeyUriToKeyIdMap(){Mo={}}constructor(e,t,s,i=[1],r=null){this.uri=void 0,this.method=void 0,this.keyFormat=void 0,this.keyFormatVersions=void 0,this.encrypted=void 0,this.isCommonEncryption=void 0,this.iv=null,this.key=null,this.keyId=null,this.pssh=null,this.method=e,this.uri=t,this.keyFormat=s,this.keyFormatVersions=i,this.iv=r,this.encrypted=e?e!=="NONE":!1,this.isCommonEncryption=this.encrypted&&e!=="AES-128"}isSupported(){if(this.method){if(this.method==="AES-128"||this.method==="NONE")return!0;if(this.keyFormat==="identity")return this.method==="SAMPLE-AES";switch(this.keyFormat){case us.FAIRPLAY:case us.WIDEVINE:case us.PLAYREADY:case us.CLEARKEY:return["ISO-23001-7","SAMPLE-AES","SAMPLE-AES-CENC","SAMPLE-AES-CTR"].indexOf(this.method)!==-1}}return!1}getDecryptData(e){if(!this.encrypted||!this.uri)return null;if(this.method==="AES-128"&&this.uri&&!this.iv){typeof e!="number"&&(this.method==="AES-128"&&!this.iv&&H.warn(`missing IV for initialization segment with method="${this.method}" - compliance issue`),e=0);const s=K5(e);return new Xa(this.method,this.uri,"identity",this.keyFormatVersions,s)}const t=v5(this.uri);if(t)switch(this.keyFormat){case us.WIDEVINE:this.pssh=t,t.length>=22&&(this.keyId=t.subarray(t.length-22,t.length-6));break;case us.PLAYREADY:{const s=new Uint8Array([154,4,240,121,152,64,66,134,171,146,230,91,224,136,95,149]);this.pssh=V5(s,null,t);const i=new Uint16Array(t.buffer,t.byteOffset,t.byteLength/2),r=String.fromCharCode.apply(null,Array.from(i)),a=r.substring(r.indexOf("<"),r.length),o=new DOMParser().parseFromString(a,"text/xml").getElementsByTagName("KID")[0];if(o){const l=o.childNodes[0]?o.childNodes[0].nodeValue:o.getAttribute("VALUE");if(l){const c=kf(l).subarray(0,16);y5(c),this.keyId=c}}break}default:{let s=t.subarray(0,16);if(s.length!==16){const i=new Uint8Array(16);i.set(s,16-s.length),s=i}this.keyId=s;break}}if(!this.keyId||this.keyId.byteLength!==16){let s=Mo[this.uri];if(!s){const i=Object.keys(Mo).length%Number.MAX_SAFE_INTEGER;s=new Uint8Array(16),new DataView(s.buffer,12,4).setUint32(0,i),Mo[this.uri]=s}this.keyId=s}return this}}function K5(n){const e=new Uint8Array(16);for(let t=12;t<16;t++)e[t]=n>>8*(15-t)&255;return e}const WT=/\{\$([a-zA-Z0-9-_]+)\}/g;function g0(n){return WT.test(n)}function os(n,e,t){if(n.variableList!==null||n.hasVariableRefs)for(let s=t.length;s--;){const i=t[s],r=e[i];r&&(e[i]=Jd(n,r))}}function Jd(n,e){if(n.variableList!==null||n.hasVariableRefs){const t=n.variableList;return e.replace(WT,s=>{const i=s.substring(2,s.length-1),r=t==null?void 0:t[i];return r===void 0?(n.playlistParsingError||(n.playlistParsingError=new Error(`Missing preceding EXT-X-DEFINE tag for Variable Reference: "${i}"`)),s):r})}return e}function y0(n,e,t){let s=n.variableList;s||(n.variableList=s={});let i,r;if("QUERYPARAM"in e){i=e.QUERYPARAM;try{const a=new self.URL(t).searchParams;if(a.has(i))r=a.get(i);else throw new Error(`"${i}" does not match any query parameter in URI: "${t}"`)}catch(a){n.playlistParsingError||(n.playlistParsingError=new Error(`EXT-X-DEFINE QUERYPARAM: ${a.message}`))}}else i=e.NAME,r=e.VALUE;i in s?n.playlistParsingError||(n.playlistParsingError=new Error(`EXT-X-DEFINE duplicate Variable Name declarations: "${i}"`)):s[i]=r||""}function W5(n,e,t){const s=e.IMPORT;if(t&&s in t){let i=n.variableList;i||(n.variableList=i={}),i[s]=t[s]}else n.playlistParsingError||(n.playlistParsingError=new Error(`EXT-X-DEFINE IMPORT attribute not found in Multivariant Playlist: "${s}"`))}function bc(){if(!(typeof self>"u"))return self.MediaSource||self.WebKitMediaSource}const z5={audio:{a3ds:!0,"ac-3":!0,"ac-4":!0,alac:!0,alaw:!0,dra1:!0,"dts+":!0,"dts-":!0,dtsc:!0,dtse:!0,dtsh:!0,"ec-3":!0,enca:!0,g719:!0,g726:!0,m4ae:!0,mha1:!0,mha2:!0,mhm1:!0,mhm2:!0,mlpa:!0,mp4a:!0,"raw ":!0,Opus:!0,opus:!0,samr:!0,sawb:!0,sawp:!0,sevc:!0,sqcp:!0,ssmv:!0,twos:!0,ulaw:!0},video:{avc1:!0,avc2:!0,avc3:!0,avc4:!0,avcp:!0,av01:!0,drac:!0,dva1:!0,dvav:!0,dvh1:!0,dvhe:!0,encv:!0,hev1:!0,hvc1:!0,mjp2:!0,mp4v:!0,mvc1:!0,mvc2:!0,mvc3:!0,mvc4:!0,resv:!0,rv60:!0,s263:!0,svc1:!0,svc2:!0,"vc-1":!0,vp08:!0,vp09:!0},text:{stpp:!0,wvtt:!0}},v0=bc();function Y5(n,e){const t=z5[e];return!!t&&t[n.slice(0,4)]===!0}function _u(n,e){var t;return(t=v0==null?void 0:v0.isTypeSupported(`${e||"video"}/mp4;codecs="${n}"`))!=null?t:!1}const E0=/#EXT-X-STREAM-INF:([^\r\n]*)(?:[\r\n](?:#[^\r\n]*)?)*([^\r\n]+)|#EXT-X-(SESSION-DATA|SESSION-KEY|DEFINE|CONTENT-STEERING|START):([^\r\n]*)[\r\n]+/g,T0=/#EXT-X-MEDIA:(.*)/g,q5=/^#EXT(?:INF|-X-TARGETDURATION):/m,b0=new RegExp([/#EXTINF:\s*(\d*(?:\.\d+)?)(?:,(.*)\s+)?/.source,/(?!#) *(\S[\S ]*)/.source,/#EXT-X-BYTERANGE:*(.+)/.source,/#EXT-X-PROGRAM-DATE-TIME:(.+)/.source,/#.*/.source].join("|"),"g"),X5=new RegExp([/#(EXTM3U)/.source,/#EXT-X-(DATERANGE|DEFINE|KEY|MAP|PART|PART-INF|PLAYLIST-TYPE|PRELOAD-HINT|RENDITION-REPORT|SERVER-CONTROL|SKIP|START):(.+)/.source,/#EXT-X-(BITRATE|DISCONTINUITY-SEQUENCE|MEDIA-SEQUENCE|TARGETDURATION|VERSION): *(\d+)/.source,/#EXT-X-(DISCONTINUITY|ENDLIST|GAP)/.source,/(#)([^:]*):(.*)/.source,/(#)(.*)(?:.*)\r?\n?/.source].join("|"));class zs{static findGroup(e,t){for(let s=0;s<e.length;s++){const i=e[s];if(i.id===t)return i}}static convertAVC1ToAVCOTI(e){const t=e.split(".");if(t.length>2){let s=t.shift()+".";return s+=parseInt(t.shift()).toString(16),s+=("000"+parseInt(t.shift()).toString(16)).slice(-4),s}return e}static resolve(e,t){return Df.buildAbsoluteURL(t,e,{alwaysNormalize:!0})}static isMediaPlaylist(e){return q5.test(e)}static parseMasterPlaylist(e,t){const s=g0(e),i={contentSteering:null,levels:[],playlistParsingError:null,sessionData:null,sessionKeys:null,startTimeOffset:null,variableList:null,hasVariableRefs:s},r=[];E0.lastIndex=0;let a;for(;(a=E0.exec(e))!=null;)if(a[1]){var o;const c=new Tt(a[1]);os(i,c,["CODECS","SUPPLEMENTAL-CODECS","ALLOWED-CPC","PATHWAY-ID","STABLE-VARIANT-ID","AUDIO","VIDEO","SUBTITLES","CLOSED-CAPTIONS","NAME"]);const u=Jd(i,a[2]),d={attrs:c,bitrate:c.decimalInteger("AVERAGE-BANDWIDTH")||c.decimalInteger("BANDWIDTH"),name:c.NAME,url:zs.resolve(u,t)},h=c.decimalResolution("RESOLUTION");h&&(d.width=h.width,d.height=h.height),Q5((c.CODECS||"").split(/[ ,]+/).filter(f=>f),d),d.videoCodec&&d.videoCodec.indexOf("avc1")!==-1&&(d.videoCodec=zs.convertAVC1ToAVCOTI(d.videoCodec)),(o=d.unknownCodecs)!=null&&o.length||r.push(d),i.levels.push(d)}else if(a[3]){const c=a[3],u=a[4];switch(c){case"SESSION-DATA":{const d=new Tt(u);os(i,d,["DATA-ID","LANGUAGE","VALUE","URI"]);const h=d["DATA-ID"];h&&(i.sessionData===null&&(i.sessionData={}),i.sessionData[h]=d);break}case"SESSION-KEY":{const d=x0(u,t,i);d.encrypted&&d.isSupported()?(i.sessionKeys===null&&(i.sessionKeys=[]),i.sessionKeys.push(d)):H.warn(`[Keys] Ignoring invalid EXT-X-SESSION-KEY tag: "${u}"`);break}case"DEFINE":{{const d=new Tt(u);os(i,d,["NAME","VALUE","QUERYPARAM"]),y0(i,d,t)}break}case"CONTENT-STEERING":{const d=new Tt(u);os(i,d,["SERVER-URI","PATHWAY-ID"]),i.contentSteering={uri:zs.resolve(d["SERVER-URI"],t),pathwayId:d["PATHWAY-ID"]||"."};break}case"START":{i.startTimeOffset=S0(u);break}}}const l=r.length>0&&r.length<i.levels.length;return i.levels=l?r:i.levels,i.levels.length===0&&(i.playlistParsingError=new Error("no levels found in manifest")),i}static parseMasterPlaylistMedia(e,t,s){let i;const r={},a=s.levels,o={AUDIO:a.map(c=>({id:c.attrs.AUDIO,audioCodec:c.audioCodec})),SUBTITLES:a.map(c=>({id:c.attrs.SUBTITLES,textCodec:c.textCodec})),"CLOSED-CAPTIONS":[]};let l=0;for(T0.lastIndex=0;(i=T0.exec(e))!==null;){const c=new Tt(i[1]),u=c.TYPE;if(u){const d=o[u],h=r[u]||[];r[u]=h,os(s,c,["URI","GROUP-ID","LANGUAGE","ASSOC-LANGUAGE","STABLE-RENDITION-ID","NAME","INSTREAM-ID","CHARACTERISTICS","CHANNELS"]);const f={attrs:c,bitrate:0,id:l++,groupId:c["GROUP-ID"]||"",instreamId:c["INSTREAM-ID"],name:c.NAME||c.LANGUAGE||"",type:u,default:c.bool("DEFAULT"),autoselect:c.bool("AUTOSELECT"),forced:c.bool("FORCED"),lang:c.LANGUAGE,url:c.URI?zs.resolve(c.URI,t):""};if(d!=null&&d.length){const p=zs.findGroup(d,f.groupId)||d[0];_0(f,p,"audioCodec"),_0(f,p,"textCodec")}h.push(f)}}return r}static parseLevelPlaylist(e,t,s,i,r,a){const o=new m5(t),l=o.fragments;let c=null,u=0,d=0,h=0,f=0,p=null,m=new Tu(i,t),y,g,v,E=-1,T=!1;for(b0.lastIndex=0,o.m3u8=e,o.hasVariableRefs=g0(e);(y=b0.exec(e))!==null;){T&&(T=!1,m=new Tu(i,t),m.start=h,m.sn=u,m.cc=f,m.level=s,c&&(m.initSegment=c,m.rawProgramDateTime=c.rawProgramDateTime,c.rawProgramDateTime=null));const w=y[1];if(w){m.duration=parseFloat(w);const k=(" "+y[2]).slice(1);m.title=k||null,m.tagList.push(k?["INF",w,k]:["INF",w])}else if(y[3]){if(Ce(m.duration)){m.start=h,v&&w0(m,v,o),m.sn=u,m.level=s,m.cc=f,m.urlId=r,l.push(m);const k=(" "+y[3]).slice(1);m.relurl=Jd(o,k),A0(m,p),p=m,h+=m.duration,u++,d=0,T=!0}}else if(y[4]){const k=(" "+y[4]).slice(1);p?m.setByteRange(k,p):m.setByteRange(k)}else if(y[5])m.rawProgramDateTime=(" "+y[5]).slice(1),m.tagList.push(["PROGRAM-DATE-TIME",m.rawProgramDateTime]),E===-1&&(E=l.length);else{if(y=y[0].match(X5),!y){H.warn("No matches on slow regex match for level playlist!");continue}for(g=1;g<y.length&&!(typeof y[g]<"u");g++);const k=(" "+y[g]).slice(1),R=(" "+y[g+1]).slice(1),P=y[g+2]?(" "+y[g+2]).slice(1):"";switch(k){case"PLAYLIST-TYPE":o.type=R.toUpperCase();break;case"MEDIA-SEQUENCE":u=o.startSN=parseInt(R);break;case"SKIP":{const D=new Tt(R);os(o,D,["RECENTLY-REMOVED-DATERANGES"]);const O=D.decimalInteger("SKIPPED-SEGMENTS");if(Ce(O)){o.skippedSegments=O;for(let $=O;$--;)l.unshift(null);u+=O}const N=D.enumeratedString("RECENTLY-REMOVED-DATERANGES");N&&(o.recentlyRemovedDateranges=N.split("	"));break}case"TARGETDURATION":o.targetduration=Math.max(parseInt(R),1);break;case"VERSION":o.version=parseInt(R);break;case"EXTM3U":break;case"ENDLIST":o.live=!1;break;case"#":(R||P)&&m.tagList.push(P?[R,P]:[R]);break;case"DISCONTINUITY":f++,m.tagList.push(["DIS"]);break;case"GAP":m.gap=!0,m.tagList.push([k]);break;case"BITRATE":m.tagList.push([k,R]);break;case"DATERANGE":{const D=new Tt(R);os(o,D,["ID","CLASS","START-DATE","END-DATE","SCTE35-CMD","SCTE35-OUT","SCTE35-IN"]),os(o,D,D.clientAttrs);const O=new DT(D,o.dateRanges[D.ID]);O.isValid||o.skippedSegments?o.dateRanges[O.id]=O:H.warn(`Ignoring invalid DATERANGE tag: "${R}"`),m.tagList.push(["EXT-X-DATERANGE",R]);break}case"DEFINE":{{const D=new Tt(R);os(o,D,["NAME","VALUE","IMPORT","QUERYPARAM"]),"IMPORT"in D?W5(o,D,a):y0(o,D,t)}break}case"DISCONTINUITY-SEQUENCE":f=parseInt(R);break;case"KEY":{const D=x0(R,t,o);if(D.isSupported()){if(D.method==="NONE"){v=void 0;break}v||(v={}),v[D.keyFormat]&&(v=Mt({},v)),v[D.keyFormat]=D}else H.warn(`[Keys] Ignoring invalid EXT-X-KEY tag: "${R}"`);break}case"START":o.startTimeOffset=S0(R);break;case"MAP":{const D=new Tt(R);if(os(o,D,["BYTERANGE","URI"]),m.duration){const O=new Tu(i,t);L0(O,D,s,v),c=O,m.initSegment=c,c.rawProgramDateTime&&!m.rawProgramDateTime&&(m.rawProgramDateTime=c.rawProgramDateTime)}else L0(m,D,s,v),c=m,T=!0;break}case"SERVER-CONTROL":{const D=new Tt(R);o.canBlockReload=D.bool("CAN-BLOCK-RELOAD"),o.canSkipUntil=D.optionalFloat("CAN-SKIP-UNTIL",0),o.canSkipDateRanges=o.canSkipUntil>0&&D.bool("CAN-SKIP-DATERANGES"),o.partHoldBack=D.optionalFloat("PART-HOLD-BACK",0),o.holdBack=D.optionalFloat("HOLD-BACK",0);break}case"PART-INF":{const D=new Tt(R);o.partTarget=D.decimalFloatingPoint("PART-TARGET");break}case"PART":{let D=o.partList;D||(D=o.partList=[]);const O=d>0?D[D.length-1]:void 0,N=d++,$=new Tt(R);os(o,$,["BYTERANGE","URI"]);const K=new f5($,m,t,N,O);D.push(K),m.duration+=K.duration;break}case"PRELOAD-HINT":{const D=new Tt(R);os(o,D,["URI"]),o.preloadHint=D;break}case"RENDITION-REPORT":{const D=new Tt(R);os(o,D,["URI"]),o.renditionReports=o.renditionReports||[],o.renditionReports.push(D);break}default:H.warn(`line parsed but not handled: ${y}`);break}}}p&&!p.relurl?(l.pop(),h-=p.duration,o.partList&&(o.fragmentHint=p)):o.partList&&(A0(m,p),m.cc=f,o.fragmentHint=m,v&&w0(m,v,o));const b=l.length,L=l[0],x=l[b-1];if(h+=o.skippedSegments*o.targetduration,h>0&&b&&x){o.averagetargetduration=h/b;const w=x.sn;o.endSN=w!=="initSegment"?w:0,o.live||(x.endList=!0),L&&(o.startCC=L.cc)}else o.endSN=0,o.startCC=0;return o.fragmentHint&&(h+=o.fragmentHint.duration),o.totalduration=h,o.endCC=f,E>0&&J5(l,E),o}}function x0(n,e,t){var s,i;const r=new Tt(n);os(t,r,["KEYFORMAT","KEYFORMATVERSIONS","URI","IV","URI"]);const a=(s=r.METHOD)!=null?s:"",o=r.URI,l=r.hexadecimalInteger("IV"),c=r.KEYFORMATVERSIONS,u=(i=r.KEYFORMAT)!=null?i:"identity";o&&r.IV&&!l&&H.error(`Invalid IV: ${r.IV}`);const d=o?zs.resolve(o,e):"",h=(c||"1").split("/").map(Number).filter(Number.isFinite);return new Xa(a,d,u,h,l)}function S0(n){const e=new Tt(n).decimalFloatingPoint("TIME-OFFSET");return Ce(e)?e:null}function Q5(n,e){["video","audio","text"].forEach(t=>{const s=n.filter(i=>Y5(i,t));if(s.length){const i=s.filter(r=>r.lastIndexOf("avc1",0)===0||r.lastIndexOf("mp4a",0)===0);e[`${t}Codec`]=i.length>0?i[0]:s[0],n=n.filter(r=>s.indexOf(r)===-1)}}),e.unknownCodecs=n}function _0(n,e,t){const s=e[t];s&&(n[t]=s)}function J5(n,e){let t=n[e];for(let s=e;s--;){const i=n[s];if(!i)return;i.programDateTime=t.programDateTime-i.duration*1e3,t=i}}function A0(n,e){n.rawProgramDateTime?n.programDateTime=Date.parse(n.rawProgramDateTime):e!=null&&e.programDateTime&&(n.programDateTime=e.endProgramDateTime),Ce(n.programDateTime)||(n.programDateTime=null,n.rawProgramDateTime=null)}function L0(n,e,t,s){n.relurl=e.URI,e.BYTERANGE&&n.setByteRange(e.BYTERANGE),n.level=t,n.sn="initSegment",s&&(n.levelkeys=s),n.initSegment=null}function w0(n,e,t){n.levelkeys=e;const{encryptedFragments:s}=t;(!s.length||s[s.length-1].levelkeys!==e)&&Object.keys(e).some(i=>e[i].isCommonEncryption)&&s.push(n)}var Je={MANIFEST:"manifest",LEVEL:"level",AUDIO_TRACK:"audioTrack",SUBTITLE_TRACK:"subtitleTrack"},Ne={MAIN:"main",AUDIO:"audio",SUBTITLE:"subtitle"};function R0(n){const{type:e}=n;switch(e){case Je.AUDIO_TRACK:return Ne.AUDIO;case Je.SUBTITLE_TRACK:return Ne.SUBTITLE;default:return Ne.MAIN}}function Au(n,e){let t=n.url;return(t===void 0||t.indexOf("data:")===0)&&(t=e.url),t}class Z5{constructor(e){this.hls=void 0,this.loaders=Object.create(null),this.variableList=null,this.hls=e,this.registerListeners()}startLoad(e){}stopLoad(){this.destroyInternalLoaders()}registerListeners(){const{hls:e}=this;e.on(C.MANIFEST_LOADING,this.onManifestLoading,this),e.on(C.LEVEL_LOADING,this.onLevelLoading,this),e.on(C.AUDIO_TRACK_LOADING,this.onAudioTrackLoading,this),e.on(C.SUBTITLE_TRACK_LOADING,this.onSubtitleTrackLoading,this)}unregisterListeners(){const{hls:e}=this;e.off(C.MANIFEST_LOADING,this.onManifestLoading,this),e.off(C.LEVEL_LOADING,this.onLevelLoading,this),e.off(C.AUDIO_TRACK_LOADING,this.onAudioTrackLoading,this),e.off(C.SUBTITLE_TRACK_LOADING,this.onSubtitleTrackLoading,this)}createInternalLoader(e){const t=this.hls.config,s=t.pLoader,i=t.loader,r=s||i,a=new r(t);return this.loaders[e.type]=a,a}getInternalLoader(e){return this.loaders[e.type]}resetInternalLoader(e){this.loaders[e]&&delete this.loaders[e]}destroyInternalLoaders(){for(const e in this.loaders){const t=this.loaders[e];t&&t.destroy(),this.resetInternalLoader(e)}}destroy(){this.variableList=null,this.unregisterListeners(),this.destroyInternalLoaders()}onManifestLoading(e,t){const{url:s}=t;this.variableList=null,this.load({id:null,level:0,responseType:"text",type:Je.MANIFEST,url:s,deliveryDirectives:null})}onLevelLoading(e,t){const{id:s,level:i,url:r,deliveryDirectives:a}=t;this.load({id:s,level:i,responseType:"text",type:Je.LEVEL,url:r,deliveryDirectives:a})}onAudioTrackLoading(e,t){const{id:s,groupId:i,url:r,deliveryDirectives:a}=t;this.load({id:s,groupId:i,level:null,responseType:"text",type:Je.AUDIO_TRACK,url:r,deliveryDirectives:a})}onSubtitleTrackLoading(e,t){const{id:s,groupId:i,url:r,deliveryDirectives:a}=t;this.load({id:s,groupId:i,level:null,responseType:"text",type:Je.SUBTITLE_TRACK,url:r,deliveryDirectives:a})}load(e){var t;const s=this.hls.config;let i=this.getInternalLoader(e);if(i){const c=i.context;if(c&&c.url===e.url){H.trace("[playlist-loader]: playlist request ongoing");return}H.log(`[playlist-loader]: aborting previous loader for type: ${e.type}`),i.abort()}let r;if(e.type===Je.MANIFEST?r=s.manifestLoadPolicy.default:r=Mt({},s.playlistLoadPolicy.default,{timeoutRetry:null,errorRetry:null}),i=this.createInternalLoader(e),(t=e.deliveryDirectives)!=null&&t.part){let c;if(e.type===Je.LEVEL&&e.level!==null?c=this.hls.levels[e.level].details:e.type===Je.AUDIO_TRACK&&e.id!==null?c=this.hls.audioTracks[e.id].details:e.type===Je.SUBTITLE_TRACK&&e.id!==null&&(c=this.hls.subtitleTracks[e.id].details),c){const u=c.partTarget,d=c.targetduration;if(u&&d){const h=Math.max(u*3,d*.8)*1e3;r=Mt({},r,{maxTimeToFirstByteMs:Math.min(h,r.maxTimeToFirstByteMs),maxLoadTimeMs:Math.min(h,r.maxTimeToFirstByteMs)})}}}const a=r.errorRetry||r.timeoutRetry||{},o={loadPolicy:r,timeout:r.maxLoadTimeMs,maxRetry:a.maxNumRetry||0,retryDelay:a.retryDelayMs||0,maxRetryDelay:a.maxRetryDelayMs||0},l={onSuccess:(c,u,d,h)=>{const f=this.getInternalLoader(d);this.resetInternalLoader(d.type);const p=c.data;if(p.indexOf("#EXTM3U")!==0){this.handleManifestParsingError(c,d,new Error("no EXTM3U delimiter"),h||null,u);return}u.parsing.start=performance.now(),zs.isMediaPlaylist(p)?this.handleTrackOrLevelPlaylist(c,u,d,h||null,f):this.handleMasterPlaylist(c,u,d,h)},onError:(c,u,d,h)=>{this.handleNetworkError(u,d,!1,c,h)},onTimeout:(c,u,d)=>{this.handleNetworkError(u,d,!0,void 0,c)}};i.load(e,o,l)}handleMasterPlaylist(e,t,s,i){const r=this.hls,a=e.data,o=Au(e,s),l=zs.parseMasterPlaylist(a,o);if(l.playlistParsingError){this.handleManifestParsingError(e,s,l.playlistParsingError,i,t);return}const{contentSteering:c,levels:u,sessionData:d,sessionKeys:h,startTimeOffset:f,variableList:p}=l;this.variableList=p;const{AUDIO:m=[],SUBTITLES:y,"CLOSED-CAPTIONS":g}=zs.parseMasterPlaylistMedia(a,o,l);m.length&&!m.some(v=>!v.url)&&u[0].audioCodec&&!u[0].attrs.AUDIO&&(H.log("[playlist-loader]: audio codec signaled in quality level, but no embedded audio track signaled, create one"),m.unshift({type:"main",name:"main",groupId:"main",default:!1,autoselect:!1,forced:!1,id:-1,attrs:new Tt({}),bitrate:0,url:""})),r.trigger(C.MANIFEST_LOADED,{levels:u,audioTracks:m,subtitles:y,captions:g,contentSteering:c,url:o,stats:t,networkDetails:i,sessionData:d,sessionKeys:h,startTimeOffset:f,variableList:p})}handleTrackOrLevelPlaylist(e,t,s,i,r){const a=this.hls,{id:o,level:l,type:c}=s,u=Au(e,s),d=Ce(o)?o:0,h=Ce(l)?l:d,f=R0(s),p=zs.parseLevelPlaylist(e.data,u,h,f,d,this.variableList);if(c===Je.MANIFEST){const m={attrs:new Tt({}),bitrate:0,details:p,name:"",url:u};a.trigger(C.MANIFEST_LOADED,{levels:[m],audioTracks:[],url:u,stats:t,networkDetails:i,sessionData:null,sessionKeys:null,contentSteering:null,startTimeOffset:null,variableList:null})}t.parsing.end=performance.now(),s.levelDetails=p,this.handlePlaylistLoaded(p,e,t,s,i,r)}handleManifestParsingError(e,t,s,i,r){this.hls.trigger(C.ERROR,{type:Me.NETWORK_ERROR,details:ne.MANIFEST_PARSING_ERROR,fatal:t.type===Je.MANIFEST,url:e.url,err:s,error:s,reason:s.message,response:e,context:t,networkDetails:i,stats:r})}handleNetworkError(e,t,s=!1,i,r){let a=`A network ${s?"timeout":"error"+(i?" (status "+i.code+")":"")} occurred while loading ${e.type}`;e.type===Je.LEVEL?a+=`: ${e.level} id: ${e.id}`:(e.type===Je.AUDIO_TRACK||e.type===Je.SUBTITLE_TRACK)&&(a+=` id: ${e.id} group-id: "${e.groupId}"`);const o=new Error(a);H.warn(`[playlist-loader]: ${a}`);let l=ne.UNKNOWN,c=!1;const u=this.getInternalLoader(e);switch(e.type){case Je.MANIFEST:l=s?ne.MANIFEST_LOAD_TIMEOUT:ne.MANIFEST_LOAD_ERROR,c=!0;break;case Je.LEVEL:l=s?ne.LEVEL_LOAD_TIMEOUT:ne.LEVEL_LOAD_ERROR,c=!1;break;case Je.AUDIO_TRACK:l=s?ne.AUDIO_TRACK_LOAD_TIMEOUT:ne.AUDIO_TRACK_LOAD_ERROR,c=!1;break;case Je.SUBTITLE_TRACK:l=s?ne.SUBTITLE_TRACK_LOAD_TIMEOUT:ne.SUBTITLE_LOAD_ERROR,c=!1;break}u&&this.resetInternalLoader(e.type);const d={type:Me.NETWORK_ERROR,details:l,fatal:c,url:e.url,loader:u,context:e,error:o,networkDetails:t,stats:r};if(i){const h=(t==null?void 0:t.url)||e.url;d.response=ms({url:h,data:void 0},i)}this.hls.trigger(C.ERROR,d)}handlePlaylistLoaded(e,t,s,i,r,a){const o=this.hls,{type:l,level:c,id:u,groupId:d,deliveryDirectives:h}=i,f=Au(t,i),p=R0(i),m=typeof i.level=="number"&&p===Ne.MAIN?c:void 0;if(!e.fragments.length){const g=new Error("No Segments found in Playlist");o.trigger(C.ERROR,{type:Me.NETWORK_ERROR,details:ne.LEVEL_EMPTY_ERROR,fatal:!1,url:f,error:g,reason:g.message,response:t,context:i,level:m,parent:p,networkDetails:r,stats:s});return}e.targetduration||(e.playlistParsingError=new Error("Missing Target Duration"));const y=e.playlistParsingError;if(y){o.trigger(C.ERROR,{type:Me.NETWORK_ERROR,details:ne.LEVEL_PARSING_ERROR,fatal:!1,url:f,error:y,reason:y.message,response:t,context:i,level:m,parent:p,networkDetails:r,stats:s});return}switch(e.live&&a&&(a.getCacheAge&&(e.ageHeader=a.getCacheAge()||0),(!a.getCacheAge||isNaN(e.ageHeader))&&(e.ageHeader=0)),l){case Je.MANIFEST:case Je.LEVEL:o.trigger(C.LEVEL_LOADED,{details:e,level:m||0,id:u||0,stats:s,networkDetails:r,deliveryDirectives:h});break;case Je.AUDIO_TRACK:o.trigger(C.AUDIO_TRACK_LOADED,{details:e,id:u||0,groupId:d||"",stats:s,networkDetails:r,deliveryDirectives:h});break;case Je.SUBTITLE_TRACK:o.trigger(C.SUBTITLE_TRACK_LOADED,{details:e,id:u||0,groupId:d||"",stats:s,networkDetails:r,deliveryDirectives:h});break}}}function zT(n,e){let t;try{t=new Event("addtrack")}catch{t=document.createEvent("Event"),t.initEvent("addtrack",!1,!1)}t.track=n,e.dispatchEvent(t)}function YT(n,e){const t=n.mode;if(t==="disabled"&&(n.mode="hidden"),n.cues&&!n.cues.getCueById(e.id))try{if(n.addCue(e),!n.cues.getCueById(e.id))throw new Error(`addCue is failed for: ${e}`)}catch(s){H.debug(`[texttrack-utils]: ${s}`);try{const i=new self.TextTrackCue(e.startTime,e.endTime,e.text);i.id=e.id,n.addCue(i)}catch(i){H.debug(`[texttrack-utils]: Legacy TextTrackCue fallback failed: ${i}`)}}t==="disabled"&&(n.mode=t)}function br(n){const e=n.mode;if(e==="disabled"&&(n.mode="hidden"),n.cues)for(let t=n.cues.length;t--;)n.removeCue(n.cues[t]);e==="disabled"&&(n.mode=e)}function Zd(n,e,t,s){const i=n.mode;if(i==="disabled"&&(n.mode="hidden"),n.cues&&n.cues.length>0){const r=t8(n.cues,e,t);for(let a=0;a<r.length;a++)(!s||s(r[a]))&&n.removeCue(r[a])}i==="disabled"&&(n.mode=i)}function e8(n,e){if(e<n[0].startTime)return 0;const t=n.length-1;if(e>n[t].endTime)return-1;let s=0,i=t;for(;s<=i;){const r=Math.floor((i+s)/2);if(e<n[r].startTime)i=r-1;else if(e>n[r].startTime&&s<t)s=r+1;else return r}return n[s].startTime-e<e-n[i].startTime?s:i}function t8(n,e,t){const s=[],i=e8(n,e);if(i>-1)for(let r=i,a=n.length;r<a;r++){const o=n[r];if(o.startTime>=e&&o.endTime<=t)s.push(o);else if(o.startTime>t)return s}return s}var Vs={audioId3:"org.id3",dateRange:"com.apple.quicktime.HLS",emsg:"https://aomedia.org/emsg/ID3"};const s8=.25;function eh(){if(!(typeof self>"u"))return self.WebKitDataCue||self.VTTCue||self.TextTrackCue}const Fo=(()=>{const n=eh();try{new n(0,Number.POSITIVE_INFINITY,"")}catch{return Number.MAX_VALUE}return Number.POSITIVE_INFINITY})();function Lu(n,e){return n.getTime()/1e3-e}function n8(n){return Uint8Array.from(n.replace(/^0x/,"").replace(/([\da-fA-F]{2}) ?/g,"0x$1 ").replace(/ +$/,"").split(" ")).buffer}class i8{constructor(e){this.hls=void 0,this.id3Track=null,this.media=null,this.dateRangeCuesAppended={},this.hls=e,this._registerListeners()}destroy(){this._unregisterListeners(),this.id3Track=null,this.media=null,this.dateRangeCuesAppended={},this.hls=null}_registerListeners(){const{hls:e}=this;e.on(C.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(C.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(C.MANIFEST_LOADING,this.onManifestLoading,this),e.on(C.FRAG_PARSING_METADATA,this.onFragParsingMetadata,this),e.on(C.BUFFER_FLUSHING,this.onBufferFlushing,this),e.on(C.LEVEL_UPDATED,this.onLevelUpdated,this)}_unregisterListeners(){const{hls:e}=this;e.off(C.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(C.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(C.MANIFEST_LOADING,this.onManifestLoading,this),e.off(C.FRAG_PARSING_METADATA,this.onFragParsingMetadata,this),e.off(C.BUFFER_FLUSHING,this.onBufferFlushing,this),e.off(C.LEVEL_UPDATED,this.onLevelUpdated,this)}onMediaAttached(e,t){this.media=t.media}onMediaDetaching(){this.id3Track&&(br(this.id3Track),this.id3Track=null,this.media=null,this.dateRangeCuesAppended={})}onManifestLoading(){this.dateRangeCuesAppended={}}createTrack(e){const t=this.getID3Track(e.textTracks);return t.mode="hidden",t}getID3Track(e){if(this.media){for(let t=0;t<e.length;t++){const s=e[t];if(s.kind==="metadata"&&s.label==="id3")return zT(s,this.media),s}return this.media.addTextTrack("metadata","id3")}}onFragParsingMetadata(e,t){if(!this.media)return;const{hls:{config:{enableEmsgMetadataCues:s,enableID3MetadataCues:i}}}=this;if(!s&&!i)return;const{samples:r}=t;this.id3Track||(this.id3Track=this.createTrack(this.media));const a=eh();for(let o=0;o<r.length;o++){const l=r[o].type;if(l===Vs.emsg&&!s||!i)continue;const c=BT(r[o].data);if(c){const u=r[o].pts;let d=u+r[o].duration;d>Fo&&(d=Fo),d-u<=0&&(d=u+s8);for(let h=0;h<c.length;h++){const f=c[h];if(!NT(f)){this.updateId3CueEnds(u,l);const p=new a(u,d,"");p.value=f,l&&(p.type=l),this.id3Track.addCue(p)}}}}}updateId3CueEnds(e,t){var s;const i=(s=this.id3Track)==null?void 0:s.cues;if(i)for(let r=i.length;r--;){const a=i[r];a.type===t&&a.startTime<e&&a.endTime===Fo&&(a.endTime=e)}}onBufferFlushing(e,{startOffset:t,endOffset:s,type:i}){const{id3Track:r,hls:a}=this;if(!a)return;const{config:{enableEmsgMetadataCues:o,enableID3MetadataCues:l}}=a;if(r&&(o||l)){let c;i==="audio"?c=u=>u.type===Vs.audioId3&&l:i==="video"?c=u=>u.type===Vs.emsg&&o:c=u=>u.type===Vs.audioId3&&l||u.type===Vs.emsg&&o,Zd(r,t,s,c)}}onLevelUpdated(e,{details:t}){if(!this.media||!t.hasProgramDateTime||!this.hls.config.enableDateRangeMetadataCues)return;const{dateRangeCuesAppended:s,id3Track:i}=this,{dateRanges:r}=t,a=Object.keys(r);if(i){const u=Object.keys(s).filter(d=>!a.includes(d));for(let d=u.length;d--;){const h=u[d];Object.keys(s[h].cues).forEach(f=>{i.removeCue(s[h].cues[f])}),delete s[h]}}const o=t.fragments[t.fragments.length-1];if(a.length===0||!Ce(o==null?void 0:o.programDateTime))return;this.id3Track||(this.id3Track=this.createTrack(this.media));const l=o.programDateTime/1e3-o.start,c=eh();for(let u=0;u<a.length;u++){const d=a[u],h=r[d],f=s[d],p=(f==null?void 0:f.cues)||{};let m=(f==null?void 0:f.durationKnown)||!1;const y=Lu(h.startDate,l);let g=Fo;const v=h.endDate;if(v)g=Lu(v,l),m=!0;else if(h.endOnNext&&!m){const T=a.reduce((b,L)=>{const x=r[L];return x.class===h.class&&x.id!==L&&x.startDate>h.startDate&&b.push(x),b},[]).sort((b,L)=>b.startDate.getTime()-L.startDate.getTime())[0];T&&(g=Lu(T.startDate,l),m=!0)}const E=Object.keys(h.attr);for(let T=0;T<E.length;T++){const b=E[T];if(!d5(b))continue;let L=p[b];if(L)m&&!f.durationKnown&&(L.endTime=g);else{let x=h.attr[b];L=new c(y,g,""),h5(b)&&(x=n8(x)),L.value={key:b,data:x},L.type=Vs.dateRange,L.id=d,this.id3Track.addCue(L),p[b]=L}}s[d]={cues:p,dateRange:h,durationKnown:m}}}}class r8{constructor(e){this.hls=void 0,this.config=void 0,this.media=null,this.levelDetails=null,this.currentTime=0,this.stallCount=0,this._latency=null,this.timeupdateHandler=()=>this.timeupdate(),this.hls=e,this.config=e.config,this.registerListeners()}get latency(){return this._latency||0}get maxLatency(){const{config:e,levelDetails:t}=this;return e.liveMaxLatencyDuration!==void 0?e.liveMaxLatencyDuration:t?e.liveMaxLatencyDurationCount*t.targetduration:0}get targetLatency(){const{levelDetails:e}=this;if(e===null)return null;const{holdBack:t,partHoldBack:s,targetduration:i}=e,{liveSyncDuration:r,liveSyncDurationCount:a,lowLatencyMode:o}=this.config,l=this.hls.userConfig;let c=o&&s||t;(l.liveSyncDuration||l.liveSyncDurationCount||c===0)&&(c=r!==void 0?r:a*i);const u=i,d=1;return c+Math.min(this.stallCount*d,u)}get liveSyncPosition(){const e=this.estimateLiveEdge(),t=this.targetLatency,s=this.levelDetails;if(e===null||t===null||s===null)return null;const i=s.edge,r=e-t-this.edgeStalled,a=i-s.totalduration,o=i-(this.config.lowLatencyMode&&s.partTarget||s.targetduration);return Math.min(Math.max(a,r),o)}get drift(){const{levelDetails:e}=this;return e===null?1:e.drift}get edgeStalled(){const{levelDetails:e}=this;if(e===null)return 0;const t=(this.config.lowLatencyMode&&e.partTarget||e.targetduration)*3;return Math.max(e.age-t,0)}get forwardBufferLength(){const{media:e,levelDetails:t}=this;if(!e||!t)return 0;const s=e.buffered.length;return(s?e.buffered.end(s-1):t.edge)-this.currentTime}destroy(){this.unregisterListeners(),this.onMediaDetaching(),this.levelDetails=null,this.hls=this.timeupdateHandler=null}registerListeners(){this.hls.on(C.MEDIA_ATTACHED,this.onMediaAttached,this),this.hls.on(C.MEDIA_DETACHING,this.onMediaDetaching,this),this.hls.on(C.MANIFEST_LOADING,this.onManifestLoading,this),this.hls.on(C.LEVEL_UPDATED,this.onLevelUpdated,this),this.hls.on(C.ERROR,this.onError,this)}unregisterListeners(){this.hls.off(C.MEDIA_ATTACHED,this.onMediaAttached,this),this.hls.off(C.MEDIA_DETACHING,this.onMediaDetaching,this),this.hls.off(C.MANIFEST_LOADING,this.onManifestLoading,this),this.hls.off(C.LEVEL_UPDATED,this.onLevelUpdated,this),this.hls.off(C.ERROR,this.onError,this)}onMediaAttached(e,t){this.media=t.media,this.media.addEventListener("timeupdate",this.timeupdateHandler)}onMediaDetaching(){this.media&&(this.media.removeEventListener("timeupdate",this.timeupdateHandler),this.media=null)}onManifestLoading(){this.levelDetails=null,this._latency=null,this.stallCount=0}onLevelUpdated(e,{details:t}){this.levelDetails=t,t.advanced&&this.timeupdate(),!t.live&&this.media&&this.media.removeEventListener("timeupdate",this.timeupdateHandler)}onError(e,t){var s;t.details===ne.BUFFER_STALLED_ERROR&&(this.stallCount++,(s=this.levelDetails)!=null&&s.live&&H.warn("[playback-rate-controller]: Stall detected, adjusting target latency"))}timeupdate(){const{media:e,levelDetails:t}=this;if(!e||!t)return;this.currentTime=e.currentTime;const s=this.computeLatency();if(s===null)return;this._latency=s;const{lowLatencyMode:i,maxLiveSyncPlaybackRate:r}=this.config;if(!i||r===1)return;const a=this.targetLatency;if(a===null)return;const o=s-a,l=Math.min(this.maxLatency,a+t.targetduration),c=o<l;if(t.live&&c&&o>.05&&this.forwardBufferLength>1){const u=Math.min(2,Math.max(1,r)),d=Math.round(2/(1+Math.exp(-.75*o-this.edgeStalled))*20)/20;e.playbackRate=Math.min(u,Math.max(1,d))}else e.playbackRate!==1&&e.playbackRate!==0&&(e.playbackRate=1)}estimateLiveEdge(){const{levelDetails:e}=this;return e===null?null:e.edge+e.age}computeLatency(){const e=this.estimateLiveEdge();return e===null?null:e-this.currentTime}}const th=["NONE","TYPE-0","TYPE-1",null];var Ra={No:"",Yes:"YES",v2:"v2"};function a8(n,e){const{canSkipUntil:t,canSkipDateRanges:s,endSN:i}=n,r=e!==void 0?e-i:0;return t&&r<t?s?Ra.v2:Ra.Yes:Ra.No}class I0{constructor(e,t,s){this.msn=void 0,this.part=void 0,this.skip=void 0,this.msn=e,this.part=t,this.skip=s}addDirectives(e){const t=new self.URL(e);return this.msn!==void 0&&t.searchParams.set("_HLS_msn",this.msn.toString()),this.part!==void 0&&t.searchParams.set("_HLS_part",this.part.toString()),this.skip&&t.searchParams.set("_HLS_skip",this.skip),t.href}}class Qa{constructor(e){this._attrs=void 0,this.audioCodec=void 0,this.bitrate=void 0,this.codecSet=void 0,this.height=void 0,this.id=void 0,this.name=void 0,this.videoCodec=void 0,this.width=void 0,this.unknownCodecs=void 0,this.audioGroupIds=void 0,this.details=void 0,this.fragmentError=0,this.loadError=0,this.loaded=void 0,this.realBitrate=0,this.textGroupIds=void 0,this.url=void 0,this._urlId=0,this.url=[e.url],this._attrs=[e.attrs],this.bitrate=e.bitrate,e.details&&(this.details=e.details),this.id=e.id||0,this.name=e.name,this.width=e.width||0,this.height=e.height||0,this.audioCodec=e.audioCodec,this.videoCodec=e.videoCodec,this.unknownCodecs=e.unknownCodecs,this.codecSet=[e.videoCodec,e.audioCodec].filter(t=>t).join(",").replace(/\.[^.,]+/g,"")}get maxBitrate(){return Math.max(this.realBitrate,this.bitrate)}get attrs(){return this._attrs[this._urlId]}get pathwayId(){return this.attrs["PATHWAY-ID"]||"."}get uri(){return this.url[this._urlId]||""}get urlId(){return this._urlId}set urlId(e){const t=e%this.url.length;this._urlId!==t&&(this.fragmentError=0,this.loadError=0,this.details=void 0,this._urlId=t)}get audioGroupId(){var e;return(e=this.audioGroupIds)==null?void 0:e[this.urlId]}get textGroupId(){var e;return(e=this.textGroupIds)==null?void 0:e[this.urlId]}addFallback(e){this.url.push(e.url),this._attrs.push(e.attrs)}}function wu(n,e){const t=e.startPTS;if(Ce(t)){let s=0,i;e.sn>n.sn?(s=t-n.start,i=n):(s=n.start-t,i=e),i.duration!==s&&(i.duration=s)}else e.sn>n.sn?n.cc===e.cc&&n.minEndPTS?e.start=n.start+(n.minEndPTS-n.start):e.start=n.start+n.duration:e.start=Math.max(n.start-e.duration,0)}function qT(n,e,t,s,i,r){s-t<=0&&(H.warn("Fragment should have a positive duration",e),s=t+e.duration,r=i+e.duration);let a=t,o=s;const l=e.startPTS,c=e.endPTS;if(Ce(l)){const m=Math.abs(l-t);Ce(e.deltaPTS)?e.deltaPTS=Math.max(m,e.deltaPTS):e.deltaPTS=m,a=Math.max(t,l),t=Math.min(t,l),i=Math.min(i,e.startDTS),o=Math.min(s,c),s=Math.max(s,c),r=Math.max(r,e.endDTS)}const u=t-e.start;e.start!==0&&(e.start=t),e.duration=s-e.start,e.startPTS=t,e.maxStartPTS=a,e.startDTS=i,e.endPTS=s,e.minEndPTS=o,e.endDTS=r;const d=e.sn;if(!n||d<n.startSN||d>n.endSN)return 0;let h;const f=d-n.startSN,p=n.fragments;for(p[f]=e,h=f;h>0;h--)wu(p[h],p[h-1]);for(h=f;h<p.length-1;h++)wu(p[h],p[h+1]);return n.fragmentHint&&wu(p[p.length-1],n.fragmentHint),n.PTSKnown=n.alignedSliding=!0,u}function o8(n,e){let t=null;const s=n.fragments;for(let l=s.length-1;l>=0;l--){const c=s[l].initSegment;if(c){t=c;break}}n.fragmentHint&&delete n.fragmentHint.endPTS;let i=0,r;if(u8(n,e,(l,c)=>{l.relurl&&(i=l.cc-c.cc),Ce(l.startPTS)&&Ce(l.endPTS)&&(c.start=c.startPTS=l.startPTS,c.startDTS=l.startDTS,c.maxStartPTS=l.maxStartPTS,c.endPTS=l.endPTS,c.endDTS=l.endDTS,c.minEndPTS=l.minEndPTS,c.duration=l.endPTS-l.startPTS,c.duration&&(r=c),e.PTSKnown=e.alignedSliding=!0),c.elementaryStreams=l.elementaryStreams,c.loader=l.loader,c.stats=l.stats,c.urlId=l.urlId,l.initSegment&&(c.initSegment=l.initSegment,t=l.initSegment)}),t&&(e.fragmentHint?e.fragments.concat(e.fragmentHint):e.fragments).forEach(l=>{var c;(!l.initSegment||l.initSegment.relurl===((c=t)==null?void 0:c.relurl))&&(l.initSegment=t)}),e.skippedSegments)if(e.deltaUpdateFailed=e.fragments.some(l=>!l),e.deltaUpdateFailed){H.warn("[level-helper] Previous playlist missing segments skipped in delta playlist");for(let l=e.skippedSegments;l--;)e.fragments.shift();e.startSN=e.fragments[0].sn,e.startCC=e.fragments[0].cc}else e.canSkipDateRanges&&(e.dateRanges=l8(n.dateRanges,e.dateRanges,e.recentlyRemovedDateranges));const a=e.fragments;if(i){H.warn("discontinuity sliding from playlist, take drift into account");for(let l=0;l<a.length;l++)a[l].cc+=i}e.skippedSegments&&(e.startCC=e.fragments[0].cc),c8(n.partList,e.partList,(l,c)=>{c.elementaryStreams=l.elementaryStreams,c.stats=l.stats}),r?qT(e,r,r.startPTS,r.endPTS,r.startDTS,r.endDTS):XT(n,e),a.length&&(e.totalduration=e.edge-a[0].start),e.driftStartTime=n.driftStartTime,e.driftStart=n.driftStart;const o=e.advancedDateTime;if(e.advanced&&o){const l=e.edge;e.driftStart||(e.driftStartTime=o,e.driftStart=l),e.driftEndTime=o,e.driftEnd=l}else e.driftEndTime=n.driftEndTime,e.driftEnd=n.driftEnd,e.advancedDateTime=n.advancedDateTime}function l8(n,e,t){const s=Mt({},n);return t&&t.forEach(i=>{delete s[i]}),Object.keys(e).forEach(i=>{const r=new DT(e[i].attr,s[i]);r.isValid?s[i]=r:H.warn(`Ignoring invalid Playlist Delta Update DATERANGE tag: "${JSON.stringify(e[i].attr)}"`)}),s}function c8(n,e,t){if(n&&e){let s=0;for(let i=0,r=n.length;i<=r;i++){const a=n[i],o=e[i+s];a&&o&&a.index===o.index&&a.fragment.sn===o.fragment.sn?t(a,o):s--}}}function u8(n,e,t){const s=e.skippedSegments,i=Math.max(n.startSN,e.startSN)-e.startSN,r=(n.fragmentHint?1:0)+(s?e.endSN:Math.min(n.endSN,e.endSN))-e.startSN,a=e.startSN-n.startSN,o=e.fragmentHint?e.fragments.concat(e.fragmentHint):e.fragments,l=n.fragmentHint?n.fragments.concat(n.fragmentHint):n.fragments;for(let c=i;c<=r;c++){const u=l[a+c];let d=o[c];s&&!d&&c<s&&(d=e.fragments[c]=u),u&&d&&t(u,d)}}function XT(n,e){const t=e.startSN+e.skippedSegments-n.startSN,s=n.fragments;t<0||t>=s.length||sh(e,s[t].start)}function sh(n,e){if(e){const t=n.fragments;for(let s=n.skippedSegments;s<t.length;s++)t[s].start+=e;n.fragmentHint&&(n.fragmentHint.start+=e)}}function d8(n,e=1/0){let t=1e3*n.targetduration;if(n.updated){const s=n.fragments,i=4;if(s.length&&t*i>e){const r=s[s.length-1].duration*1e3;r<t&&(t=r)}}else t/=2;return Math.round(t)}function h8(n,e,t){if(!(n!=null&&n.details))return null;const s=n.details;let i=s.fragments[e-s.startSN];return i||(i=s.fragmentHint,i&&i.sn===e)?i:e<s.startSN&&t&&t.sn===e?t:null}function C0(n,e,t){var s;return n!=null&&n.details?QT((s=n.details)==null?void 0:s.partList,e,t):null}function QT(n,e,t){if(n)for(let s=n.length;s--;){const i=n[s];if(i.index===t&&i.fragment.sn===e)return i}return null}function Nl(n){switch(n.details){case ne.FRAG_LOAD_TIMEOUT:case ne.KEY_LOAD_TIMEOUT:case ne.LEVEL_LOAD_TIMEOUT:case ne.MANIFEST_LOAD_TIMEOUT:return!0}return!1}function D0(n,e){const t=Nl(e);return n.default[`${t?"timeout":"error"}Retry`]}function Of(n,e){const t=n.backoff==="linear"?1:Math.pow(2,e);return Math.min(t*n.retryDelayMs,n.maxRetryDelayMs)}function k0(n){return ms(ms({},n),{errorRetry:null,timeoutRetry:null})}function Bl(n,e,t,s){return!!n&&e<n.maxNumRetry&&(f8(s)||!!t)}function f8(n){return n===0&&navigator.onLine===!1||!!n&&(n<400||n>499)}const JT={search:function(n,e){let t=0,s=n.length-1,i=null,r=null;for(;t<=s;){i=(t+s)/2|0,r=n[i];const a=e(r);if(a>0)t=i+1;else if(a<0)s=i-1;else return r}return null}};function p8(n,e,t){if(e===null||!Array.isArray(n)||!n.length||!Ce(e))return null;const s=n[0].programDateTime;if(e<(s||0))return null;const i=n[n.length-1].endProgramDateTime;if(e>=(i||0))return null;t=t||0;for(let r=0;r<n.length;++r){const a=n[r];if(m8(e,t,a))return a}return null}function Ja(n,e,t=0,s=0){let i=null;if(n?i=e[n.sn-e[0].sn+1]||null:t===0&&e[0].start===0&&(i=e[0]),i&&nh(t,s,i)===0)return i;const r=JT.search(e,nh.bind(null,t,s));return r&&(r!==n||!i)?r:i}function nh(n=0,e=0,t){if(t.start<=n&&t.start+t.duration>n)return 0;const s=Math.min(e,t.duration+(t.deltaPTS?t.deltaPTS:0));return t.start+t.duration-s<=n?1:t.start-s>n&&t.start?-1:0}function m8(n,e,t){const s=Math.min(e,t.duration+(t.deltaPTS?t.deltaPTS:0))*1e3;return(t.endProgramDateTime||0)-s>n}function g8(n,e){return JT.search(n,t=>t.cc<e?1:t.cc>e?-1:0)}const y8=3e5;var Jt={DoNothing:0,SendEndCallback:1,SendAlternateToPenaltyBox:2,RemoveAlternatePermanently:3,InsertDiscontinuity:4,RetryRequest:5},Ds={None:0,MoveAllAlternatesMatchingHost:1,MoveAllAlternatesMatchingHDCP:2,SwitchToSDR:4};class v8{constructor(e){this.hls=void 0,this.playlistError=0,this.penalizedRenditions={},this.log=void 0,this.warn=void 0,this.error=void 0,this.hls=e,this.log=H.log.bind(H,"[info]:"),this.warn=H.warn.bind(H,"[warning]:"),this.error=H.error.bind(H,"[error]:"),this.registerListeners()}registerListeners(){const e=this.hls;e.on(C.ERROR,this.onError,this),e.on(C.MANIFEST_LOADING,this.onManifestLoading,this),e.on(C.LEVEL_UPDATED,this.onLevelUpdated,this)}unregisterListeners(){const e=this.hls;e&&(e.off(C.ERROR,this.onError,this),e.off(C.ERROR,this.onErrorOut,this),e.off(C.MANIFEST_LOADING,this.onManifestLoading,this),e.off(C.LEVEL_UPDATED,this.onLevelUpdated,this))}destroy(){this.unregisterListeners(),this.hls=null,this.penalizedRenditions={}}startLoad(e){this.playlistError=0}stopLoad(){}getVariantLevelIndex(e){return(e==null?void 0:e.type)===Ne.MAIN?e.level:this.hls.loadLevel}onManifestLoading(){this.playlistError=0,this.penalizedRenditions={}}onLevelUpdated(){this.playlistError=0}onError(e,t){var s,i;if(t.fatal)return;const r=this.hls,a=t.context;switch(t.details){case ne.FRAG_LOAD_ERROR:case ne.FRAG_LOAD_TIMEOUT:case ne.KEY_LOAD_ERROR:case ne.KEY_LOAD_TIMEOUT:t.errorAction=this.getFragRetryOrSwitchAction(t);return;case ne.FRAG_PARSING_ERROR:if((s=t.frag)!=null&&s.gap){t.errorAction={action:Jt.DoNothing,flags:Ds.None};return}case ne.FRAG_GAP:case ne.FRAG_DECRYPT_ERROR:{t.errorAction=this.getFragRetryOrSwitchAction(t),t.errorAction.action=Jt.SendAlternateToPenaltyBox;return}case ne.LEVEL_EMPTY_ERROR:case ne.LEVEL_PARSING_ERROR:{var o,l;const c=t.parent===Ne.MAIN?t.level:r.loadLevel;t.details===ne.LEVEL_EMPTY_ERROR&&(o=t.context)!=null&&(l=o.levelDetails)!=null&&l.live?t.errorAction=this.getPlaylistRetryOrSwitchAction(t,c):(t.levelRetry=!1,t.errorAction=this.getLevelSwitchAction(t,c))}return;case ne.LEVEL_LOAD_ERROR:case ne.LEVEL_LOAD_TIMEOUT:typeof(a==null?void 0:a.level)=="number"&&(t.errorAction=this.getPlaylistRetryOrSwitchAction(t,a.level));return;case ne.AUDIO_TRACK_LOAD_ERROR:case ne.AUDIO_TRACK_LOAD_TIMEOUT:case ne.SUBTITLE_LOAD_ERROR:case ne.SUBTITLE_TRACK_LOAD_TIMEOUT:if(a){const c=r.levels[r.loadLevel];if(c&&(a.type===Je.AUDIO_TRACK&&a.groupId===c.audioGroupId||a.type===Je.SUBTITLE_TRACK&&a.groupId===c.textGroupId)){t.errorAction=this.getPlaylistRetryOrSwitchAction(t,r.loadLevel),t.errorAction.action=Jt.SendAlternateToPenaltyBox,t.errorAction.flags=Ds.MoveAllAlternatesMatchingHost;return}}return;case ne.KEY_SYSTEM_STATUS_OUTPUT_RESTRICTED:{const c=r.levels[r.loadLevel],u=c==null?void 0:c.attrs["HDCP-LEVEL"];u&&(t.errorAction={action:Jt.SendAlternateToPenaltyBox,flags:Ds.MoveAllAlternatesMatchingHDCP,hdcpLevel:u})}return;case ne.BUFFER_ADD_CODEC_ERROR:case ne.REMUX_ALLOC_ERROR:t.errorAction=this.getLevelSwitchAction(t,(i=t.level)!=null?i:r.loadLevel);return;case ne.INTERNAL_EXCEPTION:case ne.BUFFER_APPENDING_ERROR:case ne.BUFFER_APPEND_ERROR:case ne.BUFFER_FULL_ERROR:case ne.LEVEL_SWITCH_ERROR:case ne.BUFFER_STALLED_ERROR:case ne.BUFFER_SEEK_OVER_HOLE:case ne.BUFFER_NUDGE_ON_STALL:t.errorAction={action:Jt.DoNothing,flags:Ds.None};return}if(t.type===Me.KEY_SYSTEM_ERROR){const c=this.getVariantLevelIndex(t.frag);t.levelRetry=!1,t.errorAction=this.getLevelSwitchAction(t,c);return}}getPlaylistRetryOrSwitchAction(e,t){var s;const i=this.hls,r=D0(i.config.playlistLoadPolicy,e),a=this.playlistError++,o=(s=e.response)==null?void 0:s.code;if(Bl(r,a,Nl(e),o))return{action:Jt.RetryRequest,flags:Ds.None,retryConfig:r,retryCount:a};const l=this.getLevelSwitchAction(e,t);return r&&(l.retryConfig=r,l.retryCount=a),l}getFragRetryOrSwitchAction(e){const t=this.hls,s=this.getVariantLevelIndex(e.frag),i=t.levels[s],{fragLoadPolicy:r,keyLoadPolicy:a}=t.config,o=D0(e.details.startsWith("key")?a:r,e),l=t.levels.reduce((d,h)=>d+h.fragmentError,0);if(i){var c;e.details!==ne.FRAG_GAP&&i.fragmentError++;const d=(c=e.response)==null?void 0:c.code;if(Bl(o,l,Nl(e),d))return{action:Jt.RetryRequest,flags:Ds.None,retryConfig:o,retryCount:l}}const u=this.getLevelSwitchAction(e,s);return o&&(u.retryConfig=o,u.retryCount=l),u}getLevelSwitchAction(e,t){const s=this.hls;t==null&&(t=s.loadLevel);const i=this.hls.levels[t];if(i&&(i.loadError++,s.autoLevelEnabled)){var r,a;let o=-1;const{levels:l,loadLevel:c,minAutoLevel:u,maxAutoLevel:d}=s,h=(r=e.frag)==null?void 0:r.type,{type:f,groupId:p}=(a=e.context)!=null?a:{};for(let m=l.length;m--;){const y=(m+c)%l.length;if(y!==c&&y>=u&&y<=d&&l[y].loadError===0){const g=l[y];if(e.details===ne.FRAG_GAP&&e.frag){const v=l[y].details;if(v){const E=Ja(e.frag,v.fragments,e.frag.start);if(E!=null&&E.gap)continue}}else if(f===Je.AUDIO_TRACK&&p===g.audioGroupId||f===Je.SUBTITLE_TRACK&&p===g.textGroupId||h===Ne.AUDIO&&i.audioGroupId===g.audioGroupId||h===Ne.SUBTITLE&&i.textGroupId===g.textGroupId)continue;o=y;break}}if(o>-1&&s.loadLevel!==o)return e.levelRetry=!0,this.playlistError=0,{action:Jt.SendAlternateToPenaltyBox,flags:Ds.None,nextAutoLevel:o}}return{action:Jt.SendAlternateToPenaltyBox,flags:Ds.MoveAllAlternatesMatchingHost}}onErrorOut(e,t){var s;switch((s=t.errorAction)==null?void 0:s.action){case Jt.DoNothing:break;case Jt.SendAlternateToPenaltyBox:this.sendAlternateToPenaltyBox(t),!t.errorAction.resolved&&t.details!==ne.FRAG_GAP&&(t.fatal=!0);break}if(t.fatal){this.hls.stopLoad();return}}sendAlternateToPenaltyBox(e){const t=this.hls,s=e.errorAction;if(!s)return;const{flags:i,hdcpLevel:r,nextAutoLevel:a}=s;switch(i){case Ds.None:this.switchLevel(e,a);break;case Ds.MoveAllAlternatesMatchingHost:s.resolved||(s.resolved=this.redundantFailover(e));break;case Ds.MoveAllAlternatesMatchingHDCP:r&&(t.maxHdcpLevel=th[th.indexOf(r)-1],s.resolved=!0),this.warn(`Restricting playback to HDCP-LEVEL of "${t.maxHdcpLevel}" or lower`);break}s.resolved||this.switchLevel(e,a)}switchLevel(e,t){t!==void 0&&e.errorAction&&(this.warn(`switching to level ${t} after ${e.details}`),this.hls.nextAutoLevel=t,e.errorAction.resolved=!0,this.hls.nextLoadLevel=this.hls.nextAutoLevel)}redundantFailover(e){const{hls:t,penalizedRenditions:s}=this,i=e.parent===Ne.MAIN?e.level:t.loadLevel,r=t.levels[i],a=r.url.length,o=e.frag?e.frag.urlId:r.urlId;r.urlId===o&&(!e.frag||r.details)&&this.penalizeRendition(r,e);for(let l=1;l<a;l++){const c=(o+l)%a,u=s[c];if(!u||E8(u,e,s[o]))return this.warn(`Switching to Redundant Stream ${c+1}/${a}: "${r.url[c]}" after ${e.details}`),this.playlistError=0,t.levels.forEach(d=>{d.urlId=c}),t.nextLoadLevel=i,!0}return!1}penalizeRendition(e,t){const{penalizedRenditions:s}=this,i=s[e.urlId]||{lastErrorPerfMs:0,errors:[],details:void 0};i.lastErrorPerfMs=performance.now(),i.errors.push(t),i.details=e.details,s[e.urlId]=i}}function E8(n,e,t){if(performance.now()-n.lastErrorPerfMs>y8)return!0;const s=n.details;if(e.details===ne.FRAG_GAP&&s&&e.frag){const i=e.frag.start,r=Ja(null,s.fragments,i);if(r&&!r.gap)return!0}if(t&&n.errors.length<t.errors.length){const i=n.errors[n.errors.length-1];if(s&&i.frag&&e.frag&&Math.abs(i.frag.start-e.frag.start)>s.targetduration*3)return!0}return!1}class Mf{constructor(e,t){this.hls=void 0,this.timer=-1,this.requestScheduled=-1,this.canLoad=!1,this.log=void 0,this.warn=void 0,this.log=H.log.bind(H,`${t}:`),this.warn=H.warn.bind(H,`${t}:`),this.hls=e}destroy(){this.clearTimer(),this.hls=this.log=this.warn=null}clearTimer(){clearTimeout(this.timer),this.timer=-1}startLoad(){this.canLoad=!0,this.requestScheduled=-1,this.loadPlaylist()}stopLoad(){this.canLoad=!1,this.clearTimer()}switchParams(e,t){const s=t==null?void 0:t.renditionReports;if(s){let i=-1;for(let r=0;r<s.length;r++){const a=s[r];let o;try{o=new self.URL(a.URI,t.url).href}catch(l){H.warn(`Could not construct new URL for Rendition Report: ${l}`),o=a.URI||""}if(o===e){i=r;break}else o===e.substring(0,o.length)&&(i=r)}if(i!==-1){const r=s[i],a=parseInt(r["LAST-MSN"])||(t==null?void 0:t.lastPartSn);let o=parseInt(r["LAST-PART"])||(t==null?void 0:t.lastPartIndex);if(this.hls.config.lowLatencyMode){const l=Math.min(t.age-t.partTarget,t.targetduration);o>=0&&l>t.partTarget&&(o+=1)}return new I0(a,o>=0?o:void 0,Ra.No)}}}loadPlaylist(e){this.requestScheduled===-1&&(this.requestScheduled=self.performance.now())}shouldLoadPlaylist(e){return this.canLoad&&!!e&&!!e.url&&(!e.details||e.details.live)}shouldReloadPlaylist(e){return this.timer===-1&&this.requestScheduled===-1&&this.shouldLoadPlaylist(e)}playlistLoaded(e,t,s){const{details:i,stats:r}=t,a=self.performance.now(),o=r.loading.first?Math.max(0,a-r.loading.first):0;if(i.advancedDateTime=Date.now()-o,i.live||s!=null&&s.live){if(i.reloaded(s),s&&this.log(`live playlist ${e} ${i.advanced?"REFRESHED "+i.lastPartSn+"-"+i.lastPartIndex:i.updated?"UPDATED":"MISSED"}`),s&&i.fragments.length>0&&o8(s,i),!this.canLoad||!i.live)return;let l,c,u;if(i.canBlockReload&&i.endSN&&i.advanced){const y=this.hls.config.lowLatencyMode,g=i.lastPartSn,v=i.endSN,E=i.lastPartIndex,T=E!==-1,b=g===v,L=y?0:E;T?(c=b?v+1:g,u=b?L:E+1):c=v+1;const x=i.age,w=x+i.ageHeader;let k=Math.min(w-i.partTarget,i.targetduration*1.5);if(k>0){if(s&&k>s.tuneInGoal)this.warn(`CDN Tune-in goal increased from: ${s.tuneInGoal} to: ${k} with playlist age: ${i.age}`),k=0;else{const R=Math.floor(k/i.targetduration);if(c+=R,u!==void 0){const P=Math.round(k%i.targetduration/i.partTarget);u+=P}this.log(`CDN Tune-in age: ${i.ageHeader}s last advanced ${x.toFixed(2)}s goal: ${k} skip sn ${R} to part ${u}`)}i.tuneInGoal=k}if(l=this.getDeliveryDirectives(i,t.deliveryDirectives,c,u),y||!b){this.loadPlaylist(l);return}}else(i.canBlockReload||i.canSkipUntil)&&(l=this.getDeliveryDirectives(i,t.deliveryDirectives,c,u));const d=this.hls.mainForwardBufferInfo,h=d?d.end-d.len:0,f=(i.edge-h)*1e3,p=d8(i,f);i.updated&&a>this.requestScheduled+p&&(this.requestScheduled=r.loading.start),c!==void 0&&i.canBlockReload?this.requestScheduled=r.loading.first+p-(i.partTarget*1e3||1e3):this.requestScheduled===-1||this.requestScheduled+p<a?this.requestScheduled=a:this.requestScheduled-a<=0&&(this.requestScheduled+=p);let m=this.requestScheduled-a;m=Math.max(0,m),this.log(`reload live playlist ${e} in ${Math.round(m)} ms`),this.timer=self.setTimeout(()=>this.loadPlaylist(l),m)}else this.clearTimer()}getDeliveryDirectives(e,t,s,i){let r=a8(e,s);return t!=null&&t.skip&&e.deltaUpdateFailed&&(s=t.msn,i=t.part,r=Ra.No),new I0(s,i,r)}checkRetry(e){const t=e.details,s=Nl(e),i=e.errorAction,{action:r,retryCount:a=0,retryConfig:o}=i||{},l=!!i&&!!o&&(r===Jt.RetryRequest||!i.resolved&&r===Jt.SendAlternateToPenaltyBox);if(l){var c;if(this.requestScheduled=-1,a>=o.maxNumRetry)return!1;if(s&&(c=e.context)!=null&&c.deliveryDirectives)this.warn(`Retrying playlist loading ${a+1}/${o.maxNumRetry} after "${t}" without delivery-directives`),this.loadPlaylist();else{const u=Of(o,a);this.timer=self.setTimeout(()=>this.loadPlaylist(),u),this.warn(`Retrying playlist loading ${a+1}/${o.maxNumRetry} after "${t}" in ${u}ms`)}e.levelRetry=!0,i.resolved=!0}return l}}let Ru;class T8 extends Mf{constructor(e,t){super(e,"[level-controller]"),this._levels=[],this._firstLevel=-1,this._startLevel=void 0,this.currentLevel=null,this.currentLevelIndex=-1,this.manualLevelIndex=-1,this.steering=void 0,this.onParsedComplete=void 0,this.steering=t,this._registerListeners()}_registerListeners(){const{hls:e}=this;e.on(C.MANIFEST_LOADING,this.onManifestLoading,this),e.on(C.MANIFEST_LOADED,this.onManifestLoaded,this),e.on(C.LEVEL_LOADED,this.onLevelLoaded,this),e.on(C.LEVELS_UPDATED,this.onLevelsUpdated,this),e.on(C.AUDIO_TRACK_SWITCHED,this.onAudioTrackSwitched,this),e.on(C.FRAG_LOADED,this.onFragLoaded,this),e.on(C.ERROR,this.onError,this)}_unregisterListeners(){const{hls:e}=this;e.off(C.MANIFEST_LOADING,this.onManifestLoading,this),e.off(C.MANIFEST_LOADED,this.onManifestLoaded,this),e.off(C.LEVEL_LOADED,this.onLevelLoaded,this),e.off(C.LEVELS_UPDATED,this.onLevelsUpdated,this),e.off(C.AUDIO_TRACK_SWITCHED,this.onAudioTrackSwitched,this),e.off(C.FRAG_LOADED,this.onFragLoaded,this),e.off(C.ERROR,this.onError,this)}destroy(){this._unregisterListeners(),this.steering=null,this.resetLevels(),super.destroy()}startLoad(){this._levels.forEach(e=>{e.loadError=0,e.fragmentError=0}),super.startLoad()}resetLevels(){this._startLevel=void 0,this.manualLevelIndex=-1,this.currentLevelIndex=-1,this.currentLevel=null,this._levels=[]}onManifestLoading(e,t){this.resetLevels()}onManifestLoaded(e,t){const s=[],i={};let r;t.levels.forEach(a=>{var o;const l=a.attrs;((o=a.audioCodec)==null?void 0:o.indexOf("mp4a.40.34"))!==-1&&(Ru||(Ru=/chrome|firefox/i.test(navigator.userAgent)),Ru&&(a.audioCodec=void 0));const{AUDIO:c,CODECS:u,"FRAME-RATE":d,"PATHWAY-ID":h,RESOLUTION:f,SUBTITLES:p}=l,m=`${`${h||"."}-`}${a.bitrate}-${f}-${d}-${u}`;r=i[m],r?r.addFallback(a):(r=new Qa(a),i[m]=r,s.push(r)),Ul(r,"audio",c),Ul(r,"text",p)}),this.filterAndSortMediaOptions(s,t)}filterAndSortMediaOptions(e,t){let s=[],i=[],r=!1,a=!1,o=!1,l=e.filter(({audioCodec:f,videoCodec:p,width:m,height:y,unknownCodecs:g})=>(r||(r=!!(m&&y)),a||(a=!!p),o||(o=!!f),!(g!=null&&g.length)&&(!f||_u(f,"audio"))&&(!p||_u(p,"video"))));if((r||a)&&o&&(l=l.filter(({videoCodec:f,width:p,height:m})=>!!f||!!(p&&m))),l.length===0){Promise.resolve().then(()=>{if(this.hls){const f=new Error("no level with compatible codecs found in manifest");this.hls.trigger(C.ERROR,{type:Me.MEDIA_ERROR,details:ne.MANIFEST_INCOMPATIBLE_CODECS_ERROR,fatal:!0,url:t.url,error:f,reason:f.message})}});return}t.audioTracks&&(s=t.audioTracks.filter(f=>!f.audioCodec||_u(f.audioCodec,"audio")),P0(s)),t.subtitles&&(i=t.subtitles,P0(i));const c=l.slice(0);l.sort((f,p)=>f.attrs["HDCP-LEVEL"]!==p.attrs["HDCP-LEVEL"]?(f.attrs["HDCP-LEVEL"]||"")>(p.attrs["HDCP-LEVEL"]||"")?1:-1:f.bitrate!==p.bitrate?f.bitrate-p.bitrate:f.attrs["FRAME-RATE"]!==p.attrs["FRAME-RATE"]?f.attrs.decimalFloatingPoint("FRAME-RATE")-p.attrs.decimalFloatingPoint("FRAME-RATE"):f.attrs.SCORE!==p.attrs.SCORE?f.attrs.decimalFloatingPoint("SCORE")-p.attrs.decimalFloatingPoint("SCORE"):r&&f.height!==p.height?f.height-p.height:0);let u=c[0];if(this.steering&&(l=this.steering.filterParsedLevels(l),l.length!==c.length)){for(let f=0;f<c.length;f++)if(c[f].pathwayId===l[0].pathwayId){u=c[f];break}}this._levels=l;for(let f=0;f<l.length;f++)if(l[f]===u){this._firstLevel=f,this.log(`manifest loaded, ${l.length} level(s) found, first bitrate: ${u.bitrate}`);break}const d=o&&!a,h={levels:l,audioTracks:s,subtitleTracks:i,sessionData:t.sessionData,sessionKeys:t.sessionKeys,firstLevel:this._firstLevel,stats:t.stats,audio:o,video:a,altAudio:!d&&s.some(f=>!!f.url)};this.hls.trigger(C.MANIFEST_PARSED,h),(this.hls.config.autoStartLoad||this.hls.forceStartLoad)&&this.hls.startLoad(this.hls.config.startPosition)}get levels(){return this._levels.length===0?null:this._levels}get level(){return this.currentLevelIndex}set level(e){const t=this._levels;if(t.length===0)return;if(e<0||e>=t.length){const u=new Error("invalid level idx"),d=e<0;if(this.hls.trigger(C.ERROR,{type:Me.OTHER_ERROR,details:ne.LEVEL_SWITCH_ERROR,level:e,fatal:d,error:u,reason:u.message}),d)return;e=Math.min(e,t.length-1)}const s=this.currentLevelIndex,i=this.currentLevel,r=i?i.attrs["PATHWAY-ID"]:void 0,a=t[e],o=a.attrs["PATHWAY-ID"];if(this.currentLevelIndex=e,this.currentLevel=a,s===e&&a.details&&i&&r===o)return;this.log(`Switching to level ${e}${o?" with Pathway "+o:""} from level ${s}${r?" with Pathway "+r:""}`);const l=Mt({},a,{level:e,maxBitrate:a.maxBitrate,attrs:a.attrs,uri:a.uri,urlId:a.urlId});delete l._attrs,delete l._urlId,this.hls.trigger(C.LEVEL_SWITCHING,l);const c=a.details;if(!c||c.live){const u=this.switchParams(a.uri,i==null?void 0:i.details);this.loadPlaylist(u)}}get manualLevel(){return this.manualLevelIndex}set manualLevel(e){this.manualLevelIndex=e,this._startLevel===void 0&&(this._startLevel=e),e!==-1&&(this.level=e)}get firstLevel(){return this._firstLevel}set firstLevel(e){this._firstLevel=e}get startLevel(){if(this._startLevel===void 0){const e=this.hls.config.startLevel;return e!==void 0?e:this._firstLevel}else return this._startLevel}set startLevel(e){this._startLevel=e}onError(e,t){t.fatal||!t.context||t.context.type===Je.LEVEL&&t.context.level===this.level&&this.checkRetry(t)}onFragLoaded(e,{frag:t}){if(t!==void 0&&t.type===Ne.MAIN){const s=this._levels[t.level];s!==void 0&&(s.loadError=0)}}onLevelLoaded(e,t){var s;const{level:i,details:r}=t,a=this._levels[i];if(!a){var o;this.warn(`Invalid level index ${i}`),(o=t.deliveryDirectives)!=null&&o.skip&&(r.deltaUpdateFailed=!0);return}i===this.currentLevelIndex?(a.fragmentError===0&&(a.loadError=0),this.playlistLoaded(i,t,a.details)):(s=t.deliveryDirectives)!=null&&s.skip&&(r.deltaUpdateFailed=!0)}onAudioTrackSwitched(e,t){const s=this.currentLevel;if(!s)return;const i=this.hls.audioTracks[t.id].groupId;if(s.audioGroupIds&&s.audioGroupId!==i){let r=-1;for(let a=0;a<s.audioGroupIds.length;a++)if(s.audioGroupIds[a]===i){r=a;break}r!==-1&&r!==s.urlId&&(s.urlId=r,this.canLoad&&this.startLoad())}}loadPlaylist(e){super.loadPlaylist();const t=this.currentLevelIndex,s=this.currentLevel;if(s&&this.shouldLoadPlaylist(s)){const i=s.urlId;let r=s.uri;if(e)try{r=e.addDirectives(r)}catch(o){this.warn(`Could not construct new URL with HLS Delivery Directives: ${o}`)}const a=s.attrs["PATHWAY-ID"];this.log(`Loading level index ${t}${(e==null?void 0:e.msn)!==void 0?" at sn "+e.msn+" part "+e.part:""} with${a?" Pathway "+a:""} URI ${i+1}/${s.url.length} ${r}`),this.clearTimer(),this.hls.trigger(C.LEVEL_LOADING,{url:r,level:t,id:i,deliveryDirectives:e||null})}}get nextLoadLevel(){return this.manualLevelIndex!==-1?this.manualLevelIndex:this.hls.nextAutoLevel}set nextLoadLevel(e){this.level=e,this.manualLevelIndex===-1&&(this.hls.nextAutoLevel=e)}removeLevel(e,t){const s=(r,a)=>a!==t,i=this._levels.filter((r,a)=>a!==e?!0:r.url.length>1&&t!==void 0?(r.url=r.url.filter(s),r.audioGroupIds&&(r.audioGroupIds=r.audioGroupIds.filter(s)),r.textGroupIds&&(r.textGroupIds=r.textGroupIds.filter(s)),r.urlId=0,!0):(this.steering&&this.steering.removeLevel(r),!1));this.hls.trigger(C.LEVELS_UPDATED,{levels:i})}onLevelsUpdated(e,{levels:t}){t.forEach((s,i)=>{const{details:r}=s;r!=null&&r.fragments&&r.fragments.forEach(a=>{a.level=i})}),this._levels=t}}function Ul(n,e,t){t&&(e==="audio"?(n.audioGroupIds||(n.audioGroupIds=[]),n.audioGroupIds[n.url.length-1]=t):e==="text"&&(n.textGroupIds||(n.textGroupIds=[]),n.textGroupIds[n.url.length-1]=t))}function P0(n){const e={};n.forEach(t=>{const s=t.groupId||"";t.id=e[s]=e[s]||0,e[s]++})}var Ut={NOT_LOADED:"NOT_LOADED",APPENDING:"APPENDING",PARTIAL:"PARTIAL",OK:"OK"};class b8{constructor(e){this.activePartLists=Object.create(null),this.endListFragments=Object.create(null),this.fragments=Object.create(null),this.timeRanges=Object.create(null),this.bufferPadding=.2,this.hls=void 0,this.hasGaps=!1,this.hls=e,this._registerListeners()}_registerListeners(){const{hls:e}=this;e.on(C.BUFFER_APPENDED,this.onBufferAppended,this),e.on(C.FRAG_BUFFERED,this.onFragBuffered,this),e.on(C.FRAG_LOADED,this.onFragLoaded,this)}_unregisterListeners(){const{hls:e}=this;e.off(C.BUFFER_APPENDED,this.onBufferAppended,this),e.off(C.FRAG_BUFFERED,this.onFragBuffered,this),e.off(C.FRAG_LOADED,this.onFragLoaded,this)}destroy(){this._unregisterListeners(),this.fragments=this.activePartLists=this.endListFragments=this.timeRanges=null}getAppendedFrag(e,t){const s=this.activePartLists[t];if(s)for(let i=s.length;i--;){const r=s[i];if(!r)break;const a=r.end;if(r.start<=e&&a!==null&&e<=a)return r}return this.getBufferedFrag(e,t)}getBufferedFrag(e,t){const{fragments:s}=this,i=Object.keys(s);for(let r=i.length;r--;){const a=s[i[r]];if((a==null?void 0:a.body.type)===t&&a.buffered){const o=a.body;if(o.start<=e&&e<=o.end)return o}}return null}detectEvictedFragments(e,t,s,i){this.timeRanges&&(this.timeRanges[e]=t);const r=(i==null?void 0:i.fragment.sn)||-1;Object.keys(this.fragments).forEach(a=>{const o=this.fragments[a];if(!o||r>=o.body.sn)return;if(!o.buffered&&!o.loaded){o.body.type===s&&this.removeFragment(o.body);return}const l=o.range[e];l&&l.time.some(c=>{const u=!this.isTimeBuffered(c.startPTS,c.endPTS,t);return u&&this.removeFragment(o.body),u})})}detectPartialFragments(e){const t=this.timeRanges,{frag:s,part:i}=e;if(!t||s.sn==="initSegment")return;const r=ur(s),a=this.fragments[r];if(!a||a.buffered&&s.gap)return;const o=!s.relurl;Object.keys(t).forEach(l=>{const c=s.elementaryStreams[l];if(!c)return;const u=t[l],d=o||c.partial===!0;a.range[l]=this.getBufferedTimes(s,i,d,u)}),a.loaded=null,Object.keys(a.range).length?(a.buffered=!0,(a.body.endList=s.endList||a.body.endList)&&(this.endListFragments[a.body.type]=a),No(a)||this.removeParts(s.sn-1,s.type)):this.removeFragment(a.body)}removeParts(e,t){const s=this.activePartLists[t];s&&(this.activePartLists[t]=s.filter(i=>i.fragment.sn>=e))}fragBuffered(e,t){const s=ur(e);let i=this.fragments[s];!i&&t&&(i=this.fragments[s]={body:e,appendedPTS:null,loaded:null,buffered:!1,range:Object.create(null)},e.gap&&(this.hasGaps=!0)),i&&(i.loaded=null,i.buffered=!0)}getBufferedTimes(e,t,s,i){const r={time:[],partial:s},a=e.start,o=e.end,l=e.minEndPTS||o,c=e.maxStartPTS||a;for(let u=0;u<i.length;u++){const d=i.start(u)-this.bufferPadding,h=i.end(u)+this.bufferPadding;if(c>=d&&l<=h){r.time.push({startPTS:Math.max(a,i.start(u)),endPTS:Math.min(o,i.end(u))});break}else if(a<h&&o>d)r.partial=!0,r.time.push({startPTS:Math.max(a,i.start(u)),endPTS:Math.min(o,i.end(u))});else if(o<=d)break}return r}getPartialFragment(e){let t=null,s,i,r,a=0;const{bufferPadding:o,fragments:l}=this;return Object.keys(l).forEach(c=>{const u=l[c];u&&No(u)&&(i=u.body.start-o,r=u.body.end+o,e>=i&&e<=r&&(s=Math.min(e-i,r-e),a<=s&&(t=u.body,a=s)))}),t}isEndListAppended(e){const t=this.endListFragments[e];return t!==void 0&&(t.buffered||No(t))}getState(e){const t=ur(e),s=this.fragments[t];return s?s.buffered?No(s)?Ut.PARTIAL:Ut.OK:Ut.APPENDING:Ut.NOT_LOADED}isTimeBuffered(e,t,s){let i,r;for(let a=0;a<s.length;a++){if(i=s.start(a)-this.bufferPadding,r=s.end(a)+this.bufferPadding,e>=i&&t<=r)return!0;if(t<=i)return!1}return!1}onFragLoaded(e,t){const{frag:s,part:i}=t;if(s.sn==="initSegment"||s.bitrateTest)return;const r=i?null:t,a=ur(s);this.fragments[a]={body:s,appendedPTS:null,loaded:r,buffered:!1,range:Object.create(null)}}onBufferAppended(e,t){const{frag:s,part:i,timeRanges:r}=t;if(s.sn==="initSegment")return;const a=s.type;if(i){let o=this.activePartLists[a];o||(this.activePartLists[a]=o=[]),o.push(i)}this.timeRanges=r,Object.keys(r).forEach(o=>{const l=r[o];this.detectEvictedFragments(o,l,a,i)})}onFragBuffered(e,t){this.detectPartialFragments(t)}hasFragment(e){const t=ur(e);return!!this.fragments[t]}hasParts(e){var t;return!!((t=this.activePartLists[e])!=null&&t.length)}removeFragmentsInRange(e,t,s,i,r){i&&!this.hasGaps||Object.keys(this.fragments).forEach(a=>{const o=this.fragments[a];if(!o)return;const l=o.body;l.type!==s||i&&!l.gap||l.start<t&&l.end>e&&(o.buffered||r)&&this.removeFragment(l)})}removeFragment(e){const t=ur(e);e.stats.loaded=0,e.clearElementaryStreamInfo();const s=this.activePartLists[e.type];if(s){const i=e.sn;this.activePartLists[e.type]=s.filter(r=>r.fragment.sn!==i)}delete this.fragments[t],e.endList&&delete this.endListFragments[e.type]}removeAllFragments(){this.fragments=Object.create(null),this.endListFragments=Object.create(null),this.activePartLists=Object.create(null),this.hasGaps=!1}}function No(n){var e,t,s;return n.buffered&&(n.body.gap||((e=n.range.video)==null?void 0:e.partial)||((t=n.range.audio)==null?void 0:t.partial)||((s=n.range.audiovideo)==null?void 0:s.partial))}function ur(n){return`${n.type}_${n.level}_${n.urlId}_${n.sn}`}const O0=Math.pow(2,17);class x8{constructor(e){this.config=void 0,this.loader=null,this.partLoadTimeout=-1,this.config=e}destroy(){this.loader&&(this.loader.destroy(),this.loader=null)}abort(){this.loader&&this.loader.abort()}load(e,t){const s=e.url;if(!s)return Promise.reject(new Pn({type:Me.NETWORK_ERROR,details:ne.FRAG_LOAD_ERROR,fatal:!1,frag:e,error:new Error(`Fragment does not have a ${s?"part list":"url"}`),networkDetails:null}));this.abort();const i=this.config,r=i.fLoader,a=i.loader;return new Promise((o,l)=>{if(this.loader&&this.loader.destroy(),e.gap)if(e.tagList.some(f=>f[0]==="GAP")){l(F0(e));return}else e.gap=!1;const c=this.loader=e.loader=r?new r(i):new a(i),u=M0(e),d=k0(i.fragLoadPolicy.default),h={loadPolicy:d,timeout:d.maxLoadTimeMs,maxRetry:0,retryDelay:0,maxRetryDelay:0,highWaterMark:e.sn==="initSegment"?1/0:O0};e.stats=c.stats,c.load(u,h,{onSuccess:(f,p,m,y)=>{this.resetLoader(e,c);let g=f.data;m.resetIV&&e.decryptdata&&(e.decryptdata.iv=new Uint8Array(g.slice(0,16)),g=g.slice(16)),o({frag:e,part:null,payload:g,networkDetails:y})},onError:(f,p,m,y)=>{this.resetLoader(e,c),l(new Pn({type:Me.NETWORK_ERROR,details:ne.FRAG_LOAD_ERROR,fatal:!1,frag:e,response:ms({url:s,data:void 0},f),error:new Error(`HTTP Error ${f.code} ${f.text}`),networkDetails:m,stats:y}))},onAbort:(f,p,m)=>{this.resetLoader(e,c),l(new Pn({type:Me.NETWORK_ERROR,details:ne.INTERNAL_ABORTED,fatal:!1,frag:e,error:new Error("Aborted"),networkDetails:m,stats:f}))},onTimeout:(f,p,m)=>{this.resetLoader(e,c),l(new Pn({type:Me.NETWORK_ERROR,details:ne.FRAG_LOAD_TIMEOUT,fatal:!1,frag:e,error:new Error(`Timeout after ${h.timeout}ms`),networkDetails:m,stats:f}))},onProgress:(f,p,m,y)=>{t&&t({frag:e,part:null,payload:m,networkDetails:y})}})})}loadPart(e,t,s){this.abort();const i=this.config,r=i.fLoader,a=i.loader;return new Promise((o,l)=>{if(this.loader&&this.loader.destroy(),e.gap||t.gap){l(F0(e,t));return}const c=this.loader=e.loader=r?new r(i):new a(i),u=M0(e,t),d=k0(i.fragLoadPolicy.default),h={loadPolicy:d,timeout:d.maxLoadTimeMs,maxRetry:0,retryDelay:0,maxRetryDelay:0,highWaterMark:O0};t.stats=c.stats,c.load(u,h,{onSuccess:(f,p,m,y)=>{this.resetLoader(e,c),this.updateStatsFromPart(e,t);const g={frag:e,part:t,payload:f.data,networkDetails:y};s(g),o(g)},onError:(f,p,m,y)=>{this.resetLoader(e,c),l(new Pn({type:Me.NETWORK_ERROR,details:ne.FRAG_LOAD_ERROR,fatal:!1,frag:e,part:t,response:ms({url:u.url,data:void 0},f),error:new Error(`HTTP Error ${f.code} ${f.text}`),networkDetails:m,stats:y}))},onAbort:(f,p,m)=>{e.stats.aborted=t.stats.aborted,this.resetLoader(e,c),l(new Pn({type:Me.NETWORK_ERROR,details:ne.INTERNAL_ABORTED,fatal:!1,frag:e,part:t,error:new Error("Aborted"),networkDetails:m,stats:f}))},onTimeout:(f,p,m)=>{this.resetLoader(e,c),l(new Pn({type:Me.NETWORK_ERROR,details:ne.FRAG_LOAD_TIMEOUT,fatal:!1,frag:e,part:t,error:new Error(`Timeout after ${h.timeout}ms`),networkDetails:m,stats:f}))}})})}updateStatsFromPart(e,t){const s=e.stats,i=t.stats,r=i.total;if(s.loaded+=i.loaded,r){const l=Math.round(e.duration/t.duration),c=Math.min(Math.round(s.loaded/r),l),u=(l-c)*Math.round(s.loaded/c);s.total=s.loaded+u}else s.total=Math.max(s.loaded,s.total);const a=s.loading,o=i.loading;a.start?a.first+=o.first-o.start:(a.start=o.start,a.first=o.first),a.end=o.end}resetLoader(e,t){e.loader=null,this.loader===t&&(self.clearTimeout(this.partLoadTimeout),this.loader=null),t.destroy()}}function M0(n,e=null){const t=e||n,s={frag:n,part:e,responseType:"arraybuffer",url:t.url,headers:{},rangeStart:0,rangeEnd:0},i=t.byteRangeStartOffset,r=t.byteRangeEndOffset;if(Ce(i)&&Ce(r)){var a;let o=i,l=r;if(n.sn==="initSegment"&&((a=n.decryptdata)==null?void 0:a.method)==="AES-128"){const c=r-i;c%16&&(l=r+(16-c%16)),i!==0&&(s.resetIV=!0,o=i-16)}s.rangeStart=o,s.rangeEnd=l}return s}function F0(n,e){const t=new Error(`GAP ${n.gap?"tag":"attribute"} found`),s={type:Me.MEDIA_ERROR,details:ne.FRAG_GAP,fatal:!1,frag:n,error:t,networkDetails:null};return e&&(s.part=e),(e||n).stats.aborted=!0,new Pn(s)}class Pn extends Error{constructor(e){super(e.error.message),this.data=void 0,this.data=e}}class S8{constructor(e){this.config=void 0,this.keyUriToKeyInfo={},this.emeController=null,this.config=e}abort(e){for(const t in this.keyUriToKeyInfo){const s=this.keyUriToKeyInfo[t].loader;if(s){if(e&&e!==s.context.frag.type)return;s.abort()}}}detach(){for(const e in this.keyUriToKeyInfo){const t=this.keyUriToKeyInfo[e];(t.mediaKeySessionContext||t.decryptdata.isCommonEncryption)&&delete this.keyUriToKeyInfo[e]}}destroy(){this.detach();for(const e in this.keyUriToKeyInfo){const t=this.keyUriToKeyInfo[e].loader;t&&t.destroy()}this.keyUriToKeyInfo={}}createKeyLoadError(e,t=ne.KEY_LOAD_ERROR,s,i,r){return new Pn({type:Me.NETWORK_ERROR,details:t,fatal:!1,frag:e,response:r,error:s,networkDetails:i})}loadClear(e,t){if(this.emeController&&this.config.emeEnabled){const{sn:s,cc:i}=e;for(let r=0;r<t.length;r++){const a=t[r];if(i<=a.cc&&(s==="initSegment"||a.sn==="initSegment"||s<a.sn)){this.emeController.selectKeySystemFormat(a).then(o=>{a.setKeyFormat(o)});break}}}}load(e){return!e.decryptdata&&e.encrypted&&this.emeController?this.emeController.selectKeySystemFormat(e).then(t=>this.loadInternal(e,t)):this.loadInternal(e)}loadInternal(e,t){var s,i;t&&e.setKeyFormat(t);const r=e.decryptdata;if(!r){const c=new Error(t?`Expected frag.decryptdata to be defined after setting format ${t}`:"Missing decryption data on fragment in onKeyLoading");return Promise.reject(this.createKeyLoadError(e,ne.KEY_LOAD_ERROR,c))}const a=r.uri;if(!a)return Promise.reject(this.createKeyLoadError(e,ne.KEY_LOAD_ERROR,new Error(`Invalid key URI: "${a}"`)));let o=this.keyUriToKeyInfo[a];if((s=o)!=null&&s.decryptdata.key)return r.key=o.decryptdata.key,Promise.resolve({frag:e,keyInfo:o});if((i=o)!=null&&i.keyLoadPromise){var l;switch((l=o.mediaKeySessionContext)==null?void 0:l.keyStatus){case void 0:case"status-pending":case"usable":case"usable-in-future":return o.keyLoadPromise.then(c=>(r.key=c.keyInfo.decryptdata.key,{frag:e,keyInfo:o}))}}switch(o=this.keyUriToKeyInfo[a]={decryptdata:r,keyLoadPromise:null,loader:null,mediaKeySessionContext:null},r.method){case"ISO-23001-7":case"SAMPLE-AES":case"SAMPLE-AES-CENC":case"SAMPLE-AES-CTR":return r.keyFormat==="identity"?this.loadKeyHTTP(o,e):this.loadKeyEME(o,e);case"AES-128":return this.loadKeyHTTP(o,e);default:return Promise.reject(this.createKeyLoadError(e,ne.KEY_LOAD_ERROR,new Error(`Key supplied with unsupported METHOD: "${r.method}"`)))}}loadKeyEME(e,t){const s={frag:t,keyInfo:e};if(this.emeController&&this.config.emeEnabled){const i=this.emeController.loadKey(s);if(i)return(e.keyLoadPromise=i.then(r=>(e.mediaKeySessionContext=r,s))).catch(r=>{throw e.keyLoadPromise=null,r})}return Promise.resolve(s)}loadKeyHTTP(e,t){const s=this.config,i=s.loader,r=new i(s);return t.keyLoader=e.loader=r,e.keyLoadPromise=new Promise((a,o)=>{const l={keyInfo:e,frag:t,responseType:"arraybuffer",url:e.decryptdata.uri},c=s.keyLoadPolicy.default,u={loadPolicy:c,timeout:c.maxLoadTimeMs,maxRetry:0,retryDelay:0,maxRetryDelay:0},d={onSuccess:(h,f,p,m)=>{const{frag:y,keyInfo:g,url:v}=p;if(!y.decryptdata||g!==this.keyUriToKeyInfo[v])return o(this.createKeyLoadError(y,ne.KEY_LOAD_ERROR,new Error("after key load, decryptdata unset or changed"),m));g.decryptdata.key=y.decryptdata.key=new Uint8Array(h.data),y.keyLoader=null,g.loader=null,a({frag:y,keyInfo:g})},onError:(h,f,p,m)=>{this.resetLoader(f),o(this.createKeyLoadError(t,ne.KEY_LOAD_ERROR,new Error(`HTTP Error ${h.code} loading key ${h.text}`),p,ms({url:l.url,data:void 0},h)))},onTimeout:(h,f,p)=>{this.resetLoader(f),o(this.createKeyLoadError(t,ne.KEY_LOAD_TIMEOUT,new Error("key loading timed out"),p))},onAbort:(h,f,p)=>{this.resetLoader(f),o(this.createKeyLoadError(t,ne.INTERNAL_ABORTED,new Error("key loading aborted"),p))}};r.load(l,u,d)})}resetLoader(e){const{frag:t,keyInfo:s,url:i}=e,r=s.loader;t.keyLoader===r&&(t.keyLoader=null,s.loader=null),delete this.keyUriToKeyInfo[i],r&&r.destroy()}}class _8{constructor(){this._boundTick=void 0,this._tickTimer=null,this._tickInterval=null,this._tickCallCount=0,this._boundTick=this.tick.bind(this)}destroy(){this.onHandlerDestroying(),this.onHandlerDestroyed()}onHandlerDestroying(){this.clearNextTick(),this.clearInterval()}onHandlerDestroyed(){}hasInterval(){return!!this._tickInterval}hasNextTick(){return!!this._tickTimer}setInterval(e){return this._tickInterval?!1:(this._tickCallCount=0,this._tickInterval=self.setInterval(this._boundTick,e),!0)}clearInterval(){return this._tickInterval?(self.clearInterval(this._tickInterval),this._tickInterval=null,!0):!1}clearNextTick(){return this._tickTimer?(self.clearTimeout(this._tickTimer),this._tickTimer=null,!0):!1}tick(){this._tickCallCount++,this._tickCallCount===1&&(this.doTick(),this._tickCallCount>1&&this.tickImmediate(),this._tickCallCount=0)}tickImmediate(){this.clearNextTick(),this._tickTimer=self.setTimeout(this._boundTick,0)}doTick(){}}const A8={length:0,start:()=>0,end:()=>0};class ht{static isBuffered(e,t){try{if(e){const s=ht.getBuffered(e);for(let i=0;i<s.length;i++)if(t>=s.start(i)&&t<=s.end(i))return!0}}catch{}return!1}static bufferInfo(e,t,s){try{if(e){const i=ht.getBuffered(e),r=[];let a;for(a=0;a<i.length;a++)r.push({start:i.start(a),end:i.end(a)});return this.bufferedInfo(r,t,s)}}catch{}return{len:0,start:t,end:t,nextStart:void 0}}static bufferedInfo(e,t,s){t=Math.max(0,t),e.sort(function(c,u){return c.start-u.start||u.end-c.end});let i=[];if(s)for(let c=0;c<e.length;c++){const u=i.length;if(u){const d=i[u-1].end;e[c].start-d<s?e[c].end>d&&(i[u-1].end=e[c].end):i.push(e[c])}else i.push(e[c])}else i=e;let r=0,a,o=t,l=t;for(let c=0;c<i.length;c++){const u=i[c].start,d=i[c].end;if(t+s>=u&&t<d)o=u,l=d,r=l-t;else if(t+s<u){a=u;break}}return{len:r,start:o||0,end:l||0,nextStart:a}}static getBuffered(e){try{return e.buffered}catch(t){return H.log("failed to get media.buffered",t),A8}}}class Ff{constructor(e,t,s,i=0,r=-1,a=!1){this.level=void 0,this.sn=void 0,this.part=void 0,this.id=void 0,this.size=void 0,this.partial=void 0,this.transmuxing=Bo(),this.buffering={audio:Bo(),video:Bo(),audiovideo:Bo()},this.level=e,this.sn=t,this.id=s,this.size=i,this.part=r,this.partial=a}}function Bo(){return{start:0,executeStart:0,executeEnd:0,end:0}}function ZT(n,e){let t=null;for(let s=0,i=n.length;s<i;s++){const r=n[s];if(r&&r.cc===e){t=r;break}}return t}function L8(n,e,t){return!!(e.details&&(t.endCC>t.startCC||n&&n.cc<t.startCC))}function w8(n,e,t=0){const s=n.fragments,i=e.fragments;if(!i.length||!s.length){H.log("No fragments to align");return}const r=ZT(s,i[0].cc);if(!r||r&&!r.startPTS){H.log("No frag in previous level to align on");return}return r}function N0(n,e){if(n){const t=n.start+e;n.start=n.startPTS=t,n.endPTS=t+n.duration}}function Nf(n,e){const t=e.fragments;for(let s=0,i=t.length;s<i;s++)N0(t[s],n);e.fragmentHint&&N0(e.fragmentHint,n),e.alignedSliding=!0}function R8(n,e,t){e&&(I8(n,t,e),!t.alignedSliding&&e.details&&C8(t,e.details),!t.alignedSliding&&e.details&&!t.skippedSegments&&XT(e.details,t))}function I8(n,e,t){if(L8(n,t,e)){const s=w8(t.details,e);s&&Ce(s.start)&&(H.log(`Adjusting PTS using last level due to CC increase within current level ${e.url}`),Nf(s.start,e))}}function C8(n,e){if(!e.fragments.length||!n.hasProgramDateTime||!e.hasProgramDateTime)return;const t=e.fragments[0].programDateTime,s=n.fragments[0].programDateTime,i=(s-t)/1e3+e.fragments[0].start;i&&Ce(i)&&(H.log(`Adjusting PTS using programDateTime delta ${s-t}ms, sliding:${i.toFixed(3)} ${n.url} `),Nf(i,n))}function eb(n,e){if(!n.hasProgramDateTime||!e.hasProgramDateTime)return;const t=n.fragments,s=e.fragments;if(!t.length||!s.length)return;const i=Math.round(s.length/2)-1,r=s[i],a=ZT(t,r.cc)||t[Math.round(t.length/2)-1],o=r.programDateTime,l=a.programDateTime;if(o===null||l===null)return;const c=(l-o)/1e3-(a.start-r.start);Nf(c,n)}class D8{constructor(e,t){this.subtle=void 0,this.aesIV=void 0,this.subtle=e,this.aesIV=t}decrypt(e,t){return this.subtle.decrypt({name:"AES-CBC",iv:this.aesIV},t,e)}}class k8{constructor(e,t){this.subtle=void 0,this.key=void 0,this.subtle=e,this.key=t}expandKey(){return this.subtle.importKey("raw",this.key,{name:"AES-CBC"},!1,["encrypt","decrypt"])}}function P8(n){const e=n.byteLength,t=e&&new DataView(n.buffer).getUint8(e-1);return t?Ki(n,0,e-t):n}class O8{constructor(){this.rcon=[0,1,2,4,8,16,32,64,128,27,54],this.subMix=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],this.invSubMix=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],this.sBox=new Uint32Array(256),this.invSBox=new Uint32Array(256),this.key=new Uint32Array(0),this.ksRows=0,this.keySize=0,this.keySchedule=void 0,this.invKeySchedule=void 0,this.initTable()}uint8ArrayToUint32Array_(e){const t=new DataView(e),s=new Uint32Array(4);for(let i=0;i<4;i++)s[i]=t.getUint32(i*4);return s}initTable(){const e=this.sBox,t=this.invSBox,s=this.subMix,i=s[0],r=s[1],a=s[2],o=s[3],l=this.invSubMix,c=l[0],u=l[1],d=l[2],h=l[3],f=new Uint32Array(256);let p=0,m=0,y=0;for(y=0;y<256;y++)y<128?f[y]=y<<1:f[y]=y<<1^283;for(y=0;y<256;y++){let g=m^m<<1^m<<2^m<<3^m<<4;g=g>>>8^g&255^99,e[p]=g,t[g]=p;const v=f[p],E=f[v],T=f[E];let b=f[g]*257^g*16843008;i[p]=b<<24|b>>>8,r[p]=b<<16|b>>>16,a[p]=b<<8|b>>>24,o[p]=b,b=T*16843009^E*65537^v*257^p*16843008,c[g]=b<<24|b>>>8,u[g]=b<<16|b>>>16,d[g]=b<<8|b>>>24,h[g]=b,p?(p=v^f[f[f[T^v]]],m^=f[f[m]]):p=m=1}}expandKey(e){const t=this.uint8ArrayToUint32Array_(e);let s=!0,i=0;for(;i<t.length&&s;)s=t[i]===this.key[i],i++;if(s)return;this.key=t;const r=this.keySize=t.length;if(r!==4&&r!==6&&r!==8)throw new Error("Invalid aes key size="+r);const a=this.ksRows=(r+6+1)*4;let o,l;const c=this.keySchedule=new Uint32Array(a),u=this.invKeySchedule=new Uint32Array(a),d=this.sBox,h=this.rcon,f=this.invSubMix,p=f[0],m=f[1],y=f[2],g=f[3];let v,E;for(o=0;o<a;o++){if(o<r){v=c[o]=t[o];continue}E=v,o%r===0?(E=E<<8|E>>>24,E=d[E>>>24]<<24|d[E>>>16&255]<<16|d[E>>>8&255]<<8|d[E&255],E^=h[o/r|0]<<24):r>6&&o%r===4&&(E=d[E>>>24]<<24|d[E>>>16&255]<<16|d[E>>>8&255]<<8|d[E&255]),c[o]=v=(c[o-r]^E)>>>0}for(l=0;l<a;l++)o=a-l,l&3?E=c[o]:E=c[o-4],l<4||o<=4?u[l]=E:u[l]=p[d[E>>>24]]^m[d[E>>>16&255]]^y[d[E>>>8&255]]^g[d[E&255]],u[l]=u[l]>>>0}networkToHostOrderSwap(e){return e<<24|(e&65280)<<8|(e&16711680)>>8|e>>>24}decrypt(e,t,s){const i=this.keySize+6,r=this.invKeySchedule,a=this.invSBox,o=this.invSubMix,l=o[0],c=o[1],u=o[2],d=o[3],h=this.uint8ArrayToUint32Array_(s);let f=h[0],p=h[1],m=h[2],y=h[3];const g=new Int32Array(e),v=new Int32Array(g.length);let E,T,b,L,x,w,k,R,P,D,O,N,$,K;const ee=this.networkToHostOrderSwap;for(;t<g.length;){for(P=ee(g[t]),D=ee(g[t+1]),O=ee(g[t+2]),N=ee(g[t+3]),x=P^r[0],w=N^r[1],k=O^r[2],R=D^r[3],$=4,K=1;K<i;K++)E=l[x>>>24]^c[w>>16&255]^u[k>>8&255]^d[R&255]^r[$],T=l[w>>>24]^c[k>>16&255]^u[R>>8&255]^d[x&255]^r[$+1],b=l[k>>>24]^c[R>>16&255]^u[x>>8&255]^d[w&255]^r[$+2],L=l[R>>>24]^c[x>>16&255]^u[w>>8&255]^d[k&255]^r[$+3],x=E,w=T,k=b,R=L,$=$+4;E=a[x>>>24]<<24^a[w>>16&255]<<16^a[k>>8&255]<<8^a[R&255]^r[$],T=a[w>>>24]<<24^a[k>>16&255]<<16^a[R>>8&255]<<8^a[x&255]^r[$+1],b=a[k>>>24]<<24^a[R>>16&255]<<16^a[x>>8&255]<<8^a[w&255]^r[$+2],L=a[R>>>24]<<24^a[x>>16&255]<<16^a[w>>8&255]<<8^a[k&255]^r[$+3],v[t]=ee(E^f),v[t+1]=ee(L^p),v[t+2]=ee(b^m),v[t+3]=ee(T^y),f=P,p=D,m=O,y=N,t=t+4}return v.buffer}}const M8=16;class Bf{constructor(e,{removePKCS7Padding:t=!0}={}){if(this.logEnabled=!0,this.removePKCS7Padding=void 0,this.subtle=null,this.softwareDecrypter=null,this.key=null,this.fastAesKey=null,this.remainderData=null,this.currentIV=null,this.currentResult=null,this.useSoftware=void 0,this.useSoftware=e.enableSoftwareAES,this.removePKCS7Padding=t,t)try{const s=self.crypto;s&&(this.subtle=s.subtle||s.webkitSubtle)}catch{}this.subtle===null&&(this.useSoftware=!0)}destroy(){this.subtle=null,this.softwareDecrypter=null,this.key=null,this.fastAesKey=null,this.remainderData=null,this.currentIV=null,this.currentResult=null}isSync(){return this.useSoftware}flush(){const{currentResult:e,remainderData:t}=this;if(!e||t)return this.reset(),null;const s=new Uint8Array(e);return this.reset(),this.removePKCS7Padding?P8(s):s}reset(){this.currentResult=null,this.currentIV=null,this.remainderData=null,this.softwareDecrypter&&(this.softwareDecrypter=null)}decrypt(e,t,s){return this.useSoftware?new Promise((i,r)=>{this.softwareDecrypt(new Uint8Array(e),t,s);const a=this.flush();a?i(a.buffer):r(new Error("[softwareDecrypt] Failed to decrypt data"))}):this.webCryptoDecrypt(new Uint8Array(e),t,s)}softwareDecrypt(e,t,s){const{currentIV:i,currentResult:r,remainderData:a}=this;this.logOnce("JS AES decrypt"),a&&(e=Xi(a,e),this.remainderData=null);const o=this.getValidChunk(e);if(!o.length)return null;i&&(s=i);let l=this.softwareDecrypter;l||(l=this.softwareDecrypter=new O8),l.expandKey(t);const c=r;return this.currentResult=l.decrypt(o.buffer,0,s),this.currentIV=Ki(o,-16).buffer,c||null}webCryptoDecrypt(e,t,s){const i=this.subtle;return(this.key!==t||!this.fastAesKey)&&(this.key=t,this.fastAesKey=new k8(i,t)),this.fastAesKey.expandKey().then(r=>i?(this.logOnce("WebCrypto AES decrypt"),new D8(i,new Uint8Array(s)).decrypt(e.buffer,r)):Promise.reject(new Error("web crypto not initialized"))).catch(r=>(H.warn(`[decrypter]: WebCrypto Error, disable WebCrypto API, ${r.name}: ${r.message}`),this.onWebCryptoError(e,t,s)))}onWebCryptoError(e,t,s){this.useSoftware=!0,this.logEnabled=!0,this.softwareDecrypt(e,t,s);const i=this.flush();if(i)return i.buffer;throw new Error("WebCrypto and softwareDecrypt: failed to decrypt data")}getValidChunk(e){let t=e;const s=e.length-e.length%M8;return s!==e.length&&(t=Ki(e,0,s),this.remainderData=Ki(e,s)),t}logOnce(e){this.logEnabled&&(H.log(`[decrypter]: ${e}`),this.logEnabled=!1)}}const F8={toString:function(n){let e="";const t=n.length;for(let s=0;s<t;s++)e+=`[${n.start(s).toFixed(3)}-${n.end(s).toFixed(3)}]`;return e}},ae={STOPPED:"STOPPED",IDLE:"IDLE",KEY_LOADING:"KEY_LOADING",FRAG_LOADING:"FRAG_LOADING",FRAG_LOADING_WAITING_RETRY:"FRAG_LOADING_WAITING_RETRY",WAITING_TRACK:"WAITING_TRACK",PARSING:"PARSING",PARSED:"PARSED",ENDED:"ENDED",ERROR:"ERROR",WAITING_INIT_PTS:"WAITING_INIT_PTS",WAITING_LEVEL:"WAITING_LEVEL"};class Uf extends _8{constructor(e,t,s,i,r){super(),this.hls=void 0,this.fragPrevious=null,this.fragCurrent=null,this.fragmentTracker=void 0,this.transmuxer=null,this._state=ae.STOPPED,this.playlistType=void 0,this.media=null,this.mediaBuffer=null,this.config=void 0,this.bitrateTest=!1,this.lastCurrentTime=0,this.nextLoadPosition=0,this.startPosition=0,this.startTimeOffset=null,this.loadedmetadata=!1,this.retryDate=0,this.levels=null,this.fragmentLoader=void 0,this.keyLoader=void 0,this.levelLastLoaded=null,this.startFragRequested=!1,this.decrypter=void 0,this.initPTS=[],this.onvseeking=null,this.onvended=null,this.logPrefix="",this.log=void 0,this.warn=void 0,this.playlistType=r,this.logPrefix=i,this.log=H.log.bind(H,`${i}:`),this.warn=H.warn.bind(H,`${i}:`),this.hls=e,this.fragmentLoader=new x8(e.config),this.keyLoader=s,this.fragmentTracker=t,this.config=e.config,this.decrypter=new Bf(e.config),e.on(C.MANIFEST_LOADED,this.onManifestLoaded,this)}doTick(){this.onTickEnd()}onTickEnd(){}startLoad(e){}stopLoad(){this.fragmentLoader.abort(),this.keyLoader.abort(this.playlistType);const e=this.fragCurrent;e!=null&&e.loader&&(e.abortRequests(),this.fragmentTracker.removeFragment(e)),this.resetTransmuxer(),this.fragCurrent=null,this.fragPrevious=null,this.clearInterval(),this.clearNextTick(),this.state=ae.STOPPED}_streamEnded(e,t){if(t.live||e.nextStart||!e.end||!this.media)return!1;const s=t.partList;if(s!=null&&s.length){const r=s[s.length-1];return ht.isBuffered(this.media,r.start+r.duration/2)}const i=t.fragments[t.fragments.length-1].type;return this.fragmentTracker.isEndListAppended(i)}getLevelDetails(){if(this.levels&&this.levelLastLoaded!==null){var e;return(e=this.levels[this.levelLastLoaded])==null?void 0:e.details}}onMediaAttached(e,t){const s=this.media=this.mediaBuffer=t.media;this.onvseeking=this.onMediaSeeking.bind(this),this.onvended=this.onMediaEnded.bind(this),s.addEventListener("seeking",this.onvseeking),s.addEventListener("ended",this.onvended);const i=this.config;this.levels&&i.autoStartLoad&&this.state===ae.STOPPED&&this.startLoad(i.startPosition)}onMediaDetaching(){const e=this.media;e!=null&&e.ended&&(this.log("MSE detaching and video ended, reset startPosition"),this.startPosition=this.lastCurrentTime=0),e&&this.onvseeking&&this.onvended&&(e.removeEventListener("seeking",this.onvseeking),e.removeEventListener("ended",this.onvended),this.onvseeking=this.onvended=null),this.keyLoader&&this.keyLoader.detach(),this.media=this.mediaBuffer=null,this.loadedmetadata=!1,this.fragmentTracker.removeAllFragments(),this.stopLoad()}onMediaSeeking(){const{config:e,fragCurrent:t,media:s,mediaBuffer:i,state:r}=this,a=s?s.currentTime:0,o=ht.bufferInfo(i||s,a,e.maxBufferHole);if(this.log(`media seeking to ${Ce(a)?a.toFixed(3):a}, state: ${r}`),this.state===ae.ENDED)this.resetLoadingState();else if(t){const l=e.maxFragLookUpTolerance,c=t.start-l,u=t.start+t.duration+l;if(!o.len||u<o.start||c>o.end){const d=a>u;(a<c||d)&&(d&&t.loader&&(this.log("seeking outside of buffer while fragment load in progress, cancel fragment load"),t.abortRequests(),this.resetLoadingState()),this.fragPrevious=null)}}s&&(this.fragmentTracker.removeFragmentsInRange(a,1/0,this.playlistType,!0),this.lastCurrentTime=a),!this.loadedmetadata&&!o.len&&(this.nextLoadPosition=this.startPosition=a),this.tickImmediate()}onMediaEnded(){this.startPosition=this.lastCurrentTime=0}onManifestLoaded(e,t){this.startTimeOffset=t.startTimeOffset,this.initPTS=[]}onHandlerDestroying(){this.stopLoad(),super.onHandlerDestroying()}onHandlerDestroyed(){this.state=ae.STOPPED,this.fragmentLoader&&this.fragmentLoader.destroy(),this.keyLoader&&this.keyLoader.destroy(),this.decrypter&&this.decrypter.destroy(),this.hls=this.log=this.warn=this.decrypter=this.keyLoader=this.fragmentLoader=this.fragmentTracker=null,super.onHandlerDestroyed()}loadFragment(e,t,s){this._loadFragForPlayback(e,t,s)}_loadFragForPlayback(e,t,s){const i=r=>{if(this.fragContextChanged(e)){this.warn(`Fragment ${e.sn}${r.part?" p: "+r.part.index:""} of level ${e.level} was dropped during download.`),this.fragmentTracker.removeFragment(e);return}e.stats.chunkCount++,this._handleFragmentLoadProgress(r)};this._doFragLoad(e,t,s,i).then(r=>{if(!r)return;const a=this.state;if(this.fragContextChanged(e)){(a===ae.FRAG_LOADING||!this.fragCurrent&&a===ae.PARSING)&&(this.fragmentTracker.removeFragment(e),this.state=ae.IDLE);return}"payload"in r&&(this.log(`Loaded fragment ${e.sn} of level ${e.level}`),this.hls.trigger(C.FRAG_LOADED,r)),this._handleFragmentLoadComplete(r)}).catch(r=>{this.state===ae.STOPPED||this.state===ae.ERROR||(this.warn(r),this.resetFragmentLoading(e))})}clearTrackerIfNeeded(e){var t;const{fragmentTracker:s}=this;if(s.getState(e)===Ut.APPENDING){const i=e.type,r=this.getFwdBufferInfo(this.mediaBuffer,i),a=Math.max(e.duration,r?r.len:this.config.maxBufferLength);this.reduceMaxBufferLength(a)&&s.removeFragment(e)}else((t=this.mediaBuffer)==null?void 0:t.buffered.length)===0?s.removeAllFragments():s.hasParts(e.type)&&(s.detectPartialFragments({frag:e,part:null,stats:e.stats,id:e.type}),s.getState(e)===Ut.PARTIAL&&s.removeFragment(e))}checkLiveUpdate(e){if(e.updated&&!e.live){const t=e.fragments[e.fragments.length-1];this.fragmentTracker.detectPartialFragments({frag:t,part:null,stats:t.stats,id:t.type})}e.fragments[0]||(e.deltaUpdateFailed=!0)}flushMainBuffer(e,t,s=null){if(!(e-t))return;const i={startOffset:e,endOffset:t,type:s};this.hls.trigger(C.BUFFER_FLUSHING,i)}_loadInitSegment(e,t){this._doFragLoad(e,t).then(s=>{if(!s||this.fragContextChanged(e)||!this.levels)throw new Error("init load aborted");return s}).then(s=>{const{hls:i}=this,{payload:r}=s,a=e.decryptdata;if(r&&r.byteLength>0&&a&&a.key&&a.iv&&a.method==="AES-128"){const o=self.performance.now();return this.decrypter.decrypt(new Uint8Array(r),a.key.buffer,a.iv.buffer).catch(l=>{throw i.trigger(C.ERROR,{type:Me.MEDIA_ERROR,details:ne.FRAG_DECRYPT_ERROR,fatal:!1,error:l,reason:l.message,frag:e}),l}).then(l=>{const c=self.performance.now();return i.trigger(C.FRAG_DECRYPTED,{frag:e,payload:l,stats:{tstart:o,tdecrypt:c}}),s.payload=l,s})}return s}).then(s=>{const{fragCurrent:i,hls:r,levels:a}=this;if(!a)throw new Error("init load aborted, missing levels");const o=e.stats;this.state=ae.IDLE,t.fragmentError=0,e.data=new Uint8Array(s.payload),o.parsing.start=o.buffering.start=self.performance.now(),o.parsing.end=o.buffering.end=self.performance.now(),s.frag===i&&r.trigger(C.FRAG_BUFFERED,{stats:o,frag:i,part:null,id:e.type}),this.tick()}).catch(s=>{this.state===ae.STOPPED||this.state===ae.ERROR||(this.warn(s),this.resetFragmentLoading(e))})}fragContextChanged(e){const{fragCurrent:t}=this;return!e||!t||e.level!==t.level||e.sn!==t.sn||e.urlId!==t.urlId}fragBufferedComplete(e,t){var s,i,r,a;const o=this.mediaBuffer?this.mediaBuffer:this.media;this.log(`Buffered ${e.type} sn: ${e.sn}${t?" part: "+t.index:""} of ${this.playlistType===Ne.MAIN?"level":"track"} ${e.level} (frag:[${((s=e.startPTS)!=null?s:NaN).toFixed(3)}-${((i=e.endPTS)!=null?i:NaN).toFixed(3)}] > buffer:${o?F8.toString(ht.getBuffered(o)):"(detached)"})`),this.state=ae.IDLE,o&&(!this.loadedmetadata&&e.type==Ne.MAIN&&o.buffered.length&&((r=this.fragCurrent)==null?void 0:r.sn)===((a=this.fragPrevious)==null?void 0:a.sn)&&(this.loadedmetadata=!0,this.seekToStartPos()),this.tick())}seekToStartPos(){}_handleFragmentLoadComplete(e){const{transmuxer:t}=this;if(!t)return;const{frag:s,part:i,partsLoaded:r}=e,a=!r||r.length===0||r.some(l=>!l),o=new Ff(s.level,s.sn,s.stats.chunkCount+1,0,i?i.index:-1,!a);t.flush(o)}_handleFragmentLoadProgress(e){}_doFragLoad(e,t,s=null,i){var r;const a=t==null?void 0:t.details;if(!this.levels||!a)throw new Error(`frag load aborted, missing level${a?"":" detail"}s`);let o=null;if(e.encrypted&&!((r=e.decryptdata)!=null&&r.key)?(this.log(`Loading key for ${e.sn} of [${a.startSN}-${a.endSN}], ${this.logPrefix==="[stream-controller]"?"level":"track"} ${e.level}`),this.state=ae.KEY_LOADING,this.fragCurrent=e,o=this.keyLoader.load(e).then(u=>{if(!this.fragContextChanged(u.frag))return this.hls.trigger(C.KEY_LOADED,u),this.state===ae.KEY_LOADING&&(this.state=ae.IDLE),u}),this.hls.trigger(C.KEY_LOADING,{frag:e}),this.fragCurrent===null&&(o=Promise.reject(new Error("frag load aborted, context changed in KEY_LOADING")))):!e.encrypted&&a.encryptedFragments.length&&this.keyLoader.loadClear(e,a.encryptedFragments),s=Math.max(e.start,s||0),this.config.lowLatencyMode&&e.sn!=="initSegment"){const u=a.partList;if(u&&i){s>e.end&&a.fragmentHint&&(e=a.fragmentHint);const d=this.getNextPart(u,e,s);if(d>-1){const h=u[d];this.log(`Loading part sn: ${e.sn} p: ${h.index} cc: ${e.cc} of playlist [${a.startSN}-${a.endSN}] parts [0-${d}-${u.length-1}] ${this.logPrefix==="[stream-controller]"?"level":"track"}: ${e.level}, target: ${parseFloat(s.toFixed(3))}`),this.nextLoadPosition=h.start+h.duration,this.state=ae.FRAG_LOADING;let f;return o?f=o.then(p=>!p||this.fragContextChanged(p.frag)?null:this.doFragPartsLoad(e,h,t,i)).catch(p=>this.handleFragLoadError(p)):f=this.doFragPartsLoad(e,h,t,i).catch(p=>this.handleFragLoadError(p)),this.hls.trigger(C.FRAG_LOADING,{frag:e,part:h,targetBufferTime:s}),this.fragCurrent===null?Promise.reject(new Error("frag load aborted, context changed in FRAG_LOADING parts")):f}else if(!e.url||this.loadedEndOfParts(u,s))return Promise.resolve(null)}}this.log(`Loading fragment ${e.sn} cc: ${e.cc} ${a?"of ["+a.startSN+"-"+a.endSN+"] ":""}${this.logPrefix==="[stream-controller]"?"level":"track"}: ${e.level}, target: ${parseFloat(s.toFixed(3))}`),Ce(e.sn)&&!this.bitrateTest&&(this.nextLoadPosition=e.start+e.duration),this.state=ae.FRAG_LOADING;const l=this.config.progressive;let c;return l&&o?c=o.then(u=>!u||this.fragContextChanged(u==null?void 0:u.frag)?null:this.fragmentLoader.load(e,i)).catch(u=>this.handleFragLoadError(u)):c=Promise.all([this.fragmentLoader.load(e,l?i:void 0),o]).then(([u])=>(!l&&u&&i&&i(u),u)).catch(u=>this.handleFragLoadError(u)),this.hls.trigger(C.FRAG_LOADING,{frag:e,targetBufferTime:s}),this.fragCurrent===null?Promise.reject(new Error("frag load aborted, context changed in FRAG_LOADING")):c}doFragPartsLoad(e,t,s,i){return new Promise((r,a)=>{var o;const l=[],c=(o=s.details)==null?void 0:o.partList,u=d=>{this.fragmentLoader.loadPart(e,d,i).then(h=>{l[d.index]=h;const f=h.part;this.hls.trigger(C.FRAG_LOADED,h);const p=C0(s,e.sn,d.index+1)||QT(c,e.sn,d.index+1);if(p)u(p);else return r({frag:e,part:f,partsLoaded:l})}).catch(a)};u(t)})}handleFragLoadError(e){if("data"in e){const t=e.data;e.data&&t.details===ne.INTERNAL_ABORTED?this.handleFragLoadAborted(t.frag,t.part):this.hls.trigger(C.ERROR,t)}else this.hls.trigger(C.ERROR,{type:Me.OTHER_ERROR,details:ne.INTERNAL_EXCEPTION,err:e,error:e,fatal:!0});return null}_handleTransmuxerFlush(e){const t=this.getCurrentContext(e);if(!t||this.state!==ae.PARSING){!this.fragCurrent&&this.state!==ae.STOPPED&&this.state!==ae.ERROR&&(this.state=ae.IDLE);return}const{frag:s,part:i,level:r}=t,a=self.performance.now();s.stats.parsing.end=a,i&&(i.stats.parsing.end=a),this.updateLevelTiming(s,i,r,e.partial)}getCurrentContext(e){const{levels:t,fragCurrent:s}=this,{level:i,sn:r,part:a}=e;if(!(t!=null&&t[i]))return this.warn(`Levels object was unset while buffering fragment ${r} of level ${i}. The current chunk will not be buffered.`),null;const o=t[i],l=a>-1?C0(o,r,a):null,c=l?l.fragment:h8(o,r,s);return c?(s&&s!==c&&(c.stats=s.stats),{frag:c,part:l,level:o}):null}bufferFragmentData(e,t,s,i,r){var a;if(!e||this.state!==ae.PARSING)return;const{data1:o,data2:l}=e;let c=o;if(o&&l&&(c=Xi(o,l)),!((a=c)!=null&&a.length))return;const u={type:e.type,frag:t,part:s,chunkMeta:i,parent:t.type,data:c};if(this.hls.trigger(C.BUFFER_APPENDING,u),e.dropped&&e.independent&&!s){if(r)return;this.flushBufferGap(t)}}flushBufferGap(e){const t=this.media;if(!t)return;if(!ht.isBuffered(t,t.currentTime)){this.flushMainBuffer(0,e.start);return}const s=t.currentTime,i=ht.bufferInfo(t,s,0),r=e.duration,a=Math.min(this.config.maxFragLookUpTolerance*2,r*.25),o=Math.max(Math.min(e.start-a,i.end-a),s+a);e.start-o>a&&this.flushMainBuffer(o,e.start)}getFwdBufferInfo(e,t){const s=this.getLoadPosition();return Ce(s)?this.getFwdBufferInfoAtPos(e,s,t):null}getFwdBufferInfoAtPos(e,t,s){const{config:{maxBufferHole:i}}=this,r=ht.bufferInfo(e,t,i);if(r.len===0&&r.nextStart!==void 0){const a=this.fragmentTracker.getBufferedFrag(t,s);if(a&&r.nextStart<a.end)return ht.bufferInfo(e,t,Math.max(r.nextStart,i))}return r}getMaxBufferLength(e){const{config:t}=this;let s;return e?s=Math.max(8*t.maxBufferSize/e,t.maxBufferLength):s=t.maxBufferLength,Math.min(s,t.maxMaxBufferLength)}reduceMaxBufferLength(e){const t=this.config,s=e||t.maxBufferLength;return t.maxMaxBufferLength>=s?(t.maxMaxBufferLength/=2,this.warn(`Reduce max buffer length to ${t.maxMaxBufferLength}s`),!0):!1}getAppendedFrag(e,t=Ne.MAIN){const s=this.fragmentTracker.getAppendedFrag(e,Ne.MAIN);return s&&"fragment"in s?s.fragment:s}getNextFragment(e,t){const s=t.fragments,i=s.length;if(!i)return null;const{config:r}=this,a=s[0].start;let o;if(t.live){const l=r.initialLiveManifestSize;if(i<l)return this.warn(`Not enough fragments to start playback (have: ${i}, need: ${l})`),null;!t.PTSKnown&&!this.startFragRequested&&this.startPosition===-1&&(o=this.getInitialLiveFragment(t,s),this.startPosition=o?this.hls.liveSyncPosition||o.start:e)}else e<=a&&(o=s[0]);if(!o){const l=r.lowLatencyMode?t.partEnd:t.fragmentEnd;o=this.getFragmentAtPosition(e,l,t)}return this.mapToInitFragWhenRequired(o)}isLoopLoading(e,t){const s=this.fragmentTracker.getState(e);return(s===Ut.OK||s===Ut.PARTIAL&&!!e.gap)&&this.nextLoadPosition>t}getNextFragmentLoopLoading(e,t,s,i,r){const a=e.gap,o=this.getNextFragment(this.nextLoadPosition,t);if(o===null)return o;if(e=o,a&&e&&!e.gap&&s.nextStart){const l=this.getFwdBufferInfoAtPos(this.mediaBuffer?this.mediaBuffer:this.media,s.nextStart,i);if(l!==null&&s.len+l.len>=r)return this.log(`buffer full after gaps in "${i}" playlist starting at sn: ${e.sn}`),null}return e}mapToInitFragWhenRequired(e){return e!=null&&e.initSegment&&!(e!=null&&e.initSegment.data)&&!this.bitrateTest?e.initSegment:e}getNextPart(e,t,s){let i=-1,r=!1,a=!0;for(let o=0,l=e.length;o<l;o++){const c=e[o];if(a=a&&!c.independent,i>-1&&s<c.start)break;const u=c.loaded;u?i=-1:(r||c.independent||a)&&c.fragment===t&&(i=o),r=u}return i}loadedEndOfParts(e,t){const s=e[e.length-1];return s&&t>s.start&&s.loaded}getInitialLiveFragment(e,t){const s=this.fragPrevious;let i=null;if(s){if(e.hasProgramDateTime&&(this.log(`Live playlist, switching playlist, load frag with same PDT: ${s.programDateTime}`),i=p8(t,s.endProgramDateTime,this.config.maxFragLookUpTolerance)),!i){const r=s.sn+1;if(r>=e.startSN&&r<=e.endSN){const a=t[r-e.startSN];s.cc===a.cc&&(i=a,this.log(`Live playlist, switching playlist, load frag with next SN: ${i.sn}`))}i||(i=g8(t,s.cc),i&&this.log(`Live playlist, switching playlist, load frag with same CC: ${i.sn}`))}}else{const r=this.hls.liveSyncPosition;r!==null&&(i=this.getFragmentAtPosition(r,this.bitrateTest?e.fragmentEnd:e.edge,e))}return i}getFragmentAtPosition(e,t,s){const{config:i}=this;let{fragPrevious:r}=this,{fragments:a,endSN:o}=s;const{fragmentHint:l}=s,c=i.maxFragLookUpTolerance,u=s.partList,d=!!(i.lowLatencyMode&&u!=null&&u.length&&l);d&&l&&!this.bitrateTest&&(a=a.concat(l),o=l.sn);let h;if(e<t){const f=e>t-c?0:c;h=Ja(r,a,e,f)}else h=a[a.length-1];if(h){const f=h.sn-s.startSN,p=this.fragmentTracker.getState(h);if((p===Ut.OK||p===Ut.PARTIAL&&h.gap)&&(r=h),r&&h.sn===r.sn&&(!d||u[0].fragment.sn>h.sn)&&r&&h.level===r.level){const m=a[f+1];h.sn<o&&this.fragmentTracker.getState(m)!==Ut.OK?h=m:h=null}}return h}synchronizeToLiveEdge(e){const{config:t,media:s}=this;if(!s)return;const i=this.hls.liveSyncPosition,r=s.currentTime,a=e.fragments[0].start,o=e.edge,l=r>=a-t.maxFragLookUpTolerance&&r<=o;if(i!==null&&s.duration>i&&(r<i||!l)){const c=t.liveMaxLatencyDuration!==void 0?t.liveMaxLatencyDuration:t.liveMaxLatencyDurationCount*e.targetduration;(!l&&s.readyState<4||r<o-c)&&(this.loadedmetadata||(this.nextLoadPosition=i),s.readyState&&(this.warn(`Playback: ${r.toFixed(3)} is located too far from the end of live sliding playlist: ${o}, reset currentTime to : ${i.toFixed(3)}`),s.currentTime=i))}}alignPlaylists(e,t){const{levels:s,levelLastLoaded:i,fragPrevious:r}=this,a=i!==null?s[i]:null,o=e.fragments.length;if(!o)return this.warn("No fragments in live playlist"),0;const l=e.fragments[0].start,c=!t,u=e.alignedSliding&&Ce(l);if(c||!u&&!l){R8(r,a,e);const d=e.fragments[0].start;return this.log(`Live playlist sliding: ${d.toFixed(2)} start-sn: ${t?t.startSN:"na"}->${e.startSN} prev-sn: ${r?r.sn:"na"} fragments: ${o}`),d}return l}waitForCdnTuneIn(e){return e.live&&e.canBlockReload&&e.partTarget&&e.tuneInGoal>Math.max(e.partHoldBack,e.partTarget*3)}setStartPosition(e,t){let s=this.startPosition;if(s<t&&(s=-1),s===-1||this.lastCurrentTime===-1){const i=this.startTimeOffset!==null,r=i?this.startTimeOffset:e.startTimeOffset;r!==null&&Ce(r)?(s=t+r,r<0&&(s+=e.totalduration),s=Math.min(Math.max(t,s),t+e.totalduration),this.log(`Start time offset ${r} found in ${i?"multivariant":"media"} playlist, adjust startPosition to ${s}`),this.startPosition=s):e.live?s=this.hls.liveSyncPosition||t:this.startPosition=s=0,this.lastCurrentTime=s}this.nextLoadPosition=s}getLoadPosition(){const{media:e}=this;let t=0;return this.loadedmetadata&&e?t=e.currentTime:this.nextLoadPosition&&(t=this.nextLoadPosition),t}handleFragLoadAborted(e,t){this.transmuxer&&e.sn!=="initSegment"&&e.stats.aborted&&(this.warn(`Fragment ${e.sn}${t?" part "+t.index:""} of level ${e.level} was aborted`),this.resetFragmentLoading(e))}resetFragmentLoading(e){(!this.fragCurrent||!this.fragContextChanged(e)&&this.state!==ae.FRAG_LOADING_WAITING_RETRY)&&(this.state=ae.IDLE)}onFragmentOrKeyLoadError(e,t){if(t.chunkMeta&&!t.frag){const d=this.getCurrentContext(t.chunkMeta);d&&(t.frag=d.frag)}const s=t.frag;if(!s||s.type!==e||!this.levels)return;if(this.fragContextChanged(s)){var i;this.warn(`Frag load error must match current frag to retry ${s.url} > ${(i=this.fragCurrent)==null?void 0:i.url}`);return}const r=t.details===ne.FRAG_GAP;r&&this.fragmentTracker.fragBuffered(s,!0);const a=t.errorAction,{action:o,retryCount:l=0,retryConfig:c}=a||{};if(a&&o===Jt.RetryRequest&&c){var u;this.resetStartWhenNotLoaded((u=this.levelLastLoaded)!=null?u:s.level);const d=Of(c,l);this.warn(`Fragment ${s.sn} of ${e} ${s.level} errored with ${t.details}, retrying loading ${l+1}/${c.maxNumRetry} in ${d}ms`),a.resolved=!0,this.retryDate=self.performance.now()+d,this.state=ae.FRAG_LOADING_WAITING_RETRY}else c&&a?(this.resetFragmentErrors(e),l<c.maxNumRetry?r||(a.resolved=!0):H.warn(`${t.details} reached or exceeded max retry (${l})`)):(a==null?void 0:a.action)===Jt.SendAlternateToPenaltyBox?this.state=ae.WAITING_LEVEL:this.state=ae.ERROR;this.tickImmediate()}reduceLengthAndFlushBuffer(e){if(this.state===ae.PARSING||this.state===ae.PARSED){const t=e.parent,s=this.getFwdBufferInfo(this.mediaBuffer,t),i=s&&s.len>.5;i&&this.reduceMaxBufferLength(s.len);const r=!i;return r&&this.warn(`Buffer full error while media.currentTime is not buffered, flush ${t} buffer`),e.frag&&(this.fragmentTracker.removeFragment(e.frag),this.nextLoadPosition=e.frag.start),this.resetLoadingState(),r}return!1}resetFragmentErrors(e){e===Ne.AUDIO&&(this.fragCurrent=null),this.loadedmetadata||(this.startFragRequested=!1),this.state!==ae.STOPPED&&(this.state=ae.IDLE)}afterBufferFlushed(e,t,s){if(!e)return;const i=ht.getBuffered(e);this.fragmentTracker.detectEvictedFragments(t,i,s),this.state===ae.ENDED&&this.resetLoadingState()}resetLoadingState(){this.log("Reset loading state"),this.fragCurrent=null,this.fragPrevious=null,this.state=ae.IDLE}resetStartWhenNotLoaded(e){if(!this.loadedmetadata){this.startFragRequested=!1;const t=this.levels?this.levels[e].details:null;t!=null&&t.live?(this.startPosition=-1,this.setStartPosition(t,0),this.resetLoadingState()):this.nextLoadPosition=this.startPosition}}resetWhenMissingContext(e){var t;this.warn(`The loading context changed while buffering fragment ${e.sn} of level ${e.level}. This chunk will not be buffered.`),this.removeUnbufferedFrags(),this.resetStartWhenNotLoaded((t=this.levelLastLoaded)!=null?t:e.level),this.resetLoadingState()}removeUnbufferedFrags(e=0){this.fragmentTracker.removeFragmentsInRange(e,1/0,this.playlistType,!1,!0)}updateLevelTiming(e,t,s,i){var r;const a=s.details;if(!a){this.warn("level.details undefined");return}if(Object.keys(e.elementaryStreams).reduce((o,l)=>{const c=e.elementaryStreams[l];if(c){const u=c.endPTS-c.startPTS;if(u<=0)return this.warn(`Could not parse fragment ${e.sn} ${l} duration reliably (${u})`),o||!1;const d=i?0:qT(a,e,c.startPTS,c.endPTS,c.startDTS,c.endDTS);return this.hls.trigger(C.LEVEL_PTS_UPDATED,{details:a,level:s,drift:d,type:l,frag:e,start:c.startPTS,end:c.endPTS}),!0}return o},!1))s.fragmentError=0;else if(((r=this.transmuxer)==null?void 0:r.error)===null){const o=new Error(`Found no media in fragment ${e.sn} of level ${e.level} resetting transmuxer to fallback to playlist timing`);if(s.fragmentError===0&&(s.fragmentError++,e.gap=!0,this.fragmentTracker.removeFragment(e),this.fragmentTracker.fragBuffered(e,!0)),this.warn(o.message),this.hls.trigger(C.ERROR,{type:Me.MEDIA_ERROR,details:ne.FRAG_PARSING_ERROR,fatal:!1,error:o,frag:e,reason:`Found no media in msn ${e.sn} of level "${s.url}"`}),!this.hls)return;this.resetTransmuxer()}this.state=ae.PARSED,this.hls.trigger(C.FRAG_PARSED,{frag:e,part:t})}resetTransmuxer(){this.transmuxer&&(this.transmuxer.destroy(),this.transmuxer=null)}recoverWorkerError(e){if(e.event==="demuxerWorker"){var t,s,i;this.fragmentTracker.removeAllFragments(),this.resetTransmuxer(),this.resetStartWhenNotLoaded((t=(s=this.levelLastLoaded)!=null?s:(i=this.fragCurrent)==null?void 0:i.level)!=null?t:0),this.resetLoadingState()}}set state(e){const t=this._state;t!==e&&(this._state=e,this.log(`${t}->${e}`))}get state(){return this._state}}function tb(){return self.SourceBuffer||self.WebKitSourceBuffer}function N8(){const n=bc();if(!n)return!1;const e=tb(),t=n&&typeof n.isTypeSupported=="function"&&n.isTypeSupported('video/mp4; codecs="avc1.42E01E,mp4a.40.2"'),s=!e||e.prototype&&typeof e.prototype.appendBuffer=="function"&&typeof e.prototype.remove=="function";return!!t&&!!s}function B8(){var n;const e=tb();return typeof(e==null||(n=e.prototype)==null?void 0:n.changeType)=="function"}function U8(){return typeof __HLS_WORKER_BUNDLE__=="function"}function $8(){const n=new self.Blob([`var exports={};var module={exports:exports};function define(f){f()};define.amd=true;(${__HLS_WORKER_BUNDLE__.toString()})(true);`],{type:"text/javascript"}),e=self.URL.createObjectURL(n);return{worker:new self.Worker(e),objectURL:e}}function j8(n){const e=new self.URL(n,self.location.href).href;return{worker:new self.Worker(e),scriptURL:e}}function un(n="",e=9e4){return{type:n,id:-1,pid:-1,inputTimeScale:e,sequenceNumber:-1,samples:[],dropped:0}}class sb{constructor(){this._audioTrack=void 0,this._id3Track=void 0,this.frameIndex=0,this.cachedData=null,this.basePTS=null,this.initPTS=null,this.lastPTS=null}resetInitSegment(e,t,s,i){this._id3Track={type:"id3",id:3,pid:-1,inputTimeScale:9e4,sequenceNumber:0,samples:[],dropped:0}}resetTimeStamp(e){this.initPTS=e,this.resetContiguity()}resetContiguity(){this.basePTS=null,this.lastPTS=null,this.frameIndex=0}canParse(e,t){return!1}appendFrame(e,t,s){}demux(e,t){this.cachedData&&(e=Xi(this.cachedData,e),this.cachedData=null);let s=Ml(e,0),i=s?s.length:0,r;const a=this._audioTrack,o=this._id3Track,l=s?S5(s):void 0,c=e.length;for((this.basePTS===null||this.frameIndex===0&&Ce(l))&&(this.basePTS=G8(l,t,this.initPTS),this.lastPTS=this.basePTS),this.lastPTS===null&&(this.lastPTS=this.basePTS),s&&s.length>0&&o.samples.push({pts:this.lastPTS,dts:this.lastPTS,data:s,type:Vs.audioId3,duration:Number.POSITIVE_INFINITY});i<c;){if(this.canParse(e,i)){const u=this.appendFrame(a,e,i);u?(this.frameIndex++,this.lastPTS=u.sample.pts,i+=u.length,r=i):i=c}else x5(e,i)?(s=Ml(e,i),o.samples.push({pts:this.lastPTS,dts:this.lastPTS,data:s,type:Vs.audioId3,duration:Number.POSITIVE_INFINITY}),i+=s.length,r=i):i++;if(i===c&&r!==c){const u=Ki(e,r);this.cachedData?this.cachedData=Xi(this.cachedData,u):this.cachedData=u}}return{audioTrack:a,videoTrack:un(),id3Track:o,textTrack:un()}}demuxSampleAes(e,t,s){return Promise.reject(new Error(`[${this}] This demuxer does not support Sample-AES decryption`))}flush(e){const t=this.cachedData;return t&&(this.cachedData=null,this.demux(t,0)),{audioTrack:this._audioTrack,videoTrack:un(),id3Track:this._id3Track,textTrack:un()}}destroy(){}}const G8=(n,e,t)=>{if(Ce(n))return n*90;const s=t?t.baseTime*9e4/t.timescale:0;return e*9e4+s};function V8(n,e,t,s){let i,r,a,o;const l=navigator.userAgent.toLowerCase(),c=s,u=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350];i=((e[t+2]&192)>>>6)+1;const d=(e[t+2]&60)>>>2;if(d>u.length-1){n.trigger(C.ERROR,{type:Me.MEDIA_ERROR,details:ne.FRAG_PARSING_ERROR,fatal:!0,reason:`invalid ADTS sampling index:${d}`});return}return a=(e[t+2]&1)<<2,a|=(e[t+3]&192)>>>6,H.log(`manifest codec:${s}, ADTS type:${i}, samplingIndex:${d}`),/firefox/i.test(l)?d>=6?(i=5,o=new Array(4),r=d-3):(i=2,o=new Array(2),r=d):l.indexOf("android")!==-1?(i=2,o=new Array(2),r=d):(i=5,o=new Array(4),s&&(s.indexOf("mp4a.40.29")!==-1||s.indexOf("mp4a.40.5")!==-1)||!s&&d>=6?r=d-3:((s&&s.indexOf("mp4a.40.2")!==-1&&(d>=6&&a===1||/vivaldi/i.test(l))||!s&&a===1)&&(i=2,o=new Array(2)),r=d)),o[0]=i<<3,o[0]|=(d&14)>>1,o[1]|=(d&1)<<7,o[1]|=a<<3,i===5&&(o[1]|=(r&14)>>1,o[2]=(r&1)<<7,o[2]|=8,o[3]=0),{config:o,samplerate:u[d],channelCount:a,codec:"mp4a.40."+i,manifestCodec:c}}function nb(n,e){return n[e]===255&&(n[e+1]&246)===240}function ib(n,e){return n[e+1]&1?7:9}function $f(n,e){return(n[e+3]&3)<<11|n[e+4]<<3|(n[e+5]&224)>>>5}function H8(n,e){return e+5<n.length}function $l(n,e){return e+1<n.length&&nb(n,e)}function K8(n,e){return H8(n,e)&&nb(n,e)&&$f(n,e)<=n.length-e}function W8(n,e){if($l(n,e)){const t=ib(n,e);if(e+t>=n.length)return!1;const s=$f(n,e);if(s<=t)return!1;const i=e+s;return i===n.length||$l(n,i)}return!1}function rb(n,e,t,s,i){if(!n.samplerate){const r=V8(e,t,s,i);if(!r)return;n.config=r.config,n.samplerate=r.samplerate,n.channelCount=r.channelCount,n.codec=r.codec,n.manifestCodec=r.manifestCodec,H.log(`parsed codec:${n.codec}, rate:${r.samplerate}, channels:${r.channelCount}`)}}function ab(n){return 1024*9e4/n}function z8(n,e){const t=ib(n,e);if(e+t<=n.length){const s=$f(n,e)-t;if(s>0)return{headerLength:t,frameLength:s}}}function ob(n,e,t,s,i){const r=ab(n.samplerate),a=s+i*r,o=z8(e,t);let l;if(o){const{frameLength:u,headerLength:d}=o,h=d+u,f=Math.max(0,t+h-e.length);f?(l=new Uint8Array(h-d),l.set(e.subarray(t+d,e.length),0)):l=e.subarray(t+d,t+h);const p={unit:l,pts:a};return f||n.samples.push(p),{sample:p,length:h,missing:f}}const c=e.length-t;return l=new Uint8Array(c),l.set(e.subarray(t,e.length),0),{sample:{unit:l,pts:a},length:c,missing:-1}}class Y8 extends sb{constructor(e,t){super(),this.observer=void 0,this.config=void 0,this.observer=e,this.config=t}resetInitSegment(e,t,s,i){super.resetInitSegment(e,t,s,i),this._audioTrack={container:"audio/adts",type:"audio",id:2,pid:-1,sequenceNumber:0,segmentCodec:"aac",samples:[],manifestCodec:t,duration:i,inputTimeScale:9e4,dropped:0}}static probe(e){if(!e)return!1;let t=(Ml(e,0)||[]).length;for(let s=e.length;t<s;t++)if(W8(e,t))return H.log("ADTS sync word found !"),!0;return!1}canParse(e,t){return K8(e,t)}appendFrame(e,t,s){rb(e,this.observer,t,s,e.manifestCodec);const i=ob(e,t,s,this.basePTS,this.frameIndex);if(i&&i.missing===0)return i}}const q8=/\/emsg[-/]ID3/i;class X8{constructor(e,t){this.remainderData=null,this.timeOffset=0,this.config=void 0,this.videoTrack=void 0,this.audioTrack=void 0,this.id3Track=void 0,this.txtTrack=void 0,this.config=t}resetTimeStamp(){}resetInitSegment(e,t,s,i){const r=this.videoTrack=un("video",1),a=this.audioTrack=un("audio",1),o=this.txtTrack=un("text",1);if(this.id3Track=un("id3",1),this.timeOffset=0,!(e!=null&&e.byteLength))return;const l=GT(e);if(l.video){const{id:c,timescale:u,codec:d}=l.video;r.id=c,r.timescale=o.timescale=u,r.codec=d}if(l.audio){const{id:c,timescale:u,codec:d}=l.audio;a.id=c,a.timescale=u,a.codec=d}o.id=UT.text,r.sampleDuration=0,r.duration=a.duration=i}resetContiguity(){this.remainderData=null}static probe(e){return e=e.length>16384?e.subarray(0,16384):e,Qe(e,["moof"]).length>0}demux(e,t){this.timeOffset=t;let s=e;const i=this.videoTrack,r=this.txtTrack;if(this.config.progressive){this.remainderData&&(s=Xi(this.remainderData,e));const o=B5(s);this.remainderData=o.remainder,i.samples=o.valid||new Uint8Array}else i.samples=s;const a=this.extractID3Track(i,t);return r.samples=m0(t,i),{videoTrack:i,audioTrack:this.audioTrack,id3Track:a,textTrack:this.txtTrack}}flush(){const e=this.timeOffset,t=this.videoTrack,s=this.txtTrack;t.samples=this.remainderData||new Uint8Array,this.remainderData=null;const i=this.extractID3Track(t,this.timeOffset);return s.samples=m0(e,t),{videoTrack:t,audioTrack:un(),id3Track:i,textTrack:un()}}extractID3Track(e,t){const s=this.id3Track;if(e.samples.length){const i=Qe(e.samples,["emsg"]);i&&i.forEach(r=>{const a=j5(r);if(q8.test(a.schemeIdUri)){const o=Ce(a.presentationTime)?a.presentationTime/a.timeScale:t+a.presentationTimeDelta/a.timeScale;let l=a.eventDuration===4294967295?Number.POSITIVE_INFINITY:a.eventDuration/a.timeScale;l<=.001&&(l=Number.POSITIVE_INFINITY);const c=a.payload;s.samples.push({data:c,len:c.byteLength,dts:o,pts:o,type:Vs.emsg,duration:l})}})}return s}demuxSampleAes(e,t,s){return Promise.reject(new Error("The MP4 demuxer does not support SAMPLE-AES decryption"))}destroy(){}}let Uo=null;const Q8=[32,64,96,128,160,192,224,256,288,320,352,384,416,448,32,48,56,64,80,96,112,128,160,192,224,256,320,384,32,40,48,56,64,80,96,112,128,160,192,224,256,320,32,48,56,64,80,96,112,128,144,160,176,192,224,256,8,16,24,32,40,48,56,64,80,96,112,128,144,160],J8=[44100,48e3,32e3,22050,24e3,16e3,11025,12e3,8e3],Z8=[[0,72,144,12],[0,0,0,0],[0,72,144,12],[0,144,144,12]],e$=[0,1,1,4];function lb(n,e,t,s,i){if(t+24>e.length)return;const r=cb(e,t);if(r&&t+r.frameLength<=e.length){const a=r.samplesPerFrame*9e4/r.sampleRate,o=s+i*a,l={unit:e.subarray(t,t+r.frameLength),pts:o,dts:o};return n.config=[],n.channelCount=r.channelCount,n.samplerate=r.sampleRate,n.samples.push(l),{sample:l,length:r.frameLength,missing:0}}}function cb(n,e){const t=n[e+1]>>3&3,s=n[e+1]>>1&3,i=n[e+2]>>4&15,r=n[e+2]>>2&3;if(t!==1&&i!==0&&i!==15&&r!==3){const a=n[e+2]>>1&1,o=n[e+3]>>6,l=t===3?3-s:s===3?3:4,c=Q8[l*14+i-1]*1e3,u=J8[(t===3?0:t===2?1:2)*3+r],d=o===3?1:2,h=Z8[t][s],f=e$[s],p=h*8*f,m=Math.floor(h*c/u+a)*f;if(Uo===null){const y=(navigator.userAgent||"").match(/Chrome\/(\d+)/i);Uo=y?parseInt(y[1]):0}return Uo&&Uo<=87&&s===2&&c>=224e3&&o===0&&(n[e+3]=n[e+3]|128),{sampleRate:u,channelCount:d,frameLength:m,samplesPerFrame:p}}}function jf(n,e){return n[e]===255&&(n[e+1]&224)===224&&(n[e+1]&6)!==0}function ub(n,e){return e+1<n.length&&jf(n,e)}function t$(n,e){return jf(n,e)&&4<=n.length-e}function s$(n,e){if(e+1<n.length&&jf(n,e)){const t=cb(n,e);let s=4;t!=null&&t.frameLength&&(s=t.frameLength);const i=e+s;return i===n.length||ub(n,i)}return!1}class B0{constructor(e){this.data=void 0,this.bytesAvailable=void 0,this.word=void 0,this.bitsAvailable=void 0,this.data=e,this.bytesAvailable=e.byteLength,this.word=0,this.bitsAvailable=0}loadWord(){const e=this.data,t=this.bytesAvailable,s=e.byteLength-t,i=new Uint8Array(4),r=Math.min(4,t);if(r===0)throw new Error("no bytes available");i.set(e.subarray(s,s+r)),this.word=new DataView(i.buffer).getUint32(0),this.bitsAvailable=r*8,this.bytesAvailable-=r}skipBits(e){let t;e=Math.min(e,this.bytesAvailable*8+this.bitsAvailable),this.bitsAvailable>e?(this.word<<=e,this.bitsAvailable-=e):(e-=this.bitsAvailable,t=e>>3,e-=t<<3,this.bytesAvailable-=t,this.loadWord(),this.word<<=e,this.bitsAvailable-=e)}readBits(e){let t=Math.min(this.bitsAvailable,e);const s=this.word>>>32-t;if(e>32&&H.error("Cannot read more than 32 bits at a time"),this.bitsAvailable-=t,this.bitsAvailable>0)this.word<<=t;else if(this.bytesAvailable>0)this.loadWord();else throw new Error("no bits available");return t=e-t,t>0&&this.bitsAvailable?s<<t|this.readBits(t):s}skipLZ(){let e;for(e=0;e<this.bitsAvailable;++e)if(this.word&2147483648>>>e)return this.word<<=e,this.bitsAvailable-=e,e;return this.loadWord(),e+this.skipLZ()}skipUEG(){this.skipBits(1+this.skipLZ())}skipEG(){this.skipBits(1+this.skipLZ())}readUEG(){const e=this.skipLZ();return this.readBits(e+1)-1}readEG(){const e=this.readUEG();return 1&e?1+e>>>1:-1*(e>>>1)}readBoolean(){return this.readBits(1)===1}readUByte(){return this.readBits(8)}readUShort(){return this.readBits(16)}readUInt(){return this.readBits(32)}skipScalingList(e){let t=8,s=8,i;for(let r=0;r<e;r++)s!==0&&(i=this.readEG(),s=(t+i+256)%256),t=s===0?t:s}readSPS(){let e=0,t=0,s=0,i=0,r,a,o;const l=this.readUByte.bind(this),c=this.readBits.bind(this),u=this.readUEG.bind(this),d=this.readBoolean.bind(this),h=this.skipBits.bind(this),f=this.skipEG.bind(this),p=this.skipUEG.bind(this),m=this.skipScalingList.bind(this);l();const y=l();if(c(5),h(3),l(),p(),y===100||y===110||y===122||y===244||y===44||y===83||y===86||y===118||y===128){const L=u();if(L===3&&h(1),p(),p(),h(1),d())for(a=L!==3?8:12,o=0;o<a;o++)d()&&(o<6?m(16):m(64))}p();const g=u();if(g===0)u();else if(g===1)for(h(1),f(),f(),r=u(),o=0;o<r;o++)f();p(),h(1);const v=u(),E=u(),T=c(1);T===0&&h(1),h(1),d()&&(e=u(),t=u(),s=u(),i=u());let b=[1,1];if(d()&&d())switch(l()){case 1:b=[1,1];break;case 2:b=[12,11];break;case 3:b=[10,11];break;case 4:b=[16,11];break;case 5:b=[40,33];break;case 6:b=[24,11];break;case 7:b=[20,11];break;case 8:b=[32,11];break;case 9:b=[80,33];break;case 10:b=[18,11];break;case 11:b=[15,11];break;case 12:b=[64,33];break;case 13:b=[160,99];break;case 14:b=[4,3];break;case 15:b=[3,2];break;case 16:b=[2,1];break;case 255:{b=[l()<<8|l(),l()<<8|l()];break}}return{width:Math.ceil((v+1)*16-e*2-t*2),height:(2-T)*(E+1)*16-(T?2:4)*(s+i),pixelRatio:b}}readSliceType(){return this.readUByte(),this.readUEG(),this.readUEG()}}class n${constructor(e,t,s){this.keyData=void 0,this.decrypter=void 0,this.keyData=s,this.decrypter=new Bf(t,{removePKCS7Padding:!1})}decryptBuffer(e){return this.decrypter.decrypt(e,this.keyData.key.buffer,this.keyData.iv.buffer)}decryptAacSample(e,t,s){const i=e[t].unit;if(i.length<=16)return;const r=i.subarray(16,i.length-i.length%16),a=r.buffer.slice(r.byteOffset,r.byteOffset+r.length);this.decryptBuffer(a).then(o=>{const l=new Uint8Array(o);i.set(l,16),this.decrypter.isSync()||this.decryptAacSamples(e,t+1,s)})}decryptAacSamples(e,t,s){for(;;t++){if(t>=e.length){s();return}if(!(e[t].unit.length<32)&&(this.decryptAacSample(e,t,s),!this.decrypter.isSync()))return}}getAvcEncryptedData(e){const t=Math.floor((e.length-48)/160)*16+16,s=new Int8Array(t);let i=0;for(let r=32;r<e.length-16;r+=160,i+=16)s.set(e.subarray(r,r+16),i);return s}getAvcDecryptedUnit(e,t){const s=new Uint8Array(t);let i=0;for(let r=32;r<e.length-16;r+=160,i+=16)e.set(s.subarray(i,i+16),r);return e}decryptAvcSample(e,t,s,i,r){const a=KT(r.data),o=this.getAvcEncryptedData(a);this.decryptBuffer(o.buffer).then(l=>{r.data=this.getAvcDecryptedUnit(a,l),this.decrypter.isSync()||this.decryptAvcSamples(e,t,s+1,i)})}decryptAvcSamples(e,t,s,i){if(e instanceof Uint8Array)throw new Error("Cannot decrypt samples of type Uint8Array");for(;;t++,s=0){if(t>=e.length){i();return}const r=e[t].units;for(;!(s>=r.length);s++){const a=r[s];if(!(a.data.length<=48||a.type!==1&&a.type!==5)&&(this.decryptAvcSample(e,t,s,i,a),!this.decrypter.isSync()))return}}}}const Xt=188;class oi{constructor(e,t,s){this.observer=void 0,this.config=void 0,this.typeSupported=void 0,this.sampleAes=null,this.pmtParsed=!1,this.audioCodec=void 0,this.videoCodec=void 0,this._duration=0,this._pmtId=-1,this._avcTrack=void 0,this._audioTrack=void 0,this._id3Track=void 0,this._txtTrack=void 0,this.aacOverFlow=null,this.avcSample=null,this.remainderData=null,this.observer=e,this.config=t,this.typeSupported=s}static probe(e){const t=oi.syncOffset(e);return t>0&&H.warn(`MPEG2-TS detected but first sync word found @ offset ${t}`),t!==-1}static syncOffset(e){const t=e.length;let s=Math.min(Xt*5,e.length-Xt)+1,i=0;for(;i<s;){let r=!1,a=-1,o=0;for(let l=i;l<t;l+=Xt)if(e[l]===71){if(o++,a===-1&&(a=l,a!==0&&(s=Math.min(a+Xt*99,e.length-Xt)+1)),r||(r=ih(e,l)===0),r&&o>1&&(a===0&&o>2||l+Xt>s))return a}else{if(o)return-1;break}i++}return-1}static createTrack(e,t){return{container:e==="video"||e==="audio"?"video/mp2t":void 0,type:e,id:UT[e],pid:-1,inputTimeScale:9e4,sequenceNumber:0,samples:[],dropped:0,duration:e==="audio"?t:void 0}}resetInitSegment(e,t,s,i){this.pmtParsed=!1,this._pmtId=-1,this._avcTrack=oi.createTrack("video"),this._audioTrack=oi.createTrack("audio",i),this._id3Track=oi.createTrack("id3"),this._txtTrack=oi.createTrack("text"),this._audioTrack.segmentCodec="aac",this.aacOverFlow=null,this.avcSample=null,this.remainderData=null,this.audioCodec=t,this.videoCodec=s,this._duration=i}resetTimeStamp(){}resetContiguity(){const{_audioTrack:e,_avcTrack:t,_id3Track:s}=this;e&&(e.pesData=null),t&&(t.pesData=null),s&&(s.pesData=null),this.aacOverFlow=null,this.avcSample=null,this.remainderData=null}demux(e,t,s=!1,i=!1){s||(this.sampleAes=null);let r;const a=this._avcTrack,o=this._audioTrack,l=this._id3Track,c=this._txtTrack;let u=a.pid,d=a.pesData,h=o.pid,f=l.pid,p=o.pesData,m=l.pesData,y=null,g=this.pmtParsed,v=this._pmtId,E=e.length;if(this.remainderData&&(e=Xi(this.remainderData,e),E=e.length,this.remainderData=null),E<Xt&&!i)return this.remainderData=e,{audioTrack:o,videoTrack:a,id3Track:l,textTrack:c};const T=Math.max(0,oi.syncOffset(e));E-=(E-T)%Xt,E<e.byteLength&&!i&&(this.remainderData=new Uint8Array(e.buffer,E,e.buffer.byteLength-E));let b=0;for(let x=T;x<E;x+=Xt)if(e[x]===71){const w=!!(e[x+1]&64),k=ih(e,x),R=(e[x+3]&48)>>4;let P;if(R>1){if(P=x+5+e[x+4],P===x+Xt)continue}else P=x+4;switch(k){case u:w&&(d&&(r=dr(d))&&this.parseAVCPES(a,c,r,!1),d={data:[],size:0}),d&&(d.data.push(e.subarray(P,x+Xt)),d.size+=x+Xt-P);break;case h:if(w){if(p&&(r=dr(p)))switch(o.segmentCodec){case"aac":this.parseAACPES(o,r);break;case"mp3":this.parseMPEGPES(o,r);break}p={data:[],size:0}}p&&(p.data.push(e.subarray(P,x+Xt)),p.size+=x+Xt-P);break;case f:w&&(m&&(r=dr(m))&&this.parseID3PES(l,r),m={data:[],size:0}),m&&(m.data.push(e.subarray(P,x+Xt)),m.size+=x+Xt-P);break;case 0:w&&(P+=e[P]+1),v=this._pmtId=i$(e,P);break;case v:{w&&(P+=e[P]+1);const D=r$(e,P,this.typeSupported,s);u=D.avc,u>0&&(a.pid=u),h=D.audio,h>0&&(o.pid=h,o.segmentCodec=D.segmentCodec),f=D.id3,f>0&&(l.pid=f),y!==null&&!g&&(H.warn(`MPEG-TS PMT found at ${x} after unknown PID '${y}'. Backtracking to sync byte @${T} to parse all TS packets.`),y=null,x=T-188),g=this.pmtParsed=!0;break}case 17:case 8191:break;default:y=k;break}}else b++;if(b>0){const x=new Error(`Found ${b} TS packet/s that do not start with 0x47`);this.observer.emit(C.ERROR,C.ERROR,{type:Me.MEDIA_ERROR,details:ne.FRAG_PARSING_ERROR,fatal:!1,error:x,reason:x.message})}a.pesData=d,o.pesData=p,l.pesData=m;const L={audioTrack:o,videoTrack:a,id3Track:l,textTrack:c};return i&&this.extractRemainingSamples(L),L}flush(){const{remainderData:e}=this;this.remainderData=null;let t;return e?t=this.demux(e,-1,!1,!0):t={videoTrack:this._avcTrack,audioTrack:this._audioTrack,id3Track:this._id3Track,textTrack:this._txtTrack},this.extractRemainingSamples(t),this.sampleAes?this.decrypt(t,this.sampleAes):t}extractRemainingSamples(e){const{audioTrack:t,videoTrack:s,id3Track:i,textTrack:r}=e,a=s.pesData,o=t.pesData,l=i.pesData;let c;if(a&&(c=dr(a))?(this.parseAVCPES(s,r,c,!0),s.pesData=null):s.pesData=a,o&&(c=dr(o))){switch(t.segmentCodec){case"aac":this.parseAACPES(t,c);break;case"mp3":this.parseMPEGPES(t,c);break}t.pesData=null}else o!=null&&o.size&&H.log("last AAC PES packet truncated,might overlap between fragments"),t.pesData=o;l&&(c=dr(l))?(this.parseID3PES(i,c),i.pesData=null):i.pesData=l}demuxSampleAes(e,t,s){const i=this.demux(e,s,!0,!this.config.progressive),r=this.sampleAes=new n$(this.observer,this.config,t);return this.decrypt(i,r)}decrypt(e,t){return new Promise(s=>{const{audioTrack:i,videoTrack:r}=e;i.samples&&i.segmentCodec==="aac"?t.decryptAacSamples(i.samples,0,()=>{r.samples?t.decryptAvcSamples(r.samples,0,0,()=>{s(e)}):s(e)}):r.samples&&t.decryptAvcSamples(r.samples,0,0,()=>{s(e)})})}destroy(){this._duration=0}parseAVCPES(e,t,s,i){const r=this.parseAVCNALu(e,s.data);let a=this.avcSample,o,l=!1;s.data=null,a&&r.length&&!e.audFound&&(ca(a,e),a=this.avcSample=$o(!1,s.pts,s.dts,"")),r.forEach(c=>{var u;switch(c.type){case 1:{let h=!1;o=!0;const f=c.data;if(l&&f.length>4){const p=new B0(f).readSliceType();(p===2||p===4||p===7||p===9)&&(h=!0)}if(h){var d;(d=a)!=null&&d.frame&&!a.key&&(ca(a,e),a=this.avcSample=null)}a||(a=this.avcSample=$o(!0,s.pts,s.dts,"")),a.frame=!0,a.key=h;break}case 5:o=!0,(u=a)!=null&&u.frame&&!a.key&&(ca(a,e),a=this.avcSample=null),a||(a=this.avcSample=$o(!0,s.pts,s.dts,"")),a.key=!0,a.frame=!0;break;case 6:{o=!0,HT(c.data,1,s.pts,t.samples);break}case 7:if(o=!0,l=!0,!e.sps){const h=c.data,f=new B0(h).readSPS();e.width=f.width,e.height=f.height,e.pixelRatio=f.pixelRatio,e.sps=[h],e.duration=this._duration;const p=h.subarray(1,4);let m="avc1.";for(let y=0;y<3;y++){let g=p[y].toString(16);g.length<2&&(g="0"+g),m+=g}e.codec=m}break;case 8:o=!0,e.pps||(e.pps=[c.data]);break;case 9:o=!1,e.audFound=!0,a&&ca(a,e),a=this.avcSample=$o(!1,s.pts,s.dts,"");break;case 12:o=!0;break;default:o=!1,a&&(a.debug+="unknown NAL "+c.type+" ");break}a&&o&&a.units.push(c)}),i&&a&&(ca(a,e),this.avcSample=null)}getLastNalUnit(e){var t;let s=this.avcSample,i;if((!s||s.units.length===0)&&(s=e[e.length-1]),(t=s)!=null&&t.units){const r=s.units;i=r[r.length-1]}return i}parseAVCNALu(e,t){const s=t.byteLength;let i=e.naluState||0;const r=i,a=[];let o=0,l,c,u,d=-1,h=0;for(i===-1&&(d=0,h=t[0]&31,i=0,o=1);o<s;){if(l=t[o++],!i){i=l?0:1;continue}if(i===1){i=l?0:2;continue}if(!l)i=3;else if(l===1){if(d>=0){const f={data:t.subarray(d,o-i-1),type:h};a.push(f)}else{const f=this.getLastNalUnit(e.samples);if(f&&(r&&o<=4-r&&f.state&&(f.data=f.data.subarray(0,f.data.byteLength-r)),c=o-i-1,c>0)){const p=new Uint8Array(f.data.byteLength+c);p.set(f.data,0),p.set(t.subarray(0,c),f.data.byteLength),f.data=p,f.state=0}}o<s?(u=t[o]&31,d=o,h=u,i=0):i=-1}else i=0}if(d>=0&&i>=0){const f={data:t.subarray(d,s),type:h,state:i};a.push(f)}if(a.length===0){const f=this.getLastNalUnit(e.samples);if(f){const p=new Uint8Array(f.data.byteLength+t.byteLength);p.set(f.data,0),p.set(t,f.data.byteLength),f.data=p}}return e.naluState=i,a}parseAACPES(e,t){let s=0;const i=this.aacOverFlow;let r=t.data;if(i){this.aacOverFlow=null;const d=i.missing,h=i.sample.unit.byteLength;if(d===-1){const f=new Uint8Array(h+r.byteLength);f.set(i.sample.unit,0),f.set(r,h),r=f}else{const f=h-d;i.sample.unit.set(r.subarray(0,d),f),e.samples.push(i.sample),s=i.missing}}let a,o;for(a=s,o=r.length;a<o-1&&!$l(r,a);a++);if(a!==s){let d;const h=a<o-1;h?d=`AAC PES did not start with ADTS header,offset:${a}`:d="No ADTS header found in AAC PES";const f=new Error(d);if(H.warn(`parsing error: ${d}`),this.observer.emit(C.ERROR,C.ERROR,{type:Me.MEDIA_ERROR,details:ne.FRAG_PARSING_ERROR,fatal:!1,levelRetry:h,error:f,reason:d}),!h)return}rb(e,this.observer,r,a,this.audioCodec);let l;if(t.pts!==void 0)l=t.pts;else if(i){const d=ab(e.samplerate);l=i.sample.pts+d}else{H.warn("[tsdemuxer]: AAC PES unknown PTS");return}let c=0,u;for(;a<o;)if(u=ob(e,r,a,l,c),a+=u.length,u.missing){this.aacOverFlow=u;break}else for(c++;a<o-1&&!$l(r,a);a++);}parseMPEGPES(e,t){const s=t.data,i=s.length;let r=0,a=0;const o=t.pts;if(o===void 0){H.warn("[tsdemuxer]: MPEG PES unknown PTS");return}for(;a<i;)if(ub(s,a)){const l=lb(e,s,a,o,r);if(l)a+=l.length,r++;else break}else a++}parseID3PES(e,t){if(t.pts===void 0){H.warn("[tsdemuxer]: ID3 PES unknown PTS");return}const s=Mt({},t,{type:this._avcTrack?Vs.emsg:Vs.audioId3,duration:Number.POSITIVE_INFINITY});e.samples.push(s)}}function $o(n,e,t,s){return{key:n,frame:!1,pts:e,dts:t,units:[],debug:s,length:0}}function ih(n,e){return((n[e+1]&31)<<8)+n[e+2]}function i$(n,e){return(n[e+10]&31)<<8|n[e+11]}function r$(n,e,t,s){const i={audio:-1,avc:-1,id3:-1,segmentCodec:"aac"},r=(n[e+1]&15)<<8|n[e+2],a=e+3+r-4,o=(n[e+10]&15)<<8|n[e+11];for(e+=12+o;e<a;){const l=ih(n,e);switch(n[e]){case 207:if(!s){H.log("ADTS AAC with AES-128-CBC frame encryption found in unencrypted stream");break}case 15:i.audio===-1&&(i.audio=l);break;case 21:i.id3===-1&&(i.id3=l);break;case 219:if(!s){H.log("H.264 with AES-128-CBC slice encryption found in unencrypted stream");break}case 27:i.avc===-1&&(i.avc=l);break;case 3:case 4:t.mpeg!==!0&&t.mp3!==!0?H.log("MPEG audio found, not supported in this browser"):i.audio===-1&&(i.audio=l,i.segmentCodec="mp3");break;case 36:H.warn("Unsupported HEVC stream type found");break}e+=((n[e+3]&15)<<8|n[e+4])+5}return i}function dr(n){let e=0,t,s,i,r,a;const o=n.data;if(!n||n.size===0)return null;for(;o[0].length<19&&o.length>1;){const l=new Uint8Array(o[0].length+o[1].length);l.set(o[0]),l.set(o[1],o[0].length),o[0]=l,o.splice(1,1)}if(t=o[0],(t[0]<<16)+(t[1]<<8)+t[2]===1){if(s=(t[4]<<8)+t[5],s&&s>n.size-6)return null;const l=t[7];l&192&&(r=(t[9]&14)*536870912+(t[10]&255)*4194304+(t[11]&254)*16384+(t[12]&255)*128+(t[13]&254)/2,l&64?(a=(t[14]&14)*536870912+(t[15]&255)*4194304+(t[16]&254)*16384+(t[17]&255)*128+(t[18]&254)/2,r-a>60*9e4&&(H.warn(`${Math.round((r-a)/9e4)}s delta between PTS and DTS, align them`),r=a)):a=r),i=t[8];let c=i+9;if(n.size<=c)return null;n.size-=c;const u=new Uint8Array(n.size);for(let d=0,h=o.length;d<h;d++){t=o[d];let f=t.byteLength;if(c)if(c>f){c-=f;continue}else t=t.subarray(c),f-=c,c=0;u.set(t,e),e+=f}return s&&(s-=i+3),{data:u,pts:r,dts:a,len:s}}return null}function ca(n,e){if(n.units.length&&n.frame){if(n.pts===void 0){const t=e.samples,s=t.length;if(s){const i=t[s-1];n.pts=i.pts,n.dts=i.dts}else{e.dropped++;return}}e.samples.push(n)}n.debug.length&&H.log(n.pts+"/"+n.dts+":"+n.debug)}class a$ extends sb{resetInitSegment(e,t,s,i){super.resetInitSegment(e,t,s,i),this._audioTrack={container:"audio/mpeg",type:"audio",id:2,pid:-1,sequenceNumber:0,segmentCodec:"mp3",samples:[],manifestCodec:t,duration:i,inputTimeScale:9e4,dropped:0}}static probe(e){if(!e)return!1;let t=(Ml(e,0)||[]).length;for(let s=e.length;t<s;t++)if(s$(e,t))return H.log("MPEG Audio sync word found !"),!0;return!1}canParse(e,t){return t$(e,t)}appendFrame(e,t,s){if(this.basePTS!==null)return lb(e,t,s,this.basePTS,this.frameIndex)}}class U0{static getSilentFrame(e,t){switch(e){case"mp4a.40.2":if(t===1)return new Uint8Array([0,200,0,128,35,128]);if(t===2)return new Uint8Array([33,0,73,144,2,25,0,35,128]);if(t===3)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,142]);if(t===4)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,128,44,128,8,2,56]);if(t===5)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,56]);if(t===6)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,0,178,0,32,8,224]);break;default:if(t===1)return new Uint8Array([1,64,34,128,163,78,230,128,186,8,0,0,0,28,6,241,193,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(t===2)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(t===3)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);break}}}const ei=Math.pow(2,32)-1;class Z{static init(){Z.types={avc1:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],".mp3":[],mvex:[],mvhd:[],pasp:[],sdtp:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[],smhd:[]};let e;for(e in Z.types)Z.types.hasOwnProperty(e)&&(Z.types[e]=[e.charCodeAt(0),e.charCodeAt(1),e.charCodeAt(2),e.charCodeAt(3)]);const t=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),s=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]);Z.HDLR_TYPES={video:t,audio:s};const i=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),r=new Uint8Array([0,0,0,0,0,0,0,0]);Z.STTS=Z.STSC=Z.STCO=r,Z.STSZ=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),Z.VMHD=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0]),Z.SMHD=new Uint8Array([0,0,0,0,0,0,0,0]),Z.STSD=new Uint8Array([0,0,0,0,0,0,0,1]);const a=new Uint8Array([105,115,111,109]),o=new Uint8Array([97,118,99,49]),l=new Uint8Array([0,0,0,1]);Z.FTYP=Z.box(Z.types.ftyp,a,l,a,o),Z.DINF=Z.box(Z.types.dinf,Z.box(Z.types.dref,i))}static box(e,...t){let s=8,i=t.length;const r=i;for(;i--;)s+=t[i].byteLength;const a=new Uint8Array(s);for(a[0]=s>>24&255,a[1]=s>>16&255,a[2]=s>>8&255,a[3]=s&255,a.set(e,4),i=0,s=8;i<r;i++)a.set(t[i],s),s+=t[i].byteLength;return a}static hdlr(e){return Z.box(Z.types.hdlr,Z.HDLR_TYPES[e])}static mdat(e){return Z.box(Z.types.mdat,e)}static mdhd(e,t){t*=e;const s=Math.floor(t/(ei+1)),i=Math.floor(t%(ei+1));return Z.box(Z.types.mdhd,new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,e>>24&255,e>>16&255,e>>8&255,e&255,s>>24,s>>16&255,s>>8&255,s&255,i>>24,i>>16&255,i>>8&255,i&255,85,196,0,0]))}static mdia(e){return Z.box(Z.types.mdia,Z.mdhd(e.timescale,e.duration),Z.hdlr(e.type),Z.minf(e))}static mfhd(e){return Z.box(Z.types.mfhd,new Uint8Array([0,0,0,0,e>>24,e>>16&255,e>>8&255,e&255]))}static minf(e){return e.type==="audio"?Z.box(Z.types.minf,Z.box(Z.types.smhd,Z.SMHD),Z.DINF,Z.stbl(e)):Z.box(Z.types.minf,Z.box(Z.types.vmhd,Z.VMHD),Z.DINF,Z.stbl(e))}static moof(e,t,s){return Z.box(Z.types.moof,Z.mfhd(e),Z.traf(s,t))}static moov(e){let t=e.length;const s=[];for(;t--;)s[t]=Z.trak(e[t]);return Z.box.apply(null,[Z.types.moov,Z.mvhd(e[0].timescale,e[0].duration)].concat(s).concat(Z.mvex(e)))}static mvex(e){let t=e.length;const s=[];for(;t--;)s[t]=Z.trex(e[t]);return Z.box.apply(null,[Z.types.mvex,...s])}static mvhd(e,t){t*=e;const s=Math.floor(t/(ei+1)),i=Math.floor(t%(ei+1)),r=new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,e>>24&255,e>>16&255,e>>8&255,e&255,s>>24,s>>16&255,s>>8&255,s&255,i>>24,i>>16&255,i>>8&255,i&255,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return Z.box(Z.types.mvhd,r)}static sdtp(e){const t=e.samples||[],s=new Uint8Array(4+t.length);let i,r;for(i=0;i<t.length;i++)r=t[i].flags,s[i+4]=r.dependsOn<<4|r.isDependedOn<<2|r.hasRedundancy;return Z.box(Z.types.sdtp,s)}static stbl(e){return Z.box(Z.types.stbl,Z.stsd(e),Z.box(Z.types.stts,Z.STTS),Z.box(Z.types.stsc,Z.STSC),Z.box(Z.types.stsz,Z.STSZ),Z.box(Z.types.stco,Z.STCO))}static avc1(e){let t=[],s=[],i,r,a;for(i=0;i<e.sps.length;i++)r=e.sps[i],a=r.byteLength,t.push(a>>>8&255),t.push(a&255),t=t.concat(Array.prototype.slice.call(r));for(i=0;i<e.pps.length;i++)r=e.pps[i],a=r.byteLength,s.push(a>>>8&255),s.push(a&255),s=s.concat(Array.prototype.slice.call(r));const o=Z.box(Z.types.avcC,new Uint8Array([1,t[3],t[4],t[5],255,224|e.sps.length].concat(t).concat([e.pps.length]).concat(s))),l=e.width,c=e.height,u=e.pixelRatio[0],d=e.pixelRatio[1];return Z.box(Z.types.avc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,l>>8&255,l&255,c>>8&255,c&255,0,72,0,0,0,72,0,0,0,0,0,0,0,1,18,100,97,105,108,121,109,111,116,105,111,110,47,104,108,115,46,106,115,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),o,Z.box(Z.types.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192])),Z.box(Z.types.pasp,new Uint8Array([u>>24,u>>16&255,u>>8&255,u&255,d>>24,d>>16&255,d>>8&255,d&255])))}static esds(e){const t=e.config.length;return new Uint8Array([0,0,0,0,3,23+t,0,1,0,4,15+t,64,21,0,0,0,0,0,0,0,0,0,0,0,5].concat([t]).concat(e.config).concat([6,1,2]))}static mp4a(e){const t=e.samplerate;return Z.box(Z.types.mp4a,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,e.channelCount,0,16,0,0,0,0,t>>8&255,t&255,0,0]),Z.box(Z.types.esds,Z.esds(e)))}static mp3(e){const t=e.samplerate;return Z.box(Z.types[".mp3"],new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,e.channelCount,0,16,0,0,0,0,t>>8&255,t&255,0,0]))}static stsd(e){return e.type==="audio"?e.segmentCodec==="mp3"&&e.codec==="mp3"?Z.box(Z.types.stsd,Z.STSD,Z.mp3(e)):Z.box(Z.types.stsd,Z.STSD,Z.mp4a(e)):Z.box(Z.types.stsd,Z.STSD,Z.avc1(e))}static tkhd(e){const t=e.id,s=e.duration*e.timescale,i=e.width,r=e.height,a=Math.floor(s/(ei+1)),o=Math.floor(s%(ei+1));return Z.box(Z.types.tkhd,new Uint8Array([1,0,0,7,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,t>>24&255,t>>16&255,t>>8&255,t&255,0,0,0,0,a>>24,a>>16&255,a>>8&255,a&255,o>>24,o>>16&255,o>>8&255,o&255,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,i>>8&255,i&255,0,0,r>>8&255,r&255,0,0]))}static traf(e,t){const s=Z.sdtp(e),i=e.id,r=Math.floor(t/(ei+1)),a=Math.floor(t%(ei+1));return Z.box(Z.types.traf,Z.box(Z.types.tfhd,new Uint8Array([0,0,0,0,i>>24,i>>16&255,i>>8&255,i&255])),Z.box(Z.types.tfdt,new Uint8Array([1,0,0,0,r>>24,r>>16&255,r>>8&255,r&255,a>>24,a>>16&255,a>>8&255,a&255])),Z.trun(e,s.length+16+20+8+16+8+8),s)}static trak(e){return e.duration=e.duration||4294967295,Z.box(Z.types.trak,Z.tkhd(e),Z.mdia(e))}static trex(e){const t=e.id;return Z.box(Z.types.trex,new Uint8Array([0,0,0,0,t>>24,t>>16&255,t>>8&255,t&255,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]))}static trun(e,t){const s=e.samples||[],i=s.length,r=12+16*i,a=new Uint8Array(r);let o,l,c,u,d,h;for(t+=8+r,a.set([e.type==="video"?1:0,0,15,1,i>>>24&255,i>>>16&255,i>>>8&255,i&255,t>>>24&255,t>>>16&255,t>>>8&255,t&255],0),o=0;o<i;o++)l=s[o],c=l.duration,u=l.size,d=l.flags,h=l.cts,a.set([c>>>24&255,c>>>16&255,c>>>8&255,c&255,u>>>24&255,u>>>16&255,u>>>8&255,u&255,d.isLeading<<2|d.dependsOn,d.isDependedOn<<6|d.hasRedundancy<<4|d.paddingValue<<1|d.isNonSync,d.degradPrio&61440,d.degradPrio&15,h>>>24&255,h>>>16&255,h>>>8&255,h&255],12+16*o);return Z.box(Z.types.trun,a)}static initSegment(e){Z.types||Z.init();const t=Z.moov(e),s=new Uint8Array(Z.FTYP.byteLength+t.byteLength);return s.set(Z.FTYP),s.set(t,Z.FTYP.byteLength),s}}Z.types=void 0;Z.HDLR_TYPES=void 0;Z.STTS=void 0;Z.STSC=void 0;Z.STCO=void 0;Z.STSZ=void 0;Z.VMHD=void 0;Z.SMHD=void 0;Z.STSD=void 0;Z.FTYP=void 0;Z.DINF=void 0;const db=9e4;function Gf(n,e,t=1,s=!1){const i=n*e*t;return s?Math.round(i):i}function o$(n,e,t=1,s=!1){return Gf(n,e,1/t,s)}function ua(n,e=!1){return Gf(n,1e3,1/db,e)}function l$(n,e=1){return Gf(n,db,1/e)}const c$=10*1e3,$0=1024,u$=1152;let jo=null,Iu=null;class Cu{constructor(e,t,s,i=""){if(this.observer=void 0,this.config=void 0,this.typeSupported=void 0,this.ISGenerated=!1,this._initPTS=null,this._initDTS=null,this.nextAvcDts=null,this.nextAudioPts=null,this.videoSampleDuration=null,this.isAudioContiguous=!1,this.isVideoContiguous=!1,this.observer=e,this.config=t,this.typeSupported=s,this.ISGenerated=!1,jo===null){const r=(navigator.userAgent||"").match(/Chrome\/(\d+)/i);jo=r?parseInt(r[1]):0}if(Iu===null){const r=navigator.userAgent.match(/Safari\/(\d+)/i);Iu=r?parseInt(r[1]):0}}destroy(){}resetTimeStamp(e){H.log("[mp4-remuxer]: initPTS & initDTS reset"),this._initPTS=this._initDTS=e}resetNextTimestamp(){H.log("[mp4-remuxer]: reset next timestamp"),this.isVideoContiguous=!1,this.isAudioContiguous=!1}resetInitSegment(){H.log("[mp4-remuxer]: ISGenerated flag reset"),this.ISGenerated=!1}getVideoStartPts(e){let t=!1;const s=e.reduce((i,r)=>{const a=r.pts-i;return a<-4294967296?(t=!0,Ps(i,r.pts)):a>0?i:r.pts},e[0].pts);return t&&H.debug("PTS rollover detected"),s}remux(e,t,s,i,r,a,o,l){let c,u,d,h,f,p,m=r,y=r;const g=e.pid>-1,v=t.pid>-1,E=t.samples.length,T=e.samples.length>0,b=o&&E>0||E>1;if((!g||T)&&(!v||b)||this.ISGenerated||o){this.ISGenerated||(d=this.generateIS(e,t,r,a));const L=this.isVideoContiguous;let x=-1,w;if(b&&(x=d$(t.samples),!L&&this.config.forceKeyFrameOnDiscontinuity))if(p=!0,x>0){H.warn(`[mp4-remuxer]: Dropped ${x} out of ${E} video samples due to a missing keyframe`);const k=this.getVideoStartPts(t.samples);t.samples=t.samples.slice(x),t.dropped+=x,y+=(t.samples[0].pts-k)/t.inputTimeScale,w=y}else x===-1&&(H.warn(`[mp4-remuxer]: No keyframe found out of ${E} video samples`),p=!1);if(this.ISGenerated){if(T&&b){const k=this.getVideoStartPts(t.samples),R=(Ps(e.samples[0].pts,k)-k)/t.inputTimeScale;m+=Math.max(0,R),y+=Math.max(0,-R)}if(T){if(e.samplerate||(H.warn("[mp4-remuxer]: regenerate InitSegment as audio detected"),d=this.generateIS(e,t,r,a)),u=this.remuxAudio(e,m,this.isAudioContiguous,a,v||b||l===Ne.AUDIO?y:void 0),b){const k=u?u.endPTS-u.startPTS:0;t.inputTimeScale||(H.warn("[mp4-remuxer]: regenerate InitSegment as video detected"),d=this.generateIS(e,t,r,a)),c=this.remuxVideo(t,y,L,k)}}else b&&(c=this.remuxVideo(t,y,L,0));c&&(c.firstKeyFrame=x,c.independent=x!==-1,c.firstKeyFramePTS=w)}}return this.ISGenerated&&this._initPTS&&this._initDTS&&(s.samples.length&&(f=hb(s,r,this._initPTS,this._initDTS)),i.samples.length&&(h=fb(i,r,this._initPTS))),{audio:u,video:c,initSegment:d,independent:p,text:h,id3:f}}generateIS(e,t,s,i){const r=e.samples,a=t.samples,o=this.typeSupported,l={},c=this._initPTS;let u=!c||i,d="audio/mp4",h,f,p;if(u&&(h=f=1/0),e.config&&r.length){switch(e.timescale=e.samplerate,e.segmentCodec){case"mp3":o.mpeg?(d="audio/mpeg",e.codec=""):o.mp3&&(e.codec="mp3");break}l.audio={id:"audio",container:d,codec:e.codec,initSegment:e.segmentCodec==="mp3"&&o.mpeg?new Uint8Array(0):Z.initSegment([e]),metadata:{channelCount:e.channelCount}},u&&(p=e.inputTimeScale,!c||p!==c.timescale?h=f=r[0].pts-Math.round(p*s):u=!1)}if(t.sps&&t.pps&&a.length&&(t.timescale=t.inputTimeScale,l.video={id:"main",container:"video/mp4",codec:t.codec,initSegment:Z.initSegment([t]),metadata:{width:t.width,height:t.height}},u))if(p=t.inputTimeScale,!c||p!==c.timescale){const m=this.getVideoStartPts(a),y=Math.round(p*s);f=Math.min(f,Ps(a[0].dts,m)-y),h=Math.min(h,m-y)}else u=!1;if(Object.keys(l).length)return this.ISGenerated=!0,u?(this._initPTS={baseTime:h,timescale:p},this._initDTS={baseTime:f,timescale:p}):h=p=void 0,{tracks:l,initPTS:h,timescale:p}}remuxVideo(e,t,s,i){const r=e.inputTimeScale,a=e.samples,o=[],l=a.length,c=this._initPTS;let u=this.nextAvcDts,d=8,h=this.videoSampleDuration,f,p,m=Number.POSITIVE_INFINITY,y=Number.NEGATIVE_INFINITY,g=!1;if(!s||u===null){const V=t*r,U=a[0].pts-Ps(a[0].dts,a[0].pts);u=V-U}const v=c.baseTime*r/c.timescale;for(let V=0;V<l;V++){const U=a[V];U.pts=Ps(U.pts-v,u),U.dts=Ps(U.dts-v,u),U.dts<a[V>0?V-1:V].dts&&(g=!0)}g&&a.sort(function(V,U){const B=V.dts-U.dts,j=V.pts-U.pts;return B||j}),f=a[0].dts,p=a[a.length-1].dts;const E=p-f,T=E?Math.round(E/(l-1)):h||e.inputTimeScale/30;if(s){const V=f-u,U=V>T,B=V<-1;if((U||B)&&(U?H.warn(`AVC: ${ua(V,!0)} ms (${V}dts) hole between fragments detected, filling it`):H.warn(`AVC: ${ua(-V,!0)} ms (${V}dts) overlapping between fragments detected`),!B||u>=a[0].pts)){f=u;const j=a[0].pts-V;a[0].dts=f,a[0].pts=j,H.log(`Video: First PTS/DTS adjusted: ${ua(j,!0)}/${ua(f,!0)}, delta: ${ua(V,!0)} ms`)}}f=Math.max(0,f);let b=0,L=0;for(let V=0;V<l;V++){const U=a[V],B=U.units,j=B.length;let Y=0;for(let me=0;me<j;me++)Y+=B[me].data.length;L+=Y,b+=j,U.length=Y,U.dts=Math.max(U.dts,f),m=Math.min(U.pts,m),y=Math.max(U.pts,y)}p=a[l-1].dts;const x=L+4*b+8;let w;try{w=new Uint8Array(x)}catch(V){this.observer.emit(C.ERROR,C.ERROR,{type:Me.MUX_ERROR,details:ne.REMUX_ALLOC_ERROR,fatal:!1,error:V,bytes:x,reason:`fail allocating video mdat ${x}`});return}const k=new DataView(w.buffer);k.setUint32(0,x),w.set(Z.types.mdat,4);let R=!1,P=Number.POSITIVE_INFINITY,D=Number.POSITIVE_INFINITY,O=Number.NEGATIVE_INFINITY,N=Number.NEGATIVE_INFINITY;for(let V=0;V<l;V++){const U=a[V],B=U.units;let j=0;for(let xe=0,Le=B.length;xe<Le;xe++){const we=B[xe],Q=we.data,oe=we.data.byteLength;k.setUint32(d,oe),d+=4,w.set(Q,d),d+=oe,j+=4+oe}let Y;if(V<l-1)h=a[V+1].dts-U.dts,Y=a[V+1].pts-U.pts;else{const xe=this.config,Le=V>0?U.dts-a[V-1].dts:T;if(Y=V>0?U.pts-a[V-1].pts:T,xe.stretchShortVideoTrack&&this.nextAudioPts!==null){const we=Math.floor(xe.maxBufferHole*r),Q=(i?m+i*r:this.nextAudioPts)-U.pts;Q>we?(h=Q-Le,h<0?h=Le:R=!0,H.log(`[mp4-remuxer]: It is approximately ${Q/90} ms to the next segment; using duration ${h/90} ms for the last video frame.`)):h=Le}else h=Le}const me=Math.round(U.pts-U.dts);P=Math.min(P,h),O=Math.max(O,h),D=Math.min(D,Y),N=Math.max(N,Y),o.push(new j0(U.key,h,j,me))}if(o.length){if(jo){if(jo<70){const V=o[0].flags;V.dependsOn=2,V.isNonSync=0}}else if(Iu&&N-D<O-P&&T/O<.025&&o[0].cts===0){H.warn("Found irregular gaps in sample duration. Using PTS instead of DTS to determine MP4 sample duration.");let V=f;for(let U=0,B=o.length;U<B;U++){const j=V+o[U].duration,Y=V+o[U].cts;if(U<B-1){const me=j+o[U+1].cts;o[U].duration=me-Y}else o[U].duration=U?o[U-1].duration:T;o[U].cts=0,V=j}}}h=R||!h?T:h,this.nextAvcDts=u=p+h,this.videoSampleDuration=h,this.isVideoContiguous=!0;const $=Z.moof(e.sequenceNumber++,f,Mt({},e,{samples:o})),K="video",ee={data1:$,data2:w,startPTS:m/r,endPTS:(y+h)/r,startDTS:f/r,endDTS:u/r,type:K,hasAudio:!1,hasVideo:!0,nb:o.length,dropped:e.dropped};return e.samples=[],e.dropped=0,ee}remuxAudio(e,t,s,i,r){const a=e.inputTimeScale,o=e.samplerate?e.samplerate:a,l=a/o,c=e.segmentCodec==="aac"?$0:u$,u=c*l,d=this._initPTS,h=e.segmentCodec==="mp3"&&this.typeSupported.mpeg,f=[],p=r!==void 0;let m=e.samples,y=h?0:8,g=this.nextAudioPts||-1;const v=t*a,E=d.baseTime*a/d.timescale;if(this.isAudioContiguous=s=s||m.length&&g>0&&(i&&Math.abs(v-g)<9e3||Math.abs(Ps(m[0].pts-E,v)-g)<20*u),m.forEach(function($){$.pts=Ps($.pts-E,v)}),!s||g<0){if(m=m.filter($=>$.pts>=0),!m.length)return;r===0?g=0:i&&!p?g=Math.max(0,v):g=m[0].pts}if(e.segmentCodec==="aac"){const $=this.config.maxAudioFramesDrift;for(let K=0,ee=g;K<m.length;K++){const V=m[K],U=V.pts,B=U-ee,j=Math.abs(1e3*B/a);if(B<=-$*u&&p)K===0&&(H.warn(`Audio frame @ ${(U/a).toFixed(3)}s overlaps nextAudioPts by ${Math.round(1e3*B/a)} ms.`),this.nextAudioPts=g=ee=U);else if(B>=$*u&&j<c$&&p){let Y=Math.round(B/u);ee=U-Y*u,ee<0&&(Y--,ee+=u),K===0&&(this.nextAudioPts=g=ee),H.warn(`[mp4-remuxer]: Injecting ${Y} audio frame @ ${(ee/a).toFixed(3)}s due to ${Math.round(1e3*B/a)} ms gap.`);for(let me=0;me<Y;me++){const xe=Math.max(ee,0);let Le=U0.getSilentFrame(e.manifestCodec||e.codec,e.channelCount);Le||(H.log("[mp4-remuxer]: Unable to get silent frame for given audio codec; duplicating last frame instead."),Le=V.unit.subarray()),m.splice(K,0,{unit:Le,pts:xe}),ee+=u,K++}}V.pts=ee,ee+=u}}let T=null,b=null,L,x=0,w=m.length;for(;w--;)x+=m[w].unit.byteLength;for(let $=0,K=m.length;$<K;$++){const ee=m[$],V=ee.unit;let U=ee.pts;if(b!==null){const j=f[$-1];j.duration=Math.round((U-b)/l)}else if(s&&e.segmentCodec==="aac"&&(U=g),T=U,x>0){x+=y;try{L=new Uint8Array(x)}catch(j){this.observer.emit(C.ERROR,C.ERROR,{type:Me.MUX_ERROR,details:ne.REMUX_ALLOC_ERROR,fatal:!1,error:j,bytes:x,reason:`fail allocating audio mdat ${x}`});return}h||(new DataView(L.buffer).setUint32(0,x),L.set(Z.types.mdat,4))}else return;L.set(V,y);const B=V.byteLength;y+=B,f.push(new j0(!0,c,B,0)),b=U}const k=f.length;if(!k)return;const R=f[f.length-1];this.nextAudioPts=g=b+l*R.duration;const P=h?new Uint8Array(0):Z.moof(e.sequenceNumber++,T/l,Mt({},e,{samples:f}));e.samples=[];const D=T/a,O=g/a,N={data1:P,data2:L,startPTS:D,endPTS:O,startDTS:D,endDTS:O,type:"audio",hasAudio:!0,hasVideo:!1,nb:k};return this.isAudioContiguous=!0,N}remuxEmptyAudio(e,t,s,i){const r=e.inputTimeScale,a=e.samplerate?e.samplerate:r,o=r/a,l=this.nextAudioPts,c=this._initDTS,u=c.baseTime*9e4/c.timescale,d=(l!==null?l:i.startDTS*r)+u,h=i.endDTS*r+u,f=o*$0,p=Math.ceil((h-d)/f),m=U0.getSilentFrame(e.manifestCodec||e.codec,e.channelCount);if(H.warn("[mp4-remuxer]: remux empty Audio"),!m){H.trace("[mp4-remuxer]: Unable to remuxEmptyAudio since we were unable to get a silent frame for given audio codec");return}const y=[];for(let g=0;g<p;g++){const v=d+g*f;y.push({unit:m,pts:v,dts:v})}return e.samples=y,this.remuxAudio(e,t,s,!1)}}function Ps(n,e){let t;if(e===null)return n;for(e<n?t=-8589934592:t=8589934592;Math.abs(n-e)>4294967296;)n+=t;return n}function d$(n){for(let e=0;e<n.length;e++)if(n[e].key)return e;return-1}function hb(n,e,t,s){const i=n.samples.length;if(!i)return;const r=n.inputTimeScale;for(let o=0;o<i;o++){const l=n.samples[o];l.pts=Ps(l.pts-t.baseTime*r/t.timescale,e*r)/r,l.dts=Ps(l.dts-s.baseTime*r/s.timescale,e*r)/r}const a=n.samples;return n.samples=[],{samples:a}}function fb(n,e,t){const s=n.samples.length;if(!s)return;const i=n.inputTimeScale;for(let a=0;a<s;a++){const o=n.samples[a];o.pts=Ps(o.pts-t.baseTime*i/t.timescale,e*i)/i}n.samples.sort((a,o)=>a.pts-o.pts);const r=n.samples;return n.samples=[],{samples:r}}class j0{constructor(e,t,s,i){this.size=void 0,this.duration=void 0,this.cts=void 0,this.flags=void 0,this.duration=t,this.size=s,this.cts=i,this.flags=new h$(e)}}class h${constructor(e){this.isLeading=0,this.isDependedOn=0,this.hasRedundancy=0,this.degradPrio=0,this.dependsOn=1,this.isNonSync=1,this.dependsOn=e?2:1,this.isNonSync=e?0:1}}class f${constructor(){this.emitInitSegment=!1,this.audioCodec=void 0,this.videoCodec=void 0,this.initData=void 0,this.initPTS=null,this.initTracks=void 0,this.lastEndTime=null}destroy(){}resetTimeStamp(e){this.initPTS=e,this.lastEndTime=null}resetNextTimestamp(){this.lastEndTime=null}resetInitSegment(e,t,s,i){this.audioCodec=t,this.videoCodec=s,this.generateInitSegment(P5(e,i)),this.emitInitSegment=!0}generateInitSegment(e){let{audioCodec:t,videoCodec:s}=this;if(!(e!=null&&e.byteLength)){this.initTracks=void 0,this.initData=void 0;return}const i=this.initData=GT(e);t||(t=G0(i.audio,at.AUDIO)),s||(s=G0(i.video,at.VIDEO));const r={};i.audio&&i.video?r.audiovideo={container:"video/mp4",codec:t+","+s,initSegment:e,id:"main"}:i.audio?r.audio={container:"audio/mp4",codec:t,initSegment:e,id:"audio"}:i.video?r.video={container:"video/mp4",codec:s,initSegment:e,id:"main"}:H.warn("[passthrough-remuxer.ts]: initSegment does not contain moov or trak boxes."),this.initTracks=r}remux(e,t,s,i,r,a){var o,l;let{initPTS:c,lastEndTime:u}=this;const d={audio:void 0,video:void 0,text:i,id3:s,initSegment:void 0};Ce(u)||(u=this.lastEndTime=r||0);const h=t.samples;if(!(h!=null&&h.length))return d;const f={initPTS:void 0,timescale:1};let p=this.initData;if((o=p)!=null&&o.length||(this.generateInitSegment(h),p=this.initData),!((l=p)!=null&&l.length))return H.warn("[passthrough-remuxer.ts]: Failed to generate initSegment."),d;this.emitInitSegment&&(f.tracks=this.initTracks,this.emitInitSegment=!1);const m=M5(h,p),y=O5(p,h),g=y===null?r:y;(p$(c,g,r,m)||f.timescale!==c.timescale&&a)&&(f.initPTS=g-r,c&&c.timescale===1&&H.warn(`Adjusting initPTS by ${f.initPTS-c.baseTime}`),this.initPTS=c={baseTime:f.initPTS,timescale:1});const v=e?g-c.baseTime/c.timescale:u,E=v+m;N5(p,h,c.baseTime/c.timescale),m>0?this.lastEndTime=E:(H.warn("Duration parsed from mp4 should be greater than zero"),this.resetNextTimestamp());const T=!!p.audio,b=!!p.video;let L="";T&&(L+="audio"),b&&(L+="video");const x={data1:h,startPTS:v,startDTS:v,endPTS:E,endDTS:E,type:L,hasAudio:T,hasVideo:b,nb:1,dropped:0};return d.audio=x.type==="audio"?x:void 0,d.video=x.type!=="audio"?x:void 0,d.initSegment=f,d.id3=hb(s,r,c,c),i.samples.length&&(d.text=fb(i,r,c)),d}}function p$(n,e,t,s){if(n===null)return!0;const i=Math.max(s,1),r=e-n.baseTime/n.timescale;return Math.abs(r-t)>i}function G0(n,e){const t=n==null?void 0:n.codec;return t&&t.length>4?t:t==="hvc1"||t==="hev1"?"hvc1.1.6.L120.90":t==="av01"?"av01.0.04M.08":t==="avc1"||e===at.VIDEO?"avc1.42e01e":"mp4a.40.5"}let On;try{On=self.performance.now.bind(self.performance)}catch{H.debug("Unable to use Performance API on this environment"),On=typeof self<"u"&&self.Date.now}const Du=[{demux:X8,remux:f$},{demux:oi,remux:Cu},{demux:Y8,remux:Cu},{demux:a$,remux:Cu}];class V0{constructor(e,t,s,i,r){this.async=!1,this.observer=void 0,this.typeSupported=void 0,this.config=void 0,this.vendor=void 0,this.id=void 0,this.demuxer=void 0,this.remuxer=void 0,this.decrypter=void 0,this.probe=void 0,this.decryptionPromise=null,this.transmuxConfig=void 0,this.currentTransmuxState=void 0,this.observer=e,this.typeSupported=t,this.config=s,this.vendor=i,this.id=r}configure(e){this.transmuxConfig=e,this.decrypter&&this.decrypter.reset()}push(e,t,s,i){const r=s.transmuxing;r.executeStart=On();let a=new Uint8Array(e);const{currentTransmuxState:o,transmuxConfig:l}=this;i&&(this.currentTransmuxState=i);const{contiguous:c,discontinuity:u,trackSwitch:d,accurateTimeOffset:h,timeOffset:f,initSegmentChange:p}=i||o,{audioCodec:m,videoCodec:y,defaultInitPts:g,duration:v,initSegmentData:E}=l,T=m$(a,t);if(T&&T.method==="AES-128"){const w=this.getDecrypter();if(w.isSync()){let k=w.softwareDecrypt(a,T.key.buffer,T.iv.buffer);if(s.part>-1&&(k=w.flush()),!k)return r.executeEnd=On(),ku(s);a=new Uint8Array(k)}else return this.decryptionPromise=w.webCryptoDecrypt(a,T.key.buffer,T.iv.buffer).then(k=>{const R=this.push(k,null,s);return this.decryptionPromise=null,R}),this.decryptionPromise}const b=this.needsProbing(u,d);if(b){const w=this.configureTransmuxer(a);if(w)return H.warn(`[transmuxer] ${w.message}`),this.observer.emit(C.ERROR,C.ERROR,{type:Me.MEDIA_ERROR,details:ne.FRAG_PARSING_ERROR,fatal:!1,error:w,reason:w.message}),r.executeEnd=On(),ku(s)}(u||d||p||b)&&this.resetInitSegment(E,m,y,v,t),(u||p||b)&&this.resetInitialTimestamp(g),c||this.resetContiguity();const L=this.transmux(a,T,f,h,s),x=this.currentTransmuxState;return x.contiguous=!0,x.discontinuity=!1,x.trackSwitch=!1,r.executeEnd=On(),L}flush(e){const t=e.transmuxing;t.executeStart=On();const{decrypter:s,currentTransmuxState:i,decryptionPromise:r}=this;if(r)return r.then(()=>this.flush(e));const a=[],{timeOffset:o}=i;if(s){const d=s.flush();d&&a.push(this.push(d,null,e))}const{demuxer:l,remuxer:c}=this;if(!l||!c)return t.executeEnd=On(),[ku(e)];const u=l.flush(o);return rl(u)?u.then(d=>(this.flushRemux(a,d,e),a)):(this.flushRemux(a,u,e),a)}flushRemux(e,t,s){const{audioTrack:i,videoTrack:r,id3Track:a,textTrack:o}=t,{accurateTimeOffset:l,timeOffset:c}=this.currentTransmuxState;H.log(`[transmuxer.ts]: Flushed fragment ${s.sn}${s.part>-1?" p: "+s.part:""} of level ${s.level}`);const u=this.remuxer.remux(i,r,a,o,c,l,!0,this.id);e.push({remuxResult:u,chunkMeta:s}),s.transmuxing.executeEnd=On()}resetInitialTimestamp(e){const{demuxer:t,remuxer:s}=this;!t||!s||(t.resetTimeStamp(e),s.resetTimeStamp(e))}resetContiguity(){const{demuxer:e,remuxer:t}=this;!e||!t||(e.resetContiguity(),t.resetNextTimestamp())}resetInitSegment(e,t,s,i,r){const{demuxer:a,remuxer:o}=this;!a||!o||(a.resetInitSegment(e,t,s,i),o.resetInitSegment(e,t,s,r))}destroy(){this.demuxer&&(this.demuxer.destroy(),this.demuxer=void 0),this.remuxer&&(this.remuxer.destroy(),this.remuxer=void 0)}transmux(e,t,s,i,r){let a;return t&&t.method==="SAMPLE-AES"?a=this.transmuxSampleAes(e,t,s,i,r):a=this.transmuxUnencrypted(e,s,i,r),a}transmuxUnencrypted(e,t,s,i){const{audioTrack:r,videoTrack:a,id3Track:o,textTrack:l}=this.demuxer.demux(e,t,!1,!this.config.progressive);return{remuxResult:this.remuxer.remux(r,a,o,l,t,s,!1,this.id),chunkMeta:i}}transmuxSampleAes(e,t,s,i,r){return this.demuxer.demuxSampleAes(e,t,s).then(a=>({remuxResult:this.remuxer.remux(a.audioTrack,a.videoTrack,a.id3Track,a.textTrack,s,i,!1,this.id),chunkMeta:r}))}configureTransmuxer(e){const{config:t,observer:s,typeSupported:i,vendor:r}=this;let a;for(let d=0,h=Du.length;d<h;d++)if(Du[d].demux.probe(e)){a=Du[d];break}if(!a)return new Error("Failed to find demuxer by probing fragment data");const o=this.demuxer,l=this.remuxer,c=a.remux,u=a.demux;(!l||!(l instanceof c))&&(this.remuxer=new c(s,t,i,r)),(!o||!(o instanceof u))&&(this.demuxer=new u(s,t,i),this.probe=u.probe)}needsProbing(e,t){return!this.demuxer||!this.remuxer||e||t}getDecrypter(){let e=this.decrypter;return e||(e=this.decrypter=new Bf(this.config)),e}}function m$(n,e){let t=null;return n.byteLength>0&&e!=null&&e.key!=null&&e.iv!==null&&e.method!=null&&(t=e),t}const ku=n=>({remuxResult:{},chunkMeta:n});function rl(n){return"then"in n&&n.then instanceof Function}class g${constructor(e,t,s,i,r){this.audioCodec=void 0,this.videoCodec=void 0,this.initSegmentData=void 0,this.duration=void 0,this.defaultInitPts=void 0,this.audioCodec=e,this.videoCodec=t,this.initSegmentData=s,this.duration=i,this.defaultInitPts=r||null}}class y${constructor(e,t,s,i,r,a){this.discontinuity=void 0,this.contiguous=void 0,this.accurateTimeOffset=void 0,this.trackSwitch=void 0,this.timeOffset=void 0,this.initSegmentChange=void 0,this.discontinuity=e,this.contiguous=t,this.accurateTimeOffset=s,this.trackSwitch=i,this.timeOffset=r,this.initSegmentChange=a}}var pb={exports:{}};(function(n){var e=Object.prototype.hasOwnProperty,t="~";function s(){}Object.create&&(s.prototype=Object.create(null),new s().__proto__||(t=!1));function i(l,c,u){this.fn=l,this.context=c,this.once=u||!1}function r(l,c,u,d,h){if(typeof u!="function")throw new TypeError("The listener must be a function");var f=new i(u,d||l,h),p=t?t+c:c;return l._events[p]?l._events[p].fn?l._events[p]=[l._events[p],f]:l._events[p].push(f):(l._events[p]=f,l._eventsCount++),l}function a(l,c){--l._eventsCount===0?l._events=new s:delete l._events[c]}function o(){this._events=new s,this._eventsCount=0}o.prototype.eventNames=function(){var l=[],c,u;if(this._eventsCount===0)return l;for(u in c=this._events)e.call(c,u)&&l.push(t?u.slice(1):u);return Object.getOwnPropertySymbols?l.concat(Object.getOwnPropertySymbols(c)):l},o.prototype.listeners=function(l){var c=t?t+l:l,u=this._events[c];if(!u)return[];if(u.fn)return[u.fn];for(var d=0,h=u.length,f=new Array(h);d<h;d++)f[d]=u[d].fn;return f},o.prototype.listenerCount=function(l){var c=t?t+l:l,u=this._events[c];return u?u.fn?1:u.length:0},o.prototype.emit=function(l,c,u,d,h,f){var p=t?t+l:l;if(!this._events[p])return!1;var m=this._events[p],y=arguments.length,g,v;if(m.fn){switch(m.once&&this.removeListener(l,m.fn,void 0,!0),y){case 1:return m.fn.call(m.context),!0;case 2:return m.fn.call(m.context,c),!0;case 3:return m.fn.call(m.context,c,u),!0;case 4:return m.fn.call(m.context,c,u,d),!0;case 5:return m.fn.call(m.context,c,u,d,h),!0;case 6:return m.fn.call(m.context,c,u,d,h,f),!0}for(v=1,g=new Array(y-1);v<y;v++)g[v-1]=arguments[v];m.fn.apply(m.context,g)}else{var E=m.length,T;for(v=0;v<E;v++)switch(m[v].once&&this.removeListener(l,m[v].fn,void 0,!0),y){case 1:m[v].fn.call(m[v].context);break;case 2:m[v].fn.call(m[v].context,c);break;case 3:m[v].fn.call(m[v].context,c,u);break;case 4:m[v].fn.call(m[v].context,c,u,d);break;default:if(!g)for(T=1,g=new Array(y-1);T<y;T++)g[T-1]=arguments[T];m[v].fn.apply(m[v].context,g)}}return!0},o.prototype.on=function(l,c,u){return r(this,l,c,u,!1)},o.prototype.once=function(l,c,u){return r(this,l,c,u,!0)},o.prototype.removeListener=function(l,c,u,d){var h=t?t+l:l;if(!this._events[h])return this;if(!c)return a(this,h),this;var f=this._events[h];if(f.fn)f.fn===c&&(!d||f.once)&&(!u||f.context===u)&&a(this,h);else{for(var p=0,m=[],y=f.length;p<y;p++)(f[p].fn!==c||d&&!f[p].once||u&&f[p].context!==u)&&m.push(f[p]);m.length?this._events[h]=m.length===1?m[0]:m:a(this,h)}return this},o.prototype.removeAllListeners=function(l){var c;return l?(c=t?t+l:l,this._events[c]&&a(this,c)):(this._events=new s,this._eventsCount=0),this},o.prototype.off=o.prototype.removeListener,o.prototype.addListener=o.prototype.on,o.prefixed=t,o.EventEmitter=o,n.exports=o})(pb);var v$=pb.exports,Vf=n5(v$);const Pu=bc()||{isTypeSupported:()=>!1};class mb{constructor(e,t,s,i){this.error=null,this.hls=void 0,this.id=void 0,this.observer=void 0,this.frag=null,this.part=null,this.useWorker=void 0,this.workerContext=null,this.onwmsg=void 0,this.transmuxer=null,this.onTransmuxComplete=void 0,this.onFlush=void 0;const r=e.config;this.hls=e,this.id=t,this.useWorker=!!r.enableWorker,this.onTransmuxComplete=s,this.onFlush=i;const a=(c,u)=>{u=u||{},u.frag=this.frag,u.id=this.id,c===C.ERROR&&(this.error=u.error),this.hls.trigger(c,u)};this.observer=new Vf,this.observer.on(C.FRAG_DECRYPTED,a),this.observer.on(C.ERROR,a);const o={mp4:Pu.isTypeSupported("video/mp4"),mpeg:Pu.isTypeSupported("audio/mpeg"),mp3:Pu.isTypeSupported('audio/mp4; codecs="mp3"')},l=navigator.vendor;if(this.useWorker&&typeof Worker<"u"&&(r.workerPath||U8())){try{r.workerPath?(H.log(`loading Web Worker ${r.workerPath} for "${t}"`),this.workerContext=j8(r.workerPath)):(H.log(`injecting Web Worker for "${t}"`),this.workerContext=$8()),this.onwmsg=u=>this.onWorkerMessage(u);const{worker:c}=this.workerContext;c.addEventListener("message",this.onwmsg),c.onerror=u=>{const d=new Error(`${u.message}  (${u.filename}:${u.lineno})`);r.enableWorker=!1,H.warn(`Error in "${t}" Web Worker, fallback to inline`),this.hls.trigger(C.ERROR,{type:Me.OTHER_ERROR,details:ne.INTERNAL_EXCEPTION,fatal:!1,event:"demuxerWorker",error:d})},c.postMessage({cmd:"init",typeSupported:o,vendor:l,id:t,config:JSON.stringify(r)})}catch(c){H.warn(`Error setting up "${t}" Web Worker, fallback to inline`,c),this.resetWorker(),this.error=null,this.transmuxer=new V0(this.observer,o,r,l,t)}return}this.transmuxer=new V0(this.observer,o,r,l,t)}resetWorker(){if(this.workerContext){const{worker:e,objectURL:t}=this.workerContext;t&&self.URL.revokeObjectURL(t),e.removeEventListener("message",this.onwmsg),e.onerror=null,e.terminate(),this.workerContext=null}}destroy(){if(this.workerContext)this.resetWorker(),this.onwmsg=void 0;else{const t=this.transmuxer;t&&(t.destroy(),this.transmuxer=null)}const e=this.observer;e&&e.removeAllListeners(),this.frag=null,this.observer=null,this.hls=null}push(e,t,s,i,r,a,o,l,c,u){var d,h;c.transmuxing.start=self.performance.now();const{transmuxer:f}=this,p=a?a.start:r.start,m=r.decryptdata,y=this.frag,g=!(y&&r.cc===y.cc),v=!(y&&c.level===y.level),E=y?c.sn-y.sn:-1,T=this.part?c.part-this.part.index:-1,b=E===0&&c.id>1&&c.id===(y==null?void 0:y.stats.chunkCount),L=!v&&(E===1||E===0&&(T===1||b&&T<=0)),x=self.performance.now();(v||E||r.stats.parsing.start===0)&&(r.stats.parsing.start=x),a&&(T||!L)&&(a.stats.parsing.start=x);const w=!(y&&((d=r.initSegment)==null?void 0:d.url)===((h=y.initSegment)==null?void 0:h.url)),k=new y$(g,L,l,v,p,w);if(!L||g||w){H.log(`[transmuxer-interface, ${r.type}]: Starting new transmux session for sn: ${c.sn} p: ${c.part} level: ${c.level} id: ${c.id}
        discontinuity: ${g}
        trackSwitch: ${v}
        contiguous: ${L}
        accurateTimeOffset: ${l}
        timeOffset: ${p}
        initSegmentChange: ${w}`);const R=new g$(s,i,t,o,u);this.configureTransmuxer(R)}if(this.frag=r,this.part=a,this.workerContext)this.workerContext.worker.postMessage({cmd:"demux",data:e,decryptdata:m,chunkMeta:c,state:k},e instanceof ArrayBuffer?[e]:[]);else if(f){const R=f.push(e,m,c,k);rl(R)?(f.async=!0,R.then(P=>{this.handleTransmuxComplete(P)}).catch(P=>{this.transmuxerError(P,c,"transmuxer-interface push error")})):(f.async=!1,this.handleTransmuxComplete(R))}}flush(e){e.transmuxing.start=self.performance.now();const{transmuxer:t}=this;if(this.workerContext)this.workerContext.worker.postMessage({cmd:"flush",chunkMeta:e});else if(t){let s=t.flush(e);rl(s)||t.async?(rl(s)||(s=Promise.resolve(s)),s.then(i=>{this.handleFlushResult(i,e)}).catch(i=>{this.transmuxerError(i,e,"transmuxer-interface flush error")})):this.handleFlushResult(s,e)}}transmuxerError(e,t,s){this.hls&&(this.error=e,this.hls.trigger(C.ERROR,{type:Me.MEDIA_ERROR,details:ne.FRAG_PARSING_ERROR,chunkMeta:t,fatal:!1,error:e,err:e,reason:s}))}handleFlushResult(e,t){e.forEach(s=>{this.handleTransmuxComplete(s)}),this.onFlush(t)}onWorkerMessage(e){const t=e.data,s=this.hls;switch(t.event){case"init":{var i;const r=(i=this.workerContext)==null?void 0:i.objectURL;r&&self.URL.revokeObjectURL(r);break}case"transmuxComplete":{this.handleTransmuxComplete(t.data);break}case"flush":{this.onFlush(t.data);break}case"workerLog":H[t.data.logType]&&H[t.data.logType](t.data.message);break;default:{t.data=t.data||{},t.data.frag=this.frag,t.data.id=this.id,s.trigger(t.event,t.data);break}}}configureTransmuxer(e){const{transmuxer:t}=this;this.workerContext?this.workerContext.worker.postMessage({cmd:"configure",config:e}):t&&t.configure(e)}handleTransmuxComplete(e){e.chunkMeta.transmuxing.end=self.performance.now(),this.onTransmuxComplete(e)}}const E$=250,Ou=2,T$=.1,b$=.05;class x${constructor(e,t,s,i){this.config=void 0,this.media=null,this.fragmentTracker=void 0,this.hls=void 0,this.nudgeRetry=0,this.stallReported=!1,this.stalled=null,this.moved=!1,this.seeking=!1,this.config=e,this.media=t,this.fragmentTracker=s,this.hls=i}destroy(){this.media=null,this.hls=this.fragmentTracker=null}poll(e,t){const{config:s,media:i,stalled:r}=this;if(i===null)return;const{currentTime:a,seeking:o}=i,l=this.seeking&&!o,c=!this.seeking&&o;if(this.seeking=o,a!==e){if(this.moved=!0,r!==null){if(this.stallReported){const g=self.performance.now()-r;H.warn(`playback not stuck anymore @${a}, after ${Math.round(g)}ms`),this.stallReported=!1}this.stalled=null,this.nudgeRetry=0}return}if(c||l){this.stalled=null;return}if(i.paused&&!o||i.ended||i.playbackRate===0||!ht.getBuffered(i).length)return;const u=ht.bufferInfo(i,a,0),d=u.len>0,h=u.nextStart||0;if(!d&&!h)return;if(o){const g=u.len>Ou,v=!h||t&&t.start<=a||h-a>Ou&&!this.fragmentTracker.getPartialFragment(a);if(g||v)return;this.moved=!1}if(!this.moved&&this.stalled!==null){var f;const g=Math.max(h,u.start||0)-a,v=this.hls.levels?this.hls.levels[this.hls.currentLevel]:null,E=!(v==null||(f=v.details)==null)&&f.live?v.details.targetduration*2:Ou,T=this.fragmentTracker.getPartialFragment(a);if(g>0&&(g<=E||T)){this._trySkipBufferHole(T);return}}const p=self.performance.now();if(r===null){this.stalled=p;return}const m=p-r;if(!o&&m>=E$&&(this._reportStall(u),!this.media))return;const y=ht.bufferInfo(i,a,s.maxBufferHole);this._tryFixBufferStall(y,m)}_tryFixBufferStall(e,t){const{config:s,fragmentTracker:i,media:r}=this;if(r===null)return;const a=r.currentTime,o=i.getPartialFragment(a);o&&(this._trySkipBufferHole(o)||!this.media)||(e.len>s.maxBufferHole||e.nextStart&&e.nextStart-a<s.maxBufferHole)&&t>s.highBufferWatchdogPeriod*1e3&&(H.warn("Trying to nudge playhead over buffer-hole"),this.stalled=null,this._tryNudgeBuffer())}_reportStall(e){const{hls:t,media:s,stallReported:i}=this;if(!i&&s){this.stallReported=!0;const r=new Error(`Playback stalling at @${s.currentTime} due to low buffer (${JSON.stringify(e)})`);H.warn(r.message),t.trigger(C.ERROR,{type:Me.MEDIA_ERROR,details:ne.BUFFER_STALLED_ERROR,fatal:!1,error:r,buffer:e.len})}}_trySkipBufferHole(e){const{config:t,hls:s,media:i}=this;if(i===null)return 0;const r=i.currentTime,a=ht.bufferInfo(i,r,0),o=r<a.start?a.start:a.nextStart;if(o){const l=a.len<=t.maxBufferHole,c=a.len>0&&a.len<1&&i.readyState<3,u=o-r;if(u>0&&(l||c)){if(u>t.maxBufferHole){const{fragmentTracker:h}=this;let f=!1;if(r===0){const p=h.getAppendedFrag(0,Ne.MAIN);p&&o<p.end&&(f=!0)}if(!f){const p=e||h.getAppendedFrag(r,Ne.MAIN);if(p){let m=!1,y=p.end;for(;y<o;){const g=h.getPartialFragment(y);if(g)y+=g.duration;else{m=!0;break}}if(m)return 0}}}const d=Math.max(o+b$,r+T$);if(H.warn(`skipping hole, adjusting currentTime from ${r} to ${d}`),this.moved=!0,this.stalled=null,i.currentTime=d,e&&!e.gap){const h=new Error(`fragment loaded with buffer holes, seeking from ${r} to ${d}`);s.trigger(C.ERROR,{type:Me.MEDIA_ERROR,details:ne.BUFFER_SEEK_OVER_HOLE,fatal:!1,error:h,reason:h.message,frag:e})}return d}}return 0}_tryNudgeBuffer(){const{config:e,hls:t,media:s,nudgeRetry:i}=this;if(s===null)return;const r=s.currentTime;if(this.nudgeRetry++,i<e.nudgeMaxRetry){const a=r+(i+1)*e.nudgeOffset,o=new Error(`Nudging 'currentTime' from ${r} to ${a}`);H.warn(o.message),s.currentTime=a,t.trigger(C.ERROR,{type:Me.MEDIA_ERROR,details:ne.BUFFER_NUDGE_ON_STALL,error:o,fatal:!1})}else{const a=new Error(`Playhead still not moving while enough data buffered @${r} after ${e.nudgeMaxRetry} nudges`);H.error(a.message),t.trigger(C.ERROR,{type:Me.MEDIA_ERROR,details:ne.BUFFER_STALLED_ERROR,error:a,fatal:!0})}}}const S$=100;class _$ extends Uf{constructor(e,t,s){super(e,t,s,"[stream-controller]",Ne.MAIN),this.audioCodecSwap=!1,this.gapController=null,this.level=-1,this._forceStartLoad=!1,this.altAudio=!1,this.audioOnly=!1,this.fragPlaying=null,this.onvplaying=null,this.onvseeked=null,this.fragLastKbps=0,this.couldBacktrack=!1,this.backtrackFragment=null,this.audioCodecSwitch=!1,this.videoBuffer=null,this._registerListeners()}_registerListeners(){const{hls:e}=this;e.on(C.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(C.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(C.MANIFEST_LOADING,this.onManifestLoading,this),e.on(C.MANIFEST_PARSED,this.onManifestParsed,this),e.on(C.LEVEL_LOADING,this.onLevelLoading,this),e.on(C.LEVEL_LOADED,this.onLevelLoaded,this),e.on(C.FRAG_LOAD_EMERGENCY_ABORTED,this.onFragLoadEmergencyAborted,this),e.on(C.ERROR,this.onError,this),e.on(C.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),e.on(C.AUDIO_TRACK_SWITCHED,this.onAudioTrackSwitched,this),e.on(C.BUFFER_CREATED,this.onBufferCreated,this),e.on(C.BUFFER_FLUSHED,this.onBufferFlushed,this),e.on(C.LEVELS_UPDATED,this.onLevelsUpdated,this),e.on(C.FRAG_BUFFERED,this.onFragBuffered,this)}_unregisterListeners(){const{hls:e}=this;e.off(C.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(C.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(C.MANIFEST_LOADING,this.onManifestLoading,this),e.off(C.MANIFEST_PARSED,this.onManifestParsed,this),e.off(C.LEVEL_LOADED,this.onLevelLoaded,this),e.off(C.FRAG_LOAD_EMERGENCY_ABORTED,this.onFragLoadEmergencyAborted,this),e.off(C.ERROR,this.onError,this),e.off(C.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),e.off(C.AUDIO_TRACK_SWITCHED,this.onAudioTrackSwitched,this),e.off(C.BUFFER_CREATED,this.onBufferCreated,this),e.off(C.BUFFER_FLUSHED,this.onBufferFlushed,this),e.off(C.LEVELS_UPDATED,this.onLevelsUpdated,this),e.off(C.FRAG_BUFFERED,this.onFragBuffered,this)}onHandlerDestroying(){this._unregisterListeners(),this.onMediaDetaching()}startLoad(e){if(this.levels){const{lastCurrentTime:t,hls:s}=this;if(this.stopLoad(),this.setInterval(S$),this.level=-1,!this.startFragRequested){let i=s.startLevel;i===-1&&(s.config.testBandwidth&&this.levels.length>1?(i=0,this.bitrateTest=!0):i=s.nextAutoLevel),this.level=s.nextLoadLevel=i,this.loadedmetadata=!1}t>0&&e===-1&&(this.log(`Override startPosition with lastCurrentTime @${t.toFixed(3)}`),e=t),this.state=ae.IDLE,this.nextLoadPosition=this.startPosition=this.lastCurrentTime=e,this.tick()}else this._forceStartLoad=!0,this.state=ae.STOPPED}stopLoad(){this._forceStartLoad=!1,super.stopLoad()}doTick(){switch(this.state){case ae.WAITING_LEVEL:{var e;const{levels:s,level:i}=this,r=s==null||(e=s[i])==null?void 0:e.details;if(r&&(!r.live||this.levelLastLoaded===this.level)){if(this.waitForCdnTuneIn(r))break;this.state=ae.IDLE;break}else if(this.hls.nextLoadLevel!==this.level){this.state=ae.IDLE;break}break}case ae.FRAG_LOADING_WAITING_RETRY:{var t;const s=self.performance.now(),i=this.retryDate;(!i||s>=i||(t=this.media)!=null&&t.seeking)&&(this.resetStartWhenNotLoaded(this.level),this.state=ae.IDLE)}break}this.state===ae.IDLE&&this.doTickIdle(),this.onTickEnd()}onTickEnd(){super.onTickEnd(),this.checkBuffer(),this.checkFragmentChanged()}doTickIdle(){const{hls:e,levelLastLoaded:t,levels:s,media:i}=this,{config:r,nextLoadLevel:a}=e;if(t===null||!i&&(this.startFragRequested||!r.startFragPrefetch)||this.altAudio&&this.audioOnly||!(s!=null&&s[a]))return;const o=s[a],l=this.getMainFwdBufferInfo();if(l===null)return;const c=this.getLevelDetails();if(c&&this._streamEnded(l,c)){const y={};this.altAudio&&(y.type="video"),this.hls.trigger(C.BUFFER_EOS,y),this.state=ae.ENDED;return}e.loadLevel!==a&&e.manualLevel===-1&&this.log(`Adapting to level ${a} from level ${this.level}`),this.level=e.nextLoadLevel=a;const u=o.details;if(!u||this.state===ae.WAITING_LEVEL||u.live&&this.levelLastLoaded!==a){this.level=a,this.state=ae.WAITING_LEVEL;return}const d=l.len,h=this.getMaxBufferLength(o.maxBitrate);if(d>=h)return;this.backtrackFragment&&this.backtrackFragment.start>l.end&&(this.backtrackFragment=null);const f=this.backtrackFragment?this.backtrackFragment.start:l.end;let p=this.getNextFragment(f,u);if(this.couldBacktrack&&!this.fragPrevious&&p&&p.sn!=="initSegment"&&this.fragmentTracker.getState(p)!==Ut.OK){var m;const y=((m=this.backtrackFragment)!=null?m:p).sn-u.startSN,g=u.fragments[y-1];g&&p.cc===g.cc&&(p=g,this.fragmentTracker.removeFragment(g))}else this.backtrackFragment&&l.len&&(this.backtrackFragment=null);if(p&&this.isLoopLoading(p,f)){if(!p.gap){const y=this.audioOnly&&!this.altAudio?at.AUDIO:at.VIDEO,g=(y===at.VIDEO?this.videoBuffer:this.mediaBuffer)||this.media;g&&this.afterBufferFlushed(g,y,Ne.MAIN)}p=this.getNextFragmentLoopLoading(p,u,l,Ne.MAIN,h)}p&&(p.initSegment&&!p.initSegment.data&&!this.bitrateTest&&(p=p.initSegment),this.loadFragment(p,o,f))}loadFragment(e,t,s){const i=this.fragmentTracker.getState(e);this.fragCurrent=e,i===Ut.NOT_LOADED||i===Ut.PARTIAL?e.sn==="initSegment"?this._loadInitSegment(e,t):this.bitrateTest?(this.log(`Fragment ${e.sn} of level ${e.level} is being downloaded to test bitrate and will not be buffered`),this._loadBitrateTestFrag(e,t)):(this.startFragRequested=!0,super.loadFragment(e,t,s)):this.clearTrackerIfNeeded(e)}getBufferedFrag(e){return this.fragmentTracker.getBufferedFrag(e,Ne.MAIN)}followingBufferedFrag(e){return e?this.getBufferedFrag(e.end+.5):null}immediateLevelSwitch(){this.abortCurrentFrag(),this.flushMainBuffer(0,Number.POSITIVE_INFINITY)}nextLevelSwitch(){const{levels:e,media:t}=this;if(t!=null&&t.readyState){let s;const i=this.getAppendedFrag(t.currentTime);i&&i.start>1&&this.flushMainBuffer(0,i.start-1);const r=this.getLevelDetails();if(r!=null&&r.live){const o=this.getMainFwdBufferInfo();if(!o||o.len<r.targetduration*2)return}if(!t.paused&&e){const o=this.hls.nextLoadLevel,l=e[o],c=this.fragLastKbps;c&&this.fragCurrent?s=this.fragCurrent.duration*l.maxBitrate/(1e3*c)+1:s=0}else s=0;const a=this.getBufferedFrag(t.currentTime+s);if(a){const o=this.followingBufferedFrag(a);if(o){this.abortCurrentFrag();const l=o.maxStartPTS?o.maxStartPTS:o.start,c=o.duration,u=Math.max(a.end,l+Math.min(Math.max(c-this.config.maxFragLookUpTolerance,c*.5),c*.75));this.flushMainBuffer(u,Number.POSITIVE_INFINITY)}}}}abortCurrentFrag(){const e=this.fragCurrent;switch(this.fragCurrent=null,this.backtrackFragment=null,e&&(e.abortRequests(),this.fragmentTracker.removeFragment(e)),this.state){case ae.KEY_LOADING:case ae.FRAG_LOADING:case ae.FRAG_LOADING_WAITING_RETRY:case ae.PARSING:case ae.PARSED:this.state=ae.IDLE;break}this.nextLoadPosition=this.getLoadPosition()}flushMainBuffer(e,t){super.flushMainBuffer(e,t,this.altAudio?"video":null)}onMediaAttached(e,t){super.onMediaAttached(e,t);const s=t.media;this.onvplaying=this.onMediaPlaying.bind(this),this.onvseeked=this.onMediaSeeked.bind(this),s.addEventListener("playing",this.onvplaying),s.addEventListener("seeked",this.onvseeked),this.gapController=new x$(this.config,s,this.fragmentTracker,this.hls)}onMediaDetaching(){const{media:e}=this;e&&this.onvplaying&&this.onvseeked&&(e.removeEventListener("playing",this.onvplaying),e.removeEventListener("seeked",this.onvseeked),this.onvplaying=this.onvseeked=null,this.videoBuffer=null),this.fragPlaying=null,this.gapController&&(this.gapController.destroy(),this.gapController=null),super.onMediaDetaching()}onMediaPlaying(){this.tick()}onMediaSeeked(){const e=this.media,t=e?e.currentTime:null;Ce(t)&&this.log(`Media seeked to ${t.toFixed(3)}`);const s=this.getMainFwdBufferInfo();if(s===null||s.len===0){this.warn(`Main forward buffer length on "seeked" event ${s?s.len:"empty"})`);return}this.tick()}onManifestLoading(){this.log("Trigger BUFFER_RESET"),this.hls.trigger(C.BUFFER_RESET,void 0),this.fragmentTracker.removeAllFragments(),this.couldBacktrack=!1,this.startPosition=this.lastCurrentTime=0,this.levels=this.fragPlaying=this.backtrackFragment=null,this.altAudio=this.audioOnly=!1}onManifestParsed(e,t){let s=!1,i=!1,r;t.levels.forEach(a=>{r=a.audioCodec,r&&(r.indexOf("mp4a.40.2")!==-1&&(s=!0),r.indexOf("mp4a.40.5")!==-1&&(i=!0))}),this.audioCodecSwitch=s&&i&&!B8(),this.audioCodecSwitch&&this.log("Both AAC/HE-AAC audio found in levels; declaring level codec as HE-AAC"),this.levels=t.levels,this.startFragRequested=!1}onLevelLoading(e,t){const{levels:s}=this;if(!s||this.state!==ae.IDLE)return;const i=s[t.level];(!i.details||i.details.live&&this.levelLastLoaded!==t.level||this.waitForCdnTuneIn(i.details))&&(this.state=ae.WAITING_LEVEL)}onLevelLoaded(e,t){var s;const{levels:i}=this,r=t.level,a=t.details,o=a.totalduration;if(!i){this.warn(`Levels were reset while loading level ${r}`);return}this.log(`Level ${r} loaded [${a.startSN},${a.endSN}]${a.lastPartSn?`[part-${a.lastPartSn}-${a.lastPartIndex}]`:""}, cc [${a.startCC}, ${a.endCC}] duration:${o}`);const l=i[r],c=this.fragCurrent;c&&(this.state===ae.FRAG_LOADING||this.state===ae.FRAG_LOADING_WAITING_RETRY)&&(c.level!==t.level||c.urlId!==l.urlId)&&c.loader&&this.abortCurrentFrag();let u=0;if(a.live||(s=l.details)!=null&&s.live){if(this.checkLiveUpdate(a),a.deltaUpdateFailed)return;u=this.alignPlaylists(a,l.details)}if(l.details=a,this.levelLastLoaded=r,this.hls.trigger(C.LEVEL_UPDATED,{details:a,level:r}),this.state===ae.WAITING_LEVEL){if(this.waitForCdnTuneIn(a))return;this.state=ae.IDLE}this.startFragRequested?a.live&&this.synchronizeToLiveEdge(a):this.setStartPosition(a,u),this.tick()}_handleFragmentLoadProgress(e){var t;const{frag:s,part:i,payload:r}=e,{levels:a}=this;if(!a){this.warn(`Levels were reset while fragment load was in progress. Fragment ${s.sn} of level ${s.level} will not be buffered`);return}const o=a[s.level],l=o.details;if(!l){this.warn(`Dropping fragment ${s.sn} of level ${s.level} after level details were reset`),this.fragmentTracker.removeFragment(s);return}const c=o.videoCodec,u=l.PTSKnown||!l.live,d=(t=s.initSegment)==null?void 0:t.data,h=this._getAudioCodec(o),f=this.transmuxer=this.transmuxer||new mb(this.hls,Ne.MAIN,this._handleTransmuxComplete.bind(this),this._handleTransmuxerFlush.bind(this)),p=i?i.index:-1,m=p!==-1,y=new Ff(s.level,s.sn,s.stats.chunkCount,r.byteLength,p,m),g=this.initPTS[s.cc];f.push(r,d,h,c,s,i,l.totalduration,u,y,g)}onAudioTrackSwitching(e,t){const s=this.altAudio;if(!t.url){if(this.mediaBuffer!==this.media){this.log("Switching on main audio, use media.buffered to schedule main fragment loading"),this.mediaBuffer=this.media;const r=this.fragCurrent;r&&(this.log("Switching to main audio track, cancel main fragment load"),r.abortRequests(),this.fragmentTracker.removeFragment(r)),this.resetTransmuxer(),this.resetLoadingState()}else this.audioOnly&&this.resetTransmuxer();const i=this.hls;s&&(i.trigger(C.BUFFER_FLUSHING,{startOffset:0,endOffset:Number.POSITIVE_INFINITY,type:null}),this.fragmentTracker.removeAllFragments()),i.trigger(C.AUDIO_TRACK_SWITCHED,t)}}onAudioTrackSwitched(e,t){const s=t.id,i=!!this.hls.audioTracks[s].url;if(i){const r=this.videoBuffer;r&&this.mediaBuffer!==r&&(this.log("Switching on alternate audio, use video.buffered to schedule main fragment loading"),this.mediaBuffer=r)}this.altAudio=i,this.tick()}onBufferCreated(e,t){const s=t.tracks;let i,r,a=!1;for(const o in s){const l=s[o];if(l.id==="main"){if(r=o,i=l,o==="video"){const c=s[o];c&&(this.videoBuffer=c.buffer)}}else a=!0}a&&i?(this.log(`Alternate track found, use ${r}.buffered to schedule main fragment loading`),this.mediaBuffer=i.buffer):this.mediaBuffer=this.media}onFragBuffered(e,t){const{frag:s,part:i}=t;if(s&&s.type!==Ne.MAIN)return;if(this.fragContextChanged(s)){this.warn(`Fragment ${s.sn}${i?" p: "+i.index:""} of level ${s.level} finished buffering, but was aborted. state: ${this.state}`),this.state===ae.PARSED&&(this.state=ae.IDLE);return}const r=i?i.stats:s.stats;this.fragLastKbps=Math.round(8*r.total/(r.buffering.end-r.loading.first)),s.sn!=="initSegment"&&(this.fragPrevious=s),this.fragBufferedComplete(s,i)}onError(e,t){var s;if(t.fatal){this.state=ae.ERROR;return}switch(t.details){case ne.FRAG_GAP:case ne.FRAG_PARSING_ERROR:case ne.FRAG_DECRYPT_ERROR:case ne.FRAG_LOAD_ERROR:case ne.FRAG_LOAD_TIMEOUT:case ne.KEY_LOAD_ERROR:case ne.KEY_LOAD_TIMEOUT:this.onFragmentOrKeyLoadError(Ne.MAIN,t);break;case ne.LEVEL_LOAD_ERROR:case ne.LEVEL_LOAD_TIMEOUT:case ne.LEVEL_PARSING_ERROR:!t.levelRetry&&this.state===ae.WAITING_LEVEL&&((s=t.context)==null?void 0:s.type)===Je.LEVEL&&(this.state=ae.IDLE);break;case ne.BUFFER_FULL_ERROR:if(!t.parent||t.parent!=="main")return;this.reduceLengthAndFlushBuffer(t)&&this.flushMainBuffer(0,Number.POSITIVE_INFINITY);break;case ne.INTERNAL_EXCEPTION:this.recoverWorkerError(t);break}}checkBuffer(){const{media:e,gapController:t}=this;if(!(!e||!t||!e.readyState)){if(this.loadedmetadata||!ht.getBuffered(e).length){const s=this.state!==ae.IDLE?this.fragCurrent:null;t.poll(this.lastCurrentTime,s)}this.lastCurrentTime=e.currentTime}}onFragLoadEmergencyAborted(){this.state=ae.IDLE,this.loadedmetadata||(this.startFragRequested=!1,this.nextLoadPosition=this.startPosition),this.tickImmediate()}onBufferFlushed(e,{type:t}){if(t!==at.AUDIO||this.audioOnly&&!this.altAudio){const s=(t===at.VIDEO?this.videoBuffer:this.mediaBuffer)||this.media;this.afterBufferFlushed(s,t,Ne.MAIN)}}onLevelsUpdated(e,t){this.levels=t.levels}swapAudioCodec(){this.audioCodecSwap=!this.audioCodecSwap}seekToStartPos(){const{media:e}=this;if(!e)return;const t=e.currentTime;let s=this.startPosition;if(s>=0&&t<s){if(e.seeking){this.log(`could not seek to ${s}, already seeking at ${t}`);return}const i=ht.getBuffered(e),r=(i.length?i.start(0):0)-s;r>0&&(r<this.config.maxBufferHole||r<this.config.maxFragLookUpTolerance)&&(this.log(`adjusting start position by ${r} to match buffer start`),s+=r,this.startPosition=s),this.log(`seek to target start position ${s} from current time ${t}`),e.currentTime=s}}_getAudioCodec(e){let t=this.config.defaultAudioCodec||e.audioCodec;return this.audioCodecSwap&&t&&(this.log("Swapping audio codec"),t.indexOf("mp4a.40.5")!==-1?t="mp4a.40.2":t="mp4a.40.5"),t}_loadBitrateTestFrag(e,t){e.bitrateTest=!0,this._doFragLoad(e,t).then(s=>{const{hls:i}=this;if(!s||this.fragContextChanged(e))return;t.fragmentError=0,this.state=ae.IDLE,this.startFragRequested=!1,this.bitrateTest=!1;const r=e.stats;r.parsing.start=r.parsing.end=r.buffering.start=r.buffering.end=self.performance.now(),i.trigger(C.FRAG_LOADED,s),e.bitrateTest=!1})}_handleTransmuxComplete(e){var t;const s="main",{hls:i}=this,{remuxResult:r,chunkMeta:a}=e,o=this.getCurrentContext(a);if(!o){this.resetWhenMissingContext(a);return}const{frag:l,part:c,level:u}=o,{video:d,text:h,id3:f,initSegment:p}=r,{details:m}=u,y=this.altAudio?void 0:r.audio;if(this.fragContextChanged(l)){this.fragmentTracker.removeFragment(l);return}if(this.state=ae.PARSING,p){if(p!=null&&p.tracks){const E=l.initSegment||l;this._bufferInitSegment(u,p.tracks,E,a),i.trigger(C.FRAG_PARSING_INIT_SEGMENT,{frag:E,id:s,tracks:p.tracks})}const g=p.initPTS,v=p.timescale;Ce(g)&&(this.initPTS[l.cc]={baseTime:g,timescale:v},i.trigger(C.INIT_PTS_FOUND,{frag:l,id:s,initPTS:g,timescale:v}))}if(d&&m&&l.sn!=="initSegment"){const g=m.fragments[l.sn-1-m.startSN],v=l.sn===m.startSN,E=!g||l.cc>g.cc;if(r.independent!==!1){const{startPTS:T,endPTS:b,startDTS:L,endDTS:x}=d;if(c)c.elementaryStreams[d.type]={startPTS:T,endPTS:b,startDTS:L,endDTS:x};else if(d.firstKeyFrame&&d.independent&&a.id===1&&!E&&(this.couldBacktrack=!0),d.dropped&&d.independent){const w=this.getMainFwdBufferInfo(),k=(w?w.end:this.getLoadPosition())+this.config.maxBufferHole,R=d.firstKeyFramePTS?d.firstKeyFramePTS:T;if(!v&&k<R-this.config.maxBufferHole&&!E){this.backtrack(l);return}else E&&(l.gap=!0);l.setElementaryStreamInfo(d.type,l.start,b,l.start,x,!0)}l.setElementaryStreamInfo(d.type,T,b,L,x),this.backtrackFragment&&(this.backtrackFragment=l),this.bufferFragmentData(d,l,c,a,v||E)}else if(v||E)l.gap=!0;else{this.backtrack(l);return}}if(y){const{startPTS:g,endPTS:v,startDTS:E,endDTS:T}=y;c&&(c.elementaryStreams[at.AUDIO]={startPTS:g,endPTS:v,startDTS:E,endDTS:T}),l.setElementaryStreamInfo(at.AUDIO,g,v,E,T),this.bufferFragmentData(y,l,c,a)}if(m&&f!=null&&(t=f.samples)!=null&&t.length){const g={id:s,frag:l,details:m,samples:f.samples};i.trigger(C.FRAG_PARSING_METADATA,g)}if(m&&h){const g={id:s,frag:l,details:m,samples:h.samples};i.trigger(C.FRAG_PARSING_USERDATA,g)}}_bufferInitSegment(e,t,s,i){if(this.state!==ae.PARSING)return;this.audioOnly=!!t.audio&&!t.video,this.altAudio&&!this.audioOnly&&delete t.audio;const{audio:r,video:a,audiovideo:o}=t;if(r){let l=e.audioCodec;const c=navigator.userAgent.toLowerCase();this.audioCodecSwitch&&(l&&(l.indexOf("mp4a.40.5")!==-1?l="mp4a.40.2":l="mp4a.40.5"),r.metadata.channelCount!==1&&c.indexOf("firefox")===-1&&(l="mp4a.40.5")),c.indexOf("android")!==-1&&r.container!=="audio/mpeg"&&(l="mp4a.40.2",this.log(`Android: force audio codec to ${l}`)),e.audioCodec&&e.audioCodec!==l&&this.log(`Swapping manifest audio codec "${e.audioCodec}" for "${l}"`),r.levelCodec=l,r.id="main",this.log(`Init audio buffer, container:${r.container}, codecs[selected/level/parsed]=[${l||""}/${e.audioCodec||""}/${r.codec}]`)}a&&(a.levelCodec=e.videoCodec,a.id="main",this.log(`Init video buffer, container:${a.container}, codecs[level/parsed]=[${e.videoCodec||""}/${a.codec}]`)),o&&this.log(`Init audiovideo buffer, container:${o.container}, codecs[level/parsed]=[${e.attrs.CODECS||""}/${o.codec}]`),this.hls.trigger(C.BUFFER_CODECS,t),Object.keys(t).forEach(l=>{const c=t[l].initSegment;c!=null&&c.byteLength&&this.hls.trigger(C.BUFFER_APPENDING,{type:l,data:c,frag:s,part:null,chunkMeta:i,parent:s.type})}),this.tick()}getMainFwdBufferInfo(){return this.getFwdBufferInfo(this.mediaBuffer?this.mediaBuffer:this.media,Ne.MAIN)}backtrack(e){this.couldBacktrack=!0,this.backtrackFragment=e,this.resetTransmuxer(),this.flushBufferGap(e),this.fragmentTracker.removeFragment(e),this.fragPrevious=null,this.nextLoadPosition=e.start,this.state=ae.IDLE}checkFragmentChanged(){const e=this.media;let t=null;if(e&&e.readyState>1&&e.seeking===!1){const s=e.currentTime;if(ht.isBuffered(e,s)?t=this.getAppendedFrag(s):ht.isBuffered(e,s+.1)&&(t=this.getAppendedFrag(s+.1)),t){this.backtrackFragment=null;const i=this.fragPlaying,r=t.level;(!i||t.sn!==i.sn||i.level!==r||t.urlId!==i.urlId)&&(this.fragPlaying=t,this.hls.trigger(C.FRAG_CHANGED,{frag:t}),(!i||i.level!==r)&&this.hls.trigger(C.LEVEL_SWITCHED,{level:r}))}}}get nextLevel(){const e=this.nextBufferedFrag;return e?e.level:-1}get currentFrag(){const e=this.media;return e?this.fragPlaying||this.getAppendedFrag(e.currentTime):null}get currentProgramDateTime(){const e=this.media;if(e){const t=e.currentTime,s=this.currentFrag;if(s&&Ce(t)&&Ce(s.programDateTime)){const i=s.programDateTime+(t-s.start)*1e3;return new Date(i)}}return null}get currentLevel(){const e=this.currentFrag;return e?e.level:-1}get nextBufferedFrag(){const e=this.currentFrag;return e?this.followingBufferedFrag(e):null}get forceStartLoad(){return this._forceStartLoad}}class hr{constructor(e,t=0,s=0){this.halfLife=void 0,this.alpha_=void 0,this.estimate_=void 0,this.totalWeight_=void 0,this.halfLife=e,this.alpha_=e?Math.exp(Math.log(.5)/e):0,this.estimate_=t,this.totalWeight_=s}sample(e,t){const s=Math.pow(this.alpha_,e);this.estimate_=t*(1-s)+s*this.estimate_,this.totalWeight_+=e}getTotalWeight(){return this.totalWeight_}getEstimate(){if(this.alpha_){const e=1-Math.pow(this.alpha_,this.totalWeight_);if(e)return this.estimate_/e}return this.estimate_}}class A${constructor(e,t,s,i=100){this.defaultEstimate_=void 0,this.minWeight_=void 0,this.minDelayMs_=void 0,this.slow_=void 0,this.fast_=void 0,this.defaultTTFB_=void 0,this.ttfb_=void 0,this.defaultEstimate_=s,this.minWeight_=.001,this.minDelayMs_=50,this.slow_=new hr(e),this.fast_=new hr(t),this.defaultTTFB_=i,this.ttfb_=new hr(e)}update(e,t){const{slow_:s,fast_:i,ttfb_:r}=this;s.halfLife!==e&&(this.slow_=new hr(e,s.getEstimate(),s.getTotalWeight())),i.halfLife!==t&&(this.fast_=new hr(t,i.getEstimate(),i.getTotalWeight())),r.halfLife!==e&&(this.ttfb_=new hr(e,r.getEstimate(),r.getTotalWeight()))}sample(e,t){e=Math.max(e,this.minDelayMs_);const s=8*t,i=e/1e3,r=s/i;this.fast_.sample(i,r),this.slow_.sample(i,r)}sampleTTFB(e){const t=e/1e3,s=Math.sqrt(2)*Math.exp(-Math.pow(t,2)/2);this.ttfb_.sample(s,Math.max(e,5))}canEstimate(){return this.fast_.getTotalWeight()>=this.minWeight_}getEstimate(){return this.canEstimate()?Math.min(this.fast_.getEstimate(),this.slow_.getEstimate()):this.defaultEstimate_}getEstimateTTFB(){return this.ttfb_.getTotalWeight()>=this.minWeight_?this.ttfb_.getEstimate():this.defaultTTFB_}destroy(){}}class L${constructor(e){this.hls=void 0,this.lastLevelLoadSec=0,this.lastLoadedFragLevel=0,this._nextAutoLevel=-1,this.timer=-1,this.onCheck=this._abandonRulesCheck.bind(this),this.fragCurrent=null,this.partCurrent=null,this.bitrateTestDelay=0,this.bwEstimator=void 0,this.hls=e;const t=e.config;this.bwEstimator=new A$(t.abrEwmaSlowVoD,t.abrEwmaFastVoD,t.abrEwmaDefaultEstimate),this.registerListeners()}registerListeners(){const{hls:e}=this;e.on(C.FRAG_LOADING,this.onFragLoading,this),e.on(C.FRAG_LOADED,this.onFragLoaded,this),e.on(C.FRAG_BUFFERED,this.onFragBuffered,this),e.on(C.LEVEL_SWITCHING,this.onLevelSwitching,this),e.on(C.LEVEL_LOADED,this.onLevelLoaded,this)}unregisterListeners(){const{hls:e}=this;e.off(C.FRAG_LOADING,this.onFragLoading,this),e.off(C.FRAG_LOADED,this.onFragLoaded,this),e.off(C.FRAG_BUFFERED,this.onFragBuffered,this),e.off(C.LEVEL_SWITCHING,this.onLevelSwitching,this),e.off(C.LEVEL_LOADED,this.onLevelLoaded,this)}destroy(){this.unregisterListeners(),this.clearTimer(),this.hls=this.onCheck=null,this.fragCurrent=this.partCurrent=null}onFragLoading(e,t){var s;const i=t.frag;this.ignoreFragment(i)||(this.fragCurrent=i,this.partCurrent=(s=t.part)!=null?s:null,this.clearTimer(),this.timer=self.setInterval(this.onCheck,100))}onLevelSwitching(e,t){this.clearTimer()}getTimeToLoadFrag(e,t,s,i){const r=e+s/t,a=i?this.lastLevelLoadSec:0;return r+a}onLevelLoaded(e,t){const s=this.hls.config,{total:i,bwEstimate:r}=t.stats;Ce(i)&&Ce(r)&&(this.lastLevelLoadSec=8*i/r),t.details.live?this.bwEstimator.update(s.abrEwmaSlowLive,s.abrEwmaFastLive):this.bwEstimator.update(s.abrEwmaSlowVoD,s.abrEwmaFastVoD)}_abandonRulesCheck(){const{fragCurrent:e,partCurrent:t,hls:s}=this,{autoLevelEnabled:i,media:r}=s;if(!e||!r)return;const a=performance.now(),o=t?t.stats:e.stats,l=t?t.duration:e.duration,c=a-o.loading.start;if(o.aborted||o.loaded&&o.loaded===o.total||e.level===0){this.clearTimer(),this._nextAutoLevel=-1;return}if(!i||r.paused||!r.playbackRate||!r.readyState)return;const u=s.mainForwardBufferInfo;if(u===null)return;const d=this.bwEstimator.getEstimateTTFB(),h=Math.abs(r.playbackRate);if(c<=Math.max(d,1e3*(l/(h*2))))return;const f=u.len/h;if(f>=2*l/h)return;const p=o.loading.first?o.loading.first-o.loading.start:-1,m=o.loaded&&p>-1,y=this.bwEstimator.getEstimate(),{levels:g,minAutoLevel:v}=s,E=g[e.level],T=o.total||Math.max(o.loaded,Math.round(l*E.maxBitrate/8));let b=c-p;b<1&&m&&(b=Math.min(c,o.loaded*8/y));const L=m?o.loaded*1e3/b:0,x=L?(T-o.loaded)/L:T*8/y+d/1e3;if(x<=f)return;const w=L?L*8:y;let k=Number.POSITIVE_INFINITY,R;for(R=e.level-1;R>v;R--){const P=g[R].maxBitrate;if(k=this.getTimeToLoadFrag(d/1e3,w,l*P,!g[R].details),k<f)break}k>=x||k>l*10||(s.nextLoadLevel=R,m?this.bwEstimator.sample(c-Math.min(d,p),o.loaded):this.bwEstimator.sampleTTFB(c),this.clearTimer(),H.warn(`[abr] Fragment ${e.sn}${t?" part "+t.index:""} of level ${e.level} is loading too slowly;
      Time to underbuffer: ${f.toFixed(3)} s
      Estimated load time for current fragment: ${x.toFixed(3)} s
      Estimated load time for down switch fragment: ${k.toFixed(3)} s
      TTFB estimate: ${p}
      Current BW estimate: ${Ce(y)?(y/1024).toFixed(3):"Unknown"} Kb/s
      New BW estimate: ${(this.bwEstimator.getEstimate()/1024).toFixed(3)} Kb/s
      Aborting and switching to level ${R}`),e.loader&&(this.fragCurrent=this.partCurrent=null,e.abortRequests()),s.trigger(C.FRAG_LOAD_EMERGENCY_ABORTED,{frag:e,part:t,stats:o}))}onFragLoaded(e,{frag:t,part:s}){const i=s?s.stats:t.stats;if(t.type===Ne.MAIN&&this.bwEstimator.sampleTTFB(i.loading.first-i.loading.start),!this.ignoreFragment(t)){if(this.clearTimer(),this.lastLoadedFragLevel=t.level,this._nextAutoLevel=-1,this.hls.config.abrMaxWithRealBitrate){const r=s?s.duration:t.duration,a=this.hls.levels[t.level],o=(a.loaded?a.loaded.bytes:0)+i.loaded,l=(a.loaded?a.loaded.duration:0)+r;a.loaded={bytes:o,duration:l},a.realBitrate=Math.round(8*o/l)}if(t.bitrateTest){const r={stats:i,frag:t,part:s,id:t.type};this.onFragBuffered(C.FRAG_BUFFERED,r),t.bitrateTest=!1}}}onFragBuffered(e,t){const{frag:s,part:i}=t,r=i!=null&&i.stats.loaded?i.stats:s.stats;if(r.aborted||this.ignoreFragment(s))return;const a=r.parsing.end-r.loading.start-Math.min(r.loading.first-r.loading.start,this.bwEstimator.getEstimateTTFB());this.bwEstimator.sample(a,r.loaded),r.bwEstimate=this.bwEstimator.getEstimate(),s.bitrateTest?this.bitrateTestDelay=a/1e3:this.bitrateTestDelay=0}ignoreFragment(e){return e.type!==Ne.MAIN||e.sn==="initSegment"}clearTimer(){self.clearInterval(this.timer)}get nextAutoLevel(){const e=this._nextAutoLevel,t=this.bwEstimator;if(e!==-1&&!t.canEstimate())return e;let s=this.getNextABRAutoLevel();if(e!==-1){const i=this.hls.levels;if(i.length>Math.max(e,s)&&i[e].loadError<=i[s].loadError)return e}return e!==-1&&(s=Math.min(e,s)),s}getNextABRAutoLevel(){const{fragCurrent:e,partCurrent:t,hls:s}=this,{maxAutoLevel:i,config:r,minAutoLevel:a,media:o}=s,l=t?t.duration:e?e.duration:0,c=o&&o.playbackRate!==0?Math.abs(o.playbackRate):1,u=this.bwEstimator?this.bwEstimator.getEstimate():r.abrEwmaDefaultEstimate,d=s.mainForwardBufferInfo,h=(d?d.len:0)/c;let f=this.findBestLevel(u,a,i,h,r.abrBandWidthFactor,r.abrBandWidthUpFactor);if(f>=0)return f;H.trace(`[abr] ${h?"rebuffering expected":"buffer is empty"}, finding optimal quality level`);let p=l?Math.min(l,r.maxStarvationDelay):r.maxStarvationDelay,m=r.abrBandWidthFactor,y=r.abrBandWidthUpFactor;if(!h){const g=this.bitrateTestDelay;g&&(p=(l?Math.min(l,r.maxLoadingDelay):r.maxLoadingDelay)-g,H.trace(`[abr] bitrate test took ${Math.round(1e3*g)}ms, set first fragment max fetchDuration to ${Math.round(1e3*p)} ms`),m=y=1)}return f=this.findBestLevel(u,a,i,h+p,m,y),Math.max(f,0)}findBestLevel(e,t,s,i,r,a){var o;const{fragCurrent:l,partCurrent:c,lastLoadedFragLevel:u}=this,{levels:d}=this.hls,h=d[u],f=!!(h!=null&&(o=h.details)!=null&&o.live),p=h==null?void 0:h.codecSet,m=c?c.duration:l?l.duration:0,y=this.bwEstimator.getEstimateTTFB()/1e3;let g=t,v=-1;for(let E=s;E>=t;E--){const T=d[E];if(!T||p&&T.codecSet!==p){T&&(g=Math.min(E,g),v=Math.max(E,v));continue}v!==-1&&H.trace(`[abr] Skipped level(s) ${g}-${v} with CODECS:"${d[v].attrs.CODECS}"; not compatible with "${h.attrs.CODECS}"`);const b=T.details,L=(c?b==null?void 0:b.partTarget:b==null?void 0:b.averagetargetduration)||m;let x;E<=u?x=r*e:x=a*e;const w=d[E].maxBitrate,k=this.getTimeToLoadFrag(y,x,w*L,b===void 0);if(H.trace(`[abr] level:${E} adjustedbw-bitrate:${Math.round(x-w)} avgDuration:${L.toFixed(1)} maxFetchDuration:${i.toFixed(1)} fetchDuration:${k.toFixed(1)}`),x>w&&(k===0||!Ce(k)||f&&!this.bitrateTestDelay||k<i))return E}return-1}set nextAutoLevel(e){this._nextAutoLevel=e}}class gb{constructor(){this.chunks=[],this.dataLength=0}push(e){this.chunks.push(e),this.dataLength+=e.length}flush(){const{chunks:e,dataLength:t}=this;let s;if(e.length)e.length===1?s=e[0]:s=w$(e,t);else return new Uint8Array(0);return this.reset(),s}reset(){this.chunks.length=0,this.dataLength=0}}function w$(n,e){const t=new Uint8Array(e);let s=0;for(let i=0;i<n.length;i++){const r=n[i];t.set(r,s),s+=r.length}return t}const H0=100;class R$ extends Uf{constructor(e,t,s){super(e,t,s,"[audio-stream-controller]",Ne.AUDIO),this.videoBuffer=null,this.videoTrackCC=-1,this.waitingVideoCC=-1,this.bufferedTrack=null,this.switchingTrack=null,this.trackId=-1,this.waitingData=null,this.mainDetails=null,this.bufferFlushed=!1,this.cachedTrackLoadedData=null,this._registerListeners()}onHandlerDestroying(){this._unregisterListeners(),this.mainDetails=null,this.bufferedTrack=null,this.switchingTrack=null}_registerListeners(){const{hls:e}=this;e.on(C.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(C.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(C.MANIFEST_LOADING,this.onManifestLoading,this),e.on(C.LEVEL_LOADED,this.onLevelLoaded,this),e.on(C.AUDIO_TRACKS_UPDATED,this.onAudioTracksUpdated,this),e.on(C.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),e.on(C.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),e.on(C.ERROR,this.onError,this),e.on(C.BUFFER_RESET,this.onBufferReset,this),e.on(C.BUFFER_CREATED,this.onBufferCreated,this),e.on(C.BUFFER_FLUSHED,this.onBufferFlushed,this),e.on(C.INIT_PTS_FOUND,this.onInitPtsFound,this),e.on(C.FRAG_BUFFERED,this.onFragBuffered,this)}_unregisterListeners(){const{hls:e}=this;e.off(C.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(C.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(C.MANIFEST_LOADING,this.onManifestLoading,this),e.off(C.LEVEL_LOADED,this.onLevelLoaded,this),e.off(C.AUDIO_TRACKS_UPDATED,this.onAudioTracksUpdated,this),e.off(C.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),e.off(C.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),e.off(C.ERROR,this.onError,this),e.off(C.BUFFER_RESET,this.onBufferReset,this),e.off(C.BUFFER_CREATED,this.onBufferCreated,this),e.off(C.BUFFER_FLUSHED,this.onBufferFlushed,this),e.off(C.INIT_PTS_FOUND,this.onInitPtsFound,this),e.off(C.FRAG_BUFFERED,this.onFragBuffered,this)}onInitPtsFound(e,{frag:t,id:s,initPTS:i,timescale:r}){if(s==="main"){const a=t.cc;this.initPTS[t.cc]={baseTime:i,timescale:r},this.log(`InitPTS for cc: ${a} found from main: ${i}`),this.videoTrackCC=a,this.state===ae.WAITING_INIT_PTS&&this.tick()}}startLoad(e){if(!this.levels){this.startPosition=e,this.state=ae.STOPPED;return}const t=this.lastCurrentTime;this.stopLoad(),this.setInterval(H0),t>0&&e===-1?(this.log(`Override startPosition with lastCurrentTime @${t.toFixed(3)}`),e=t,this.state=ae.IDLE):(this.loadedmetadata=!1,this.state=ae.WAITING_TRACK),this.nextLoadPosition=this.startPosition=this.lastCurrentTime=e,this.tick()}doTick(){switch(this.state){case ae.IDLE:this.doTickIdle();break;case ae.WAITING_TRACK:{var e;const{levels:s,trackId:i}=this,r=s==null||(e=s[i])==null?void 0:e.details;if(r){if(this.waitForCdnTuneIn(r))break;this.state=ae.WAITING_INIT_PTS}break}case ae.FRAG_LOADING_WAITING_RETRY:{var t;const s=performance.now(),i=this.retryDate;(!i||s>=i||(t=this.media)!=null&&t.seeking)&&(this.log("RetryDate reached, switch back to IDLE state"),this.resetStartWhenNotLoaded(this.trackId),this.state=ae.IDLE);break}case ae.WAITING_INIT_PTS:{const s=this.waitingData;if(s){const{frag:i,part:r,cache:a,complete:o}=s;if(this.initPTS[i.cc]!==void 0){this.waitingData=null,this.waitingVideoCC=-1,this.state=ae.FRAG_LOADING;const l=a.flush(),c={frag:i,part:r,payload:l,networkDetails:null};this._handleFragmentLoadProgress(c),o&&super._handleFragmentLoadComplete(c)}else if(this.videoTrackCC!==this.waitingVideoCC)this.log(`Waiting fragment cc (${i.cc}) cancelled because video is at cc ${this.videoTrackCC}`),this.clearWaitingFragment();else{const l=this.getLoadPosition(),c=ht.bufferInfo(this.mediaBuffer,l,this.config.maxBufferHole);nh(c.end,this.config.maxFragLookUpTolerance,i)<0&&(this.log(`Waiting fragment cc (${i.cc}) @ ${i.start} cancelled because another fragment at ${c.end} is needed`),this.clearWaitingFragment())}}else this.state=ae.IDLE}}this.onTickEnd()}clearWaitingFragment(){const e=this.waitingData;e&&(this.fragmentTracker.removeFragment(e.frag),this.waitingData=null,this.waitingVideoCC=-1,this.state=ae.IDLE)}resetLoadingState(){this.clearWaitingFragment(),super.resetLoadingState()}onTickEnd(){const{media:e}=this;e!=null&&e.readyState&&(this.lastCurrentTime=e.currentTime)}doTickIdle(){const{hls:e,levels:t,media:s,trackId:i}=this,r=e.config;if(!(t!=null&&t[i])||!s&&(this.startFragRequested||!r.startFragPrefetch))return;const a=t[i],o=a.details;if(!o||o.live&&this.levelLastLoaded!==i||this.waitForCdnTuneIn(o)){this.state=ae.WAITING_TRACK;return}const l=this.mediaBuffer?this.mediaBuffer:this.media;this.bufferFlushed&&l&&(this.bufferFlushed=!1,this.afterBufferFlushed(l,at.AUDIO,Ne.AUDIO));const c=this.getFwdBufferInfo(l,Ne.AUDIO);if(c===null)return;const{bufferedTrack:u,switchingTrack:d}=this;if(!d&&this._streamEnded(c,o)){e.trigger(C.BUFFER_EOS,{type:"audio"}),this.state=ae.ENDED;return}const h=this.getFwdBufferInfo(this.videoBuffer?this.videoBuffer:this.media,Ne.MAIN),f=c.len,p=this.getMaxBufferLength(h==null?void 0:h.len);if(f>=p&&!d)return;const m=o.fragments[0].start;let y=c.end;if(d&&s){const T=this.getLoadPosition();u&&d.attrs!==u.attrs&&(y=T),o.PTSKnown&&T<m&&(c.end>m||c.nextStart)&&(this.log("Alt audio track ahead of main track, seek to start of alt audio track"),s.currentTime=m+.05)}let g=this.getNextFragment(y,o),v=!1;if(g&&this.isLoopLoading(g,y)&&(v=!!g.gap,g=this.getNextFragmentLoopLoading(g,o,c,Ne.MAIN,p)),!g){this.bufferFlushed=!0;return}const E=h&&g.start>h.end+o.targetduration;if(E||!(h!=null&&h.len)&&c.len){const T=this.getAppendedFrag(g.start,Ne.MAIN);if(T===null||(v||(v=!!T.gap||!!E&&h.len===0),E&&!v||v&&c.nextStart&&c.nextStart<T.end))return}this.loadFragment(g,a,y)}getMaxBufferLength(e){const t=super.getMaxBufferLength();return e?Math.min(Math.max(t,e),this.config.maxMaxBufferLength):t}onMediaDetaching(){this.videoBuffer=null,super.onMediaDetaching()}onAudioTracksUpdated(e,{audioTracks:t}){this.resetTransmuxer(),this.levels=t.map(s=>new Qa(s))}onAudioTrackSwitching(e,t){const s=!!t.url;this.trackId=t.id;const{fragCurrent:i}=this;i&&(i.abortRequests(),this.removeUnbufferedFrags(i.start)),this.resetLoadingState(),s?this.setInterval(H0):this.resetTransmuxer(),s?(this.switchingTrack=t,this.state=ae.IDLE):(this.switchingTrack=null,this.bufferedTrack=t,this.state=ae.STOPPED),this.tick()}onManifestLoading(){this.fragmentTracker.removeAllFragments(),this.startPosition=this.lastCurrentTime=0,this.bufferFlushed=!1,this.levels=this.mainDetails=this.waitingData=this.bufferedTrack=this.cachedTrackLoadedData=this.switchingTrack=null,this.startFragRequested=!1,this.trackId=this.videoTrackCC=this.waitingVideoCC=-1}onLevelLoaded(e,t){this.mainDetails=t.details,this.cachedTrackLoadedData!==null&&(this.hls.trigger(C.AUDIO_TRACK_LOADED,this.cachedTrackLoadedData),this.cachedTrackLoadedData=null)}onAudioTrackLoaded(e,t){var s;if(this.mainDetails==null){this.cachedTrackLoadedData=t;return}const{levels:i}=this,{details:r,id:a}=t;if(!i){this.warn(`Audio tracks were reset while loading level ${a}`);return}this.log(`Track ${a} loaded [${r.startSN},${r.endSN}]${r.lastPartSn?`[part-${r.lastPartSn}-${r.lastPartIndex}]`:""},duration:${r.totalduration}`);const o=i[a];let l=0;if(r.live||(s=o.details)!=null&&s.live){this.checkLiveUpdate(r);const c=this.mainDetails;if(r.deltaUpdateFailed||!c)return;!o.details&&r.hasProgramDateTime&&c.hasProgramDateTime?(eb(r,c),l=r.fragments[0].start):l=this.alignPlaylists(r,o.details)}o.details=r,this.levelLastLoaded=a,!this.startFragRequested&&(this.mainDetails||!r.live)&&this.setStartPosition(o.details,l),this.state===ae.WAITING_TRACK&&!this.waitForCdnTuneIn(r)&&(this.state=ae.IDLE),this.tick()}_handleFragmentLoadProgress(e){var t;const{frag:s,part:i,payload:r}=e,{config:a,trackId:o,levels:l}=this;if(!l){this.warn(`Audio tracks were reset while fragment load was in progress. Fragment ${s.sn} of level ${s.level} will not be buffered`);return}const c=l[o];if(!c){this.warn("Audio track is undefined on fragment load progress");return}const u=c.details;if(!u){this.warn("Audio track details undefined on fragment load progress"),this.removeUnbufferedFrags(s.start);return}const d=a.defaultAudioCodec||c.audioCodec||"mp4a.40.2";let h=this.transmuxer;h||(h=this.transmuxer=new mb(this.hls,Ne.AUDIO,this._handleTransmuxComplete.bind(this),this._handleTransmuxerFlush.bind(this)));const f=this.initPTS[s.cc],p=(t=s.initSegment)==null?void 0:t.data;if(f!==void 0){const m=i?i.index:-1,y=m!==-1,g=new Ff(s.level,s.sn,s.stats.chunkCount,r.byteLength,m,y);h.push(r,p,d,"",s,i,u.totalduration,!1,g,f)}else{this.log(`Unknown video PTS for cc ${s.cc}, waiting for video PTS before demuxing audio frag ${s.sn} of [${u.startSN} ,${u.endSN}],track ${o}`);const{cache:m}=this.waitingData=this.waitingData||{frag:s,part:i,cache:new gb,complete:!1};m.push(new Uint8Array(r)),this.waitingVideoCC=this.videoTrackCC,this.state=ae.WAITING_INIT_PTS}}_handleFragmentLoadComplete(e){if(this.waitingData){this.waitingData.complete=!0;return}super._handleFragmentLoadComplete(e)}onBufferReset(){this.mediaBuffer=this.videoBuffer=null,this.loadedmetadata=!1}onBufferCreated(e,t){const s=t.tracks.audio;s&&(this.mediaBuffer=s.buffer||null),t.tracks.video&&(this.videoBuffer=t.tracks.video.buffer||null)}onFragBuffered(e,t){const{frag:s,part:i}=t;if(s.type!==Ne.AUDIO){if(!this.loadedmetadata&&s.type===Ne.MAIN){const r=this.videoBuffer||this.media;r&&ht.getBuffered(r).length&&(this.loadedmetadata=!0)}return}if(this.fragContextChanged(s)){this.warn(`Fragment ${s.sn}${i?" p: "+i.index:""} of level ${s.level} finished buffering, but was aborted. state: ${this.state}, audioSwitch: ${this.switchingTrack?this.switchingTrack.name:"false"}`);return}if(s.sn!=="initSegment"){this.fragPrevious=s;const r=this.switchingTrack;r&&(this.bufferedTrack=r,this.switchingTrack=null,this.hls.trigger(C.AUDIO_TRACK_SWITCHED,ms({},r)))}this.fragBufferedComplete(s,i)}onError(e,t){var s;if(t.fatal){this.state=ae.ERROR;return}switch(t.details){case ne.FRAG_GAP:case ne.FRAG_PARSING_ERROR:case ne.FRAG_DECRYPT_ERROR:case ne.FRAG_LOAD_ERROR:case ne.FRAG_LOAD_TIMEOUT:case ne.KEY_LOAD_ERROR:case ne.KEY_LOAD_TIMEOUT:this.onFragmentOrKeyLoadError(Ne.AUDIO,t);break;case ne.AUDIO_TRACK_LOAD_ERROR:case ne.AUDIO_TRACK_LOAD_TIMEOUT:case ne.LEVEL_PARSING_ERROR:!t.levelRetry&&this.state===ae.WAITING_TRACK&&((s=t.context)==null?void 0:s.type)===Je.AUDIO_TRACK&&(this.state=ae.IDLE);break;case ne.BUFFER_FULL_ERROR:if(!t.parent||t.parent!=="audio")return;this.reduceLengthAndFlushBuffer(t)&&(this.bufferedTrack=null,super.flushMainBuffer(0,Number.POSITIVE_INFINITY,"audio"));break;case ne.INTERNAL_EXCEPTION:this.recoverWorkerError(t);break}}onBufferFlushed(e,{type:t}){t===at.AUDIO&&(this.bufferFlushed=!0,this.state===ae.ENDED&&(this.state=ae.IDLE))}_handleTransmuxComplete(e){var t;const s="audio",{hls:i}=this,{remuxResult:r,chunkMeta:a}=e,o=this.getCurrentContext(a);if(!o){this.resetWhenMissingContext(a);return}const{frag:l,part:c,level:u}=o,{details:d}=u,{audio:h,text:f,id3:p,initSegment:m}=r;if(this.fragContextChanged(l)||!d){this.fragmentTracker.removeFragment(l);return}if(this.state=ae.PARSING,this.switchingTrack&&h&&this.completeAudioSwitch(this.switchingTrack),m!=null&&m.tracks){const y=l.initSegment||l;this._bufferInitSegment(m.tracks,y,a),i.trigger(C.FRAG_PARSING_INIT_SEGMENT,{frag:y,id:s,tracks:m.tracks})}if(h){const{startPTS:y,endPTS:g,startDTS:v,endDTS:E}=h;c&&(c.elementaryStreams[at.AUDIO]={startPTS:y,endPTS:g,startDTS:v,endDTS:E}),l.setElementaryStreamInfo(at.AUDIO,y,g,v,E),this.bufferFragmentData(h,l,c,a)}if(p!=null&&(t=p.samples)!=null&&t.length){const y=Mt({id:s,frag:l,details:d},p);i.trigger(C.FRAG_PARSING_METADATA,y)}if(f){const y=Mt({id:s,frag:l,details:d},f);i.trigger(C.FRAG_PARSING_USERDATA,y)}}_bufferInitSegment(e,t,s){if(this.state!==ae.PARSING)return;e.video&&delete e.video;const i=e.audio;if(!i)return;i.levelCodec=i.codec,i.id="audio",this.log(`Init audio buffer, container:${i.container}, codecs[parsed]=[${i.codec}]`),this.hls.trigger(C.BUFFER_CODECS,e);const r=i.initSegment;if(r!=null&&r.byteLength){const a={type:"audio",frag:t,part:null,chunkMeta:s,parent:t.type,data:r};this.hls.trigger(C.BUFFER_APPENDING,a)}this.tick()}loadFragment(e,t,s){const i=this.fragmentTracker.getState(e);if(this.fragCurrent=e,this.switchingTrack||i===Ut.NOT_LOADED||i===Ut.PARTIAL){var r;e.sn==="initSegment"?this._loadInitSegment(e,t):(r=t.details)!=null&&r.live&&!this.initPTS[e.cc]?(this.log(`Waiting for video PTS in continuity counter ${e.cc} of live stream before loading audio fragment ${e.sn} of level ${this.trackId}`),this.state=ae.WAITING_INIT_PTS):(this.startFragRequested=!0,super.loadFragment(e,t,s))}else this.clearTrackerIfNeeded(e)}completeAudioSwitch(e){const{hls:t,media:s,bufferedTrack:i}=this,r=i==null?void 0:i.attrs,a=e.attrs;s&&r&&(r.CHANNELS!==a.CHANNELS||r.NAME!==a.NAME||r.LANGUAGE!==a.LANGUAGE)&&(this.log("Switching audio track : flushing all audio"),super.flushMainBuffer(0,Number.POSITIVE_INFINITY,"audio")),this.bufferedTrack=e,this.switchingTrack=null,t.trigger(C.AUDIO_TRACK_SWITCHED,ms({},e))}}class I$ extends Mf{constructor(e){super(e,"[audio-track-controller]"),this.tracks=[],this.groupId=null,this.tracksInGroup=[],this.trackId=-1,this.currentTrack=null,this.selectDefaultTrack=!0,this.registerListeners()}registerListeners(){const{hls:e}=this;e.on(C.MANIFEST_LOADING,this.onManifestLoading,this),e.on(C.MANIFEST_PARSED,this.onManifestParsed,this),e.on(C.LEVEL_LOADING,this.onLevelLoading,this),e.on(C.LEVEL_SWITCHING,this.onLevelSwitching,this),e.on(C.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),e.on(C.ERROR,this.onError,this)}unregisterListeners(){const{hls:e}=this;e.off(C.MANIFEST_LOADING,this.onManifestLoading,this),e.off(C.MANIFEST_PARSED,this.onManifestParsed,this),e.off(C.LEVEL_LOADING,this.onLevelLoading,this),e.off(C.LEVEL_SWITCHING,this.onLevelSwitching,this),e.off(C.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),e.off(C.ERROR,this.onError,this)}destroy(){this.unregisterListeners(),this.tracks.length=0,this.tracksInGroup.length=0,this.currentTrack=null,super.destroy()}onManifestLoading(){this.tracks=[],this.groupId=null,this.tracksInGroup=[],this.trackId=-1,this.currentTrack=null,this.selectDefaultTrack=!0}onManifestParsed(e,t){this.tracks=t.audioTracks||[]}onAudioTrackLoaded(e,t){const{id:s,groupId:i,details:r}=t,a=this.tracksInGroup[s];if(!a||a.groupId!==i){this.warn(`Track with id:${s} and group:${i} not found in active group ${a.groupId}`);return}const o=a.details;a.details=t.details,this.log(`audio-track ${s} "${a.name}" lang:${a.lang} group:${i} loaded [${r.startSN}-${r.endSN}]`),s===this.trackId&&this.playlistLoaded(s,t,o)}onLevelLoading(e,t){this.switchLevel(t.level)}onLevelSwitching(e,t){this.switchLevel(t.level)}switchLevel(e){const t=this.hls.levels[e];if(!(t!=null&&t.audioGroupIds))return;const s=t.audioGroupIds[t.urlId];if(this.groupId!==s){this.groupId=s||null;const i=this.tracks.filter(a=>!s||a.groupId===s);this.selectDefaultTrack&&!i.some(a=>a.default)&&(this.selectDefaultTrack=!1),this.tracksInGroup=i;const r={audioTracks:i};this.log(`Updating audio tracks, ${i.length} track(s) found in group:${s}`),this.hls.trigger(C.AUDIO_TRACKS_UPDATED,r),this.selectInitialTrack()}else this.shouldReloadPlaylist(this.currentTrack)&&this.setAudioTrack(this.trackId)}onError(e,t){t.fatal||!t.context||t.context.type===Je.AUDIO_TRACK&&t.context.id===this.trackId&&t.context.groupId===this.groupId&&(this.requestScheduled=-1,this.checkRetry(t))}get audioTracks(){return this.tracksInGroup}get audioTrack(){return this.trackId}set audioTrack(e){this.selectDefaultTrack=!1,this.setAudioTrack(e)}setAudioTrack(e){const t=this.tracksInGroup;if(e<0||e>=t.length){this.warn("Invalid id passed to audio-track controller");return}this.clearTimer();const s=this.currentTrack;t[this.trackId];const i=t[e],{groupId:r,name:a}=i;if(this.log(`Switching to audio-track ${e} "${a}" lang:${i.lang} group:${r}`),this.trackId=e,this.currentTrack=i,this.selectDefaultTrack=!1,this.hls.trigger(C.AUDIO_TRACK_SWITCHING,ms({},i)),i.details&&!i.details.live)return;const o=this.switchParams(i.url,s==null?void 0:s.details);this.loadPlaylist(o)}selectInitialTrack(){const e=this.tracksInGroup,t=this.findTrackId(this.currentTrack)|this.findTrackId(null);if(t!==-1)this.setAudioTrack(t);else{const s=new Error(`No track found for running audio group-ID: ${this.groupId} track count: ${e.length}`);this.warn(s.message),this.hls.trigger(C.ERROR,{type:Me.MEDIA_ERROR,details:ne.AUDIO_TRACK_LOAD_ERROR,fatal:!0,error:s})}}findTrackId(e){const t=this.tracksInGroup;for(let s=0;s<t.length;s++){const i=t[s];if((!this.selectDefaultTrack||i.default)&&(!e||e.attrs["STABLE-RENDITION-ID"]!==void 0&&e.attrs["STABLE-RENDITION-ID"]===i.attrs["STABLE-RENDITION-ID"]||e.name===i.name&&e.lang===i.lang))return i.id}return-1}loadPlaylist(e){super.loadPlaylist();const t=this.tracksInGroup[this.trackId];if(this.shouldLoadPlaylist(t)){const s=t.id,i=t.groupId;let r=t.url;if(e)try{r=e.addDirectives(r)}catch(a){this.warn(`Could not construct new URL with HLS Delivery Directives: ${a}`)}this.log(`loading audio-track playlist ${s} "${t.name}" lang:${t.lang} group:${i}`),this.clearTimer(),this.hls.trigger(C.AUDIO_TRACK_LOADING,{url:r,id:s,groupId:i,deliveryDirectives:e||null})}}}function yb(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;t++)if(!C$(n[t].attrs,e[t].attrs))return!1;return!0}function C$(n,e){const t=n["STABLE-RENDITION-ID"];return t?t===e["STABLE-RENDITION-ID"]:!["LANGUAGE","NAME","CHARACTERISTICS","AUTOSELECT","DEFAULT","FORCED"].some(s=>n[s]!==e[s])}const K0=500;class D$ extends Uf{constructor(e,t,s){super(e,t,s,"[subtitle-stream-controller]",Ne.SUBTITLE),this.levels=[],this.currentTrackId=-1,this.tracksBuffered=[],this.mainDetails=null,this._registerListeners()}onHandlerDestroying(){this._unregisterListeners(),this.mainDetails=null}_registerListeners(){const{hls:e}=this;e.on(C.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(C.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(C.MANIFEST_LOADING,this.onManifestLoading,this),e.on(C.LEVEL_LOADED,this.onLevelLoaded,this),e.on(C.ERROR,this.onError,this),e.on(C.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),e.on(C.SUBTITLE_TRACK_SWITCH,this.onSubtitleTrackSwitch,this),e.on(C.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),e.on(C.SUBTITLE_FRAG_PROCESSED,this.onSubtitleFragProcessed,this),e.on(C.BUFFER_FLUSHING,this.onBufferFlushing,this),e.on(C.FRAG_BUFFERED,this.onFragBuffered,this)}_unregisterListeners(){const{hls:e}=this;e.off(C.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(C.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(C.MANIFEST_LOADING,this.onManifestLoading,this),e.off(C.LEVEL_LOADED,this.onLevelLoaded,this),e.off(C.ERROR,this.onError,this),e.off(C.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),e.off(C.SUBTITLE_TRACK_SWITCH,this.onSubtitleTrackSwitch,this),e.off(C.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),e.off(C.SUBTITLE_FRAG_PROCESSED,this.onSubtitleFragProcessed,this),e.off(C.BUFFER_FLUSHING,this.onBufferFlushing,this),e.off(C.FRAG_BUFFERED,this.onFragBuffered,this)}startLoad(e){this.stopLoad(),this.state=ae.IDLE,this.setInterval(K0),this.nextLoadPosition=this.startPosition=this.lastCurrentTime=e,this.tick()}onManifestLoading(){this.mainDetails=null,this.fragmentTracker.removeAllFragments()}onMediaDetaching(){this.tracksBuffered=[],super.onMediaDetaching()}onLevelLoaded(e,t){this.mainDetails=t.details}onSubtitleFragProcessed(e,t){const{frag:s,success:i}=t;if(this.fragPrevious=s,this.state=ae.IDLE,!i)return;const r=this.tracksBuffered[this.currentTrackId];if(!r)return;let a;const o=s.start;for(let c=0;c<r.length;c++)if(o>=r[c].start&&o<=r[c].end){a=r[c];break}const l=s.start+s.duration;a?a.end=l:(a={start:o,end:l},r.push(a)),this.fragmentTracker.fragBuffered(s)}onBufferFlushing(e,t){const{startOffset:s,endOffset:i}=t;if(s===0&&i!==Number.POSITIVE_INFINITY){const r=i-1;if(r<=0)return;t.endOffsetSubtitles=Math.max(0,r),this.tracksBuffered.forEach(a=>{for(let o=0;o<a.length;){if(a[o].end<=r){a.shift();continue}else if(a[o].start<r)a[o].start=r;else break;o++}}),this.fragmentTracker.removeFragmentsInRange(s,r,Ne.SUBTITLE)}}onFragBuffered(e,t){if(!this.loadedmetadata&&t.frag.type===Ne.MAIN){var s;(s=this.media)!=null&&s.buffered.length&&(this.loadedmetadata=!0)}}onError(e,t){const s=t.frag;(s==null?void 0:s.type)===Ne.SUBTITLE&&(this.fragCurrent&&this.fragCurrent.abortRequests(),this.state!==ae.STOPPED&&(this.state=ae.IDLE))}onSubtitleTracksUpdated(e,{subtitleTracks:t}){if(yb(this.levels,t)){this.levels=t.map(s=>new Qa(s));return}this.tracksBuffered=[],this.levels=t.map(s=>{const i=new Qa(s);return this.tracksBuffered[i.id]=[],i}),this.fragmentTracker.removeFragmentsInRange(0,Number.POSITIVE_INFINITY,Ne.SUBTITLE),this.fragPrevious=null,this.mediaBuffer=null}onSubtitleTrackSwitch(e,t){if(this.currentTrackId=t.id,!this.levels.length||this.currentTrackId===-1){this.clearInterval();return}const s=this.levels[this.currentTrackId];s!=null&&s.details?this.mediaBuffer=this.mediaBufferTimeRanges:this.mediaBuffer=null,s&&this.setInterval(K0)}onSubtitleTrackLoaded(e,t){var s;const{details:i,id:r}=t,{currentTrackId:a,levels:o}=this;if(!o.length)return;const l=o[a];if(r>=o.length||r!==a||!l)return;this.mediaBuffer=this.mediaBufferTimeRanges;let c=0;if(i.live||(s=l.details)!=null&&s.live){const u=this.mainDetails;if(i.deltaUpdateFailed||!u)return;const d=u.fragments[0];l.details?(c=this.alignPlaylists(i,l.details),c===0&&d&&(c=d.start,sh(i,c))):i.hasProgramDateTime&&u.hasProgramDateTime?(eb(i,u),c=i.fragments[0].start):d&&(c=d.start,sh(i,c))}l.details=i,this.levelLastLoaded=r,!this.startFragRequested&&(this.mainDetails||!i.live)&&this.setStartPosition(l.details,c),this.tick(),i.live&&!this.fragCurrent&&this.media&&this.state===ae.IDLE&&(Ja(null,i.fragments,this.media.currentTime,0)||(this.warn("Subtitle playlist not aligned with playback"),l.details=void 0))}_handleFragmentLoadComplete(e){const{frag:t,payload:s}=e,i=t.decryptdata,r=this.hls;if(!this.fragContextChanged(t)&&s&&s.byteLength>0&&i&&i.key&&i.iv&&i.method==="AES-128"){const a=performance.now();this.decrypter.decrypt(new Uint8Array(s),i.key.buffer,i.iv.buffer).catch(o=>{throw r.trigger(C.ERROR,{type:Me.MEDIA_ERROR,details:ne.FRAG_DECRYPT_ERROR,fatal:!1,error:o,reason:o.message,frag:t}),o}).then(o=>{const l=performance.now();r.trigger(C.FRAG_DECRYPTED,{frag:t,payload:o,stats:{tstart:a,tdecrypt:l}})}).catch(o=>{this.warn(`${o.name}: ${o.message}`),this.state=ae.IDLE})}}doTick(){if(!this.media){this.state=ae.IDLE;return}if(this.state===ae.IDLE){const{currentTrackId:e,levels:t}=this,s=t[e];if(!t.length||!s||!s.details)return;const{config:i}=this,r=this.getLoadPosition(),a=ht.bufferedInfo(this.tracksBuffered[this.currentTrackId]||[],r,i.maxBufferHole),{end:o,len:l}=a,c=this.getFwdBufferInfo(this.media,Ne.MAIN),u=s.details,d=this.getMaxBufferLength(c==null?void 0:c.len)+u.levelTargetDuration;if(l>d)return;const h=u.fragments,f=h.length,p=u.edge;let m=null;const y=this.fragPrevious;if(o<p){const g=i.maxFragLookUpTolerance,v=o>p-g?0:g;m=Ja(y,h,Math.max(h[0].start,o),v),!m&&y&&y.start<h[0].start&&(m=h[0])}else m=h[f-1];if(!m)return;if(m=this.mapToInitFragWhenRequired(m),m.sn!=="initSegment"){const g=m.sn-u.startSN,v=h[g-1];v&&v.cc===m.cc&&this.fragmentTracker.getState(v)===Ut.NOT_LOADED&&(m=v)}this.fragmentTracker.getState(m)===Ut.NOT_LOADED&&this.loadFragment(m,s,o)}}getMaxBufferLength(e){const t=super.getMaxBufferLength();return e?Math.max(t,e):t}loadFragment(e,t,s){this.fragCurrent=e,e.sn==="initSegment"?this._loadInitSegment(e,t):(this.startFragRequested=!0,super.loadFragment(e,t,s))}get mediaBufferTimeRanges(){return new k$(this.tracksBuffered[this.currentTrackId]||[])}}class k${constructor(e){this.buffered=void 0;const t=(s,i,r)=>{if(i=i>>>0,i>r-1)throw new DOMException(`Failed to execute '${s}' on 'TimeRanges': The index provided (${i}) is greater than the maximum bound (${r})`);return e[i][s]};this.buffered={get length(){return e.length},end(s){return t("end",s,e.length)},start(s){return t("start",s,e.length)}}}}class P$ extends Mf{constructor(e){super(e,"[subtitle-track-controller]"),this.media=null,this.tracks=[],this.groupId=null,this.tracksInGroup=[],this.trackId=-1,this.selectDefaultTrack=!0,this.queuedDefaultTrack=-1,this.trackChangeListener=()=>this.onTextTracksChanged(),this.asyncPollTrackChange=()=>this.pollTrackChange(0),this.useTextTrackPolling=!1,this.subtitlePollingInterval=-1,this._subtitleDisplay=!0,this.registerListeners()}destroy(){this.unregisterListeners(),this.tracks.length=0,this.tracksInGroup.length=0,this.trackChangeListener=this.asyncPollTrackChange=null,super.destroy()}get subtitleDisplay(){return this._subtitleDisplay}set subtitleDisplay(e){this._subtitleDisplay=e,this.trackId>-1&&this.toggleTrackModes(this.trackId)}registerListeners(){const{hls:e}=this;e.on(C.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(C.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(C.MANIFEST_LOADING,this.onManifestLoading,this),e.on(C.MANIFEST_PARSED,this.onManifestParsed,this),e.on(C.LEVEL_LOADING,this.onLevelLoading,this),e.on(C.LEVEL_SWITCHING,this.onLevelSwitching,this),e.on(C.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),e.on(C.ERROR,this.onError,this)}unregisterListeners(){const{hls:e}=this;e.off(C.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(C.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(C.MANIFEST_LOADING,this.onManifestLoading,this),e.off(C.MANIFEST_PARSED,this.onManifestParsed,this),e.off(C.LEVEL_LOADING,this.onLevelLoading,this),e.off(C.LEVEL_SWITCHING,this.onLevelSwitching,this),e.off(C.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),e.off(C.ERROR,this.onError,this)}onMediaAttached(e,t){this.media=t.media,this.media&&(this.queuedDefaultTrack>-1&&(this.subtitleTrack=this.queuedDefaultTrack,this.queuedDefaultTrack=-1),this.useTextTrackPolling=!(this.media.textTracks&&"onchange"in this.media.textTracks),this.useTextTrackPolling?this.pollTrackChange(500):this.media.textTracks.addEventListener("change",this.asyncPollTrackChange))}pollTrackChange(e){self.clearInterval(this.subtitlePollingInterval),this.subtitlePollingInterval=self.setInterval(this.trackChangeListener,e)}onMediaDetaching(){this.media&&(self.clearInterval(this.subtitlePollingInterval),this.useTextTrackPolling||this.media.textTracks.removeEventListener("change",this.asyncPollTrackChange),this.trackId>-1&&(this.queuedDefaultTrack=this.trackId),Mu(this.media.textTracks).forEach(e=>{br(e)}),this.subtitleTrack=-1,this.media=null)}onManifestLoading(){this.tracks=[],this.groupId=null,this.tracksInGroup=[],this.trackId=-1,this.selectDefaultTrack=!0}onManifestParsed(e,t){this.tracks=t.subtitleTracks}onSubtitleTrackLoaded(e,t){const{id:s,details:i}=t,{trackId:r}=this,a=this.tracksInGroup[r];if(!a){this.warn(`Invalid subtitle track id ${s}`);return}const o=a.details;a.details=t.details,this.log(`subtitle track ${s} loaded [${i.startSN}-${i.endSN}]`),s===this.trackId&&this.playlistLoaded(s,t,o)}onLevelLoading(e,t){this.switchLevel(t.level)}onLevelSwitching(e,t){this.switchLevel(t.level)}switchLevel(e){const t=this.hls.levels[e];if(!(t!=null&&t.textGroupIds))return;const s=t.textGroupIds[t.urlId],i=this.tracksInGroup?this.tracksInGroup[this.trackId]:void 0;if(this.groupId!==s){const r=this.tracks.filter(l=>!s||l.groupId===s);this.tracksInGroup=r;const a=this.findTrackId(i==null?void 0:i.name)||this.findTrackId();this.groupId=s||null;const o={subtitleTracks:r};this.log(`Updating subtitle tracks, ${r.length} track(s) found in "${s}" group-id`),this.hls.trigger(C.SUBTITLE_TRACKS_UPDATED,o),a!==-1&&this.setSubtitleTrack(a,i)}else this.shouldReloadPlaylist(i)&&this.setSubtitleTrack(this.trackId,i)}findTrackId(e){const t=this.tracksInGroup;for(let s=0;s<t.length;s++){const i=t[s];if((!this.selectDefaultTrack||i.default)&&(!e||e===i.name))return i.id}return-1}onError(e,t){t.fatal||!t.context||t.context.type===Je.SUBTITLE_TRACK&&t.context.id===this.trackId&&t.context.groupId===this.groupId&&this.checkRetry(t)}get subtitleTracks(){return this.tracksInGroup}get subtitleTrack(){return this.trackId}set subtitleTrack(e){this.selectDefaultTrack=!1;const t=this.tracksInGroup?this.tracksInGroup[this.trackId]:void 0;this.setSubtitleTrack(e,t)}loadPlaylist(e){super.loadPlaylist();const t=this.tracksInGroup[this.trackId];if(this.shouldLoadPlaylist(t)){const s=t.id,i=t.groupId;let r=t.url;if(e)try{r=e.addDirectives(r)}catch(a){this.warn(`Could not construct new URL with HLS Delivery Directives: ${a}`)}this.log(`Loading subtitle playlist for id ${s}`),this.hls.trigger(C.SUBTITLE_TRACK_LOADING,{url:r,id:s,groupId:i,deliveryDirectives:e||null})}}toggleTrackModes(e){const{media:t,trackId:s}=this;if(!t)return;const i=Mu(t.textTracks),r=i.filter(o=>o.groupId===this.groupId);if(e===-1)[].slice.call(i).forEach(o=>{o.mode="disabled"});else{const o=r[s];o&&(o.mode="disabled")}const a=r[e];a&&(a.mode=this.subtitleDisplay?"showing":"hidden")}setSubtitleTrack(e,t){var s;const i=this.tracksInGroup;if(!this.media){this.queuedDefaultTrack=e;return}if(this.trackId!==e&&this.toggleTrackModes(e),this.trackId===e&&(e===-1||(s=i[e])!=null&&s.details)||e<-1||e>=i.length)return;this.clearTimer();const r=i[e];if(this.log(`Switching to subtitle-track ${e}`+(r?` "${r.name}" lang:${r.lang} group:${r.groupId}`:"")),this.trackId=e,r){const{id:a,groupId:o="",name:l,type:c,url:u}=r;this.hls.trigger(C.SUBTITLE_TRACK_SWITCH,{id:a,groupId:o,name:l,type:c,url:u});const d=this.switchParams(r.url,t==null?void 0:t.details);this.loadPlaylist(d)}else this.hls.trigger(C.SUBTITLE_TRACK_SWITCH,{id:e})}onTextTracksChanged(){if(this.useTextTrackPolling||self.clearInterval(this.subtitlePollingInterval),!this.media||!this.hls.config.renderTextTracksNatively)return;let e=-1;const t=Mu(this.media.textTracks);for(let s=0;s<t.length;s++)if(t[s].mode==="hidden")e=s;else if(t[s].mode==="showing"){e=s;break}this.subtitleTrack!==e&&(this.subtitleTrack=e)}}function Mu(n){const e=[];for(let t=0;t<n.length;t++){const s=n[t];(s.kind==="subtitles"||s.kind==="captions")&&s.label&&e.push(n[t])}return e}class O${constructor(e){this.buffers=void 0,this.queues={video:[],audio:[],audiovideo:[]},this.buffers=e}append(e,t){const s=this.queues[t];s.push(e),s.length===1&&this.buffers[t]&&this.executeNext(t)}insertAbort(e,t){this.queues[t].unshift(e),this.executeNext(t)}appendBlocker(e){let t;const s=new Promise(r=>{t=r}),i={execute:t,onStart:()=>{},onComplete:()=>{},onError:()=>{}};return this.append(i,e),s}executeNext(e){const{buffers:t,queues:s}=this,i=t[e],r=s[e];if(r.length){const a=r[0];try{a.execute()}catch(o){H.warn("[buffer-operation-queue]: Unhandled exception executing the current operation"),a.onError(o),i!=null&&i.updating||(r.shift(),this.executeNext(e))}}}shiftAndExecuteNext(e){this.queues[e].shift(),this.executeNext(e)}current(e){return this.queues[e][0]}}const W0=bc(),z0=/([ha]vc.)(?:\.[^.,]+)+/;class M${constructor(e){this.details=null,this._objectUrl=null,this.operationQueue=void 0,this.listeners=void 0,this.hls=void 0,this.bufferCodecEventsExpected=0,this._bufferCodecEventsTotal=0,this.media=null,this.mediaSource=null,this.lastMpegAudioChunk=null,this.appendError=0,this.tracks={},this.pendingTracks={},this.sourceBuffer=void 0,this._onMediaSourceOpen=()=>{const{media:t,mediaSource:s}=this;H.log("[buffer-controller]: Media source opened"),t&&(t.removeEventListener("emptied",this._onMediaEmptied),this.updateMediaElementDuration(),this.hls.trigger(C.MEDIA_ATTACHED,{media:t})),s&&s.removeEventListener("sourceopen",this._onMediaSourceOpen),this.checkPendingTracks()},this._onMediaSourceClose=()=>{H.log("[buffer-controller]: Media source closed")},this._onMediaSourceEnded=()=>{H.log("[buffer-controller]: Media source ended")},this._onMediaEmptied=()=>{const{media:t,_objectUrl:s}=this;t&&t.src!==s&&H.error(`Media element src was set while attaching MediaSource (${s} > ${t.src})`)},this.hls=e,this._initSourceBuffer(),this.registerListeners()}hasSourceTypes(){return this.getSourceBufferTypes().length>0||Object.keys(this.pendingTracks).length>0}destroy(){this.unregisterListeners(),this.details=null,this.lastMpegAudioChunk=null}registerListeners(){const{hls:e}=this;e.on(C.MEDIA_ATTACHING,this.onMediaAttaching,this),e.on(C.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(C.MANIFEST_LOADING,this.onManifestLoading,this),e.on(C.MANIFEST_PARSED,this.onManifestParsed,this),e.on(C.BUFFER_RESET,this.onBufferReset,this),e.on(C.BUFFER_APPENDING,this.onBufferAppending,this),e.on(C.BUFFER_CODECS,this.onBufferCodecs,this),e.on(C.BUFFER_EOS,this.onBufferEos,this),e.on(C.BUFFER_FLUSHING,this.onBufferFlushing,this),e.on(C.LEVEL_UPDATED,this.onLevelUpdated,this),e.on(C.FRAG_PARSED,this.onFragParsed,this),e.on(C.FRAG_CHANGED,this.onFragChanged,this)}unregisterListeners(){const{hls:e}=this;e.off(C.MEDIA_ATTACHING,this.onMediaAttaching,this),e.off(C.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(C.MANIFEST_LOADING,this.onManifestLoading,this),e.off(C.MANIFEST_PARSED,this.onManifestParsed,this),e.off(C.BUFFER_RESET,this.onBufferReset,this),e.off(C.BUFFER_APPENDING,this.onBufferAppending,this),e.off(C.BUFFER_CODECS,this.onBufferCodecs,this),e.off(C.BUFFER_EOS,this.onBufferEos,this),e.off(C.BUFFER_FLUSHING,this.onBufferFlushing,this),e.off(C.LEVEL_UPDATED,this.onLevelUpdated,this),e.off(C.FRAG_PARSED,this.onFragParsed,this),e.off(C.FRAG_CHANGED,this.onFragChanged,this)}_initSourceBuffer(){this.sourceBuffer={},this.operationQueue=new O$(this.sourceBuffer),this.listeners={audio:[],video:[],audiovideo:[]},this.lastMpegAudioChunk=null}onManifestLoading(){this.bufferCodecEventsExpected=this._bufferCodecEventsTotal=0,this.details=null}onManifestParsed(e,t){let s=2;(t.audio&&!t.video||!t.altAudio)&&(s=1),this.bufferCodecEventsExpected=this._bufferCodecEventsTotal=s,H.log(`${this.bufferCodecEventsExpected} bufferCodec event(s) expected`)}onMediaAttaching(e,t){const s=this.media=t.media;if(s&&W0){const i=this.mediaSource=new W0;i.addEventListener("sourceopen",this._onMediaSourceOpen),i.addEventListener("sourceended",this._onMediaSourceEnded),i.addEventListener("sourceclose",this._onMediaSourceClose),s.src=self.URL.createObjectURL(i),this._objectUrl=s.src,s.addEventListener("emptied",this._onMediaEmptied)}}onMediaDetaching(){const{media:e,mediaSource:t,_objectUrl:s}=this;if(t){if(H.log("[buffer-controller]: media source detaching"),t.readyState==="open")try{t.endOfStream()}catch(i){H.warn(`[buffer-controller]: onMediaDetaching: ${i.message} while calling endOfStream`)}this.onBufferReset(),t.removeEventListener("sourceopen",this._onMediaSourceOpen),t.removeEventListener("sourceended",this._onMediaSourceEnded),t.removeEventListener("sourceclose",this._onMediaSourceClose),e&&(e.removeEventListener("emptied",this._onMediaEmptied),s&&self.URL.revokeObjectURL(s),e.src===s?(e.removeAttribute("src"),e.load()):H.warn("[buffer-controller]: media.src was changed by a third party - skip cleanup")),this.mediaSource=null,this.media=null,this._objectUrl=null,this.bufferCodecEventsExpected=this._bufferCodecEventsTotal,this.pendingTracks={},this.tracks={}}this.hls.trigger(C.MEDIA_DETACHED,void 0)}onBufferReset(){this.getSourceBufferTypes().forEach(e=>{const t=this.sourceBuffer[e];try{t&&(this.removeBufferListeners(e),this.mediaSource&&this.mediaSource.removeSourceBuffer(t),this.sourceBuffer[e]=void 0)}catch(s){H.warn(`[buffer-controller]: Failed to reset the ${e} buffer`,s)}}),this._initSourceBuffer()}onBufferCodecs(e,t){const s=this.getSourceBufferTypes().length;Object.keys(t).forEach(i=>{if(s){const r=this.tracks[i];if(r&&typeof r.buffer.changeType=="function"){const{id:a,codec:o,levelCodec:l,container:c,metadata:u}=t[i],d=(r.levelCodec||r.codec).replace(z0,"$1"),h=(l||o).replace(z0,"$1");if(d!==h){const f=`${c};codecs=${l||o}`;this.appendChangeType(i,f),H.log(`[buffer-controller]: switching codec ${d} to ${h}`),this.tracks[i]={buffer:r.buffer,codec:o,container:c,levelCodec:l,metadata:u,id:a}}}}else this.pendingTracks[i]=t[i]}),!s&&(this.bufferCodecEventsExpected=Math.max(this.bufferCodecEventsExpected-1,0),this.mediaSource&&this.mediaSource.readyState==="open"&&this.checkPendingTracks())}appendChangeType(e,t){const{operationQueue:s}=this,i={execute:()=>{const r=this.sourceBuffer[e];r&&(H.log(`[buffer-controller]: changing ${e} sourceBuffer type to ${t}`),r.changeType(t)),s.shiftAndExecuteNext(e)},onStart:()=>{},onComplete:()=>{},onError:r=>{H.warn(`[buffer-controller]: Failed to change ${e} SourceBuffer type`,r)}};s.append(i,e)}onBufferAppending(e,t){const{hls:s,operationQueue:i,tracks:r}=this,{data:a,type:o,frag:l,part:c,chunkMeta:u}=t,d=u.buffering[o],h=self.performance.now();d.start=h;const f=l.stats.buffering,p=c?c.stats.buffering:null;f.start===0&&(f.start=h),p&&p.start===0&&(p.start=h);const m=r.audio;let y=!1;o==="audio"&&(m==null?void 0:m.container)==="audio/mpeg"&&(y=!this.lastMpegAudioChunk||u.id===1||this.lastMpegAudioChunk.sn!==u.sn,this.lastMpegAudioChunk=u);const g=l.start,v={execute:()=>{if(d.executeStart=self.performance.now(),y){const E=this.sourceBuffer[o];if(E){const T=g-E.timestampOffset;Math.abs(T)>=.1&&(H.log(`[buffer-controller]: Updating audio SourceBuffer timestampOffset to ${g} (delta: ${T}) sn: ${l.sn})`),E.timestampOffset=g)}}this.appendExecutor(a,o)},onStart:()=>{},onComplete:()=>{const E=self.performance.now();d.executeEnd=d.end=E,f.first===0&&(f.first=E),p&&p.first===0&&(p.first=E);const{sourceBuffer:T}=this,b={};for(const L in T)b[L]=ht.getBuffered(T[L]);this.appendError=0,this.hls.trigger(C.BUFFER_APPENDED,{type:o,frag:l,part:c,chunkMeta:u,parent:l.type,timeRanges:b})},onError:E=>{H.error(`[buffer-controller]: Error encountered while trying to append to the ${o} SourceBuffer`,E);const T={type:Me.MEDIA_ERROR,parent:l.type,details:ne.BUFFER_APPEND_ERROR,frag:l,part:c,chunkMeta:u,error:E,err:E,fatal:!1};E.code===DOMException.QUOTA_EXCEEDED_ERR?T.details=ne.BUFFER_FULL_ERROR:(this.appendError++,T.details=ne.BUFFER_APPEND_ERROR,this.appendError>s.config.appendErrorMaxRetry&&(H.error(`[buffer-controller]: Failed ${s.config.appendErrorMaxRetry} times to append segment in sourceBuffer`),T.fatal=!0)),s.trigger(C.ERROR,T)}};i.append(v,o)}onBufferFlushing(e,t){const{operationQueue:s}=this,i=r=>({execute:this.removeExecutor.bind(this,r,t.startOffset,t.endOffset),onStart:()=>{},onComplete:()=>{this.hls.trigger(C.BUFFER_FLUSHED,{type:r})},onError:a=>{H.warn(`[buffer-controller]: Failed to remove from ${r} SourceBuffer`,a)}});t.type?s.append(i(t.type),t.type):this.getSourceBufferTypes().forEach(r=>{s.append(i(r),r)})}onFragParsed(e,t){const{frag:s,part:i}=t,r=[],a=i?i.elementaryStreams:s.elementaryStreams;a[at.AUDIOVIDEO]?r.push("audiovideo"):(a[at.AUDIO]&&r.push("audio"),a[at.VIDEO]&&r.push("video"));const o=()=>{const l=self.performance.now();s.stats.buffering.end=l,i&&(i.stats.buffering.end=l);const c=i?i.stats:s.stats;this.hls.trigger(C.FRAG_BUFFERED,{frag:s,part:i,stats:c,id:s.type})};r.length===0&&H.warn(`Fragments must have at least one ElementaryStreamType set. type: ${s.type} level: ${s.level} sn: ${s.sn}`),this.blockBuffers(o,r)}onFragChanged(e,t){this.flushBackBuffer()}onBufferEos(e,t){this.getSourceBufferTypes().reduce((s,i)=>{const r=this.sourceBuffer[i];return r&&(!t.type||t.type===i)&&(r.ending=!0,r.ended||(r.ended=!0,H.log(`[buffer-controller]: ${i} sourceBuffer now EOS`))),s&&!!(!r||r.ended)},!0)&&(H.log("[buffer-controller]: Queueing mediaSource.endOfStream()"),this.blockBuffers(()=>{this.getSourceBufferTypes().forEach(i=>{const r=this.sourceBuffer[i];r&&(r.ending=!1)});const{mediaSource:s}=this;if(!s||s.readyState!=="open"){s&&H.info(`[buffer-controller]: Could not call mediaSource.endOfStream(). mediaSource.readyState: ${s.readyState}`);return}H.log("[buffer-controller]: Calling mediaSource.endOfStream()"),s.endOfStream()}))}onLevelUpdated(e,{details:t}){t.fragments.length&&(this.details=t,this.getSourceBufferTypes().length?this.blockBuffers(this.updateMediaElementDuration.bind(this)):this.updateMediaElementDuration())}flushBackBuffer(){const{hls:e,details:t,media:s,sourceBuffer:i}=this;if(!s||t===null)return;const r=this.getSourceBufferTypes();if(!r.length)return;const a=t.live&&e.config.liveBackBufferLength!==null?e.config.liveBackBufferLength:e.config.backBufferLength;if(!Ce(a)||a<0)return;const o=s.currentTime,l=t.levelTargetDuration,c=Math.max(a,l),u=Math.floor(o/l)*l-c;r.forEach(d=>{const h=i[d];if(h){const f=ht.getBuffered(h);if(f.length>0&&u>f.start(0)){if(e.trigger(C.BACK_BUFFER_REACHED,{bufferEnd:u}),t.live)e.trigger(C.LIVE_BACK_BUFFER_REACHED,{bufferEnd:u});else if(h.ended&&f.end(f.length-1)-o<l*2){H.info(`[buffer-controller]: Cannot flush ${d} back buffer while SourceBuffer is in ended state`);return}e.trigger(C.BUFFER_FLUSHING,{startOffset:0,endOffset:u,type:d})}}})}updateMediaElementDuration(){if(!this.details||!this.media||!this.mediaSource||this.mediaSource.readyState!=="open")return;const{details:e,hls:t,media:s,mediaSource:i}=this,r=e.fragments[0].start+e.totalduration,a=s.duration,o=Ce(i.duration)?i.duration:0;e.live&&t.config.liveDurationInfinity?(H.log("[buffer-controller]: Media Source duration is set to Infinity"),i.duration=1/0,this.updateSeekableRange(e)):(r>o&&r>a||!Ce(a))&&(H.log(`[buffer-controller]: Updating Media Source duration to ${r.toFixed(3)}`),i.duration=r)}updateSeekableRange(e){const t=this.mediaSource,s=e.fragments;if(s.length&&e.live&&t!=null&&t.setLiveSeekableRange){const i=Math.max(0,s[0].start),r=Math.max(i,i+e.totalduration);t.setLiveSeekableRange(i,r)}}checkPendingTracks(){const{bufferCodecEventsExpected:e,operationQueue:t,pendingTracks:s}=this,i=Object.keys(s).length;if(i&&!e||i===2){this.createSourceBuffers(s),this.pendingTracks={};const r=this.getSourceBufferTypes();if(r.length)this.hls.trigger(C.BUFFER_CREATED,{tracks:this.tracks}),r.forEach(a=>{t.executeNext(a)});else{const a=new Error("could not create source buffer for media codec(s)");this.hls.trigger(C.ERROR,{type:Me.MEDIA_ERROR,details:ne.BUFFER_INCOMPATIBLE_CODECS_ERROR,fatal:!0,error:a,reason:a.message})}}}createSourceBuffers(e){const{sourceBuffer:t,mediaSource:s}=this;if(!s)throw Error("createSourceBuffers called when mediaSource was null");for(const i in e)if(!t[i]){const r=e[i];if(!r)throw Error(`source buffer exists for track ${i}, however track does not`);const a=r.levelCodec||r.codec,o=`${r.container};codecs=${a}`;H.log(`[buffer-controller]: creating sourceBuffer(${o})`);try{const l=t[i]=s.addSourceBuffer(o),c=i;this.addBufferListener(c,"updatestart",this._onSBUpdateStart),this.addBufferListener(c,"updateend",this._onSBUpdateEnd),this.addBufferListener(c,"error",this._onSBUpdateError),this.tracks[i]={buffer:l,codec:a,container:r.container,levelCodec:r.levelCodec,metadata:r.metadata,id:r.id}}catch(l){H.error(`[buffer-controller]: error while trying to add sourceBuffer: ${l.message}`),this.hls.trigger(C.ERROR,{type:Me.MEDIA_ERROR,details:ne.BUFFER_ADD_CODEC_ERROR,fatal:!1,error:l,mimeType:o})}}}_onSBUpdateStart(e){const{operationQueue:t}=this;t.current(e).onStart()}_onSBUpdateEnd(e){const{operationQueue:t}=this;t.current(e).onComplete(),t.shiftAndExecuteNext(e)}_onSBUpdateError(e,t){const s=new Error(`${e} SourceBuffer error`);H.error(`[buffer-controller]: ${s}`,t),this.hls.trigger(C.ERROR,{type:Me.MEDIA_ERROR,details:ne.BUFFER_APPENDING_ERROR,error:s,fatal:!1});const i=this.operationQueue.current(e);i&&i.onError(t)}removeExecutor(e,t,s){const{media:i,mediaSource:r,operationQueue:a,sourceBuffer:o}=this,l=o[e];if(!i||!r||!l){H.warn(`[buffer-controller]: Attempting to remove from the ${e} SourceBuffer, but it does not exist`),a.shiftAndExecuteNext(e);return}const c=Ce(i.duration)?i.duration:1/0,u=Ce(r.duration)?r.duration:1/0,d=Math.max(0,t),h=Math.min(s,c,u);h>d&&!l.ending?(l.ended=!1,H.log(`[buffer-controller]: Removing [${d},${h}] from the ${e} SourceBuffer`),l.remove(d,h)):a.shiftAndExecuteNext(e)}appendExecutor(e,t){const{operationQueue:s,sourceBuffer:i}=this,r=i[t];if(!r){H.warn(`[buffer-controller]: Attempting to append to the ${t} SourceBuffer, but it does not exist`),s.shiftAndExecuteNext(t);return}r.ended=!1,r.appendBuffer(e)}blockBuffers(e,t=this.getSourceBufferTypes()){if(!t.length){H.log("[buffer-controller]: Blocking operation requested, but no SourceBuffers exist"),Promise.resolve().then(e);return}const{operationQueue:s}=this,i=t.map(r=>s.appendBlocker(r));Promise.all(i).then(()=>{e(),t.forEach(r=>{const a=this.sourceBuffer[r];a!=null&&a.updating||s.shiftAndExecuteNext(r)})})}getSourceBufferTypes(){return Object.keys(this.sourceBuffer)}addBufferListener(e,t,s){const i=this.sourceBuffer[e];if(!i)return;const r=s.bind(this,e);this.listeners[e].push({event:t,listener:r}),i.addEventListener(t,r)}removeBufferListeners(e){const t=this.sourceBuffer[e];t&&this.listeners[e].forEach(s=>{t.removeEventListener(s.event,s.listener)})}}const Y0={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,128:174,129:176,130:189,131:191,132:8482,133:162,134:163,135:9834,136:224,137:32,138:232,139:226,140:234,141:238,142:244,143:251,144:193,145:201,146:211,147:218,148:220,149:252,150:8216,151:161,152:42,153:8217,154:9473,155:169,156:8480,157:8226,158:8220,159:8221,160:192,161:194,162:199,163:200,164:202,165:203,166:235,167:206,168:207,169:239,170:212,171:217,172:249,173:219,174:171,175:187,176:195,177:227,178:205,179:204,180:236,181:210,182:242,183:213,184:245,185:123,186:125,187:92,188:94,189:95,190:124,191:8764,192:196,193:228,194:214,195:246,196:223,197:165,198:164,199:9475,200:197,201:229,202:216,203:248,204:9487,205:9491,206:9495,207:9499},vb=function(n){let e=n;return Y0.hasOwnProperty(n)&&(e=Y0[n]),String.fromCharCode(e)},js=15,wn=100,F$={17:1,18:3,21:5,22:7,23:9,16:11,19:12,20:14},N$={17:2,18:4,21:6,22:8,23:10,19:13,20:15},B$={25:1,26:3,29:5,30:7,31:9,24:11,27:12,28:14},U$={25:2,26:4,29:6,30:8,31:10,27:13,28:15},$$=["white","green","blue","cyan","red","yellow","magenta","black","transparent"];class j${constructor(){this.time=null,this.verboseLevel=0}log(e,t){if(this.verboseLevel>=e){const s=typeof t=="function"?t():t;H.log(`${this.time} [${e}] ${s}`)}}}const Ii=function(n){const e=[];for(let t=0;t<n.length;t++)e.push(n[t].toString(16));return e};class Eb{constructor(e,t,s,i,r){this.foreground=void 0,this.underline=void 0,this.italics=void 0,this.background=void 0,this.flash=void 0,this.foreground=e||"white",this.underline=t||!1,this.italics=s||!1,this.background=i||"black",this.flash=r||!1}reset(){this.foreground="white",this.underline=!1,this.italics=!1,this.background="black",this.flash=!1}setStyles(e){const t=["foreground","underline","italics","background","flash"];for(let s=0;s<t.length;s++){const i=t[s];e.hasOwnProperty(i)&&(this[i]=e[i])}}isDefault(){return this.foreground==="white"&&!this.underline&&!this.italics&&this.background==="black"&&!this.flash}equals(e){return this.foreground===e.foreground&&this.underline===e.underline&&this.italics===e.italics&&this.background===e.background&&this.flash===e.flash}copy(e){this.foreground=e.foreground,this.underline=e.underline,this.italics=e.italics,this.background=e.background,this.flash=e.flash}toString(){return"color="+this.foreground+", underline="+this.underline+", italics="+this.italics+", background="+this.background+", flash="+this.flash}}class G${constructor(e,t,s,i,r,a){this.uchar=void 0,this.penState=void 0,this.uchar=e||" ",this.penState=new Eb(t,s,i,r,a)}reset(){this.uchar=" ",this.penState.reset()}setChar(e,t){this.uchar=e,this.penState.copy(t)}setPenState(e){this.penState.copy(e)}equals(e){return this.uchar===e.uchar&&this.penState.equals(e.penState)}copy(e){this.uchar=e.uchar,this.penState.copy(e.penState)}isEmpty(){return this.uchar===" "&&this.penState.isDefault()}}class V${constructor(e){this.chars=void 0,this.pos=void 0,this.currPenState=void 0,this.cueStartTime=void 0,this.logger=void 0,this.chars=[];for(let t=0;t<wn;t++)this.chars.push(new G$);this.logger=e,this.pos=0,this.currPenState=new Eb}equals(e){let t=!0;for(let s=0;s<wn;s++)if(!this.chars[s].equals(e.chars[s])){t=!1;break}return t}copy(e){for(let t=0;t<wn;t++)this.chars[t].copy(e.chars[t])}isEmpty(){let e=!0;for(let t=0;t<wn;t++)if(!this.chars[t].isEmpty()){e=!1;break}return e}setCursor(e){this.pos!==e&&(this.pos=e),this.pos<0?(this.logger.log(3,"Negative cursor position "+this.pos),this.pos=0):this.pos>wn&&(this.logger.log(3,"Too large cursor position "+this.pos),this.pos=wn)}moveCursor(e){const t=this.pos+e;if(e>1)for(let s=this.pos+1;s<t+1;s++)this.chars[s].setPenState(this.currPenState);this.setCursor(t)}backSpace(){this.moveCursor(-1),this.chars[this.pos].setChar(" ",this.currPenState)}insertChar(e){e>=144&&this.backSpace();const t=vb(e);if(this.pos>=wn){this.logger.log(0,()=>"Cannot insert "+e.toString(16)+" ("+t+") at position "+this.pos+". Skipping it!");return}this.chars[this.pos].setChar(t,this.currPenState),this.moveCursor(1)}clearFromPos(e){let t;for(t=e;t<wn;t++)this.chars[t].reset()}clear(){this.clearFromPos(0),this.pos=0,this.currPenState.reset()}clearToEndOfRow(){this.clearFromPos(this.pos)}getTextString(){const e=[];let t=!0;for(let s=0;s<wn;s++){const i=this.chars[s].uchar;i!==" "&&(t=!1),e.push(i)}return t?"":e.join("")}setPenStyles(e){this.currPenState.setStyles(e),this.chars[this.pos].setPenState(this.currPenState)}}class Fu{constructor(e){this.rows=void 0,this.currRow=void 0,this.nrRollUpRows=void 0,this.lastOutputScreen=void 0,this.logger=void 0,this.rows=[];for(let t=0;t<js;t++)this.rows.push(new V$(e));this.logger=e,this.currRow=js-1,this.nrRollUpRows=null,this.lastOutputScreen=null,this.reset()}reset(){for(let e=0;e<js;e++)this.rows[e].clear();this.currRow=js-1}equals(e){let t=!0;for(let s=0;s<js;s++)if(!this.rows[s].equals(e.rows[s])){t=!1;break}return t}copy(e){for(let t=0;t<js;t++)this.rows[t].copy(e.rows[t])}isEmpty(){let e=!0;for(let t=0;t<js;t++)if(!this.rows[t].isEmpty()){e=!1;break}return e}backSpace(){this.rows[this.currRow].backSpace()}clearToEndOfRow(){this.rows[this.currRow].clearToEndOfRow()}insertChar(e){this.rows[this.currRow].insertChar(e)}setPen(e){this.rows[this.currRow].setPenStyles(e)}moveCursor(e){this.rows[this.currRow].moveCursor(e)}setCursor(e){this.logger.log(2,"setCursor: "+e),this.rows[this.currRow].setCursor(e)}setPAC(e){this.logger.log(2,()=>"pacData = "+JSON.stringify(e));let t=e.row-1;if(this.nrRollUpRows&&t<this.nrRollUpRows-1&&(t=this.nrRollUpRows-1),this.nrRollUpRows&&this.currRow!==t){for(let o=0;o<js;o++)this.rows[o].clear();const r=this.currRow+1-this.nrRollUpRows,a=this.lastOutputScreen;if(a){const o=a.rows[r].cueStartTime,l=this.logger.time;if(o&&l!==null&&o<l)for(let c=0;c<this.nrRollUpRows;c++)this.rows[t-this.nrRollUpRows+c+1].copy(a.rows[r+c])}}this.currRow=t;const s=this.rows[this.currRow];if(e.indent!==null){const r=e.indent,a=Math.max(r-1,0);s.setCursor(e.indent),e.color=s.chars[a].penState.foreground}const i={foreground:e.color,underline:e.underline,italics:e.italics,background:"black",flash:!1};this.setPen(i)}setBkgData(e){this.logger.log(2,()=>"bkgData = "+JSON.stringify(e)),this.backSpace(),this.setPen(e),this.insertChar(32)}setRollUpRows(e){this.nrRollUpRows=e}rollUp(){if(this.nrRollUpRows===null){this.logger.log(3,"roll_up but nrRollUpRows not set yet");return}this.logger.log(1,()=>this.getDisplayText());const e=this.currRow+1-this.nrRollUpRows,t=this.rows.splice(e,1)[0];t.clear(),this.rows.splice(this.currRow,0,t),this.logger.log(2,"Rolling up")}getDisplayText(e){e=e||!1;const t=[];let s="",i=-1;for(let r=0;r<js;r++){const a=this.rows[r].getTextString();a&&(i=r+1,e?t.push("Row "+i+": '"+a+"'"):t.push(a.trim()))}return t.length>0&&(e?s="["+t.join(" | ")+"]":s=t.join(`
`)),s}getTextAndFormat(){return this.rows}}class q0{constructor(e,t,s){this.chNr=void 0,this.outputFilter=void 0,this.mode=void 0,this.verbose=void 0,this.displayedMemory=void 0,this.nonDisplayedMemory=void 0,this.lastOutputScreen=void 0,this.currRollUpRow=void 0,this.writeScreen=void 0,this.cueStartTime=void 0,this.logger=void 0,this.chNr=e,this.outputFilter=t,this.mode=null,this.verbose=0,this.displayedMemory=new Fu(s),this.nonDisplayedMemory=new Fu(s),this.lastOutputScreen=new Fu(s),this.currRollUpRow=this.displayedMemory.rows[js-1],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null,this.logger=s}reset(){this.mode=null,this.displayedMemory.reset(),this.nonDisplayedMemory.reset(),this.lastOutputScreen.reset(),this.outputFilter.reset(),this.currRollUpRow=this.displayedMemory.rows[js-1],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null}getHandler(){return this.outputFilter}setHandler(e){this.outputFilter=e}setPAC(e){this.writeScreen.setPAC(e)}setBkgData(e){this.writeScreen.setBkgData(e)}setMode(e){e!==this.mode&&(this.mode=e,this.logger.log(2,()=>"MODE="+e),this.mode==="MODE_POP-ON"?this.writeScreen=this.nonDisplayedMemory:(this.writeScreen=this.displayedMemory,this.writeScreen.reset()),this.mode!=="MODE_ROLL-UP"&&(this.displayedMemory.nrRollUpRows=null,this.nonDisplayedMemory.nrRollUpRows=null),this.mode=e)}insertChars(e){for(let s=0;s<e.length;s++)this.writeScreen.insertChar(e[s]);const t=this.writeScreen===this.displayedMemory?"DISP":"NON_DISP";this.logger.log(2,()=>t+": "+this.writeScreen.getDisplayText(!0)),(this.mode==="MODE_PAINT-ON"||this.mode==="MODE_ROLL-UP")&&(this.logger.log(1,()=>"DISPLAYED: "+this.displayedMemory.getDisplayText(!0)),this.outputDataUpdate())}ccRCL(){this.logger.log(2,"RCL - Resume Caption Loading"),this.setMode("MODE_POP-ON")}ccBS(){this.logger.log(2,"BS - BackSpace"),this.mode!=="MODE_TEXT"&&(this.writeScreen.backSpace(),this.writeScreen===this.displayedMemory&&this.outputDataUpdate())}ccAOF(){}ccAON(){}ccDER(){this.logger.log(2,"DER- Delete to End of Row"),this.writeScreen.clearToEndOfRow(),this.outputDataUpdate()}ccRU(e){this.logger.log(2,"RU("+e+") - Roll Up"),this.writeScreen=this.displayedMemory,this.setMode("MODE_ROLL-UP"),this.writeScreen.setRollUpRows(e)}ccFON(){this.logger.log(2,"FON - Flash On"),this.writeScreen.setPen({flash:!0})}ccRDC(){this.logger.log(2,"RDC - Resume Direct Captioning"),this.setMode("MODE_PAINT-ON")}ccTR(){this.logger.log(2,"TR"),this.setMode("MODE_TEXT")}ccRTD(){this.logger.log(2,"RTD"),this.setMode("MODE_TEXT")}ccEDM(){this.logger.log(2,"EDM - Erase Displayed Memory"),this.displayedMemory.reset(),this.outputDataUpdate(!0)}ccCR(){this.logger.log(2,"CR - Carriage Return"),this.writeScreen.rollUp(),this.outputDataUpdate(!0)}ccENM(){this.logger.log(2,"ENM - Erase Non-displayed Memory"),this.nonDisplayedMemory.reset()}ccEOC(){if(this.logger.log(2,"EOC - End Of Caption"),this.mode==="MODE_POP-ON"){const e=this.displayedMemory;this.displayedMemory=this.nonDisplayedMemory,this.nonDisplayedMemory=e,this.writeScreen=this.nonDisplayedMemory,this.logger.log(1,()=>"DISP: "+this.displayedMemory.getDisplayText())}this.outputDataUpdate(!0)}ccTO(e){this.logger.log(2,"TO("+e+") - Tab Offset"),this.writeScreen.moveCursor(e)}ccMIDROW(e){const t={flash:!1};if(t.underline=e%2===1,t.italics=e>=46,t.italics)t.foreground="white";else{const s=Math.floor(e/2)-16,i=["white","green","blue","cyan","red","yellow","magenta"];t.foreground=i[s]}this.logger.log(2,"MIDROW: "+JSON.stringify(t)),this.writeScreen.setPen(t)}outputDataUpdate(e=!1){const t=this.logger.time;t!==null&&this.outputFilter&&(this.cueStartTime===null&&!this.displayedMemory.isEmpty()?this.cueStartTime=t:this.displayedMemory.equals(this.lastOutputScreen)||(this.outputFilter.newCue(this.cueStartTime,t,this.lastOutputScreen),e&&this.outputFilter.dispatchCue&&this.outputFilter.dispatchCue(),this.cueStartTime=this.displayedMemory.isEmpty()?null:t),this.lastOutputScreen.copy(this.displayedMemory))}cueSplitAtTime(e){this.outputFilter&&(this.displayedMemory.isEmpty()||(this.outputFilter.newCue&&this.outputFilter.newCue(this.cueStartTime,e,this.displayedMemory),this.cueStartTime=e))}}class X0{constructor(e,t,s){this.channels=void 0,this.currentChannel=0,this.cmdHistory=void 0,this.logger=void 0;const i=new j$;this.channels=[null,new q0(e,t,i),new q0(e+1,s,i)],this.cmdHistory=J0(),this.logger=i}getHandler(e){return this.channels[e].getHandler()}setHandler(e,t){this.channels[e].setHandler(t)}addData(e,t){let s,i,r,a=!1;this.logger.time=e;for(let o=0;o<t.length;o+=2)if(i=t[o]&127,r=t[o+1]&127,!(i===0&&r===0)){if(this.logger.log(3,"["+Ii([t[o],t[o+1]])+"] -> ("+Ii([i,r])+")"),s=this.parseCmd(i,r),s||(s=this.parseMidrow(i,r)),s||(s=this.parsePAC(i,r)),s||(s=this.parseBackgroundAttributes(i,r)),!s&&(a=this.parseChars(i,r),a)){const l=this.currentChannel;l&&l>0?this.channels[l].insertChars(a):this.logger.log(2,"No channel found yet. TEXT-MODE?")}!s&&!a&&this.logger.log(2,"Couldn't parse cleaned data "+Ii([i,r])+" orig: "+Ii([t[o],t[o+1]]))}}parseCmd(e,t){const{cmdHistory:s}=this,i=(e===20||e===28||e===21||e===29)&&t>=32&&t<=47,r=(e===23||e===31)&&t>=33&&t<=35;if(!(i||r))return!1;if(Q0(e,t,s))return fr(null,null,s),this.logger.log(3,"Repeated command ("+Ii([e,t])+") is dropped"),!0;const a=e===20||e===21||e===23?1:2,o=this.channels[a];return e===20||e===21||e===28||e===29?t===32?o.ccRCL():t===33?o.ccBS():t===34?o.ccAOF():t===35?o.ccAON():t===36?o.ccDER():t===37?o.ccRU(2):t===38?o.ccRU(3):t===39?o.ccRU(4):t===40?o.ccFON():t===41?o.ccRDC():t===42?o.ccTR():t===43?o.ccRTD():t===44?o.ccEDM():t===45?o.ccCR():t===46?o.ccENM():t===47&&o.ccEOC():o.ccTO(t-32),fr(e,t,s),this.currentChannel=a,!0}parseMidrow(e,t){let s=0;if((e===17||e===25)&&t>=32&&t<=47){if(e===17?s=1:s=2,s!==this.currentChannel)return this.logger.log(0,"Mismatch channel in midrow parsing"),!1;const i=this.channels[s];return i?(i.ccMIDROW(t),this.logger.log(3,"MIDROW ("+Ii([e,t])+")"),!0):!1}return!1}parsePAC(e,t){let s;const i=this.cmdHistory,r=(e>=17&&e<=23||e>=25&&e<=31)&&t>=64&&t<=127,a=(e===16||e===24)&&t>=64&&t<=95;if(!(r||a))return!1;if(Q0(e,t,i))return fr(null,null,i),!0;const o=e<=23?1:2;t>=64&&t<=95?s=o===1?F$[e]:B$[e]:s=o===1?N$[e]:U$[e];const l=this.channels[o];return l?(l.setPAC(this.interpretPAC(s,t)),fr(e,t,i),this.currentChannel=o,!0):!1}interpretPAC(e,t){let s;const i={color:null,italics:!1,indent:null,underline:!1,row:e};return t>95?s=t-96:s=t-64,i.underline=(s&1)===1,s<=13?i.color=["white","green","blue","cyan","red","yellow","magenta","white"][Math.floor(s/2)]:s<=15?(i.italics=!0,i.color="white"):i.indent=Math.floor((s-16)/2)*4,i}parseChars(e,t){let s,i=null,r=null;if(e>=25?(s=2,r=e-8):(s=1,r=e),r>=17&&r<=19){let a;r===17?a=t+80:r===18?a=t+112:a=t+144,this.logger.log(2,"Special char '"+vb(a)+"' in channel "+s),i=[a]}else e>=32&&e<=127&&(i=t===0?[e]:[e,t]);if(i){const a=Ii(i);this.logger.log(3,"Char codes =  "+a.join(",")),fr(e,t,this.cmdHistory)}return i}parseBackgroundAttributes(e,t){const s=(e===16||e===24)&&t>=32&&t<=47,i=(e===23||e===31)&&t>=45&&t<=47;if(!(s||i))return!1;let r;const a={};e===16||e===24?(r=Math.floor((t-32)/2),a.background=$$[r],t%2===1&&(a.background=a.background+"_semi")):t===45?a.background="transparent":(a.foreground="black",t===47&&(a.underline=!0));const o=e<=23?1:2;return this.channels[o].setBkgData(a),fr(e,t,this.cmdHistory),!0}reset(){for(let e=0;e<Object.keys(this.channels).length;e++){const t=this.channels[e];t&&t.reset()}this.cmdHistory=J0()}cueSplitAtTime(e){for(let t=0;t<this.channels.length;t++){const s=this.channels[t];s&&s.cueSplitAtTime(e)}}}function fr(n,e,t){t.a=n,t.b=e}function Q0(n,e,t){return t.a===n&&t.b===e}function J0(){return{a:null,b:null}}class Go{constructor(e,t){this.timelineController=void 0,this.cueRanges=[],this.trackName=void 0,this.startTime=null,this.endTime=null,this.screen=null,this.timelineController=e,this.trackName=t}dispatchCue(){this.startTime!==null&&(this.timelineController.addCues(this.trackName,this.startTime,this.endTime,this.screen,this.cueRanges),this.startTime=null)}newCue(e,t,s){(this.startTime===null||this.startTime>e)&&(this.startTime=e),this.endTime=t,this.screen=s,this.timelineController.createCaptionsTrack(this.trackName)}reset(){this.cueRanges=[],this.startTime=null}}var Hf=function(){if(typeof self<"u"&&self.VTTCue)return self.VTTCue;const n=["","lr","rl"],e=["start","middle","end","left","right"];function t(o,l){if(typeof l!="string"||!Array.isArray(o))return!1;const c=l.toLowerCase();return~o.indexOf(c)?c:!1}function s(o){return t(n,o)}function i(o){return t(e,o)}function r(o,...l){let c=1;for(;c<arguments.length;c++){const u=arguments[c];for(const d in u)o[d]=u[d]}return o}function a(o,l,c){const u=this,d={enumerable:!0};u.hasBeenReset=!1;let h="",f=!1,p=o,m=l,y=c,g=null,v="",E=!0,T="auto",b="start",L=50,x="middle",w=50,k="middle";Object.defineProperty(u,"id",r({},d,{get:function(){return h},set:function(R){h=""+R}})),Object.defineProperty(u,"pauseOnExit",r({},d,{get:function(){return f},set:function(R){f=!!R}})),Object.defineProperty(u,"startTime",r({},d,{get:function(){return p},set:function(R){if(typeof R!="number")throw new TypeError("Start time must be set to a number.");p=R,this.hasBeenReset=!0}})),Object.defineProperty(u,"endTime",r({},d,{get:function(){return m},set:function(R){if(typeof R!="number")throw new TypeError("End time must be set to a number.");m=R,this.hasBeenReset=!0}})),Object.defineProperty(u,"text",r({},d,{get:function(){return y},set:function(R){y=""+R,this.hasBeenReset=!0}})),Object.defineProperty(u,"region",r({},d,{get:function(){return g},set:function(R){g=R,this.hasBeenReset=!0}})),Object.defineProperty(u,"vertical",r({},d,{get:function(){return v},set:function(R){const P=s(R);if(P===!1)throw new SyntaxError("An invalid or illegal string was specified.");v=P,this.hasBeenReset=!0}})),Object.defineProperty(u,"snapToLines",r({},d,{get:function(){return E},set:function(R){E=!!R,this.hasBeenReset=!0}})),Object.defineProperty(u,"line",r({},d,{get:function(){return T},set:function(R){if(typeof R!="number"&&R!=="auto")throw new SyntaxError("An invalid number or illegal string was specified.");T=R,this.hasBeenReset=!0}})),Object.defineProperty(u,"lineAlign",r({},d,{get:function(){return b},set:function(R){const P=i(R);if(!P)throw new SyntaxError("An invalid or illegal string was specified.");b=P,this.hasBeenReset=!0}})),Object.defineProperty(u,"position",r({},d,{get:function(){return L},set:function(R){if(R<0||R>100)throw new Error("Position must be between 0 and 100.");L=R,this.hasBeenReset=!0}})),Object.defineProperty(u,"positionAlign",r({},d,{get:function(){return x},set:function(R){const P=i(R);if(!P)throw new SyntaxError("An invalid or illegal string was specified.");x=P,this.hasBeenReset=!0}})),Object.defineProperty(u,"size",r({},d,{get:function(){return w},set:function(R){if(R<0||R>100)throw new Error("Size must be between 0 and 100.");w=R,this.hasBeenReset=!0}})),Object.defineProperty(u,"align",r({},d,{get:function(){return k},set:function(R){const P=i(R);if(!P)throw new SyntaxError("An invalid or illegal string was specified.");k=P,this.hasBeenReset=!0}})),u.displayState=void 0}return a.prototype.getCueAsHTML=function(){return self.WebVTT.convertCueToDOMTree(self,this.text)},a}();class H${decode(e,t){if(!e)return"";if(typeof e!="string")throw new Error("Error - expected string data.");return decodeURIComponent(encodeURIComponent(e))}}function Tb(n){function e(s,i,r,a){return(s|0)*3600+(i|0)*60+(r|0)+parseFloat(a||0)}const t=n.match(/^(?:(\d+):)?(\d{2}):(\d{2})(\.\d+)?/);return t?parseFloat(t[2])>59?e(t[2],t[3],0,t[4]):e(t[1],t[2],t[3],t[4]):null}class K${constructor(){this.values=Object.create(null)}set(e,t){!this.get(e)&&t!==""&&(this.values[e]=t)}get(e,t,s){return s?this.has(e)?this.values[e]:t[s]:this.has(e)?this.values[e]:t}has(e){return e in this.values}alt(e,t,s){for(let i=0;i<s.length;++i)if(t===s[i]){this.set(e,t);break}}integer(e,t){/^-?\d+$/.test(t)&&this.set(e,parseInt(t,10))}percent(e,t){if(/^([\d]{1,3})(\.[\d]*)?%$/.test(t)){const s=parseFloat(t);if(s>=0&&s<=100)return this.set(e,s),!0}return!1}}function bb(n,e,t,s){const i=s?n.split(s):[n];for(const r in i){if(typeof i[r]!="string")continue;const a=i[r].split(t);if(a.length!==2)continue;const o=a[0],l=a[1];e(o,l)}}const rh=new Hf(0,0,""),Vo=rh.align==="middle"?"middle":"center";function W$(n,e,t){const s=n;function i(){const o=Tb(n);if(o===null)throw new Error("Malformed timestamp: "+s);return n=n.replace(/^[^\sa-zA-Z-]+/,""),o}function r(o,l){const c=new K$;bb(o,function(h,f){let p;switch(h){case"region":for(let m=t.length-1;m>=0;m--)if(t[m].id===f){c.set(h,t[m].region);break}break;case"vertical":c.alt(h,f,["rl","lr"]);break;case"line":p=f.split(","),c.integer(h,p[0]),c.percent(h,p[0])&&c.set("snapToLines",!1),c.alt(h,p[0],["auto"]),p.length===2&&c.alt("lineAlign",p[1],["start",Vo,"end"]);break;case"position":p=f.split(","),c.percent(h,p[0]),p.length===2&&c.alt("positionAlign",p[1],["start",Vo,"end","line-left","line-right","auto"]);break;case"size":c.percent(h,f);break;case"align":c.alt(h,f,["start",Vo,"end","left","right"]);break}},/:/,/\s/),l.region=c.get("region",null),l.vertical=c.get("vertical","");let u=c.get("line","auto");u==="auto"&&rh.line===-1&&(u=-1),l.line=u,l.lineAlign=c.get("lineAlign","start"),l.snapToLines=c.get("snapToLines",!0),l.size=c.get("size",100),l.align=c.get("align",Vo);let d=c.get("position","auto");d==="auto"&&rh.position===50&&(d=l.align==="start"||l.align==="left"?0:l.align==="end"||l.align==="right"?100:50),l.position=d}function a(){n=n.replace(/^\s+/,"")}if(a(),e.startTime=i(),a(),n.slice(0,3)!=="-->")throw new Error("Malformed time stamp (time stamps must be separated by '-->'): "+s);n=n.slice(3),a(),e.endTime=i(),a(),r(n,e)}function xb(n){return n.replace(/<br(?: \/)?>/gi,`
`)}class z${constructor(){this.state="INITIAL",this.buffer="",this.decoder=new H$,this.regionList=[],this.cue=null,this.oncue=void 0,this.onparsingerror=void 0,this.onflush=void 0}parse(e){const t=this;e&&(t.buffer+=t.decoder.decode(e,{stream:!0}));function s(){let r=t.buffer,a=0;for(r=xb(r);a<r.length&&r[a]!=="\r"&&r[a]!==`
`;)++a;const o=r.slice(0,a);return r[a]==="\r"&&++a,r[a]===`
`&&++a,t.buffer=r.slice(a),o}function i(r){bb(r,function(a,o){},/:/)}try{let r="";if(t.state==="INITIAL"){if(!/\r\n|\n/.test(t.buffer))return this;r=s();const o=r.match(/^(ï»¿)?WEBVTT([ \t].*)?$/);if(!(o!=null&&o[0]))throw new Error("Malformed WebVTT signature.");t.state="HEADER"}let a=!1;for(;t.buffer;){if(!/\r\n|\n/.test(t.buffer))return this;switch(a?a=!1:r=s(),t.state){case"HEADER":/:/.test(r)?i(r):r||(t.state="ID");continue;case"NOTE":r||(t.state="ID");continue;case"ID":if(/^NOTE($|[ \t])/.test(r)){t.state="NOTE";break}if(!r)continue;if(t.cue=new Hf(0,0,""),t.state="CUE",r.indexOf("-->")===-1){t.cue.id=r;continue}case"CUE":if(!t.cue){t.state="BADCUE";continue}try{W$(r,t.cue,t.regionList)}catch{t.cue=null,t.state="BADCUE";continue}t.state="CUETEXT";continue;case"CUETEXT":{const o=r.indexOf("-->")!==-1;if(!r||o&&(a=!0)){t.oncue&&t.cue&&t.oncue(t.cue),t.cue=null,t.state="ID";continue}if(t.cue===null)continue;t.cue.text&&(t.cue.text+=`
`),t.cue.text+=r}continue;case"BADCUE":r||(t.state="ID")}}}catch{t.state==="CUETEXT"&&t.cue&&t.oncue&&t.oncue(t.cue),t.cue=null,t.state=t.state==="INITIAL"?"BADWEBVTT":"BADCUE"}return this}flush(){const e=this;try{if((e.cue||e.state==="HEADER")&&(e.buffer+=`

`,e.parse()),e.state==="INITIAL"||e.state==="BADWEBVTT")throw new Error("Malformed WebVTT signature.")}catch(t){e.onparsingerror&&e.onparsingerror(t)}return e.onflush&&e.onflush(),this}}const Y$=/\r\n|\n\r|\n|\r/g,Nu=function(n,e,t=0){return n.slice(t,t+e.length)===e},q$=function(n){let e=parseInt(n.slice(-3));const t=parseInt(n.slice(-6,-4)),s=parseInt(n.slice(-9,-7)),i=n.length>9?parseInt(n.substring(0,n.indexOf(":"))):0;if(!Ce(e)||!Ce(t)||!Ce(s)||!Ce(i))throw Error(`Malformed X-TIMESTAMP-MAP: Local:${n}`);return e+=1e3*t,e+=60*1e3*s,e+=60*60*1e3*i,e},Bu=function(n){let e=5381,t=n.length;for(;t;)e=e*33^n.charCodeAt(--t);return(e>>>0).toString()};function Kf(n,e,t){return Bu(n.toString())+Bu(e.toString())+Bu(t)}const X$=function(n,e,t){let s=n[e],i=n[s.prevCC];if(!i||!i.new&&s.new){n.ccOffset=n.presentationOffset=s.start,s.new=!1;return}for(;(r=i)!=null&&r.new;){var r;n.ccOffset+=s.start-i.start,s.new=!1,s=i,i=n[s.prevCC]}n.presentationOffset=t};function Q$(n,e,t,s,i,r,a){const o=new z$,l=yn(new Uint8Array(n)).trim().replace(Y$,`
`).split(`
`),c=[],u=e?l$(e.baseTime,e.timescale):0;let d="00:00.000",h=0,f=0,p,m=!0;o.oncue=function(y){const g=t[s];let v=t.ccOffset;const E=(h-u)/9e4;if(g!=null&&g.new&&(f!==void 0?v=t.ccOffset=g.start:X$(t,s,E)),E){if(!e){p=new Error("Missing initPTS for VTT MPEGTS");return}v=E-t.presentationOffset}const T=y.endTime-y.startTime,b=Ps((y.startTime+v-f)*9e4,i*9e4)/9e4;y.startTime=Math.max(b,0),y.endTime=Math.max(b+T,0);const L=y.text.trim();y.text=decodeURIComponent(encodeURIComponent(L)),y.id||(y.id=Kf(y.startTime,y.endTime,L)),y.endTime>0&&c.push(y)},o.onparsingerror=function(y){p=y},o.onflush=function(){if(p){a(p);return}r(c)},l.forEach(y=>{if(m)if(Nu(y,"X-TIMESTAMP-MAP=")){m=!1,y.slice(16).split(",").forEach(g=>{Nu(g,"LOCAL:")?d=g.slice(6):Nu(g,"MPEGTS:")&&(h=parseInt(g.slice(7)))});try{f=q$(d)/1e3}catch(g){p=g}return}else y===""&&(m=!1);o.parse(y+`
`)}),o.flush()}const Uu="stpp.ttml.im1t",Sb=/^(\d{2,}):(\d{2}):(\d{2}):(\d{2})\.?(\d+)?$/,_b=/^(\d*(?:\.\d*)?)(h|m|s|ms|f|t)$/,J$={left:"start",center:"center",right:"end",start:"start",end:"end"};function Z0(n,e,t,s){const i=Qe(new Uint8Array(n),["mdat"]);if(i.length===0){s(new Error("Could not parse IMSC1 mdat"));return}const r=i.map(o=>yn(o)),a=o$(e.baseTime,1,e.timescale);try{r.forEach(o=>t(Z$(o,a)))}catch(o){s(o)}}function Z$(n,e){const t=new DOMParser().parseFromString(n,"text/xml").getElementsByTagName("tt")[0];if(!t)throw new Error("Invalid ttml");const s={frameRate:30,subFrameRate:1,frameRateMultiplier:0,tickRate:0},i=Object.keys(s).reduce((c,u)=>(c[u]=t.getAttribute(`ttp:${u}`)||s[u],c),{}),r=t.getAttribute("xml:space")!=="preserve",a=ey($u(t,"styling","style")),o=ey($u(t,"layout","region")),l=$u(t,"body","[begin]");return[].map.call(l,c=>{const u=Ab(c,r);if(!u||!c.hasAttribute("begin"))return null;const d=Gu(c.getAttribute("begin"),i),h=Gu(c.getAttribute("dur"),i);let f=Gu(c.getAttribute("end"),i);if(d===null)throw ty(c);if(f===null){if(h===null)throw ty(c);f=d+h}const p=new Hf(d-e,f-e,u);p.id=Kf(p.startTime,p.endTime,p.text);const m=o[c.getAttribute("region")],y=a[c.getAttribute("style")],g=e6(m,y,a),{textAlign:v}=g;if(v){const E=J$[v];E&&(p.lineAlign=E),p.align=v}return Mt(p,g),p}).filter(c=>c!==null)}function $u(n,e,t){const s=n.getElementsByTagName(e)[0];return s?[].slice.call(s.querySelectorAll(t)):[]}function ey(n){return n.reduce((e,t)=>{const s=t.getAttribute("xml:id");return s&&(e[s]=t),e},{})}function Ab(n,e){return[].slice.call(n.childNodes).reduce((t,s,i)=>{var r;return s.nodeName==="br"&&i?t+`
`:(r=s.childNodes)!=null&&r.length?Ab(s,e):e?t+s.textContent.trim().replace(/\s+/g," "):t+s.textContent},"")}function e6(n,e,t){const s="http://www.w3.org/ns/ttml#styling";let i=null;const r=["displayAlign","textAlign","color","backgroundColor","fontSize","fontFamily"],a=n!=null&&n.hasAttribute("style")?n.getAttribute("style"):null;return a&&t.hasOwnProperty(a)&&(i=t[a]),r.reduce((o,l)=>{const c=ju(e,s,l)||ju(n,s,l)||ju(i,s,l);return c&&(o[l]=c),o},{})}function ju(n,e,t){return n&&n.hasAttributeNS(e,t)?n.getAttributeNS(e,t):null}function ty(n){return new Error(`Could not parse ttml timestamp ${n}`)}function Gu(n,e){if(!n)return null;let t=Tb(n);return t===null&&(Sb.test(n)?t=t6(n,e):_b.test(n)&&(t=s6(n,e))),t}function t6(n,e){const t=Sb.exec(n),s=(t[4]|0)+(t[5]|0)/e.subFrameRate;return(t[1]|0)*3600+(t[2]|0)*60+(t[3]|0)+s/e.frameRate}function s6(n,e){const t=_b.exec(n),s=Number(t[1]);switch(t[2]){case"h":return s*3600;case"m":return s*60;case"ms":return s*1e3;case"f":return s/e.frameRate;case"t":return s/e.tickRate}return s}class n6{constructor(e){if(this.hls=void 0,this.media=null,this.config=void 0,this.enabled=!0,this.Cues=void 0,this.textTracks=[],this.tracks=[],this.initPTS=[],this.unparsedVttFrags=[],this.captionsTracks={},this.nonNativeCaptionsTracks={},this.cea608Parser1=void 0,this.cea608Parser2=void 0,this.lastSn=-1,this.lastPartIndex=-1,this.prevCC=-1,this.vttCCs=sy(),this.captionsProperties=void 0,this.hls=e,this.config=e.config,this.Cues=e.config.cueHandler,this.captionsProperties={textTrack1:{label:this.config.captionsTextTrack1Label,languageCode:this.config.captionsTextTrack1LanguageCode},textTrack2:{label:this.config.captionsTextTrack2Label,languageCode:this.config.captionsTextTrack2LanguageCode},textTrack3:{label:this.config.captionsTextTrack3Label,languageCode:this.config.captionsTextTrack3LanguageCode},textTrack4:{label:this.config.captionsTextTrack4Label,languageCode:this.config.captionsTextTrack4LanguageCode}},this.config.enableCEA708Captions){const t=new Go(this,"textTrack1"),s=new Go(this,"textTrack2"),i=new Go(this,"textTrack3"),r=new Go(this,"textTrack4");this.cea608Parser1=new X0(1,t,s),this.cea608Parser2=new X0(3,i,r)}e.on(C.MEDIA_ATTACHING,this.onMediaAttaching,this),e.on(C.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(C.MANIFEST_LOADING,this.onManifestLoading,this),e.on(C.MANIFEST_LOADED,this.onManifestLoaded,this),e.on(C.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),e.on(C.FRAG_LOADING,this.onFragLoading,this),e.on(C.FRAG_LOADED,this.onFragLoaded,this),e.on(C.FRAG_PARSING_USERDATA,this.onFragParsingUserdata,this),e.on(C.FRAG_DECRYPTED,this.onFragDecrypted,this),e.on(C.INIT_PTS_FOUND,this.onInitPtsFound,this),e.on(C.SUBTITLE_TRACKS_CLEARED,this.onSubtitleTracksCleared,this),e.on(C.BUFFER_FLUSHING,this.onBufferFlushing,this)}destroy(){const{hls:e}=this;e.off(C.MEDIA_ATTACHING,this.onMediaAttaching,this),e.off(C.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(C.MANIFEST_LOADING,this.onManifestLoading,this),e.off(C.MANIFEST_LOADED,this.onManifestLoaded,this),e.off(C.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),e.off(C.FRAG_LOADING,this.onFragLoading,this),e.off(C.FRAG_LOADED,this.onFragLoaded,this),e.off(C.FRAG_PARSING_USERDATA,this.onFragParsingUserdata,this),e.off(C.FRAG_DECRYPTED,this.onFragDecrypted,this),e.off(C.INIT_PTS_FOUND,this.onInitPtsFound,this),e.off(C.SUBTITLE_TRACKS_CLEARED,this.onSubtitleTracksCleared,this),e.off(C.BUFFER_FLUSHING,this.onBufferFlushing,this),this.hls=this.config=this.cea608Parser1=this.cea608Parser2=null}addCues(e,t,s,i,r){let a=!1;for(let o=r.length;o--;){const l=r[o],c=r6(l[0],l[1],t,s);if(c>=0&&(l[0]=Math.min(l[0],t),l[1]=Math.max(l[1],s),a=!0,c/(s-t)>.5))return}if(a||r.push([t,s]),this.config.renderTextTracksNatively){const o=this.captionsTracks[e];this.Cues.newCue(o,t,s,i)}else{const o=this.Cues.newCue(null,t,s,i);this.hls.trigger(C.CUES_PARSED,{type:"captions",cues:o,track:e})}}onInitPtsFound(e,{frag:t,id:s,initPTS:i,timescale:r}){const{unparsedVttFrags:a}=this;s==="main"&&(this.initPTS[t.cc]={baseTime:i,timescale:r}),a.length&&(this.unparsedVttFrags=[],a.forEach(o=>{this.onFragLoaded(C.FRAG_LOADED,o)}))}getExistingTrack(e){const{media:t}=this;if(t)for(let s=0;s<t.textTracks.length;s++){const i=t.textTracks[s];if(i[e])return i}return null}createCaptionsTrack(e){this.config.renderTextTracksNatively?this.createNativeTrack(e):this.createNonNativeTrack(e)}createNativeTrack(e){if(this.captionsTracks[e])return;const{captionsProperties:t,captionsTracks:s,media:i}=this,{label:r,languageCode:a}=t[e],o=this.getExistingTrack(e);if(o)s[e]=o,br(s[e]),zT(s[e],i);else{const l=this.createTextTrack("captions",r,a);l&&(l[e]=!0,s[e]=l)}}createNonNativeTrack(e){if(this.nonNativeCaptionsTracks[e])return;const t=this.captionsProperties[e];if(!t)return;const s=t.label,i={_id:e,label:s,kind:"captions",default:t.media?!!t.media.default:!1,closedCaptions:t.media};this.nonNativeCaptionsTracks[e]=i,this.hls.trigger(C.NON_NATIVE_TEXT_TRACKS_FOUND,{tracks:[i]})}createTextTrack(e,t,s){const i=this.media;if(i)return i.addTextTrack(e,t,s)}onMediaAttaching(e,t){this.media=t.media,this._cleanTracks()}onMediaDetaching(){const{captionsTracks:e}=this;Object.keys(e).forEach(t=>{br(e[t]),delete e[t]}),this.nonNativeCaptionsTracks={}}onManifestLoading(){this.lastSn=-1,this.lastPartIndex=-1,this.prevCC=-1,this.vttCCs=sy(),this._cleanTracks(),this.tracks=[],this.captionsTracks={},this.nonNativeCaptionsTracks={},this.textTracks=[],this.unparsedVttFrags=[],this.initPTS=[],this.cea608Parser1&&this.cea608Parser2&&(this.cea608Parser1.reset(),this.cea608Parser2.reset())}_cleanTracks(){const{media:e}=this;if(!e)return;const t=e.textTracks;if(t)for(let s=0;s<t.length;s++)br(t[s])}onSubtitleTracksUpdated(e,t){const s=t.subtitleTracks||[],i=s.some(r=>r.textCodec===Uu);if(this.config.enableWebVTT||i&&this.config.enableIMSC1){if(yb(this.tracks,s)){this.tracks=s;return}if(this.textTracks=[],this.tracks=s,this.config.renderTextTracksNatively){const r=this.media?this.media.textTracks:null;this.tracks.forEach((a,o)=>{let l;if(r&&o<r.length){let c=null;for(let u=0;u<r.length;u++)if(i6(r[u],a)){c=r[u];break}c&&(l=c)}if(l)br(l);else{const c=this._captionsOrSubtitlesFromCharacteristics(a);l=this.createTextTrack(c,a.name,a.lang),l&&(l.mode="disabled")}l&&(l.groupId=a.groupId,this.textTracks.push(l))})}else if(this.tracks.length){const r=this.tracks.map(a=>({label:a.name,kind:a.type.toLowerCase(),default:a.default,subtitleTrack:a}));this.hls.trigger(C.NON_NATIVE_TEXT_TRACKS_FOUND,{tracks:r})}}}_captionsOrSubtitlesFromCharacteristics(e){if(e.attrs.CHARACTERISTICS){const t=/transcribes-spoken-dialog/gi.test(e.attrs.CHARACTERISTICS),s=/describes-music-and-sound/gi.test(e.attrs.CHARACTERISTICS);if(t&&s)return"captions"}return"subtitles"}onManifestLoaded(e,t){this.config.enableCEA708Captions&&t.captions&&t.captions.forEach(s=>{const i=/(?:CC|SERVICE)([1-4])/.exec(s.instreamId);if(!i)return;const r=`textTrack${i[1]}`,a=this.captionsProperties[r];a&&(a.label=s.name,s.lang&&(a.languageCode=s.lang),a.media=s)})}closedCaptionsForLevel(e){const t=this.hls.levels[e.level];return t==null?void 0:t.attrs["CLOSED-CAPTIONS"]}onFragLoading(e,t){const{cea608Parser1:s,cea608Parser2:i,lastSn:r,lastPartIndex:a}=this;if(!(!this.enabled||!(s&&i))&&t.frag.type===Ne.MAIN){var o,l;const c=t.frag.sn,u=(o=t==null||(l=t.part)==null?void 0:l.index)!=null?o:-1;c===r+1||c===r&&u===a+1||(s.reset(),i.reset()),this.lastSn=c,this.lastPartIndex=u}}onFragLoaded(e,t){const{frag:s,payload:i}=t;if(s.type===Ne.SUBTITLE)if(i.byteLength){const r=s.decryptdata,a="stats"in t;if(r==null||!r.encrypted||a){const o=this.tracks[s.level],l=this.vttCCs;l[s.cc]||(l[s.cc]={start:s.start,prevCC:this.prevCC,new:!0},this.prevCC=s.cc),o&&o.textCodec===Uu?this._parseIMSC1(s,i):this._parseVTTs(t)}}else this.hls.trigger(C.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:s,error:new Error("Empty subtitle payload")})}_parseIMSC1(e,t){const s=this.hls;Z0(t,this.initPTS[e.cc],i=>{this._appendCues(i,e.level),s.trigger(C.SUBTITLE_FRAG_PROCESSED,{success:!0,frag:e})},i=>{H.log(`Failed to parse IMSC1: ${i}`),s.trigger(C.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:e,error:i})})}_parseVTTs(e){var t;const{frag:s,payload:i}=e,{initPTS:r,unparsedVttFrags:a}=this,o=r.length-1;if(!r[s.cc]&&o===-1){a.push(e);return}const l=this.hls,c=(t=s.initSegment)!=null&&t.data?Xi(s.initSegment.data,new Uint8Array(i)):i;Q$(c,this.initPTS[s.cc],this.vttCCs,s.cc,s.start,u=>{this._appendCues(u,s.level),l.trigger(C.SUBTITLE_FRAG_PROCESSED,{success:!0,frag:s})},u=>{const d=u.message==="Missing initPTS for VTT MPEGTS";d?a.push(e):this._fallbackToIMSC1(s,i),H.log(`Failed to parse VTT cue: ${u}`),!(d&&o>s.cc)&&l.trigger(C.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:s,error:u})})}_fallbackToIMSC1(e,t){const s=this.tracks[e.level];s.textCodec||Z0(t,this.initPTS[e.cc],()=>{s.textCodec=Uu,this._parseIMSC1(e,t)},()=>{s.textCodec="wvtt"})}_appendCues(e,t){const s=this.hls;if(this.config.renderTextTracksNatively){const i=this.textTracks[t];if(!i||i.mode==="disabled")return;e.forEach(r=>YT(i,r))}else{const i=this.tracks[t];if(!i)return;const r=i.default?"default":"subtitles"+t;s.trigger(C.CUES_PARSED,{type:"subtitles",cues:e,track:r})}}onFragDecrypted(e,t){const{frag:s}=t;s.type===Ne.SUBTITLE&&this.onFragLoaded(C.FRAG_LOADED,t)}onSubtitleTracksCleared(){this.tracks=[],this.captionsTracks={}}onFragParsingUserdata(e,t){const{cea608Parser1:s,cea608Parser2:i}=this;if(!this.enabled||!(s&&i))return;const{frag:r,samples:a}=t;if(!(r.type===Ne.MAIN&&this.closedCaptionsForLevel(r)==="NONE"))for(let o=0;o<a.length;o++){const l=a[o].bytes;if(l){const c=this.extractCea608Data(l);s.addData(a[o].pts,c[0]),i.addData(a[o].pts,c[1])}}}onBufferFlushing(e,{startOffset:t,endOffset:s,endOffsetSubtitles:i,type:r}){const{media:a}=this;if(!(!a||a.currentTime<s)){if(!r||r==="video"){const{captionsTracks:o}=this;Object.keys(o).forEach(l=>Zd(o[l],t,s))}if(this.config.renderTextTracksNatively&&t===0&&i!==void 0){const{textTracks:o}=this;Object.keys(o).forEach(l=>Zd(o[l],t,i))}}}extractCea608Data(e){const t=[[],[]],s=e[0]&31;let i=2;for(let r=0;r<s;r++){const a=e[i++],o=127&e[i++],l=127&e[i++];if(!(o===0&&l===0)&&4&a){const c=3&a;(c===0||c===1)&&(t[c].push(o),t[c].push(l))}}return t}}function i6(n,e){return!!n&&n.label===e.name&&!(n.textTrack1||n.textTrack2)}function r6(n,e,t,s){return Math.min(e,s)-Math.max(n,t)}function sy(){return{ccOffset:0,presentationOffset:0,0:{start:0,prevCC:-1,new:!0}}}class Wf{constructor(e){this.hls=void 0,this.autoLevelCapping=void 0,this.firstLevel=void 0,this.media=void 0,this.restrictedLevels=void 0,this.timer=void 0,this.clientRect=void 0,this.streamController=void 0,this.hls=e,this.autoLevelCapping=Number.POSITIVE_INFINITY,this.firstLevel=-1,this.media=null,this.restrictedLevels=[],this.timer=void 0,this.clientRect=null,this.registerListeners()}setStreamController(e){this.streamController=e}destroy(){this.unregisterListener(),this.hls.config.capLevelToPlayerSize&&this.stopCapping(),this.media=null,this.clientRect=null,this.hls=this.streamController=null}registerListeners(){const{hls:e}=this;e.on(C.FPS_DROP_LEVEL_CAPPING,this.onFpsDropLevelCapping,this),e.on(C.MEDIA_ATTACHING,this.onMediaAttaching,this),e.on(C.MANIFEST_PARSED,this.onManifestParsed,this),e.on(C.BUFFER_CODECS,this.onBufferCodecs,this),e.on(C.MEDIA_DETACHING,this.onMediaDetaching,this)}unregisterListener(){const{hls:e}=this;e.off(C.FPS_DROP_LEVEL_CAPPING,this.onFpsDropLevelCapping,this),e.off(C.MEDIA_ATTACHING,this.onMediaAttaching,this),e.off(C.MANIFEST_PARSED,this.onManifestParsed,this),e.off(C.BUFFER_CODECS,this.onBufferCodecs,this),e.off(C.MEDIA_DETACHING,this.onMediaDetaching,this)}onFpsDropLevelCapping(e,t){const s=this.hls.levels[t.droppedLevel];this.isLevelAllowed(s)&&this.restrictedLevels.push({bitrate:s.bitrate,height:s.height,width:s.width})}onMediaAttaching(e,t){this.media=t.media instanceof HTMLVideoElement?t.media:null,this.clientRect=null}onManifestParsed(e,t){const s=this.hls;this.restrictedLevels=[],this.firstLevel=t.firstLevel,s.config.capLevelToPlayerSize&&t.video&&this.startCapping()}onBufferCodecs(e,t){this.hls.config.capLevelToPlayerSize&&t.video&&this.startCapping()}onMediaDetaching(){this.stopCapping()}detectPlayerSize(){if(this.media&&this.mediaHeight>0&&this.mediaWidth>0){const e=this.hls.levels;if(e.length){const t=this.hls;t.autoLevelCapping=this.getMaxLevel(e.length-1),t.autoLevelCapping>this.autoLevelCapping&&this.streamController&&this.streamController.nextLevelSwitch(),this.autoLevelCapping=t.autoLevelCapping}}}getMaxLevel(e){const t=this.hls.levels;if(!t.length)return-1;const s=t.filter((i,r)=>this.isLevelAllowed(i)&&r<=e);return this.clientRect=null,Wf.getMaxLevelByMediaSize(s,this.mediaWidth,this.mediaHeight)}startCapping(){this.timer||(this.autoLevelCapping=Number.POSITIVE_INFINITY,this.hls.firstLevel=this.getMaxLevel(this.firstLevel),self.clearInterval(this.timer),this.timer=self.setInterval(this.detectPlayerSize.bind(this),1e3),this.detectPlayerSize())}stopCapping(){this.restrictedLevels=[],this.firstLevel=-1,this.autoLevelCapping=Number.POSITIVE_INFINITY,this.timer&&(self.clearInterval(this.timer),this.timer=void 0)}getDimensions(){if(this.clientRect)return this.clientRect;const e=this.media,t={width:0,height:0};if(e){const s=e.getBoundingClientRect();t.width=s.width,t.height=s.height,!t.width&&!t.height&&(t.width=s.right-s.left||e.width||0,t.height=s.bottom-s.top||e.height||0)}return this.clientRect=t,t}get mediaWidth(){return this.getDimensions().width*this.contentScaleFactor}get mediaHeight(){return this.getDimensions().height*this.contentScaleFactor}get contentScaleFactor(){let e=1;if(!this.hls.config.ignoreDevicePixelRatio)try{e=self.devicePixelRatio}catch{}return e}isLevelAllowed(e){return!this.restrictedLevels.some(t=>e.bitrate===t.bitrate&&e.width===t.width&&e.height===t.height)}static getMaxLevelByMediaSize(e,t,s){if(!(e!=null&&e.length))return-1;const i=(a,o)=>o?a.width!==o.width||a.height!==o.height:!0;let r=e.length-1;for(let a=0;a<e.length;a+=1){const o=e[a];if((o.width>=t||o.height>=s)&&i(o,e[a+1])){r=a;break}}return r}}class a6{constructor(e){this.hls=void 0,this.isVideoPlaybackQualityAvailable=!1,this.timer=void 0,this.media=null,this.lastTime=void 0,this.lastDroppedFrames=0,this.lastDecodedFrames=0,this.streamController=void 0,this.hls=e,this.registerListeners()}setStreamController(e){this.streamController=e}registerListeners(){this.hls.on(C.MEDIA_ATTACHING,this.onMediaAttaching,this)}unregisterListeners(){this.hls.off(C.MEDIA_ATTACHING,this.onMediaAttaching,this)}destroy(){this.timer&&clearInterval(this.timer),this.unregisterListeners(),this.isVideoPlaybackQualityAvailable=!1,this.media=null}onMediaAttaching(e,t){const s=this.hls.config;if(s.capLevelOnFPSDrop){const i=t.media instanceof self.HTMLVideoElement?t.media:null;this.media=i,i&&typeof i.getVideoPlaybackQuality=="function"&&(this.isVideoPlaybackQualityAvailable=!0),self.clearInterval(this.timer),this.timer=self.setInterval(this.checkFPSInterval.bind(this),s.fpsDroppedMonitoringPeriod)}}checkFPS(e,t,s){const i=performance.now();if(t){if(this.lastTime){const r=i-this.lastTime,a=s-this.lastDroppedFrames,o=t-this.lastDecodedFrames,l=1e3*a/r,c=this.hls;if(c.trigger(C.FPS_DROP,{currentDropped:a,currentDecoded:o,totalDroppedFrames:s}),l>0&&a>c.config.fpsDroppedMonitoringThreshold*o){let u=c.currentLevel;H.warn("drop FPS ratio greater than max allowed value for currentLevel: "+u),u>0&&(c.autoLevelCapping===-1||c.autoLevelCapping>=u)&&(u=u-1,c.trigger(C.FPS_DROP_LEVEL_CAPPING,{level:u,droppedLevel:c.currentLevel}),c.autoLevelCapping=u,this.streamController.nextLevelSwitch())}}this.lastTime=i,this.lastDroppedFrames=s,this.lastDecodedFrames=t}}checkFPSInterval(){const e=this.media;if(e)if(this.isVideoPlaybackQualityAvailable){const t=e.getVideoPlaybackQuality();this.checkFPS(e,t.totalVideoFrames,t.droppedVideoFrames)}else this.checkFPS(e,e.webkitDecodedFrameCount,e.webkitDroppedFrameCount)}}const Ho="[eme]";class Cr{constructor(e){this.hls=void 0,this.config=void 0,this.media=null,this.keyFormatPromise=null,this.keySystemAccessPromises={},this._requestLicenseFailureCount=0,this.mediaKeySessions=[],this.keyIdToKeySessionPromise={},this.setMediaKeysQueue=Cr.CDMCleanupPromise?[Cr.CDMCleanupPromise]:[],this.onMediaEncrypted=this._onMediaEncrypted.bind(this),this.onWaitingForKey=this._onWaitingForKey.bind(this),this.debug=H.debug.bind(H,Ho),this.log=H.log.bind(H,Ho),this.warn=H.warn.bind(H,Ho),this.error=H.error.bind(H,Ho),this.hls=e,this.config=e.config,this.registerListeners()}destroy(){this.unregisterListeners(),this.onMediaDetached();const e=this.config;e.requestMediaKeySystemAccessFunc=null,e.licenseXhrSetup=e.licenseResponseCallback=void 0,e.drmSystems=e.drmSystemOptions={},this.hls=this.onMediaEncrypted=this.onWaitingForKey=this.keyIdToKeySessionPromise=null,this.config=null}registerListeners(){this.hls.on(C.MEDIA_ATTACHED,this.onMediaAttached,this),this.hls.on(C.MEDIA_DETACHED,this.onMediaDetached,this),this.hls.on(C.MANIFEST_LOADING,this.onManifestLoading,this),this.hls.on(C.MANIFEST_LOADED,this.onManifestLoaded,this)}unregisterListeners(){this.hls.off(C.MEDIA_ATTACHED,this.onMediaAttached,this),this.hls.off(C.MEDIA_DETACHED,this.onMediaDetached,this),this.hls.off(C.MANIFEST_LOADING,this.onManifestLoading,this),this.hls.off(C.MANIFEST_LOADED,this.onManifestLoaded,this)}getLicenseServerUrl(e){const{drmSystems:t,widevineLicenseUrl:s}=this.config,i=t[e];if(i)return i.licenseUrl;if(e===xt.WIDEVINE&&s)return s;throw new Error(`no license server URL configured for key-system "${e}"`)}getServerCertificateUrl(e){const{drmSystems:t}=this.config,s=t[e];if(s)return s.serverCertificateUrl;this.log(`No Server Certificate in config.drmSystems["${e}"]`)}attemptKeySystemAccess(e){const t=this.hls.levels,s=(a,o,l)=>!!a&&l.indexOf(a)===o,i=t.map(a=>a.audioCodec).filter(s),r=t.map(a=>a.videoCodec).filter(s);return i.length+r.length===0&&r.push("avc1.42e01e"),new Promise((a,o)=>{const l=c=>{const u=c.shift();this.getMediaKeysPromise(u,i,r).then(d=>a({keySystem:u,mediaKeys:d})).catch(d=>{c.length?l(c):d instanceof Cs?o(d):o(new Cs({type:Me.KEY_SYSTEM_ERROR,details:ne.KEY_SYSTEM_NO_ACCESS,error:d,fatal:!0},d.message))})};l(e)})}requestMediaKeySystemAccess(e,t){const{requestMediaKeySystemAccessFunc:s}=this.config;if(typeof s!="function"){let i=`Configured requestMediaKeySystemAccess is not a function ${s}`;return MT===null&&self.location.protocol==="http:"&&(i=`navigator.requestMediaKeySystemAccess is not available over insecure protocol ${location.protocol}`),Promise.reject(new Error(i))}return s(e,t)}getMediaKeysPromise(e,t,s){const i=T5(e,t,s,this.config.drmSystemOptions),r=this.keySystemAccessPromises[e];let a=r==null?void 0:r.keySystemAccess;if(!a){this.log(`Requesting encrypted media "${e}" key-system access with config: ${JSON.stringify(i)}`),a=this.requestMediaKeySystemAccess(e,i);const o=this.keySystemAccessPromises[e]={keySystemAccess:a};return a.catch(l=>{this.log(`Failed to obtain access to key-system "${e}": ${l}`)}),a.then(l=>{this.log(`Access for key-system "${l.keySystem}" obtained`);const c=this.fetchServerCertificate(e);return this.log(`Create media-keys for "${e}"`),o.mediaKeys=l.createMediaKeys().then(u=>(this.log(`Media-keys created for "${e}"`),c.then(d=>d?this.setMediaKeysServerCertificate(u,e,d):u))),o.mediaKeys.catch(u=>{this.error(`Failed to create media-keys for "${e}"}: ${u}`)}),o.mediaKeys})}return a.then(()=>r.mediaKeys)}createMediaKeySessionContext({decryptdata:e,keySystem:t,mediaKeys:s}){this.log(`Creating key-system session "${t}" keyId: ${on.hexDump(e.keyId||[])}`);const i=s.createSession(),r={decryptdata:e,keySystem:t,mediaKeys:s,mediaKeysSession:i,keyStatus:"status-pending"};return this.mediaKeySessions.push(r),r}renewKeySession(e){const t=e.decryptdata;if(t.pssh){const s=this.createMediaKeySessionContext(e),i=this.getKeyIdString(t),r="cenc";this.keyIdToKeySessionPromise[i]=this.generateRequestWithPreferredKeySession(s,r,t.pssh,"expired")}else this.warn("Could not renew expired session. Missing pssh initData.");this.removeSession(e)}getKeyIdString(e){if(!e)throw new Error("Could not read keyId of undefined decryptdata");if(e.keyId===null)throw new Error("keyId is null");return on.hexDump(e.keyId)}updateKeySession(e,t){var s;const i=e.mediaKeysSession;return this.log(`Updating key-session "${i.sessionId}" for keyID ${on.hexDump(((s=e.decryptdata)==null?void 0:s.keyId)||[])}
      } (data length: ${t&&t.byteLength})`),i.update(t)}selectKeySystemFormat(e){const t=Object.keys(e.levelkeys||{});return this.keyFormatPromise||(this.log(`Selecting key-system from fragment (sn: ${e.sn} ${e.type}: ${e.level}) key formats ${t.join(", ")}`),this.keyFormatPromise=this.getKeyFormatPromise(t)),this.keyFormatPromise}getKeyFormatPromise(e){return new Promise((t,s)=>{const i=bu(this.config),r=e.map(f0).filter(a=>!!a&&i.indexOf(a)!==-1);return this.getKeySystemSelectionPromise(r).then(({keySystem:a})=>{const o=p0(a);o?t(o):s(new Error(`Unable to find format for key-system "${a}"`))}).catch(s)})}loadKey(e){const t=e.keyInfo.decryptdata,s=this.getKeyIdString(t),i=`(keyId: ${s} format: "${t.keyFormat}" method: ${t.method} uri: ${t.uri})`;this.log(`Starting session for key ${i}`);let r=this.keyIdToKeySessionPromise[s];return r||(r=this.keyIdToKeySessionPromise[s]=this.getKeySystemForKeyPromise(t).then(({keySystem:a,mediaKeys:o})=>(this.throwIfDestroyed(),this.log(`Handle encrypted media sn: ${e.frag.sn} ${e.frag.type}: ${e.frag.level} using key ${i}`),this.attemptSetMediaKeys(a,o).then(()=>{this.throwIfDestroyed();const l=this.createMediaKeySessionContext({keySystem:a,mediaKeys:o,decryptdata:t}),c="cenc";return this.generateRequestWithPreferredKeySession(l,c,t.pssh,"playlist-key")}))),r.catch(a=>this.handleError(a))),r}throwIfDestroyed(e="Invalid state"){if(!this.hls)throw new Error("invalid state")}handleError(e){this.hls&&(this.error(e.message),e instanceof Cs?this.hls.trigger(C.ERROR,e.data):this.hls.trigger(C.ERROR,{type:Me.KEY_SYSTEM_ERROR,details:ne.KEY_SYSTEM_NO_KEYS,error:e,fatal:!0}))}getKeySystemForKeyPromise(e){const t=this.getKeyIdString(e),s=this.keyIdToKeySessionPromise[t];if(!s){const i=f0(e.keyFormat),r=i?[i]:bu(this.config);return this.attemptKeySystemAccess(r)}return s}getKeySystemSelectionPromise(e){if(e.length||(e=bu(this.config)),e.length===0)throw new Cs({type:Me.KEY_SYSTEM_ERROR,details:ne.KEY_SYSTEM_NO_CONFIGURED_LICENSE,fatal:!0},`Missing key-system license configuration options ${JSON.stringify({drmSystems:this.config.drmSystems})}`);return this.attemptKeySystemAccess(e)}_onMediaEncrypted(e){const{initDataType:t,initData:s}=e;if(this.debug(`"${e.type}" event: init data type: "${t}"`),s===null)return;let i,r;if(t==="sinf"&&this.config.drmSystems[xt.FAIRPLAY]){const u=Ht(new Uint8Array(s));try{const d=kf(JSON.parse(u).sinf),h=VT(new Uint8Array(d));if(!h)return;i=h.subarray(8,24),r=xt.FAIRPLAY}catch{this.warn('Failed to parse sinf "encrypted" event message initData');return}}else{const u=H5(s);if(u===null)return;u.version===0&&u.systemId===OT.WIDEVINE&&u.data&&(i=u.data.subarray(8,24)),r=E5(u.systemId)}if(!r||!i)return;const a=on.hexDump(i),{keyIdToKeySessionPromise:o,mediaKeySessions:l}=this;let c=o[a];for(let u=0;u<l.length;u++){const d=l[u],h=d.decryptdata;if(h.pssh||!h.keyId)continue;const f=on.hexDump(h.keyId);if(a===f||h.uri.replace(/-/g,"").indexOf(a)!==-1){c=o[f],delete o[f],h.pssh=new Uint8Array(s),h.keyId=i,c=o[a]=c.then(()=>this.generateRequestWithPreferredKeySession(d,t,s,"encrypted-event-key-match"));break}}c||(c=o[a]=this.getKeySystemSelectionPromise([r]).then(({keySystem:u,mediaKeys:d})=>{var h;this.throwIfDestroyed();const f=new Xa("ISO-23001-7",a,(h=p0(u))!=null?h:"");return f.pssh=new Uint8Array(s),f.keyId=i,this.attemptSetMediaKeys(u,d).then(()=>{this.throwIfDestroyed();const p=this.createMediaKeySessionContext({decryptdata:f,keySystem:u,mediaKeys:d});return this.generateRequestWithPreferredKeySession(p,t,s,"encrypted-event-no-match")})})),c.catch(u=>this.handleError(u))}_onWaitingForKey(e){this.log(`"${e.type}" event`)}attemptSetMediaKeys(e,t){const s=this.setMediaKeysQueue.slice();this.log(`Setting media-keys for "${e}"`);const i=Promise.all(s).then(()=>{if(!this.media)throw new Error("Attempted to set mediaKeys without media element attached");return this.media.setMediaKeys(t)});return this.setMediaKeysQueue.push(i),i.then(()=>{this.log(`Media-keys set for "${e}"`),s.push(i),this.setMediaKeysQueue=this.setMediaKeysQueue.filter(r=>s.indexOf(r)===-1)})}generateRequestWithPreferredKeySession(e,t,s,i){var r,a;const o=(r=this.config.drmSystems)==null||(a=r[e.keySystem])==null?void 0:a.generateRequest;if(o)try{const h=o.call(this.hls,t,s,e);if(!h)throw new Error("Invalid response from configured generateRequest filter");t=h.initDataType,s=e.decryptdata.pssh=h.initData?new Uint8Array(h.initData):null}catch(h){var l;if(this.warn(h.message),(l=this.hls)!=null&&l.config.debug)throw h}if(s===null)return this.log(`Skipping key-session request for "${i}" (no initData)`),Promise.resolve(e);const c=this.getKeyIdString(e.decryptdata);this.log(`Generating key-session request for "${i}": ${c} (init data type: ${t} length: ${s?s.byteLength:null})`);const u=new Vf;e.mediaKeysSession.onmessage=h=>{const f=e.mediaKeysSession;if(!f){u.emit("error",new Error("invalid state"));return}const{messageType:p,message:m}=h;this.log(`"${p}" message event for session "${f.sessionId}" message size: ${m.byteLength}`),p==="license-request"||p==="license-renewal"?this.renewLicense(e,m).catch(y=>{this.handleError(y),u.emit("error",y)}):p==="license-release"?e.keySystem===xt.FAIRPLAY&&(this.updateKeySession(e,PT("acknowledged")),this.removeSession(e)):this.warn(`unhandled media key message type "${p}"`)},e.mediaKeysSession.onkeystatuseschange=h=>{if(!e.mediaKeysSession){u.emit("error",new Error("invalid state"));return}this.onKeyStatusChange(e);const f=e.keyStatus;u.emit("keyStatus",f),f==="expired"&&(this.warn(`${e.keySystem} expired for key ${c}`),this.renewKeySession(e))};const d=new Promise((h,f)=>{u.on("error",f),u.on("keyStatus",p=>{p.startsWith("usable")?h():p==="output-restricted"?f(new Cs({type:Me.KEY_SYSTEM_ERROR,details:ne.KEY_SYSTEM_STATUS_OUTPUT_RESTRICTED,fatal:!1},"HDCP level output restricted")):p==="internal-error"?f(new Cs({type:Me.KEY_SYSTEM_ERROR,details:ne.KEY_SYSTEM_STATUS_INTERNAL_ERROR,fatal:!0},`key status changed to "${p}"`)):p==="expired"?f(new Error("key expired while generating request")):this.warn(`unhandled key status change "${p}"`)})});return e.mediaKeysSession.generateRequest(t,s).then(()=>{var h;this.log(`Request generated for key-session "${(h=e.mediaKeysSession)==null?void 0:h.sessionId}" keyId: ${c}`)}).catch(h=>{throw new Cs({type:Me.KEY_SYSTEM_ERROR,details:ne.KEY_SYSTEM_NO_SESSION,error:h,fatal:!1},`Error generating key-session request: ${h}`)}).then(()=>d).catch(h=>{throw u.removeAllListeners(),this.removeSession(e),h}).then(()=>(u.removeAllListeners(),e))}onKeyStatusChange(e){e.mediaKeysSession.keyStatuses.forEach((t,s)=>{this.log(`key status change "${t}" for keyStatuses keyId: ${on.hexDump("buffer"in s?new Uint8Array(s.buffer,s.byteOffset,s.byteLength):new Uint8Array(s))} session keyId: ${on.hexDump(new Uint8Array(e.decryptdata.keyId||[]))} uri: ${e.decryptdata.uri}`),e.keyStatus=t})}fetchServerCertificate(e){const t=this.config,s=t.loader,i=new s(t),r=this.getServerCertificateUrl(e);return r?(this.log(`Fetching serverCertificate for "${e}"`),new Promise((a,o)=>{const l={responseType:"arraybuffer",url:r},c=t.certLoadPolicy.default,u={loadPolicy:c,timeout:c.maxLoadTimeMs,maxRetry:0,retryDelay:0,maxRetryDelay:0},d={onSuccess:(h,f,p,m)=>{a(h.data)},onError:(h,f,p,m)=>{o(new Cs({type:Me.KEY_SYSTEM_ERROR,details:ne.KEY_SYSTEM_SERVER_CERTIFICATE_REQUEST_FAILED,fatal:!0,networkDetails:p,response:ms({url:l.url,data:void 0},h)},`"${e}" certificate request failed (${r}). Status: ${h.code} (${h.text})`))},onTimeout:(h,f,p)=>{o(new Cs({type:Me.KEY_SYSTEM_ERROR,details:ne.KEY_SYSTEM_SERVER_CERTIFICATE_REQUEST_FAILED,fatal:!0,networkDetails:p,response:{url:l.url,data:void 0}},`"${e}" certificate request timed out (${r})`))},onAbort:(h,f,p)=>{o(new Error("aborted"))}};i.load(l,u,d)})):Promise.resolve()}setMediaKeysServerCertificate(e,t,s){return new Promise((i,r)=>{e.setServerCertificate(s).then(a=>{this.log(`setServerCertificate ${a?"success":"not supported by CDM"} (${s==null?void 0:s.byteLength}) on "${t}"`),i(e)}).catch(a=>{r(new Cs({type:Me.KEY_SYSTEM_ERROR,details:ne.KEY_SYSTEM_SERVER_CERTIFICATE_UPDATE_FAILED,error:a,fatal:!0},a.message))})})}renewLicense(e,t){return this.requestLicense(e,new Uint8Array(t)).then(s=>this.updateKeySession(e,new Uint8Array(s)).catch(i=>{throw new Cs({type:Me.KEY_SYSTEM_ERROR,details:ne.KEY_SYSTEM_SESSION_UPDATE_FAILED,error:i,fatal:!0},i.message)}))}setupLicenseXHR(e,t,s,i){const r=this.config.licenseXhrSetup;return r?Promise.resolve().then(()=>{if(!s.decryptdata)throw new Error("Key removed");return r.call(this.hls,e,t,s,i)}).catch(a=>{if(!s.decryptdata)throw a;return e.open("POST",t,!0),r.call(this.hls,e,t,s,i)}).then(a=>(e.readyState||e.open("POST",t,!0),{xhr:e,licenseChallenge:a||i})):(e.open("POST",t,!0),Promise.resolve({xhr:e,licenseChallenge:i}))}requestLicense(e,t){const s=this.config.keyLoadPolicy.default;return new Promise((i,r)=>{const a=this.getLicenseServerUrl(e.keySystem);this.log(`Sending license request to URL: ${a}`);const o=new XMLHttpRequest;o.responseType="arraybuffer",o.onreadystatechange=()=>{if(!this.hls||!e.mediaKeysSession)return r(new Error("invalid state"));if(o.readyState===4)if(o.status===200){this._requestLicenseFailureCount=0;let l=o.response;this.log(`License received ${l instanceof ArrayBuffer?l.byteLength:l}`);const c=this.config.licenseResponseCallback;if(c)try{l=c.call(this.hls,o,a,e)}catch(u){this.error(u)}i(l)}else{const l=s.errorRetry,c=l?l.maxNumRetry:0;if(this._requestLicenseFailureCount++,this._requestLicenseFailureCount>c||o.status>=400&&o.status<500)r(new Cs({type:Me.KEY_SYSTEM_ERROR,details:ne.KEY_SYSTEM_LICENSE_REQUEST_FAILED,fatal:!0,networkDetails:o,response:{url:a,data:void 0,code:o.status,text:o.statusText}},`License Request XHR failed (${a}). Status: ${o.status} (${o.statusText})`));else{const u=c-this._requestLicenseFailureCount+1;this.warn(`Retrying license request, ${u} attempts left`),this.requestLicense(e,t).then(i,r)}}},e.licenseXhr&&e.licenseXhr.readyState!==XMLHttpRequest.DONE&&e.licenseXhr.abort(),e.licenseXhr=o,this.setupLicenseXHR(o,a,e,t).then(({xhr:l,licenseChallenge:c})=>{l.send(c)})})}onMediaAttached(e,t){if(!this.config.emeEnabled)return;const s=t.media;this.media=s,s.addEventListener("encrypted",this.onMediaEncrypted),s.addEventListener("waitingforkey",this.onWaitingForKey)}onMediaDetached(){const e=this.media,t=this.mediaKeySessions;e&&(e.removeEventListener("encrypted",this.onMediaEncrypted),e.removeEventListener("waitingforkey",this.onWaitingForKey),this.media=null),this._requestLicenseFailureCount=0,this.setMediaKeysQueue=[],this.mediaKeySessions=[],this.keyIdToKeySessionPromise={},Xa.clearKeyUriToKeyIdMap();const s=t.length;Cr.CDMCleanupPromise=Promise.all(t.map(i=>this.removeSession(i)).concat(e==null?void 0:e.setMediaKeys(null).catch(i=>{this.log(`Could not clear media keys: ${i}. media.src: ${e==null?void 0:e.src}`)}))).then(()=>{s&&(this.log("finished closing key sessions and clearing media keys"),t.length=0)}).catch(i=>{this.log(`Could not close sessions and clear media keys: ${i}. media.src: ${e==null?void 0:e.src}`)})}onManifestLoading(){this.keyFormatPromise=null}onManifestLoaded(e,{sessionKeys:t}){if(!(!t||!this.config.emeEnabled)&&!this.keyFormatPromise){const s=t.reduce((i,r)=>(i.indexOf(r.keyFormat)===-1&&i.push(r.keyFormat),i),[]);this.log(`Selecting key-system from session-keys ${s.join(", ")}`),this.keyFormatPromise=this.getKeyFormatPromise(s)}}removeSession(e){const{mediaKeysSession:t,licenseXhr:s}=e;if(t){this.log(`Remove licenses and keys and close session ${t.sessionId}`),t.onmessage=null,t.onkeystatuseschange=null,s&&s.readyState!==XMLHttpRequest.DONE&&s.abort(),e.mediaKeysSession=e.decryptdata=e.licenseXhr=void 0;const i=this.mediaKeySessions.indexOf(e);return i>-1&&this.mediaKeySessions.splice(i,1),t.remove().catch(r=>{this.log(`Could not remove session: ${r}`)}).then(()=>t.close()).catch(r=>{this.log(`Could not close session: ${r}`)})}}}Cr.CDMCleanupPromise=void 0;class Cs extends Error{constructor(e,t){super(t),this.data=void 0,e.error||(e.error=new Error(t)),this.data=e,e.err=e.error}}const o6=1;var rs={MANIFEST:"m",AUDIO:"a",VIDEO:"v",MUXED:"av",INIT:"i",CAPTION:"c",TIMED_TEXT:"tt",KEY:"k",OTHER:"o"};const l6="h";class li{constructor(e){this.hls=void 0,this.config=void 0,this.media=void 0,this.sid=void 0,this.cid=void 0,this.useHeaders=!1,this.initialized=!1,this.starved=!1,this.buffering=!0,this.audioBuffer=void 0,this.videoBuffer=void 0,this.onWaiting=()=>{this.initialized&&(this.starved=!0),this.buffering=!0},this.onPlaying=()=>{this.initialized||(this.initialized=!0),this.buffering=!1},this.applyPlaylistData=i=>{try{this.apply(i,{ot:rs.MANIFEST,su:!this.initialized})}catch(r){H.warn("Could not generate manifest CMCD data.",r)}},this.applyFragmentData=i=>{try{const r=i.frag,a=this.hls.levels[r.level],o=this.getObjectType(r),l={d:r.duration*1e3,ot:o};(o===rs.VIDEO||o===rs.AUDIO||o==rs.MUXED)&&(l.br=a.bitrate/1e3,l.tb=this.getTopBandwidth(o)/1e3,l.bl=this.getBufferLength(o)),this.apply(i,l)}catch(r){H.warn("Could not generate segment CMCD data.",r)}},this.hls=e;const t=this.config=e.config,{cmcd:s}=t;s!=null&&(t.pLoader=this.createPlaylistLoader(),t.fLoader=this.createFragmentLoader(),this.sid=s.sessionId||li.uuid(),this.cid=s.contentId,this.useHeaders=s.useHeaders===!0,this.registerListeners())}registerListeners(){const e=this.hls;e.on(C.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(C.MEDIA_DETACHED,this.onMediaDetached,this),e.on(C.BUFFER_CREATED,this.onBufferCreated,this)}unregisterListeners(){const e=this.hls;e.off(C.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(C.MEDIA_DETACHED,this.onMediaDetached,this),e.off(C.BUFFER_CREATED,this.onBufferCreated,this)}destroy(){this.unregisterListeners(),this.onMediaDetached(),this.hls=this.config=this.audioBuffer=this.videoBuffer=null}onMediaAttached(e,t){this.media=t.media,this.media.addEventListener("waiting",this.onWaiting),this.media.addEventListener("playing",this.onPlaying)}onMediaDetached(){this.media&&(this.media.removeEventListener("waiting",this.onWaiting),this.media.removeEventListener("playing",this.onPlaying),this.media=null)}onBufferCreated(e,t){var s,i;this.audioBuffer=(s=t.tracks.audio)==null?void 0:s.buffer,this.videoBuffer=(i=t.tracks.video)==null?void 0:i.buffer}createData(){var e;return{v:o6,sf:l6,sid:this.sid,cid:this.cid,pr:(e=this.media)==null?void 0:e.playbackRate,mtp:this.hls.bandwidthEstimate/1e3}}apply(e,t={}){Mt(t,this.createData());const s=t.ot===rs.INIT||t.ot===rs.VIDEO||t.ot===rs.MUXED;if(this.starved&&s&&(t.bs=!0,t.su=!0,this.starved=!1),t.su==null&&(t.su=this.buffering),this.useHeaders){const i=li.toHeaders(t);if(!Object.keys(i).length)return;e.headers||(e.headers={}),Mt(e.headers,i)}else{const i=li.toQuery(t);if(!i)return;e.url=li.appendQueryToUri(e.url,i)}}getObjectType(e){const{type:t}=e;if(t==="subtitle")return rs.TIMED_TEXT;if(e.sn==="initSegment")return rs.INIT;if(t==="audio")return rs.AUDIO;if(t==="main")return this.hls.audioTracks.length?rs.VIDEO:rs.MUXED}getTopBandwidth(e){let t=0,s;const i=this.hls;if(e===rs.AUDIO)s=i.audioTracks;else{const r=i.maxAutoLevel,a=r>-1?r+1:i.levels.length;s=i.levels.slice(0,a)}for(const r of s)r.bitrate>t&&(t=r.bitrate);return t>0?t:NaN}getBufferLength(e){const t=this.hls.media,s=e===rs.AUDIO?this.audioBuffer:this.videoBuffer;return!s||!t?NaN:ht.bufferInfo(s,t.currentTime,this.config.maxBufferHole).len*1e3}createPlaylistLoader(){const{pLoader:e}=this.config,t=this.applyPlaylistData,s=e||this.config.loader;return class{constructor(i){this.loader=void 0,this.loader=new s(i)}get stats(){return this.loader.stats}get context(){return this.loader.context}destroy(){this.loader.destroy()}abort(){this.loader.abort()}load(i,r,a){t(i),this.loader.load(i,r,a)}}}createFragmentLoader(){const{fLoader:e}=this.config,t=this.applyFragmentData,s=e||this.config.loader;return class{constructor(i){this.loader=void 0,this.loader=new s(i)}get stats(){return this.loader.stats}get context(){return this.loader.context}destroy(){this.loader.destroy()}abort(){this.loader.abort()}load(i,r,a){t(i),this.loader.load(i,r,a)}}}static uuid(){const e=URL.createObjectURL(new Blob),t=e.toString();return URL.revokeObjectURL(e),t.slice(t.lastIndexOf("/")+1)}static serialize(e){const t=[],s=l=>!Number.isNaN(l)&&l!=null&&l!==""&&l!==!1,i=l=>Math.round(l),r=l=>i(l/100)*100,a={br:i,d:i,bl:r,dl:r,mtp:r,nor:l=>encodeURIComponent(l),rtp:r,tb:i},o=Object.keys(e||{}).sort();for(const l of o){let c=e[l];if(!s(c)||l==="v"&&c===1||l=="pr"&&c===1)continue;const u=a[l];u&&(c=u(c));const d=typeof c;let h;l==="ot"||l==="sf"||l==="st"?h=`${l}=${c}`:d==="boolean"?h=l:d==="number"?h=`${l}=${c}`:h=`${l}=${JSON.stringify(c)}`,t.push(h)}return t.join(",")}static toHeaders(e){const t=Object.keys(e),s={},i=["Object","Request","Session","Status"],r=[{},{},{},{}],a={br:0,d:0,ot:0,tb:0,bl:1,dl:1,mtp:1,nor:1,nrr:1,su:1,cid:2,pr:2,sf:2,sid:2,st:2,v:2,bs:3,rtp:3};for(const o of t){const l=a[o]!=null?a[o]:1;r[l][o]=e[o]}for(let o=0;o<r.length;o++){const l=li.serialize(r[o]);l&&(s[`CMCD-${i[o]}`]=l)}return s}static toQuery(e){return`CMCD=${encodeURIComponent(li.serialize(e))}`}static appendQueryToUri(e,t){if(!t)return e;const s=e.includes("?")?"&":"?";return`${e}${s}${t}`}}const c6=3e5;class u6{constructor(e){this.hls=void 0,this.log=void 0,this.loader=null,this.uri=null,this.pathwayId=".",this.pathwayPriority=null,this.timeToLoad=300,this.reloadTimer=-1,this.updated=0,this.started=!1,this.enabled=!0,this.levels=null,this.audioTracks=null,this.subtitleTracks=null,this.penalizedPathways={},this.hls=e,this.log=H.log.bind(H,"[content-steering]:"),this.registerListeners()}registerListeners(){const e=this.hls;e.on(C.MANIFEST_LOADING,this.onManifestLoading,this),e.on(C.MANIFEST_LOADED,this.onManifestLoaded,this),e.on(C.MANIFEST_PARSED,this.onManifestParsed,this),e.on(C.ERROR,this.onError,this)}unregisterListeners(){const e=this.hls;e&&(e.off(C.MANIFEST_LOADING,this.onManifestLoading,this),e.off(C.MANIFEST_LOADED,this.onManifestLoaded,this),e.off(C.MANIFEST_PARSED,this.onManifestParsed,this),e.off(C.ERROR,this.onError,this))}startLoad(){if(this.started=!0,self.clearTimeout(this.reloadTimer),this.enabled&&this.uri)if(this.updated){const e=Math.max(this.timeToLoad*1e3-(performance.now()-this.updated),0);this.scheduleRefresh(this.uri,e)}else this.loadSteeringManifest(this.uri)}stopLoad(){this.started=!1,this.loader&&(this.loader.destroy(),this.loader=null),self.clearTimeout(this.reloadTimer)}destroy(){this.unregisterListeners(),this.stopLoad(),this.hls=null,this.levels=this.audioTracks=this.subtitleTracks=null}removeLevel(e){const t=this.levels;t&&(this.levels=t.filter(s=>s!==e))}onManifestLoading(){this.stopLoad(),this.enabled=!0,this.timeToLoad=300,this.updated=0,this.uri=null,this.pathwayId=".",this.levels=this.audioTracks=this.subtitleTracks=null}onManifestLoaded(e,t){const{contentSteering:s}=t;s!==null&&(this.pathwayId=s.pathwayId,this.uri=s.uri,this.started&&this.startLoad())}onManifestParsed(e,t){this.audioTracks=t.audioTracks,this.subtitleTracks=t.subtitleTracks}onError(e,t){const{errorAction:s}=t;if((s==null?void 0:s.action)===Jt.SendAlternateToPenaltyBox&&s.flags===Ds.MoveAllAlternatesMatchingHost){let i=this.pathwayPriority;const r=this.pathwayId;this.penalizedPathways[r]||(this.penalizedPathways[r]=performance.now()),!i&&this.levels&&(i=this.levels.reduce((a,o)=>(a.indexOf(o.pathwayId)===-1&&a.push(o.pathwayId),a),[])),i&&i.length>1&&(this.updatePathwayPriority(i),s.resolved=this.pathwayId!==r)}}filterParsedLevels(e){this.levels=e;let t=this.getLevelsForPathway(this.pathwayId);if(t.length===0){const s=e[0].pathwayId;this.log(`No levels found in Pathway ${this.pathwayId}. Setting initial Pathway to "${s}"`),t=this.getLevelsForPathway(s),this.pathwayId=s}return t.length!==e.length?(this.log(`Found ${t.length}/${e.length} levels in Pathway "${this.pathwayId}"`),t):e}getLevelsForPathway(e){return this.levels===null?[]:this.levels.filter(t=>e===t.pathwayId)}updatePathwayPriority(e){this.pathwayPriority=e;let t;const s=this.penalizedPathways,i=performance.now();Object.keys(s).forEach(r=>{i-s[r]>c6&&delete s[r]});for(let r=0;r<e.length;r++){const a=e[r];if(s[a])continue;if(a===this.pathwayId)return;const o=this.hls.nextLoadLevel,l=this.hls.levels[o];if(t=this.getLevelsForPathway(a),t.length>0){this.log(`Setting Pathway to "${a}"`),this.pathwayId=a,this.hls.trigger(C.LEVELS_UPDATED,{levels:t});const c=this.hls.levels[o];l&&c&&this.levels&&(c.attrs["STABLE-VARIANT-ID"]!==l.attrs["STABLE-VARIANT-ID"]&&c.bitrate!==l.bitrate&&this.log(`Unstable Pathways change from bitrate ${l.bitrate} to ${c.bitrate}`),this.hls.nextLoadLevel=o);break}}}clonePathways(e){const t=this.levels;if(!t)return;const s={},i={};e.forEach(r=>{const{ID:a,"BASE-ID":o,"URI-REPLACEMENT":l}=r;if(t.some(u=>u.pathwayId===a))return;const c=this.getLevelsForPathway(o).map(u=>{const d=Mt({},u);d.details=void 0,d.url=Lb(u.uri,u.attrs["STABLE-VARIANT-ID"],"PER-VARIANT-URIS",l);const h=new Tt(u.attrs);h["PATHWAY-ID"]=a;const f=h.AUDIO&&`${h.AUDIO}_clone_${a}`,p=h.SUBTITLES&&`${h.SUBTITLES}_clone_${a}`;f&&(s[h.AUDIO]=f,h.AUDIO=f),p&&(i[h.SUBTITLES]=p,h.SUBTITLES=p),d.attrs=h;const m=new Qa(d);return Ul(m,"audio",f),Ul(m,"text",p),m});t.push(...c),ny(this.audioTracks,s,l,a),ny(this.subtitleTracks,i,l,a)})}loadSteeringManifest(e){const t=this.hls.config,s=t.loader;this.loader&&this.loader.destroy(),this.loader=new s(t);let i;try{i=new self.URL(e)}catch{this.enabled=!1,this.log(`Failed to parse Steering Manifest URI: ${e}`);return}if(i.protocol!=="data:"){const u=(this.hls.bandwidthEstimate||t.abrEwmaDefaultEstimate)|0;i.searchParams.set("_HLS_pathway",this.pathwayId),i.searchParams.set("_HLS_throughput",""+u)}const r={responseType:"json",url:i.href},a=t.steeringManifestLoadPolicy.default,o=a.errorRetry||a.timeoutRetry||{},l={loadPolicy:a,timeout:a.maxLoadTimeMs,maxRetry:o.maxNumRetry||0,retryDelay:o.retryDelayMs||0,maxRetryDelay:o.maxRetryDelayMs||0},c={onSuccess:(u,d,h,f)=>{this.log(`Loaded steering manifest: "${i}"`);const p=u.data;if(p.VERSION!==1){this.log(`Steering VERSION ${p.VERSION} not supported!`);return}this.updated=performance.now(),this.timeToLoad=p.TTL;const{"RELOAD-URI":m,"PATHWAY-CLONES":y,"PATHWAY-PRIORITY":g}=p;if(m)try{this.uri=new self.URL(m,i).href}catch{this.enabled=!1,this.log(`Failed to parse Steering Manifest RELOAD-URI: ${m}`);return}this.scheduleRefresh(this.uri||h.url),y&&this.clonePathways(y),g&&this.updatePathwayPriority(g)},onError:(u,d,h,f)=>{if(this.log(`Error loading steering manifest: ${u.code} ${u.text} (${d.url})`),this.stopLoad(),u.code===410){this.enabled=!1,this.log(`Steering manifest ${d.url} no longer available`);return}let p=this.timeToLoad*1e3;if(u.code===429){const m=this.loader;if(typeof(m==null?void 0:m.getResponseHeader)=="function"){const y=m.getResponseHeader("Retry-After");y&&(p=parseFloat(y)*1e3)}this.log(`Steering manifest ${d.url} rate limited`);return}this.scheduleRefresh(this.uri||d.url,p)},onTimeout:(u,d,h)=>{this.log(`Timeout loading steering manifest (${d.url})`),this.scheduleRefresh(this.uri||d.url)}};this.log(`Requesting steering manifest: ${i}`),this.loader.load(r,l,c)}scheduleRefresh(e,t=this.timeToLoad*1e3){self.clearTimeout(this.reloadTimer),this.reloadTimer=self.setTimeout(()=>{this.loadSteeringManifest(e)},t)}}function ny(n,e,t,s){n&&Object.keys(e).forEach(i=>{const r=n.filter(a=>a.groupId===i).map(a=>{const o=Mt({},a);return o.details=void 0,o.attrs=new Tt(o.attrs),o.url=o.attrs.URI=Lb(a.url,a.attrs["STABLE-RENDITION-ID"],"PER-RENDITION-URIS",t),o.groupId=o.attrs["GROUP-ID"]=e[i],o.attrs["PATHWAY-ID"]=s,o});n.push(...r)})}function Lb(n,e,t,s){const{HOST:i,PARAMS:r,[t]:a}=s;let o;e&&(o=a==null?void 0:a[e],o&&(n=o));const l=new self.URL(n);return i&&!o&&(l.host=i),r&&Object.keys(r).sort().forEach(c=>{c&&l.searchParams.set(c,r[c])}),l.href}const d6=/^age:\s*[\d.]+\s*$/im;class wb{constructor(e){this.xhrSetup=void 0,this.requestTimeout=void 0,this.retryTimeout=void 0,this.retryDelay=void 0,this.config=null,this.callbacks=null,this.context=void 0,this.loader=null,this.stats=void 0,this.xhrSetup=e&&e.xhrSetup||null,this.stats=new Ec,this.retryDelay=0}destroy(){this.callbacks=null,this.abortInternal(),this.loader=null,this.config=null}abortInternal(){const e=this.loader;self.clearTimeout(this.requestTimeout),self.clearTimeout(this.retryTimeout),e&&(e.onreadystatechange=null,e.onprogress=null,e.readyState!==4&&(this.stats.aborted=!0,e.abort()))}abort(){var e;this.abortInternal(),(e=this.callbacks)!=null&&e.onAbort&&this.callbacks.onAbort(this.stats,this.context,this.loader)}load(e,t,s){if(this.stats.loading.start)throw new Error("Loader can only be used once.");this.stats.loading.start=self.performance.now(),this.context=e,this.config=t,this.callbacks=s,this.loadInternal()}loadInternal(){const{config:e,context:t}=this;if(!e)return;const s=this.loader=new self.XMLHttpRequest,i=this.stats;i.loading.first=0,i.loaded=0,i.aborted=!1;const r=this.xhrSetup;r?Promise.resolve().then(()=>{if(!this.stats.aborted)return r(s,t.url)}).catch(a=>(s.open("GET",t.url,!0),r(s,t.url))).then(()=>{this.stats.aborted||this.openAndSendXhr(s,t,e)}).catch(a=>{this.callbacks.onError({code:s.status,text:a.message},t,s,i)}):this.openAndSendXhr(s,t,e)}openAndSendXhr(e,t,s){e.readyState||e.open("GET",t.url,!0);const i=this.context.headers,{maxTimeToFirstByteMs:r,maxLoadTimeMs:a}=s.loadPolicy;if(i)for(const o in i)e.setRequestHeader(o,i[o]);t.rangeEnd&&e.setRequestHeader("Range","bytes="+t.rangeStart+"-"+(t.rangeEnd-1)),e.onreadystatechange=this.readystatechange.bind(this),e.onprogress=this.loadprogress.bind(this),e.responseType=t.responseType,self.clearTimeout(this.requestTimeout),s.timeout=r&&Ce(r)?r:a,this.requestTimeout=self.setTimeout(this.loadtimeout.bind(this),s.timeout),e.send()}readystatechange(){const{context:e,loader:t,stats:s}=this;if(!e||!t)return;const i=t.readyState,r=this.config;if(!s.aborted&&i>=2&&(s.loading.first===0&&(s.loading.first=Math.max(self.performance.now(),s.loading.start),r.timeout!==r.loadPolicy.maxLoadTimeMs&&(self.clearTimeout(this.requestTimeout),r.timeout=r.loadPolicy.maxLoadTimeMs,this.requestTimeout=self.setTimeout(this.loadtimeout.bind(this),r.loadPolicy.maxLoadTimeMs-(s.loading.first-s.loading.start)))),i===4)){self.clearTimeout(this.requestTimeout),t.onreadystatechange=null,t.onprogress=null;const a=t.status,o=t.responseType!=="text";if(a>=200&&a<300&&(o&&t.response||t.responseText!==null)){s.loading.end=Math.max(self.performance.now(),s.loading.first);const l=o?t.response:t.responseText,c=t.responseType==="arraybuffer"?l.byteLength:l.length;if(s.loaded=s.total=c,s.bwEstimate=s.total*8e3/(s.loading.end-s.loading.first),!this.callbacks)return;const u=this.callbacks.onProgress;if(u&&u(s,e,l,t),!this.callbacks)return;const d={url:t.responseURL,data:l,code:a};this.callbacks.onSuccess(d,s,e,t)}else{const l=r.loadPolicy.errorRetry,c=s.retry;Bl(l,c,!1,a)?this.retry(l):(H.error(`${a} while loading ${e.url}`),this.callbacks.onError({code:a,text:t.statusText},e,t,s))}}}loadtimeout(){var e;const t=(e=this.config)==null?void 0:e.loadPolicy.timeoutRetry,s=this.stats.retry;if(Bl(t,s,!0))this.retry(t);else{H.warn(`timeout while loading ${this.context.url}`);const i=this.callbacks;i&&(this.abortInternal(),i.onTimeout(this.stats,this.context,this.loader))}}retry(e){const{context:t,stats:s}=this;this.retryDelay=Of(e,s.retry),s.retry++,H.warn(`${status?"HTTP Status "+status:"Timeout"} while loading ${t.url}, retrying ${s.retry}/${e.maxNumRetry} in ${this.retryDelay}ms`),this.abortInternal(),this.loader=null,self.clearTimeout(this.retryTimeout),this.retryTimeout=self.setTimeout(this.loadInternal.bind(this),this.retryDelay)}loadprogress(e){const t=this.stats;t.loaded=e.loaded,e.lengthComputable&&(t.total=e.total)}getCacheAge(){let e=null;if(this.loader&&d6.test(this.loader.getAllResponseHeaders())){const t=this.loader.getResponseHeader("age");e=t?parseFloat(t):null}return e}getResponseHeader(e){return this.loader&&new RegExp(`^${e}:\\s*[\\d.]+\\s*$`,"im").test(this.loader.getAllResponseHeaders())?this.loader.getResponseHeader(e):null}}function h6(){if(self.fetch&&self.AbortController&&self.ReadableStream&&self.Request)try{return new self.ReadableStream({}),!0}catch{}return!1}const f6=/(\d+)-(\d+)\/(\d+)/;class iy{constructor(e){this.fetchSetup=void 0,this.requestTimeout=void 0,this.request=void 0,this.response=void 0,this.controller=void 0,this.context=void 0,this.config=null,this.callbacks=null,this.stats=void 0,this.loader=null,this.fetchSetup=e.fetchSetup||y6,this.controller=new self.AbortController,this.stats=new Ec}destroy(){this.loader=this.callbacks=null,this.abortInternal()}abortInternal(){const e=this.response;e!=null&&e.ok||(this.stats.aborted=!0,this.controller.abort())}abort(){var e;this.abortInternal(),(e=this.callbacks)!=null&&e.onAbort&&this.callbacks.onAbort(this.stats,this.context,this.response)}load(e,t,s){const i=this.stats;if(i.loading.start)throw new Error("Loader can only be used once.");i.loading.start=self.performance.now();const r=p6(e,this.controller.signal),a=s.onProgress,o=e.responseType==="arraybuffer",l=o?"byteLength":"length",{maxTimeToFirstByteMs:c,maxLoadTimeMs:u}=t.loadPolicy;this.context=e,this.config=t,this.callbacks=s,this.request=this.fetchSetup(e,r),self.clearTimeout(this.requestTimeout),t.timeout=c&&Ce(c)?c:u,this.requestTimeout=self.setTimeout(()=>{this.abortInternal(),s.onTimeout(i,e,this.response)},t.timeout),self.fetch(this.request).then(d=>{this.response=this.loader=d;const h=Math.max(self.performance.now(),i.loading.start);if(self.clearTimeout(this.requestTimeout),t.timeout=u,this.requestTimeout=self.setTimeout(()=>{this.abortInternal(),s.onTimeout(i,e,this.response)},u-(h-i.loading.start)),!d.ok){const{status:f,statusText:p}=d;throw new v6(p||"fetch, bad network response",f,d)}return i.loading.first=h,i.total=g6(d.headers)||i.total,a&&Ce(t.highWaterMark)?this.loadProgressively(d,i,e,t.highWaterMark,a):o?d.arrayBuffer():e.responseType==="json"?d.json():d.text()}).then(d=>{const{response:h}=this;self.clearTimeout(this.requestTimeout),i.loading.end=Math.max(self.performance.now(),i.loading.first);const f=d[l];f&&(i.loaded=i.total=f);const p={url:h.url,data:d,code:h.status};a&&!Ce(t.highWaterMark)&&a(i,e,d,h),s.onSuccess(p,i,e,h)}).catch(d=>{if(self.clearTimeout(this.requestTimeout),i.aborted)return;const h=d&&d.code||0,f=d?d.message:null;s.onError({code:h,text:f},e,d?d.details:null,i)})}getCacheAge(){let e=null;if(this.response){const t=this.response.headers.get("age");e=t?parseFloat(t):null}return e}getResponseHeader(e){return this.response?this.response.headers.get(e):null}loadProgressively(e,t,s,i=0,r){const a=new gb,o=e.body.getReader(),l=()=>o.read().then(c=>{if(c.done)return a.dataLength&&r(t,s,a.flush(),e),Promise.resolve(new ArrayBuffer(0));const u=c.value,d=u.length;return t.loaded+=d,d<i||a.dataLength?(a.push(u),a.dataLength>=i&&r(t,s,a.flush(),e)):r(t,s,u,e),l()}).catch(()=>Promise.reject());return l()}}function p6(n,e){const t={method:"GET",mode:"cors",credentials:"same-origin",signal:e,headers:new self.Headers(Mt({},n.headers))};return n.rangeEnd&&t.headers.set("Range","bytes="+n.rangeStart+"-"+String(n.rangeEnd-1)),t}function m6(n){const e=f6.exec(n);if(e)return parseInt(e[2])-parseInt(e[1])+1}function g6(n){const e=n.get("Content-Range");if(e){const s=m6(e);if(Ce(s))return s}const t=n.get("Content-Length");if(t)return parseInt(t)}function y6(n,e){return new self.Request(n.url,e)}class v6 extends Error{constructor(e,t,s){super(e),this.code=void 0,this.details=void 0,this.code=t,this.details=s}}const E6=/\s/,T6={newCue(n,e,t,s){const i=[];let r,a,o,l,c;const u=self.VTTCue||self.TextTrackCue;for(let h=0;h<s.rows.length;h++)if(r=s.rows[h],o=!0,l=0,c="",!r.isEmpty()){var d;for(let m=0;m<r.chars.length;m++)E6.test(r.chars[m].uchar)&&o?l++:(c+=r.chars[m].uchar,o=!1);r.cueStartTime=e,e===t&&(t+=1e-4),l>=16?l--:l++;const f=xb(c.trim()),p=Kf(e,t,f);n!=null&&(d=n.cues)!=null&&d.getCueById(p)||(a=new u(e,t,f),a.id=p,a.line=h+1,a.align="left",a.position=10+Math.min(80,Math.floor(l*8/32)*10),i.push(a))}return n&&i.length&&(i.sort((h,f)=>h.line==="auto"||f.line==="auto"?0:h.line>8&&f.line>8?f.line-h.line:h.line-f.line),i.forEach(h=>YT(n,h))),i}},b6={maxTimeToFirstByteMs:8e3,maxLoadTimeMs:2e4,timeoutRetry:null,errorRetry:null},x6=ms(ms({autoStartLoad:!0,startPosition:-1,defaultAudioCodec:void 0,debug:!1,capLevelOnFPSDrop:!1,capLevelToPlayerSize:!1,ignoreDevicePixelRatio:!1,initialLiveManifestSize:1,maxBufferLength:30,backBufferLength:1/0,maxBufferSize:60*1e3*1e3,maxBufferHole:.1,highBufferWatchdogPeriod:2,nudgeOffset:.1,nudgeMaxRetry:3,maxFragLookUpTolerance:.25,liveSyncDurationCount:3,liveMaxLatencyDurationCount:1/0,liveSyncDuration:void 0,liveMaxLatencyDuration:void 0,maxLiveSyncPlaybackRate:1,liveDurationInfinity:!1,liveBackBufferLength:null,maxMaxBufferLength:600,enableWorker:!0,workerPath:null,enableSoftwareAES:!0,startLevel:void 0,startFragPrefetch:!1,fpsDroppedMonitoringPeriod:5e3,fpsDroppedMonitoringThreshold:.2,appendErrorMaxRetry:3,loader:wb,fLoader:void 0,pLoader:void 0,xhrSetup:void 0,licenseXhrSetup:void 0,licenseResponseCallback:void 0,abrController:L$,bufferController:M$,capLevelController:Wf,errorController:v8,fpsController:a6,stretchShortVideoTrack:!1,maxAudioFramesDrift:1,forceKeyFrameOnDiscontinuity:!0,abrEwmaFastLive:3,abrEwmaSlowLive:9,abrEwmaFastVoD:3,abrEwmaSlowVoD:9,abrEwmaDefaultEstimate:5e5,abrBandWidthFactor:.95,abrBandWidthUpFactor:.7,abrMaxWithRealBitrate:!1,maxStarvationDelay:4,maxLoadingDelay:4,minAutoBitrate:0,emeEnabled:!1,widevineLicenseUrl:void 0,drmSystems:{},drmSystemOptions:{},requestMediaKeySystemAccessFunc:MT,testBandwidth:!0,progressive:!1,lowLatencyMode:!0,cmcd:void 0,enableDateRangeMetadataCues:!0,enableEmsgMetadataCues:!0,enableID3MetadataCues:!0,certLoadPolicy:{default:b6},keyLoadPolicy:{default:{maxTimeToFirstByteMs:8e3,maxLoadTimeMs:2e4,timeoutRetry:{maxNumRetry:1,retryDelayMs:1e3,maxRetryDelayMs:2e4,backoff:"linear"},errorRetry:{maxNumRetry:8,retryDelayMs:1e3,maxRetryDelayMs:2e4,backoff:"linear"}}},manifestLoadPolicy:{default:{maxTimeToFirstByteMs:1/0,maxLoadTimeMs:2e4,timeoutRetry:{maxNumRetry:2,retryDelayMs:0,maxRetryDelayMs:0},errorRetry:{maxNumRetry:1,retryDelayMs:1e3,maxRetryDelayMs:8e3}}},playlistLoadPolicy:{default:{maxTimeToFirstByteMs:1e4,maxLoadTimeMs:2e4,timeoutRetry:{maxNumRetry:2,retryDelayMs:0,maxRetryDelayMs:0},errorRetry:{maxNumRetry:2,retryDelayMs:1e3,maxRetryDelayMs:8e3}}},fragLoadPolicy:{default:{maxTimeToFirstByteMs:1e4,maxLoadTimeMs:12e4,timeoutRetry:{maxNumRetry:4,retryDelayMs:0,maxRetryDelayMs:0},errorRetry:{maxNumRetry:6,retryDelayMs:1e3,maxRetryDelayMs:8e3}}},steeringManifestLoadPolicy:{default:{maxTimeToFirstByteMs:1e4,maxLoadTimeMs:2e4,timeoutRetry:{maxNumRetry:2,retryDelayMs:0,maxRetryDelayMs:0},errorRetry:{maxNumRetry:1,retryDelayMs:1e3,maxRetryDelayMs:8e3}}},manifestLoadingTimeOut:1e4,manifestLoadingMaxRetry:1,manifestLoadingRetryDelay:1e3,manifestLoadingMaxRetryTimeout:64e3,levelLoadingTimeOut:1e4,levelLoadingMaxRetry:4,levelLoadingRetryDelay:1e3,levelLoadingMaxRetryTimeout:64e3,fragLoadingTimeOut:2e4,fragLoadingMaxRetry:6,fragLoadingRetryDelay:1e3,fragLoadingMaxRetryTimeout:64e3},S6()),{},{subtitleStreamController:D$,subtitleTrackController:P$,timelineController:n6,audioStreamController:R$,audioTrackController:I$,emeController:Cr,cmcdController:li,contentSteeringController:u6});function S6(){return{cueHandler:T6,enableWebVTT:!0,enableIMSC1:!0,enableCEA708Captions:!0,captionsTextTrack1Label:"English",captionsTextTrack1LanguageCode:"en",captionsTextTrack2Label:"Spanish",captionsTextTrack2LanguageCode:"es",captionsTextTrack3Label:"Unknown CC",captionsTextTrack3LanguageCode:"",captionsTextTrack4Label:"Unknown CC",captionsTextTrack4LanguageCode:"",renderTextTracksNatively:!0}}function _6(n,e){if((e.liveSyncDurationCount||e.liveMaxLatencyDurationCount)&&(e.liveSyncDuration||e.liveMaxLatencyDuration))throw new Error("Illegal hls.js config: don't mix up liveSyncDurationCount/liveMaxLatencyDurationCount and liveSyncDuration/liveMaxLatencyDuration");if(e.liveMaxLatencyDurationCount!==void 0&&(e.liveSyncDurationCount===void 0||e.liveMaxLatencyDurationCount<=e.liveSyncDurationCount))throw new Error('Illegal hls.js config: "liveMaxLatencyDurationCount" must be greater than "liveSyncDurationCount"');if(e.liveMaxLatencyDuration!==void 0&&(e.liveSyncDuration===void 0||e.liveMaxLatencyDuration<=e.liveSyncDuration))throw new Error('Illegal hls.js config: "liveMaxLatencyDuration" must be greater than "liveSyncDuration"');const t=ah(n),s=["manifest","level","frag"],i=["TimeOut","MaxRetry","RetryDelay","MaxRetryTimeout"];return s.forEach(r=>{const a=`${r==="level"?"playlist":r}LoadPolicy`,o=e[a]===void 0,l=[];i.forEach(c=>{const u=`${r}Loading${c}`,d=e[u];if(d!==void 0&&o){l.push(u);const h=t[a].default;switch(e[a]={default:h},c){case"TimeOut":h.maxLoadTimeMs=d,h.maxTimeToFirstByteMs=d;break;case"MaxRetry":h.errorRetry.maxNumRetry=d,h.timeoutRetry.maxNumRetry=d;break;case"RetryDelay":h.errorRetry.retryDelayMs=d,h.timeoutRetry.retryDelayMs=d;break;case"MaxRetryTimeout":h.errorRetry.maxRetryDelayMs=d,h.timeoutRetry.maxRetryDelayMs=d;break}}}),l.length&&H.warn(`hls.js config: "${l.join('", "')}" setting(s) are deprecated, use "${a}": ${JSON.stringify(e[a])}`)}),ms(ms({},t),e)}function ah(n){return n&&typeof n=="object"?Array.isArray(n)?n.map(ah):Object.keys(n).reduce((e,t)=>(e[t]=ah(n[t]),e),{}):n}function A6(n){const e=n.loader;e!==iy&&e!==wb?(H.log("[config]: Custom loader detected, cannot enable progressive streaming"),n.progressive=!1):h6()&&(n.loader=iy,n.progressive=!0,n.enableSoftwareAES=!0,H.log("[config]: Progressive streaming enabled, using FetchLoader"))}class Bn{static get version(){return"1.4.12"}static isSupported(){return N8()}static get Events(){return C}static get ErrorTypes(){return Me}static get ErrorDetails(){return ne}static get DefaultConfig(){return Bn.defaultConfig?Bn.defaultConfig:x6}static set DefaultConfig(e){Bn.defaultConfig=e}constructor(e={}){this.config=void 0,this.userConfig=void 0,this.coreComponents=void 0,this.networkControllers=void 0,this._emitter=new Vf,this._autoLevelCapping=void 0,this._maxHdcpLevel=null,this.abrController=void 0,this.bufferController=void 0,this.capLevelController=void 0,this.latencyController=void 0,this.levelController=void 0,this.streamController=void 0,this.audioTrackController=void 0,this.subtitleTrackController=void 0,this.emeController=void 0,this.cmcdController=void 0,this._media=null,this.url=null,c5(e.debug||!1,"Hls instance");const t=this.config=_6(Bn.DefaultConfig,e);this.userConfig=e,this._autoLevelCapping=-1,t.progressive&&A6(t);const{abrController:s,bufferController:i,capLevelController:r,errorController:a,fpsController:o}=t,l=new a(this),c=this.abrController=new s(this),u=this.bufferController=new i(this),d=this.capLevelController=new r(this),h=new o(this),f=new Z5(this),p=new i8(this),m=t.contentSteeringController,y=m?new m(this):null,g=this.levelController=new T8(this,y),v=new b8(this),E=new S8(this.config),T=this.streamController=new _$(this,v,E);d.setStreamController(T),h.setStreamController(T);const b=[f,g,T];y&&b.splice(1,0,y),this.networkControllers=b;const L=[c,u,d,h,p,v];this.audioTrackController=this.createController(t.audioTrackController,b);const x=t.audioStreamController;x&&b.push(new x(this,v,E)),this.subtitleTrackController=this.createController(t.subtitleTrackController,b);const w=t.subtitleStreamController;w&&b.push(new w(this,v,E)),this.createController(t.timelineController,L),E.emeController=this.emeController=this.createController(t.emeController,L),this.cmcdController=this.createController(t.cmcdController,L),this.latencyController=this.createController(r8,L),this.coreComponents=L,b.push(l);const k=l.onErrorOut;typeof k=="function"&&this.on(C.ERROR,k,l)}createController(e,t){if(e){const s=new e(this);return t&&t.push(s),s}return null}on(e,t,s=this){this._emitter.on(e,t,s)}once(e,t,s=this){this._emitter.once(e,t,s)}removeAllListeners(e){this._emitter.removeAllListeners(e)}off(e,t,s=this,i){this._emitter.off(e,t,s,i)}listeners(e){return this._emitter.listeners(e)}emit(e,t,s){return this._emitter.emit(e,t,s)}trigger(e,t){if(this.config.debug)return this.emit(e,e,t);try{return this.emit(e,e,t)}catch(s){H.error("An internal error happened while handling event "+e+'. Error message: "'+s.message+'". Here is a stacktrace:',s),this.trigger(C.ERROR,{type:Me.OTHER_ERROR,details:ne.INTERNAL_EXCEPTION,fatal:!1,event:e,error:s})}return!1}listenerCount(e){return this._emitter.listenerCount(e)}destroy(){H.log("destroy"),this.trigger(C.DESTROYING,void 0),this.detachMedia(),this.removeAllListeners(),this._autoLevelCapping=-1,this.url=null,this.networkControllers.forEach(t=>t.destroy()),this.networkControllers.length=0,this.coreComponents.forEach(t=>t.destroy()),this.coreComponents.length=0;const e=this.config;e.xhrSetup=e.fetchSetup=void 0,this.userConfig=null}attachMedia(e){H.log("attachMedia"),this._media=e,this.trigger(C.MEDIA_ATTACHING,{media:e})}detachMedia(){H.log("detachMedia"),this.trigger(C.MEDIA_DETACHING,void 0),this._media=null}loadSource(e){this.stopLoad();const t=this.media,s=this.url,i=this.url=Df.buildAbsoluteURL(self.location.href,e,{alwaysNormalize:!0});H.log(`loadSource:${i}`),t&&s&&(s!==i||this.bufferController.hasSourceTypes())&&(this.detachMedia(),this.attachMedia(t)),this.trigger(C.MANIFEST_LOADING,{url:e})}startLoad(e=-1){H.log(`startLoad(${e})`),this.networkControllers.forEach(t=>{t.startLoad(e)})}stopLoad(){H.log("stopLoad"),this.networkControllers.forEach(e=>{e.stopLoad()})}swapAudioCodec(){H.log("swapAudioCodec"),this.streamController.swapAudioCodec()}recoverMediaError(){H.log("recoverMediaError");const e=this._media;this.detachMedia(),e&&this.attachMedia(e)}removeLevel(e,t=0){this.levelController.removeLevel(e,t)}get levels(){return this.levelController.levels||[]}get currentLevel(){return this.streamController.currentLevel}set currentLevel(e){H.log(`set currentLevel:${e}`),this.loadLevel=e,this.abrController.clearTimer(),this.streamController.immediateLevelSwitch()}get nextLevel(){return this.streamController.nextLevel}set nextLevel(e){H.log(`set nextLevel:${e}`),this.levelController.manualLevel=e,this.streamController.nextLevelSwitch()}get loadLevel(){return this.levelController.level}set loadLevel(e){H.log(`set loadLevel:${e}`),this.levelController.manualLevel=e}get nextLoadLevel(){return this.levelController.nextLoadLevel}set nextLoadLevel(e){this.levelController.nextLoadLevel=e}get firstLevel(){return Math.max(this.levelController.firstLevel,this.minAutoLevel)}set firstLevel(e){H.log(`set firstLevel:${e}`),this.levelController.firstLevel=e}get startLevel(){return this.levelController.startLevel}set startLevel(e){H.log(`set startLevel:${e}`),e!==-1&&(e=Math.max(e,this.minAutoLevel)),this.levelController.startLevel=e}get capLevelToPlayerSize(){return this.config.capLevelToPlayerSize}set capLevelToPlayerSize(e){const t=!!e;t!==this.config.capLevelToPlayerSize&&(t?this.capLevelController.startCapping():(this.capLevelController.stopCapping(),this.autoLevelCapping=-1,this.streamController.nextLevelSwitch()),this.config.capLevelToPlayerSize=t)}get autoLevelCapping(){return this._autoLevelCapping}get bandwidthEstimate(){const{bwEstimator:e}=this.abrController;return e?e.getEstimate():NaN}get ttfbEstimate(){const{bwEstimator:e}=this.abrController;return e?e.getEstimateTTFB():NaN}set autoLevelCapping(e){this._autoLevelCapping!==e&&(H.log(`set autoLevelCapping:${e}`),this._autoLevelCapping=e)}get maxHdcpLevel(){return this._maxHdcpLevel}set maxHdcpLevel(e){th.indexOf(e)>-1&&(this._maxHdcpLevel=e)}get autoLevelEnabled(){return this.levelController.manualLevel===-1}get manualLevel(){return this.levelController.manualLevel}get minAutoLevel(){const{levels:e,config:{minAutoBitrate:t}}=this;if(!e)return 0;const s=e.length;for(let i=0;i<s;i++)if(e[i].maxBitrate>=t)return i;return 0}get maxAutoLevel(){const{levels:e,autoLevelCapping:t,maxHdcpLevel:s}=this;let i;if(t===-1&&e&&e.length?i=e.length-1:i=t,s)for(let r=i;r--;){const a=e[r].attrs["HDCP-LEVEL"];if(a&&a<=s)return r}return i}get nextAutoLevel(){return Math.min(Math.max(this.abrController.nextAutoLevel,this.minAutoLevel),this.maxAutoLevel)}set nextAutoLevel(e){this.abrController.nextAutoLevel=Math.max(this.minAutoLevel,e)}get playingDate(){return this.streamController.currentProgramDateTime}get mainForwardBufferInfo(){return this.streamController.getMainFwdBufferInfo()}get audioTracks(){const e=this.audioTrackController;return e?e.audioTracks:[]}get audioTrack(){const e=this.audioTrackController;return e?e.audioTrack:-1}set audioTrack(e){const t=this.audioTrackController;t&&(t.audioTrack=e)}get subtitleTracks(){const e=this.subtitleTrackController;return e?e.subtitleTracks:[]}get subtitleTrack(){const e=this.subtitleTrackController;return e?e.subtitleTrack:-1}get media(){return this._media}set subtitleTrack(e){const t=this.subtitleTrackController;t&&(t.subtitleTrack=e)}get subtitleDisplay(){const e=this.subtitleTrackController;return e?e.subtitleDisplay:!1}set subtitleDisplay(e){const t=this.subtitleTrackController;t&&(t.subtitleDisplay=e)}get lowLatencyMode(){return this.config.lowLatencyMode}set lowLatencyMode(e){this.config.lowLatencyMode=e}get liveSyncPosition(){return this.latencyController.liveSyncPosition}get latency(){return this.latencyController.latency}get maxLatency(){return this.latencyController.maxLatency}get targetLatency(){return this.latencyController.targetLatency}get drift(){return this.latencyController.drift}get forceStartLoad(){return this.streamController.forceStartLoad}}Bn.defaultConfig=void 0;const _i=(n,e)=>{const t=n.__vccOpts||n;for(const[s,i]of e)t[s]=i;return t},L6={name:"d-icon"},w6=Object.assign(L6,{props:{icon:String,size:[Number,String]},setup(n){const e=n,t=Ve(()=>({fontSize:/^\d+$/.test(e.size)?e.size+"px":e.size}));return(s,i)=>(ve(),Te("i",{class:ft(["d-icon iconfont",n.icon]),style:de(t.value)},null,6))}}),ln=_i(w6,[["__scopeId","data-v-bf21758a"]]),R6={class:"d-player-top"},I6={class:"top-title"},C6={class:"top-title"},D6={__name:"d-player-top",props:{title:{default:""}},setup(n){Date.prototype.format=function(s){let i={"h+":this.getHours(),"m+":this.getMinutes(),"s+":this.getSeconds()};for(var r in i)new RegExp("("+r+")").test(s)&&(s=s.replace(RegExp.$1,RegExp.$1.length==1?i[r]:("00"+i[r]).substr((""+i[r]).length)));return s};let e=ce("00:00:00");e.value=new Date().format("hh:mm:ss");let t=null;return t=setInterval(()=>{e.value=new Date().format("hh:mm:ss")},1e3),Hn(()=>{clearInterval(t)}),(s,i)=>(ve(),Te("div",R6,[_("p",I6,he(n.title||""),1),_("p",C6,he(De(e)),1)]))}},k6=_i(D6,[["__scopeId","data-v-8a83c3bf"]]),P6={class:"d-status"},O6={class:"d-flex-center"},M6={class:"d-flex-center"},F6=Ze({__name:"d-status",props:["state"],setup(n){return(e,t)=>ct((ve(),Te("div",P6,[ct(_("li",O6,[fe(ln,{size:"18",class:"d-status-icon",icon:`icon-volume-${n.state.volume==0?"mute":n.state.volume>.5?"up":"down"}`},null,8,["icon"]),nt(" "+he(~~(n.state.volume*100))+"% ",1)],512),[[ot,n.state.handleType=="volume"]]),ct(_("li",M6,[fe(ln,{size:"12",icon:"icon-play"}),fe(ln,{size:"12",icon:"icon-play",style:{"margin-right":"5px"}}),nt("5倍速播放中 ")],512),[[ot,n.state.handleType=="playbackRate"||n.state.isMultiplesPlay]])],512)),[[ot,n.state.handleType||n.state.isMultiplesPlay]])}}),N6=_i(F6,[["__scopeId","data-v-b4f9cb00"]]),B6=n=>(Ls("data-v-928a6686"),n=n(),ws(),n),U6=["checked","true-value","false-value"],$6=B6(()=>_("span",{class:"d-switch_action"},null,-1)),j6=Ze({__name:"d-switch",props:{modelValue:{type:[Number,String,Boolean]},width:{type:String,default:"40px"},trueValue:{type:[Number,String,Boolean],default:!0},falseValue:{type:[Number,String,Boolean],default:!0},activeColor:{type:[String],default:"#409EFF"}},emits:["update:modelValue","change"],setup(n,{emit:e}){Zi(o=>({"3c9c80d0":n.width,"4d5b9787":n.activeColor}));const t=n,s=e,i=ce(null),r=Ve(()=>t.modelValue===t.trueValue),a=()=>{Gn(()=>{const o=i.value.checked;s("update:modelValue",o),s("change",o)})};return(o,l)=>(ve(),Te("div",{class:ft(["d-switch",{"is-checked":r.value}])},[_("input",{class:"d-switch__input",ref_key:"input",ref:i,type:"checkbox",checked:r.value,onChange:a,"true-value":n.trueValue,"false-value":n.falseValue},null,40,U6),$6],2))}}),Vu=_i(j6,[["__scopeId","data-v-928a6686"]]),oo=n=>(Ls("data-v-462eb232"),n=n(),ws(),n),G6={key:0},V6=oo(()=>_("i",{class:"rotating iconfont icon-loading f50"},null,-1)),H6=oo(()=>_("i",{class:"rotating iconfont icon-loading f50"},null,-1)),K6=oo(()=>_("p",null,"正在缓冲...",-1)),W6=[H6,K6],z6=oo(()=>_("i",{class:"iconfont icon-replay f24 mr5"},null,-1)),Y6=oo(()=>_("i",{class:"iconfont icon-replay f24 mr5"},null,-1)),q6=Ze({__name:"d-loading",props:{loadType:String,text:{type:String,default:""}},setup(n){const{proxy:e}=ts(),t=["loadstart","waiting","ended","error","stalled"],s=n,i=()=>{e.$parent.play()},r=Ve(()=>{let a="background: rgba(0, 0, 0, .1);z-index:1";return s.loadType=="loadstart"&&(a="background: rgba(0, 0, 0, 1);;z-index:3"),a});return(a,o)=>ct((ve(),Te("div",{class:"d-loading",style:de(r.value)},[_("div",null,[n.loadType=="loadstart"?(ve(),Te("span",G6,[V6,_("p",null,he(n.text),1)])):et("",!0),ct(_("span",null,W6,512),[[ot,n.loadType=="waiting"]]),ct(_("span",null,[_("p",{onClick:i,class:"d-flex-x d-pointer"},[z6,nt("重新播放 ")])],512),[[ot,n.loadType=="ended"]]),ct(_("span",null,[_("p",{onClick:i,class:"d-flex-x d-pointer"},[Y6,nt("请求错误 ")])],512),[[ot,n.loadType=="error"||n.loadType=="stalled"]])])],4)),[[ot,t.includes(n.loadType)]])}}),X6=_i(q6,[["__scopeId","data-v-462eb232"]]),Ui=function(n,e,t,s=!1){n&&e&&t&&n.addEventListener(e,t,s)},bs=function(n,e,t,s=!1){n&&e&&t&&n.removeEventListener(e,t,s)},Q6=["onMousedown"],J6={name:"DSlider"},Z6=Ze({...J6,props:{modelValue:{required:!0,type:Number,default:0},disabled:{type:Boolean,default:!1},vertical:{type:Boolean,default:!1},hover:{type:Boolean,default:!0},hoverText:{type:String,default:""},preload:{type:Number,default:0},size:{type:String,default:"10px"}},emits:["update:modelValue","change","onMousemove"],setup(n,{emit:e}){Zi(g=>({"48dd698a":n.size}));const t=ce(null),s=ce(null),i=n,r=e,a=qt({dragging:!1,hoverPosition:0,hoverTipsLeft:"50%"}),o=Ve(()=>{let g=i.modelValue<0?0:i.modelValue>1?1:i.modelValue;return i.vertical?`height:${g*100}%`:`width:${g*100}%`}),l=Ve(()=>{let g=i.preload<0?0:i.preload>1?1:i.preload;return i.vertical?`height:${g*100}%`:`width:${g*100}%`}),c=Ve(()=>{let g=a.hoverPosition<0?0:a.hoverPosition>1?1:a.hoverPosition;return i.vertical?`bottom:${g*100}%`:`left:${g*100}%`}),u=g=>{g.preventDefault()},d=g=>{i.disabled||(g.preventDefault(),a.dragging=!0,f(g),Ui(window,"mousemove",m),Ui(window,"touchmove",m),Ui(window,"mouseup",y),Ui(window,"touchend",y))},h=g=>{if(!i.hover)return;let v=p(g);if(r("onMousemove",g,v),a.hoverPosition=v,i.vertical)return;let E=t.value,T=s.value.clientWidth/2,b=g.clientX-E.getBoundingClientRect().left;b<T?a.hoverTipsLeft=T-b+"px":E.clientWidth-b<T?a.hoverTipsLeft=E.clientWidth-b-T+"px":a.hoverTipsLeft="50%"},f=g=>{let v=p(g);r("update:modelValue",v),r("change",g,v)},p=g=>{let v=t.value,E=0;if(i.vertical){let T=v.clientHeight;E=(v.getBoundingClientRect().bottom-g.clientY)/T}else E=(g.clientX-v.getBoundingClientRect().left)/v.clientWidth;return E<0?0:E>1?1:E},m=g=>{f(g)},y=g=>{a.dragging&&(bs(window,"mousemove",m),bs(window,"touchmove",m),bs(window,"mouseup",y),bs(window,"touchend",y),bs(window,"contextmenu",y),setTimeout(()=>{a.dragging=!1},0))};return(g,v)=>(ve(),Te("div",{ref_key:"refSlider",ref:t,class:ft(["d-slider",{"is-vertical":i.vertical}]),onMousedown:Ua(d,["stop"]),onContextmenu:u},[_("div",{class:"d-slider__runway",onMousemove:h},[ct(_("div",{class:"d-slider__cursor",style:de(c.value)},[ct(_("div",{class:"d-slider__tips",ref_key:"refTips",ref:s,style:de({left:a.hoverTipsLeft})},he(i.hoverText),5),[[ot,i.hoverText]])],4),[[ot,i.hover]]),_("div",{class:"d-slider__preload",style:de(l.value)},null,4),_("div",{class:"d-slider__bar",style:de(o.value)},null,4)],32)],42,Q6))}}),Ia=_i(Z6,[["__scopeId","data-v-703f29f7"]]),ry="1.3.2",xc=n=>(Ls("data-v-64367a85"),n=n(),ws(),n),ej={key:0,class:"d-player-dialog"},tj={class:"d-player-dialog-body"},sj={class:"d-player-dialog-title"},nj={class:"d-player-hotkey-panel"},ij={class:"d-player-filter-panel"},rj={class:"d-player-filter-panel-item"},aj=xc(()=>_("span",null,"饱和度",-1)),oj={class:"d-player-filter-panel-item"},lj=xc(()=>_("span",null,"亮度",-1)),cj={class:"d-player-filter-panel-item"},uj=xc(()=>_("span",null,"对比度",-1)),dj={key:0,class:"d-player-contextmenu"},hj=["dplayerKeyCode"],fj=xc(()=>_("input",{class:"d-player-copyText"},null,-1)),pj={__name:"d-contextmenu",setup(n){const e=qt({show:!1,dialogType:"",dialogTitle:"",version:ry,mouseX:0,mouseY:0}),t=[{label:"视频色彩调整",key:"filter"},{label:"快捷键说明",key:"hotkey"},{label:"复制视频网址",key:"copy"},{label:"版本："+ry,key:"version"}],s=[{key:"Space",label:"播放/暂停"},{key:"→",label:"单次快进10s，长按5倍速播放"},{key:"←",label:"快退5s"},{key:"↑",label:"音量增加10%"},{key:"↓",label:"音量增加降低10%"},{key:"Esc",label:"退出全屏/退出网页全屏"},{key:"F",label:"全屏/退出全屏"}],i=qt({saturate:.392,brightness:.392,contrast:.392}),r=Ve(()=>({left:e.mouseX+"px",top:e.mouseY+"px"}));_t(i,u=>{let d=document.querySelector("#dPlayerVideo"),h=(u.saturate*2.55).toFixed(2),f=(u.brightness*2.55).toFixed(2),p=(u.contrast*2.55).toFixed(2);d.style.filter=`saturate(${h}) brightness(${f}) contrast(${p})`});const a=()=>{i.saturate=.392,i.brightness=.392,i.contrast=.392},o=u=>{u.key=="Escape"&&c(0)},l=u=>{u.preventDefault(),Ui(window,"keydown",o),Ui(window,"click",c);let d=document.querySelector("#refPlayerWrap"),h=d.clientWidth;d.clientHeight,e.mouseX=u.clientX-d.getBoundingClientRect().left,h-e.mouseX<130&&(e.mouseX=e.mouseX+(h-e.mouseX-130)),e.mouseY=u.clientY-d.getBoundingClientRect().top,e.show=!0},c=u=>{let d=u.target.nodeName=="LI",h=u.target.attributes.dplayerKeyCode&&u.target.attributes.dplayerKeyCode.value,f=t.map(p=>p.key);if(d&&f.includes(h))if(e.dialogTitle=u.target.innerText,e.dialogType=h,h=="copy"){let p=document.querySelector(".d-player-copyText");p.value=window.location.href,p.select(),document.execCommand("copy"),e.dialogType=""}else h=="version"&&(e.dialogType="");e.show=!1,bs(window,"keydown",o),bs(window,"click",c)};return vt(()=>{let u=document.querySelector("#refPlayerWrap");bs(window,"keydown",o),bs(window,"click",c),bs(u,"contextmenu",l),Ui(u,"contextmenu",l)}),Hn(()=>{let u=document.querySelector("#refPlayerWrap");bs(window,"keydown",o),bs(window,"click",c),bs(u,"contextmenu",l)}),(u,d)=>(ve(),Te("div",null,[fe(En,{name:"d-fade-in"},{default:Pt(()=>[e.dialogType?(ve(),Te("div",ej,[_("div",tj,[_("h5",sj,[nt(he(e.dialogTitle)+" ",1),_("i",{onClick:d[0]||(d[0]=h=>e.dialogType=!1),class:"icon icon-close"},"X")]),ct(_("ul",nj,[(ve(),Te(We,null,As(s,h=>_("li",{class:"d-player-hotkey-panel-item",key:h.key},[_("span",null,he(h.key),1),_("span",null,he(h.label),1)])),64))],512),[[ot,e.dialogType=="hotkey"]]),ct(_("ul",ij,[_("li",rj,[aj,fe(Ia,{class:"filter-panel-slider",size:"5px",modelValue:i.saturate,"onUpdate:modelValue":d[1]||(d[1]=h=>i.saturate=h)},null,8,["modelValue"]),_("span",null,he(Math.round(i.saturate*255)),1)]),_("li",oj,[lj,fe(Ia,{class:"filter-panel-slider",size:"5px",modelValue:i.brightness,"onUpdate:modelValue":d[2]||(d[2]=h=>i.brightness=h)},null,8,["modelValue"]),_("span",null,he(Math.round(i.brightness*255)),1)]),_("li",cj,[uj,fe(Ia,{class:"filter-panel-slider",size:"5px",modelValue:i.contrast,"onUpdate:modelValue":d[3]||(d[3]=h=>i.contrast=h)},null,8,["modelValue"]),_("span",null,he(Math.round(i.contrast*255)),1)]),_("span",{onClick:a,title:"重置","aria-label":"重置",class:"d-player-filter-reset"},"重置")],512),[[ot,e.dialogType=="filter"]])])])):et("",!0)]),_:1}),e.show?(ve(),Te("div",dj,[_("ul",{class:"d-player-contextmenu-body",style:de(r.value)},[(ve(),Te(We,null,As(t,h=>_("li",{dplayerKeyCode:h.key,key:h.key},he(h.label),9,hj)),64))],4),fj])):et("",!0)]))}},mj=_i(pj,[["__scopeId","data-v-64367a85"]]),gj=n=>`${parseInt("0x"+n.slice(1,3))},${parseInt("0x"+n.slice(3,5))},${parseInt("0x"+n.slice(5,7))}`,yj=n=>n.charAt(0).toUpperCase()+n.slice(1),Hu=n=>{let e=~~(n/3600),t=~~(n%3600/60),s=~~(n%60);return e=e<10?"0"+e:e,t=t<10?"0"+t:t,s=s<10?"0"+s:s,`${e}:${t}:${s}`},da="ontouchstart"in window,vj=n=>{let e=document,t=e.webkitIsFullScreen||e.fullscreen;return t?(document.exitFullscreen||e.webkitExitFullScreen).call(e):(n.requestFullscreen||n.webkitRequestFullScreen).call(n),!t},Ej=n=>{document.pictureInPictureElement?document.exitPictureInPicture().catch(e=>{console.log(e,"Video failed to leave Picture-in-Picture mode.")}):n.requestPictureInPicture().catch(e=>{console.log(e,"Video failed to enter Picture-in-Picture mode.")})},ay=["loadstart","play","pause","playing","seeking","seeked","waiting","durationchange","progress","canplay","timeupdate","ended","error","stalled"],Tj={width:{type:String,default:"800px"},height:{type:String,default:"450px"},color:{type:String,default:"#409eff"},src:{required:!0,type:String,default:""},title:{type:String,default:""},type:{type:String,default:"video/mp4"},poster:{type:String,default:""},webFullScreen:{type:Boolean,default:!1},speed:{type:Boolean,default:!0},currentTime:{type:Number,default:0},playsinline:{type:Boolean,default:!1},muted:{type:Boolean,default:!1},speedRate:{type:Array,default:()=>["2.0","1.5","1.25","1.0","0.75","0.5"]},autoPlay:{type:Boolean,default:!1},loop:{type:Boolean,default:!1},mirror:{type:Boolean,default:!1},ligthOff:{type:Boolean,default:!1},volume:{type:[String,Number],default:.3},control:{type:Boolean,default:!0},controlBtns:{type:Array,default:["audioTrack","quality","speedRate","volume","setting","pip","pageFullScreen","fullScreen"]},preload:{type:String,default:"auto"}},Sc=n=>(Ls("data-v-ad0cee4b"),n=n(),ws(),n),bj={class:"d-player-video",id:"dPlayerVideo"},xj=["controls","webkit-playsinline","playsinline","volume","muted","loop","preload","src","poster"],Sj={class:"d-player-lightoff"},_j={key:1,class:"d-player-state"},Aj={class:"d-play-btn"},Lj=["onKeyup","onKeydown"],wj={class:"d-control-progress"},Rj={class:"d-tool-bar"},Ij={key:0,class:"d-tool-item d-tool-time audioTrack-btn"},Cj=Sc(()=>_("span",{style:{margin:"0 3px"}},"/",-1)),Dj={class:"total-time"},kj={class:"d-tool-bar"},Pj={key:0,class:"d-tool-item quality-btn"},Oj={class:"d-tool-item-main"},Mj={class:"speed-main",style:{"text-align":"center"}},Fj=["onClick"],Nj={key:1,class:"d-tool-item speedRate-btn"},Bj={class:"d-tool-item-main"},Uj={class:"speed-main"},$j=["onClick"],jj={key:2,class:"d-tool-item volume-btn"},Gj={class:"d-tool-item-main volume-box",style:{width:"52px"}},Vj={class:"volume-text-size"},Hj={key:3,class:"d-tool-item setting-btn"},Kj={class:"d-tool-item-main"},Wj={class:"speed-main"},zj=Sc(()=>_("div",{class:"d-tool-item-main"},"画中画",-1)),Yj=Sc(()=>_("div",{class:"d-tool-item-main"},"网页全屏",-1)),qj=Sc(()=>_("div",{class:"d-tool-item-main"},"全屏",-1)),Xj={name:"vue3VideoPlay",inheritAttrs:!1},Qj=Ze({...Xj,props:Tj,emits:[...ay,"mirrorChange","loopChange","lightOffChange"],setup(n,{expose:e,emit:t}){Zi(B=>({"0c35f2da":De(p),"05990a2c":B.width,d88d7cfe:B.height}));const s=new Bn({fragLoadingTimeOut:2e3}),i=n,r=t,a=ce(null),o=ce(null),l=ce(null),c=ce(null),u=qt({dVideo:null,...i,muted:i.muted,playBtnState:i.autoPlay?"pause":"play",loadStateType:"loadstart",fullScreen:!1,handleType:"",currentTime:"00:00:00",preloadBar:0,totalTime:"00:00:00",isVideoHovering:!0,speedActive:"1.0",playProgress:0,isMultiplesPlay:!1,longPressTimeout:null,progressCursorTime:"00:00:00",qualityLevels:[],currentLevel:0}),d=(...B)=>j=>B.reverse().reduce((Y,me)=>me(Y),j),h=ay.reduce((B,j)=>{let Y=`on${yj(j)}`;return B[Y]=me=>{u.loadStateType=j,r(j,me)},B},{});h.onCanplay=d(h.onCanplay,()=>{u.playBtnState!="play"&&u.dVideo.play(),u.autoPlay&&(u.dVideo.play(),u.playBtnState="pause")}),h.onEnded=d(h.onEnded,()=>{u.playBtnState="replay"}),h.onDurationchange=B=>{r("durationchange",B),i.currentTime!=0&&(u.dVideo.currentTime=i.currentTime),h.onTimeupdate(B)},h.onProgress=B=>{console.log("缓冲中..."),r("progress",B);let j=B.target.duration,Y=B.target.buffered,me=B.target.buffered.length&&B.target.buffered.end(Y-1);u.preloadBar=me/j},h.onTimeupdate=B=>{r("timeupdate",B);let j=B.duration||B.target.duration||0,Y=B.currentTime||B.target.currentTime;u.playProgress=Y/j,u.currentTime=Hu(Y),u.totalTime=Hu(j)},h.onError=d(h.onError,()=>{u.playBtnState="replay"});let f=Oh();for(let B in f)h[B]=f[B];const p=gj(u.color),m=u0(500,()=>{u.handleType=""}),y=B=>{B.preventDefault(),B.code=="ArrowUp"?u.volume=u.volume+.1>1?1:u.volume+.1:u.volume=u.volume-.1<0?0:u.volume-.1,u.muted=!1,u.handleType="volume",m()},g=B=>{i.speed&&(u.dVideo.currentTime=u.dVideo.currentTime<10?.1:u.dVideo.currentTime-10,h.onTimeupdate(u.dVideo),T())},v=B=>{B.preventDefault();let j=B.type;if(B.key=="ArrowRight"){if(T(),j=="keyup"){if(clearTimeout(u.longPressTimeout),!i.speed&&!u.longPressTimeout)return;u.isMultiplesPlay?(u.dVideo.playbackRate=u.speedActive,u.isMultiplesPlay=!1):(u.dVideo.currentTime=u.dVideo.currentTime+10,h.onTimeupdate(u.dVideo))}else if(j=="keydown"){if(!i.speed)return;u.isMultiplesPlay&&clearTimeout(u.longPressTimeout),u.longPressTimeout=setTimeout(()=>{u.isMultiplesPlay=!0,u.dVideo.playbackRate=5,u.handleType="playbackRate",m()},500)}}},E=()=>{da||c.value.focus()},T=()=>{u.loadStateType="play",u.dVideo.play().catch(()=>{u.dVideo.load(),setTimeout(()=>{u.dVideo.play().catch(()=>{u.playBtnState="replay",u.loadStateType="error"})},200)}),u.playBtnState="pause"},b=()=>{u.dVideo.pause(),u.playBtnState="play"},L=B=>{B&&B.preventDefault(),u.playBtnState=="play"||u.playBtnState=="replay"?T():u.playBtnState=="pause"&&b()},x=()=>{u.muted=!u.muted,u.volume==0&&(u.volume=.05)},w=(B,j)=>{let Y=u.dVideo.duration||u.dVideo.target.duration;u.dVideo.currentTime=Y*j,u.playBtnState=="play"&&(u.dVideo.play(),u.playBtnState="pause")},k=(B,j)=>{u.progressCursorTime=Hu(u.dVideo.duration*j)},R=u0(2500,()=>{u.isVideoHovering=!1}),P=B=>{u.isVideoHovering=!0,R()},D=(B,j)=>{s.currentLevel=j,u.currentLevel=j},O=B=>{u.speedActive=B,u.dVideo.playbackRate=B},N=B=>{r("mirrorChange",B,u.dVideo)},$=B=>{r("loopChange",B,u.dVideo)},K=B=>{r("lightOffChange",B,u.dVideo)},ee=()=>{Ej(u.dVideo)},V=()=>{u.fullScreen=vj(a.value)},U=()=>{u.dVideo.canPlayType(i.type)||console.error("vue3-video-play: Format not supported,Check the [type] parameter"),u.dVideo.canPlayType(i.type)||u.dVideo.canPlayType("application/vnd.apple.mpegurl")?u.muted=i.autoPlay:Bn.isSupported()&&(s.detachMedia(),s.attachMedia(u.dVideo),s.on(Bn.Events.MEDIA_ATTACHED,()=>{s.loadSource(i.src),s.on("hlsManifestParsed",(B,j)=>{console.log(j),u.currentLevel=j.level,u.qualityLevels=j.levels||[]})}),s.on("hlsLevelSwitching",(B,j)=>{console.log(j),console.log("LEVEL_SWITCHING")}),s.on("hlsLevelSwitched",(B,j)=>{u.currentLevel=j.level,console.log("LEVEL_SWITCHED")}))};return _t(()=>i.src,()=>{Gn(()=>{U()})},{immediate:!0}),vt(()=>{u.dVideo=o,E()}),e({play:T,pause:b,togglePlay:L}),(B,j)=>(ve(),Te("div",{ref_key:"refPlayerWrap",ref:a,id:"refPlayerWrap",class:ft(["d-player-wrap",{"web-full-screen":u.webFullScreen,"is-lightoff":u.lightOff,"d-player-wrap-hover":u.playBtnState=="play"||u.isVideoHovering}]),onMousemove:P},[_("div",bj,[_("video",Xr({ref_key:"refdVideo",ref:o,class:["d-player-video-main",{"video-mirror":u.mirror}],id:"dPlayerVideoMain",controls:!!(De(da)&&u.speed),"webkit-playsinline":i.playsinline,playsinline:i.playsinline},De(h),{volume:u.volume,muted:u.muted,loop:u.loop,preload:B.preload,width:"100%",height:"100%",src:i.src,poster:i.poster})," 您的浏览器不支持Video标签。 ",16,xj)]),fe(En,{name:"d-fade-in"},{default:Pt(()=>[ct(_("div",Sj,null,512),[[ot,u.lightOff]])]),_:1}),u.fullScreen?(ve(),qr(k6,{key:0,title:i.title},null,8,["title"])):et("",!0),De(da)?et("",!0):(ve(),Te("div",_j,[fe(En,{name:"d-scale-out"},{default:Pt(()=>[ct(_("div",Aj,[fe(ln,{icon:"icon-play",size:40})],512),[[ot,u.playBtnState=="play"]])]),_:1}),fe(N6,{state:u},null,8,["state"])])),De(da)?et("",!0):(ve(),Te("input",{key:2,type:"input",readonly:"readonly",ref_key:"refInput",ref:c,onDblclick:V,onKeyup:[Ws(V,["f"]),j[0]||(j[0]=Ws(Y=>u.webFullScreen=!1,["esc"])),v],onClick:L,onKeydown:[Ws(L,["space"]),Ws(g,["arrow-left"]),Ws(y,["arrow-up","arrow-down"]),v],class:"d-player-input",maxlength:"0"},null,40,Lj)),fe(X6,{loadType:u.loadStateType},null,8,["loadType"]),fe(mj),!De(da)&&u.control?(ve(),Te("div",{key:3,class:"d-player-control",ref_key:"refPlayerControl",ref:l},[_("div",wj,[fe(Ia,{class:"d-progress-bar",onOnMousemove:k,onChange:w,disabled:!u.speed,hoverText:u.progressCursorTime,modelValue:u.playProgress,"onUpdate:modelValue":j[1]||(j[1]=Y=>u.playProgress=Y),preload:u.preloadBar},null,8,["disabled","hoverText","modelValue","preload"])]),_("div",{class:"d-control-tool",onClick:E},[_("div",Rj,[_("div",{class:"d-tool-item",onClick:L},[fe(ln,{size:"24",icon:`icon-${u.playBtnState}`},null,8,["icon"])]),i.controlBtns.includes("audioTrack")?(ve(),Te("div",Ij,[_("span",null,he(u.currentTime),1),Cj,_("span",Dj,he(u.totalTime),1)])):et("",!0)]),_("div",kj,[u.qualityLevels.length&&i.controlBtns.includes("quality")?(ve(),Te("div",Pj,[nt(he(u.qualityLevels.length&&(u.qualityLevels[u.currentLevel]||{}).height)+"P ",1),_("div",Oj,[_("ul",Mj,[(ve(!0),Te(We,null,As(u.qualityLevels,(Y,me)=>(ve(),Te("li",{class:ft({"speed-active":u.currentLevel==me}),onClick:xe=>D(Y,me),key:Y},he(Y.height)+"P ",11,Fj))),128))])])])):et("",!0),i.controlBtns.includes("speedRate")?(ve(),Te("div",Nj,[nt(he(u.speedActive=="1.0"?"倍速":u.speedActive+"x")+" ",1),_("div",Bj,[_("ul",Uj,[(ve(!0),Te(We,null,As(u.speedRate,Y=>(ve(),Te("li",{class:ft({"speed-active":u.speedActive==Y}),onClick:me=>O(Y),key:Y},he(Y)+"x ",11,$j))),128))])])])):et("",!0),i.controlBtns.includes("volume")?(ve(),Te("div",jj,[_("div",Gj,[_("div",{class:ft(["volume-main",{"is-muted":u.muted}])},[_("span",Vj,he(u.muted?0:~~(u.volume*100))+"%",1),fe(Ia,{onChange:j[2]||(j[2]=Y=>u.muted=!1),hover:!1,size:"5px",vertical:!0,modelValue:u.volume,"onUpdate:modelValue":j[3]||(j[3]=Y=>u.volume=Y)},null,8,["modelValue"])],2)]),_("span",{onClick:x,style:{display:"flex"}},[fe(ln,{size:"20",icon:`icon-volume-${u.volume==0||u.muted?"mute":u.volume>.5?"up":"down"}`},null,8,["icon"])])])):et("",!0),i.controlBtns.includes("setting")?(ve(),Te("div",Hj,[fe(ln,{size:"20",class:"rotateHover",icon:"icon-settings"}),_("div",Kj,[_("ul",Wj,[_("li",null,[nt(" 镜像画面 "),fe(Vu,{onChange:N,modelValue:u.mirror,"onUpdate:modelValue":j[4]||(j[4]=Y=>u.mirror=Y)},null,8,["modelValue"])]),_("li",null,[nt(" 循环播放 "),fe(Vu,{onChange:$,modelValue:u.loop,"onUpdate:modelValue":j[5]||(j[5]=Y=>u.loop=Y)},null,8,["modelValue"])]),_("li",null,[nt(" 关灯模式 "),fe(Vu,{onChange:K,modelValue:u.lightOff,"onUpdate:modelValue":j[6]||(j[6]=Y=>u.lightOff=Y)},null,8,["modelValue"])])])])])):et("",!0),i.controlBtns.includes("pip")?(ve(),Te("div",{key:4,class:"d-tool-item pip-btn",onClick:ee},[fe(ln,{size:"20",icon:"icon-pip"}),zj])):et("",!0),i.controlBtns.includes("pageFullScreen")?(ve(),Te("div",{key:5,class:"d-tool-item pip-btn",onClick:j[7]||(j[7]=Y=>u.webFullScreen=!u.webFullScreen)},[fe(ln,{size:"20",icon:"icon-web-screen"}),Yj])):et("",!0),i.controlBtns.includes("fullScreen")?(ve(),Te("div",{key:6,class:"d-tool-item fullScreen-btn",onClick:V},[qj,fe(ln,{size:"20",icon:"icon-screen"})])):et("",!0)])])],512)):et("",!0)],34))}}),jl=_i(Qj,[["__scopeId","data-v-ad0cee4b"]]);function Jj(n){n.component(jl.name,jl)}jl.install=Jj;const Ai=N1(EL);Ai.use(Xo,Mw);Ai.use(zU.LoadingPlugin);Ai.use(ao);Ai.use(KU);Ai.use(e5);Ai.use(t5);Ai.use(jl);Ai.mount("#app")});export default Zj();
